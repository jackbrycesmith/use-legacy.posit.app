/*! For license information please see 214.911116c524d7b5f171d9.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[214],{7757:(t,e,n)=>{t.exports=n(5666)},1097:(t,e,n)=>{"use strict";n.d(e,{oc:()=>Ot,Oe:()=>Tt});var r=n(7757),i=n.n(r),o=n(9805),s=n(9160);const a={props:{isVisible:{type:Boolean,default:!0},isRounded:{type:Boolean,default:!1},withBackgroundOverlay:{type:Boolean,default:!1},showStickyFooter:{type:Boolean,default:!0},isRoundedPaddingClass:{type:String,default:"py-2 pr-2"},isRoundedRoundClass:{type:String,default:"rounded-lg"},isDivideY:{type:Boolean,default:!0},isDivideYClass:{type:String,default:"divide-y divide-gray-200"},stickyFooterClass:{type:String,default:"flex-shrink-0 px-4 py-4 space-x-4 flex justify-end relative"},onCloseButtonHit:{type:Function},onBackgroundOverlayHit:{type:Function},headerTitle:{type:String},headerDescription:{type:String}},data:function(){return{isRootVisible:!1,isRootVisibleTimeout:null}},computed:{handleBackgroundOverlayHit:function(){return"function"==typeof this.onBackgroundOverlayHit?this.onBackgroundOverlayHit.bind(this):this.defaultHandleBackgroundOverlayHit},handleCloseButtonHit:function(){return"function"==typeof this.onCloseButtonHit?this.onCloseButtonHit.bind(this):this.defaultHandleCloseButtonHit},paddingClass:function(){return this.isRounded?this.isRoundedPaddingClass:""},roundedClass:function(){return this.isRounded?this.isRoundedRoundClass:""},divideYClass:function(){return this.isDivideY?this.isDivideYClass:""}},watch:{isVisible:{immediate:!0,handler:function(t){var e=this;if(t)return this.clearRootVisibleTimout(),this.isRootVisible=!0,void this.$emit("opened");this.clearRootVisibleTimout(),this.isRootVisibleTimeout=setTimeout((function(){e.isRootVisible=!1,e.isRootVisibleTimeout=null}),700)}}},methods:{clearRootVisibleTimout:function(){this.isRootVisibleTimeout&&clearTimeout(this.isRootVisibleTimeout)},defaultHandleBackgroundOverlayHit:function(){this.$emit("update:isVisible",!1)},defaultHandleCloseButtonHit:function(){this.$emit("update:isVisible",!1)}}};var c=n(1900);const l=(0,c.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isRootVisible,expression:"isRootVisible"}],ref:"slideOver",staticClass:"fixed w-full overflow-hidden bottom-0 right-0 top-0",class:{"max-w-lg":!t.withBackgroundOverlay}},[n("div",{staticClass:"absolute inset-0 overflow-hidden"},[t.withBackgroundOverlay?n("transition",{attrs:{"enter-active-class":"ease-in-out duration-500","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in-out duration-500","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",on:{click:t.handleBackgroundOverlayHit}})]):t._e(),t._v(" "),n("section",{staticClass:"absolute inset-y-0 pl-16 max-w-full right-0 flex"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":"translate-x-0","leave-to-class":"translate-x-full"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"relative w-screen max-w-md",class:t.paddingClass},[t._t("extra-close-button-handling",null,null,{handleCloseButtonHit:t.handleCloseButtonHit}),t._v(" "),n("div",{staticClass:"h-full flex flex-col bg-white shadow-xl",class:t.roundedClass+" "+t.divideYClass},[n("div",{staticClass:"flex-1 h-0 overflow-y-auto",class:t.roundedClass},[t._t("header",[n("header",{staticClass:"space-y-1 py-6 px-4 bg-indigo-700 sm:px-6"},[n("div",{staticClass:"flex items-center justify-between space-x-3"},[n("h2",{staticClass:"text-lg leading-7 font-medium text-white",domProps:{innerHTML:t._s(t.headerTitle)}}),t._v(" "),n("div",{staticClass:"h-7 flex items-center"},[n("button",{staticClass:"text-indigo-200 hover:text-white transition ease-in-out duration-150",attrs:{"aria-label":"Close panel"},on:{click:t.handleCloseButtonHit}},[n("svg",{staticClass:"h-6 w-6",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])]),t._v(" "),n("div",[n("p",{staticClass:"text-sm leading-5 text-indigo-300",domProps:{innerHTML:t._s(t.headerDescription)}})])])],null,{handleCloseButtonHit:t.handleCloseButtonHit}),t._v(" "),t._t("body")],2),t._v(" "),t._t("footer",[t.showStickyFooter?n("div",{class:t.stickyFooterClass},[t._t("footer-inner")],2):t._e()])],2)],2)])],1)],1)])}),[],!1,null,null,null).exports;var u=n(7299),d=n(5892),p=n(3682),h=n(5790),f=n(2388),v=n(6434),m=n(8681);const g=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"}})])}),[],!1,null,null,null).exports;const y=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports;var w=n(7360),b=n(2479),x=n(981),S=n(7866),C=n(6485),k=n.n(C);function _(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}function M(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){_(o,r,i,s,a,"next",t)}function a(t){_(o,r,i,s,a,"throw",t)}s(void 0)}))}}const O={components:{ApplicationMark:h.Z,BadgeWithDot:p.Z,IconCredits:f.Z,IconHeroiconsSmallExternalLink:v.Z,IconHeroiconsMediumExclamation:m.Z,IconHeroiconsMediumArrowNarrowRight:g,IconHeroiconsMediumExclamationCircle:y,IconHeroiconsSmallCheck:w.Z,IconHeroiconsSpinner:x.Z,IconHeroiconsMediumCheck:b.Z,SuccessFlashSwitcher:S.Z},props:{proposal:{type:Object},state:{type:Object}},methods:{handleCopyPublicLinkHit:function(){var t=this;return M(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()(t.proposal.route_pub_proposal_view_link);case 2:t.$refs.copyIcon.success();case 3:case"end":return e.stop()}}),e)})))()},handleCopyAccessCodeHit:function(){var t=this;return M(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()(t.proposal.recipient_access_code);case 2:t.$refs.copyAccessCodeIcon.success();case 3:case"end":return e.stop()}}),e)})))()},handleCopyMessageHit:function(){var t=this;return M(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k()(t.proposal.convenient_copyable_recipient_access_message);case 2:t.$refs.copyMessageIcon.success();case 3:case"end":return e.stop()}}),e)})))()}}};const E=(0,c.Z)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-1 flex flex-col justify-between"},[n("div",{staticClass:"px-4 sm:px-6"},[t.state.matches("confirmPublishView.cannotPublish")?[n("div",{staticClass:"text-center mt-10"},[n("IconHeroiconsMediumExclamationCircle",{staticClass:"h-20 w-20 text-primary-yellow-600 inline-block animate-wave"})],1),t._v(" "),n("h3",{staticClass:"mt-5 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Publish\n      ")]),t._v(" "),n("p",{staticClass:"text-gray-500 text-center text-sm"},[t._v("\n        Almost there! Please fix before publishing…\n      ")]),t._v(" "),t.proposal.has_things_to_fix_before_publish?n("div",{staticClass:"mt-5 text-sm leading-5 text-gray-600 sm:flex sm:items-center justify-center"},[n("ul",t._l(t.proposal.to_fix_before_publish,(function(e,r){return n("li",{key:e.text,staticClass:"flex gap-1",class:{"mt-0.5":r>0}},["warning"===e.icon?n("IconHeroiconsMediumExclamation",{staticClass:"h-5 w-5 text-primary-yellow-600 inline-block align-text-top flex-shrink-0"}):t._e(),t._v(" "),n("span",{staticClass:"align-middle font-medium text-primary-yellow-600",domProps:{innerHTML:t._s(e.text)}})],1)})),0)]):t._e(),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.$emit("back-to-default-view")}}},[t._v("\n            Ok, let me fix\n          ")])])])]:t._e(),t._v(" "),t.state.matches("confirmPublishView.canPublish")?[n("h3",{staticClass:"mt-10 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Confirm Publish\n      ")]),t._v(" "),n("div",{staticClass:"bg-white overflow-hidden shadow rounded-lg mt-3 mb-10"},[n("div",{staticClass:"px-4 py-5 sm:p-6"},[n("div",{staticClass:"grid grid-cols-3 grid-rows-2"},[n("div",{staticClass:"col-span-3 flex flex-col justify-center items-center"},[n("div",{staticClass:"flex flex-col justify-center items-center"},[n("BadgeWithDot",{attrs:{size:"large",color:"yellow"},scopedSlots:t._u([{key:"dot",fn:function(){return[n("IconCredits",{staticClass:"h-5 w-5 -ml-1 mr-1.5 text-yellow-400"})]},proxy:!0}],null,!1,527778206)},[t._v("\n\n                  1 Credit\n                ")]),t._v(" "),n("span",{staticClass:"text-xs text-gray-500 mt-3"},[t._v("\n                  Will be used to publish this proposal\n                ")])],1)]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"flex items-center justify-center"},[n("IconHeroiconsMediumArrowNarrowRight",{staticClass:"w-7 h-7"})],1),t._v(" "),t._m(1)])])]),t._v(" "),n("div",{staticClass:"text-center"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out relative",class:{"cursor-wait":t.state.matches("confirmPublishView.canPublish.publishing")},staticStyle:{"min-width":"200px"},attrs:{type:"submit",disabled:t.state.matches("confirmPublishView.canPublish.publishing")},on:{click:function(e){return e.preventDefault(),t.$emit("publish")}}},[t.state.matches("confirmPublishView.canPublish.publishing")?n("span",{staticClass:"absolute left-0 inset-y-0 flex items-center pl-3"},[n("IconHeroiconsSpinner",{staticClass:"h-5 w-5 text-primary-yellow-100"})],1):t._e(),t._v("\n\n            Publish Now\n          ")])])]),t._v(" "),t.state.matches("confirmPublishView.canPublish.ready")||t.state.matches("confirmPublishView.canPublish.publishError")?[t._m(2),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("back-to-default-view")}}},[t._v("\n              Go back\n            ")])])])]:t._e()]:t._e(),t._v(" "),t.state.matches("confirmPublishView.publishSuccess")?[n("h3",{staticClass:"mt-10 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Published\n      ")]),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("IconHeroiconsMediumCheck",{staticClass:"h-20 w-20 text-primary-yellow-400 inline-block"})],1),t._v(" "),n("div",{staticClass:"space-y-1 mt-10"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600",attrs:{for:"public_link"}},[t._v("\n          Share Link\n        ")]),t._v(" "),n("div",{staticClass:"mt-1 flex rounded-md shadow-sm"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("a",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 outline-none hover:text-primary-yellow-500 focus:text-primary-yellow-500 transition duration-150 ease-in-out",attrs:{href:t.proposal.route_pub_proposal_view_link,title:"Visit Public Link Now",rel:"noopener noreferrer",target:"_blank"}},[n("ApplicationMark",{staticClass:"w-5 h-5"})],1),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.proposal.route_pub_proposal_view_link,expression:"proposal.route_pub_proposal_view_link"}],staticClass:"focus:ring-primary-yellow-500 focus:border-primary-yellow-500 block w-full rounded-none rounded-l-md pl-10 sm:text-sm border-gray-300",attrs:{type:"text",id:"public_link",disabled:""},domProps:{value:t.proposal.route_pub_proposal_view_link},on:{input:function(e){e.target.composing||t.$set(t.proposal,"route_pub_proposal_view_link",e.target.value)}}})]),t._v(" "),n("button",{ref:"copyButton",staticClass:"-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-gray-50 hover:bg-white focus:outline-none focus:ring-1 focus:ring-primary-yellow-500 focus:border-primary-yellow-500",on:{click:function(e){return e.preventDefault(),t.handleCopyPublicLinkHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyIcon",attrs:{"to-blur-after-success-el":t.$refs.copyButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])]),t._v(" "),n("div",{staticClass:"space-y-1 mt-8"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 truncate",attrs:{for:"access_code_link"}},[t._v("\n          Access Code for "+t._s(t.proposal.recipient_name)+"\n        ")]),t._v(" "),n("div",{staticClass:"mt-1 flex rounded-md shadow-sm"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.proposal.recipient_access_code,expression:"proposal.recipient_access_code"}],staticClass:"focus:ring-primary-yellow-500 focus:border-primary-yellow-500 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300 font-mono",attrs:{id:"access_code_link",type:"text",disabled:""},domProps:{value:t.proposal.recipient_access_code},on:{input:function(e){e.target.composing||t.$set(t.proposal,"recipient_access_code",e.target.value)}}})]),t._v(" "),n("button",{ref:"copyAccessCodeButton",staticClass:"-ml-px relative inline-flex items-center space-x-2 px-4 py-2 border border-gray-300 text-sm font-medium rounded-r-md text-gray-700 bg-gray-50 hover:bg-white focus:outline-none focus:ring-1 focus:ring-primary-yellow-500 focus:border-primary-yellow-500",on:{click:function(e){return e.preventDefault(),t.handleCopyAccessCodeHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyAccessCodeIcon",attrs:{"to-blur-after-success-el":t.$refs.copyAccessCodeButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])]),t._v(" "),n("div",{staticClass:"space-y-1 mt-8 mb-20"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 truncate",attrs:{for:"copy_message"}},[t._v("\n          Example Message\n        ")]),t._v(" "),n("div",{staticClass:"relative"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.proposal.convenient_copyable_recipient_access_message,expression:"proposal.convenient_copyable_recipient_access_message"}],staticClass:"max-w-lg shadow-sm block w-full focus:ring-primary-yellow-500 focus:border-primary-yellow-500 sm:text-sm border-gray-300 rounded-md resize-none",attrs:{readonly:"",disabled:"",rows:"7"},domProps:{value:t.proposal.convenient_copyable_recipient_access_message},on:{input:function(e){e.target.composing||t.$set(t.proposal,"convenient_copyable_recipient_access_message",e.target.value)}}}),t._v(" "),n("div",{staticClass:"absolute bottom-0 right-0"},[n("button",{ref:"copyMessageButton",staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-tl-md rounded-tr-none rounded-br-md rounded-bl-none text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:ring-1 focus:ring-primary-yellow-500 focus:border-primary-yellow-500",on:{click:function(e){return e.preventDefault(),t.handleCopyMessageHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyMessageIcon",attrs:{"to-blur-after-success-el":t.$refs.copyMessageButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])])])]:t._e()],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col items-center justify-center"},[n("span",{staticClass:"text-2xl"},[t._v("∞")]),t._v(" "),n("span",{staticClass:"text-sm text-gray-500 uppercase"},[t._v("Now")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col items-center justify-center"},[n("span",{staticClass:"text-2xl"},[t._v("∞")]),t._v(" "),n("span",{staticClass:"text-sm text-gray-500 uppercase"},[t._v("After")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-6 relative"},[n("div",{staticClass:"absolute inset-0 flex items-center"},[n("div",{staticClass:"w-full border-t border-gray-300"})]),t._v(" "),n("div",{staticClass:"relative flex justify-center text-sm leading-5"},[n("span",{staticClass:"px-2 bg-white text-gray-500"},[t._v("\n              OR\n            ")])])])}],!1,null,null,null).exports;var N=n(9388),T=n(6391),A="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},D=function(t,e,n,r,i,o,s,a,c,l){var u=this;u.numeralDecimalMark=t||".",u.numeralIntegerScale=e>0?e:0,u.numeralDecimalScale=n>=0?n:2,u.numeralThousandsGroupStyle=r||D.groupStyle.thousand,u.numeralPositiveOnly=!!i,u.stripLeadingZeroes=!1!==o,u.prefix=s||""===s?s:"",u.signBeforePrefix=!!a,u.tailPrefix=!!c,u.delimiter=l||""===l?l:",",u.delimiterRE=l?new RegExp("\\"+l,"g"):""};D.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},D.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var e,n,r,i,o=this,s="";switch(t=t.replace(/[A-Za-z]/g,"").replace(o.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",o.numeralPositiveOnly?"":"-").replace("M",o.numeralDecimalMark),o.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),n="-"===t.slice(0,1)?"-":"",r=void 0!==o.prefix?o.signBeforePrefix?n+o.prefix:o.prefix+n:n,i=t,t.indexOf(o.numeralDecimalMark)>=0&&(i=(e=t.split(o.numeralDecimalMark))[0],s=o.numeralDecimalMark+e[1].slice(0,o.numeralDecimalScale)),"-"===n&&(i=i.slice(1)),o.numeralIntegerScale>0&&(i=i.slice(0,o.numeralIntegerScale)),o.numeralThousandsGroupStyle){case D.groupStyle.lakh:i=i.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+o.delimiter);break;case D.groupStyle.wan:i=i.replace(/(\d)(?=(\d{4})+$)/g,"$1"+o.delimiter);break;case D.groupStyle.thousand:i=i.replace(/(\d)(?=(\d{3})+$)/g,"$1"+o.delimiter)}return o.tailPrefix?n+i.toString()+(o.numeralDecimalScale>0?s.toString():"")+o.prefix:r+i.toString()+(o.numeralDecimalScale>0?s.toString():"")}};var P=D,R=function(t,e,n){var r=this;r.date=[],r.blocks=[],r.datePattern=t,r.dateMin=e.split("-").reverse().map((function(t){return parseInt(t,10)})),2===r.dateMin.length&&r.dateMin.unshift(0),r.dateMax=n.split("-").reverse().map((function(t){return parseInt(t,10)})),2===r.dateMax.length&&r.dateMax.unshift(0),r.initBlocks()};R.prototype={initBlocks:function(){var t=this;t.datePattern.forEach((function(e){"Y"===e?t.blocks.push(4):t.blocks.push(2)}))},getISOFormatDate:function(){var t=this,e=t.date;return e[2]?e[2]+"-"+t.addLeadingZero(e[1])+"-"+t.addLeadingZero(e[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(t){var e=this,n="";return t=t.replace(/[^\d]/g,""),e.blocks.forEach((function(r,i){if(t.length>0){var o=t.slice(0,r),s=o.slice(0,1),a=t.slice(r);switch(e.datePattern[i]){case"d":"00"===o?o="01":parseInt(s,10)>3?o="0"+s:parseInt(o,10)>31&&(o="31");break;case"m":"00"===o?o="01":parseInt(s,10)>1?o="0"+s:parseInt(o,10)>12&&(o="12")}n+=o,t=a}})),this.getFixedDateString(n)},getFixedDateString:function(t){var e,n,r,i=this,o=i.datePattern,s=[],a=0,c=0,l=0,u=0,d=0,p=0,h=!1;return 4===t.length&&"y"!==o[0].toLowerCase()&&"y"!==o[1].toLowerCase()&&(d=2-(u="d"===o[0]?0:2),e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),s=this.getFixedDate(e,n,0)),8===t.length&&(o.forEach((function(t,e){switch(t){case"d":a=e;break;case"m":c=e;break;default:l=e}})),p=2*l,u=a<=l?2*a:2*a+2,d=c<=l?2*c:2*c+2,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+4),10),h=4===t.slice(p,p+4).length,s=this.getFixedDate(e,n,r)),4!==t.length||"y"!==o[0]&&"y"!==o[1]||(p=2-(d="m"===o[0]?0:2),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),h=2===t.slice(p,p+2).length,s=[0,n,r]),6!==t.length||"Y"!==o[0]&&"Y"!==o[1]||(p=2-.5*(d="m"===o[0]?0:4),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+4),10),h=4===t.slice(p,p+4).length,s=[0,n,r]),s=i.getRangeFixedDate(s),i.date=s,0===s.length?t:o.reduce((function(t,e){switch(e){case"d":return t+(0===s[0]?"":i.addLeadingZero(s[0]));case"m":return t+(0===s[1]?"":i.addLeadingZero(s[1]));case"y":return t+(h?i.addLeadingZeroForYear(s[2],!1):"");case"Y":return t+(h?i.addLeadingZeroForYear(s[2],!0):"")}}),"")},getRangeFixedDate:function(t){var e=this,n=e.datePattern,r=e.dateMin||[],i=e.dateMax||[];return!t.length||r.length<3&&i.length<3||n.find((function(t){return"y"===t.toLowerCase()}))&&0===t[2]?t:i.length&&(i[2]<t[2]||i[2]===t[2]&&(i[1]<t[1]||i[1]===t[1]&&i[0]<t[0]))?i:r.length&&(r[2]>t[2]||r[2]===t[2]&&(r[1]>t[1]||r[1]===t[1]&&r[0]>t[0]))?r:t},getFixedDate:function(t,e,n){return t=Math.min(t,31),e=Math.min(e,12),n=parseInt(n||0,10),(e<7&&e%2==0||e>8&&e%2==1)&&(t=Math.min(t,2===e?this.isLeapYear(n)?29:28:30)),[t,e,n]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,e){return e?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};var I=R,B=function(t,e){var n=this;n.time=[],n.blocks=[],n.timePattern=t,n.timeFormat=e,n.initBlocks()};B.prototype={initBlocks:function(){var t=this;t.timePattern.forEach((function(){t.blocks.push(2)}))},getISOFormatTime:function(){var t=this,e=t.time;return e[2]?t.addLeadingZero(e[0])+":"+t.addLeadingZero(e[1])+":"+t.addLeadingZero(e[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(t){var e=this,n="";t=t.replace(/[^\d]/g,"");var r=e.getTimeFormatOptions();return e.blocks.forEach((function(i,o){if(t.length>0){var s=t.slice(0,i),a=s.slice(0,1),c=t.slice(i);switch(e.timePattern[o]){case"h":parseInt(a,10)>r.maxHourFirstDigit?s="0"+a:parseInt(s,10)>r.maxHours&&(s=r.maxHours+"");break;case"m":case"s":parseInt(a,10)>r.maxMinutesFirstDigit?s="0"+a:parseInt(s,10)>r.maxMinutes&&(s=r.maxMinutes+"")}n+=s,t=c}})),this.getFixedTimeString(n)},getFixedTimeString:function(t){var e,n,r,i=this,o=i.timePattern,s=[],a=0,c=0,l=0,u=0,d=0,p=0;return 6===t.length&&(o.forEach((function(t,e){switch(t){case"s":a=2*e;break;case"m":c=2*e;break;case"h":l=2*e}})),p=l,d=c,u=a,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),s=this.getFixedTime(r,n,e)),4===t.length&&i.timePattern.indexOf("s")<0&&(o.forEach((function(t,e){switch(t){case"m":c=2*e;break;case"h":l=2*e}})),p=l,d=c,e=0,n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),s=this.getFixedTime(r,n,e)),i.time=s,0===s.length?t:o.reduce((function(t,e){switch(e){case"s":return t+i.addLeadingZero(s[2]);case"m":return t+i.addLeadingZero(s[1]);case"h":return t+i.addLeadingZero(s[0])}}),"")},getFixedTime:function(t,e,n){return n=Math.min(parseInt(n||0,10),60),e=Math.min(e,60),[t=Math.min(t,60),e,n]},addLeadingZero:function(t){return(t<10?"0":"")+t}};var $=B,z=function(t,e){var n=this;n.delimiter=e||""===e?e:" ",n.delimiterRE=e?new RegExp("\\"+e,"g"):"",n.formatter=t};z.prototype={setFormatter:function(t){this.formatter=t},format:function(t){var e=this;e.formatter.clear();for(var n,r="",i=!1,o=0,s=(t=(t=(t=t.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(e.delimiterRE,"")).length;o<s;o++)n=e.formatter.inputDigit(t.charAt(o)),/[\s()-]/g.test(n)?(r=n,i=!0):i||(r=n);return r=(r=r.replace(/[()]/g,"")).replace(/[\s-]/g,e.delimiter)}};var V=z,F={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.concat(19-e)},getInfo:function(t,e){var n=F.blocks,r=F.re;for(var i in e=!!e,r)if(r[i].test(t)){var o=n[i];return{type:i,blocks:e?this.getStrictBlocks(o):o}}return{type:"unknown",blocks:e?this.getStrictBlocks(n.general):n.general}}},L=F,j={noop:function(){},strip:function(t,e){return t.replace(e,"")},getPostDelimiter:function(t,e,n){if(0===n.length)return t.slice(-e.length)===e?e:"";var r="";return n.forEach((function(e){t.slice(-e.length)===e&&(r=e)})),r},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,e,n,r,i){return e.length===t?n.length:t+this.getPositionOffset(t,e,n,r,i)},getPositionOffset:function(t,e,n,r,i){var o,s,a;return o=this.stripDelimiters(e.slice(0,t),r,i),s=this.stripDelimiters(n.slice(0,t),r,i),0!==(a=o.length-s.length)?a/Math.abs(a):0},stripDelimiters:function(t,e,n){var r=this;if(0===n.length){var i=e?r.getDelimiterREByDelimiter(e):"";return t.replace(i,"")}return n.forEach((function(e){e.split("").forEach((function(e){t=t.replace(r.getDelimiterREByDelimiter(e),"")}))})),t},headStr:function(t,e){return t.slice(0,e)},getMaxLength:function(t){return t.reduce((function(t,e){return t+e}),0)},getPrefixStrippedValue:function(t,e,n,r,i,o,s,a,c){if(0===n)return t;if(t===e&&""!==t)return"";if(c&&"-"==t.slice(0,1)){var l="-"==r.slice(0,1)?r.slice(1):r;return"-"+this.getPrefixStrippedValue(t.slice(1),e,n,l,i,o,s,a,c)}if(r.slice(0,n)!==e&&!a)return s&&!r&&t?t:"";if(r.slice(-n)!==e&&a)return s&&!r&&t?t:"";var u=this.stripDelimiters(r,i,o);return t.slice(0,n)===e||a?t.slice(-n)!==e&&a?u.slice(0,-n-1):a?t.slice(0,-n):t.slice(n):u.slice(n)},getFirstDiffIndex:function(t,e){for(var n=0;t.charAt(n)===e.charAt(n);)if(""===t.charAt(n++))return-1;return n},getFormattedValue:function(t,e,n,r,i,o){var s="",a=i.length>0,c="";return 0===n?t:(e.forEach((function(e,l){if(t.length>0){var u=t.slice(0,e),d=t.slice(e);c=a?i[o?l-1:l]||c:r,o?(l>0&&(s+=c),s+=u):(s+=u,u.length===e&&l<n-1&&(s+=c)),t=d}})),s)},fixPrefixCursor:function(t,e,n,r){if(t){var i=t.value,o=n||r[0]||" ";if(t.setSelectionRange&&e&&!(e.length+o.length<=i.length)){var s=2*i.length;setTimeout((function(){t.setSelectionRange(s,s)}),1)}}},checkFullSelection:function(t){try{return(window.getSelection()||document.getSelection()||{}).toString().length===t.length}catch(t){}return!1},setSelection:function(t,e,n){if(t===this.getActiveElement(n)&&!(t&&t.value.length<=e))if(t.createTextRange){var r=t.createTextRange();r.move("character",e),r.select()}else try{t.setSelectionRange(e,e)}catch(t){console.warn("The input element type does not support selection")}},getActiveElement:function(t){var e=t.activeElement;return e&&e.shadowRoot?this.getActiveElement(e.shadowRoot):e},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,e){return!!(this.isAndroid()&&t&&e)&&e===t.slice(0,-1)}},H={assign:function(t,e){return e=e||{},(t=t||{}).creditCard=!!e.creditCard,t.creditCardStrictMode=!!e.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=e.onCreditCardTypeChanged||function(){},t.phone=!!e.phone,t.phoneRegionCode=e.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!e.time,t.timePattern=e.timePattern||["h","m","s"],t.timeFormat=e.timeFormat||"24",t.timeFormatter={},t.date=!!e.date,t.datePattern=e.datePattern||["d","m","Y"],t.dateMin=e.dateMin||"",t.dateMax=e.dateMax||"",t.dateFormatter={},t.numeral=!!e.numeral,t.numeralIntegerScale=e.numeralIntegerScale>0?e.numeralIntegerScale:0,t.numeralDecimalScale=e.numeralDecimalScale>=0?e.numeralDecimalScale:2,t.numeralDecimalMark=e.numeralDecimalMark||".",t.numeralThousandsGroupStyle=e.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!e.numeralPositiveOnly,t.stripLeadingZeroes=!1!==e.stripLeadingZeroes,t.signBeforePrefix=!!e.signBeforePrefix,t.tailPrefix=!!e.tailPrefix,t.swapHiddenInput=!!e.swapHiddenInput,t.numericOnly=t.creditCard||t.date||!!e.numericOnly,t.uppercase=!!e.uppercase,t.lowercase=!!e.lowercase,t.prefix=t.creditCard||t.date?"":e.prefix||"",t.noImmediatePrefix=!!e.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!e.rawValueTrimPrefix,t.copyDelimiter=!!e.copyDelimiter,t.initValue=void 0!==e.initValue&&null!==e.initValue?e.initValue.toString():"",t.delimiter=e.delimiter||""===e.delimiter?e.delimiter:e.date?"/":e.time?":":e.numeral?",":(e.phone," "),t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!e.delimiterLazyShow,t.delimiters=e.delimiters||[],t.blocks=e.blocks||[],t.blocksLength=t.blocks.length,t.root="object"==typeof A&&A?A:window,t.document=e.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=e.onValueChanged||function(){},t}},Z=function(t,e){var n=this,r=!1;if("string"==typeof t?(n.element=document.querySelector(t),r=document.querySelectorAll(t).length>1):void 0!==t.length&&t.length>0?(n.element=t[0],r=t.length>1):n.element=t,!n.element)throw new Error("[cleave.js] Please check the element");if(r)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(t){}e.initValue=n.element.value,n.properties=Z.DefaultProperties.assign({},e),n.init()};Z.prototype={init:function(){var t=this,e=t.properties;e.numeral||e.phone||e.creditCard||e.time||e.date||0!==e.blocksLength||e.prefix?(e.maxLength=Z.Util.getMaxLength(e.blocks),t.isAndroid=Z.Util.isAndroid(),t.lastInputValue="",t.isBackward="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.initSwapHiddenInput(),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&t.onInput(e.initValue)):t.onInput(e.initValue)},initSwapHiddenInput:function(){var t=this;if(t.properties.swapHiddenInput){var e=t.element.cloneNode(!0);t.element.parentNode.insertBefore(e,t.element),t.elementSwapHidden=t.element,t.elementSwapHidden.type="hidden",t.element=e,t.element.id=""}},initNumeralFormatter:function(){var t=this.properties;t.numeral&&(t.numeralFormatter=new Z.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var t=this.properties;t.time&&(t.timeFormatter=new Z.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=Z.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var t=this.properties;t.date&&(t.dateFormatter=new Z.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=Z.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var t=this.properties;if(t.phone)try{t.phoneFormatter=new Z.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(t){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var e=this,n=t.which||t.keyCode;e.lastInputValue=e.element.value,e.isBackward=8===n},onChange:function(t){var e=this,n=e.properties,r=Z.Util;e.isBackward=e.isBackward||"deleteContentBackward"===t.inputType;var i=r.getPostDelimiter(e.lastInputValue,n.delimiter,n.delimiters);e.isBackward&&i?n.postDelimiterBackspace=i:n.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var t=this,e=t.properties;t.lastInputValue=t.element.value,e.prefix&&e.noImmediatePrefix&&!t.element.value&&this.onInput(e.prefix),Z.Util.fixPrefixCursor(t.element,e.prefix,e.delimiter,e.delimiters)},onCut:function(t){Z.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){Z.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var e=this.properties,n=Z.Util,r=this.element.value,i="";i=e.copyDelimiter?r:n.stripDelimiters(r,e.delimiter,e.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",i):window.clipboardData.setData("Text",i),t.preventDefault()}catch(t){}},onInput:function(t){var e=this,n=e.properties,r=Z.Util,i=r.getPostDelimiter(t,n.delimiter,n.delimiters);return n.numeral||!n.postDelimiterBackspace||i||(t=r.headStr(t,t.length-n.postDelimiterBackspace.length)),n.phone?(!n.prefix||n.noImmediatePrefix&&!t.length?n.result=n.phoneFormatter.format(t):n.result=n.prefix+n.phoneFormatter.format(t).slice(n.prefix.length),void e.updateValueState()):n.numeral?(n.prefix&&n.noImmediatePrefix&&0===t.length?n.result="":n.result=n.numeralFormatter.format(t),void e.updateValueState()):(n.date&&(t=n.dateFormatter.getValidatedDate(t)),n.time&&(t=n.timeFormatter.getValidatedTime(t)),t=r.stripDelimiters(t,n.delimiter,n.delimiters),t=r.getPrefixStrippedValue(t,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix,n.tailPrefix,n.signBeforePrefix),t=n.numericOnly?r.strip(t,/[^\d]/g):t,t=n.uppercase?t.toUpperCase():t,t=n.lowercase?t.toLowerCase():t,n.prefix&&(n.tailPrefix?t+=n.prefix:t=n.prefix+t,0===n.blocksLength)?(n.result=t,void e.updateValueState()):(n.creditCard&&e.updateCreditCardPropsByValue(t),t=r.headStr(t,n.maxLength),n.result=r.getFormattedValue(t,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow),void e.updateValueState()))},updateCreditCardPropsByValue:function(t){var e,n=this.properties,r=Z.Util;r.headStr(n.result,4)!==r.headStr(t,4)&&(e=Z.CreditCardDetector.getInfo(t,n.creditCardStrictMode),n.blocks=e.blocks,n.blocksLength=n.blocks.length,n.maxLength=r.getMaxLength(n.blocks),n.creditCardType!==e.type&&(n.creditCardType=e.type,n.onCreditCardTypeChanged.call(this,n.creditCardType)))},updateValueState:function(){var t=this,e=Z.Util,n=t.properties;if(t.element){var r=t.element.selectionEnd,i=t.element.value,o=n.result;r=e.getNextCursorPosition(r,i,o,n.delimiter,n.delimiters),t.isAndroid?window.setTimeout((function(){t.element.value=o,e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged()}),1):(t.element.value=o,n.swapHiddenInput&&(t.elementSwapHidden.value=t.getRawValue()),e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged())}},callOnValueChanged:function(){var t=this,e=t.properties;e.onValueChanged.call(t,{target:{name:t.element.name,value:e.result,rawValue:t.getRawValue()}})},setPhoneRegionCode:function(t){var e=this;e.properties.phoneRegionCode=t,e.initPhoneFormatter(),e.onChange()},setRawValue:function(t){var e=this,n=e.properties;t=null!=t?t.toString():"",n.numeral&&(t=t.replace(".",n.numeralDecimalMark)),n.postDelimiterBackspace=!1,e.element.value=t,e.onInput(t)},getRawValue:function(){var t=this.properties,e=Z.Util,n=this.element.value;return t.rawValueTrimPrefix&&(n=e.getPrefixStrippedValue(n,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),n=t.numeral?t.numeralFormatter.getRawValue(n):e.stripDelimiters(n,t.delimiter,t.delimiters)},getISOFormatDate:function(){var t=this.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}},Z.NumeralFormatter=P,Z.DateFormatter=I,Z.TimeFormatter=$,Z.PhoneFormatter=V,Z.CreditCardDetector=L,Z.Util=j,Z.DefaultProperties=H,("object"==typeof A&&A?A:window).Cleave=Z;const K=Z,W={props:{value:{},options:{},editable:{type:Boolean,default:!0}},mounted:function(){this.cleave=new K(this.$el,this.options),this.cleave.setRawValue(this.value)},destroyed:function(){this.cleave.destroy()},watch:{value:"updateInput"},methods:{updateValue:function(){if(this.editable){var t=this.cleave.getRawValue();t!==this.value&&this.$emit("input",t)}},updateInput:function(){this.cleave.setRawValue(this.value)}}};const J=(0,c.Z)(W,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{attrs:{disabled:!t.editable,type:"text"},on:{keyup:t.updateValue}})}),[],!1,null,null,null).exports;var U=n(6152);const q=function(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n};const X=function(t){return function(e){return null==t?void 0:t[e]}}({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});var G=n(3633),Y=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Q=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const tt=function(t){return(t=(0,G.Z)(t))&&t.replace(Y,X).replace(Q,"")};var et=n(8426),nt=RegExp("['’]","g");const rt=function(t){return function(e){return q((0,et.Z)(tt(e).replace(nt,"")),t,"")}}((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var it=n(8438),ot=n(5288),st=n(9006);function at(t){return function(t){if(Array.isArray(t))return ct(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const lt={components:{InputCleave:J},props:{label:{type:String,default:"Price"},defaultCurrencyCode:{type:String,default:"GBP"},currencies:{type:Array,default:function(){return at(st.V)}},currencyModel:{type:String},amountModel:{type:[String,Number]},notifyChangeDebounceMs:{type:Number,default:1e3},editable:{type:Boolean,default:!0},canSwitchCurrency:{type:Boolean,default:!0},min:Number,max:Number},created:function(){this.notifyChange=(0,U.Z)((function(t){t.$emit("changed")}),this.notifyChangeDebounceMs)},computed:{isCurrencySwitchDisabled:function(){return!this.editable||!this.canSwitchCurrency},inputLabelId:function(){return rt(this.label)},selectedCurrency:function(){return(0,it.Z)(this.currencies,{code:this.selectedCurrencyCode})},selectCurrencyStyleObject:function(){return this.isCurrencySwitchDisabled?{backgroundImage:"none"}:{}},amount:{get:function(){return this.amountModel},set:function(t){this.$emit("update:amountModel",t),this.notifyChange(this)}},selectedCurrencyCode:{get:function(){return(0,ot.Z)(this.currencyModel)?this.defaultCurrencyCode:this.currencyModel},set:function(t){this.$emit("update:currencyModel",t),this.notifyChange(this)}}}};const ut=(0,c.Z)(lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"block text-sm leading-5 font-medium text-gray-600",attrs:{for:t.inputLabelId}},[t._v("\n    "+t._s(t.label)+"\n\n    "),t._t("label-append")],2),t._v(" "),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[n("span",{staticClass:"text-gray-500 sm:text-sm sm:leading-5"},[t._v("\n        "+t._s(t.selectedCurrency.symbol_native)+"\n      ")])]),t._v(" "),n("InputCleave",{staticClass:"focus:ring-primary-yellow-500 focus:border-primary-yellow-500 block w-full pl-7 pr-12 sm:text-sm border-gray-300 rounded-md",class:{"cursor-not-allowed":!t.editable},attrs:{id:t.inputLabelId,editable:t.editable,options:{numeral:!0,numeralPositiveOnly:!0,numeralThousandsGroupStyle:"thousand"},placeholder:"0.00"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),n("div",{staticClass:"absolute inset-y-0 right-0 flex items-center"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCurrencyCode,expression:"selectedCurrencyCode"}],staticClass:"focus:ring-primary-yellow-500 focus:border-primary-yellow-500 h-full py-0 pl-2 border-transparent bg-transparent text-gray-500 sm:text-sm rounded-md",class:t.isCurrencySwitchDisabled?"pr-2":"pr-7 cursor-pointer",style:t.selectCurrencyStyleObject,attrs:{"aria-label":"Currency",disabled:t.isCurrencySwitchDisabled},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedCurrencyCode=e.target.multiple?n:n[0]}}},t._l(t.currencies,(function(e){return n("option",{key:e.code,domProps:{value:e.code}},[t._v("\n          "+t._s(e.code)+" "+t._s(e.emoji)+"  \n        ")])})),0)])],1)])}),[],!1,null,null,null).exports;const dt={components:{LogoStripe:n(2603).Z},data:function(){return{}}};const pt=(0,c.Z)(dt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-28 h-12 flex flex-col items-center justify-center relative border border-primary-yellow-400 cursor-pointer"},[t._m(0),t._v(" "),n("LogoStripe",{staticClass:"inline h-11 w-10 text-indigo-600 absolute inset-auto"})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[e("input",{staticClass:"form-radio h-4 w-4 text-primary-yellow-400 transition duration-150 ease-in-out",attrs:{type:"radio",checked:"",disabled:""}})])}],!1,null,null,null).exports;const ht={components:{LogoCoinbase:n(8998).Z},data:function(){return{}}};function ft(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}const vt={components:{ProposalPaymentProviderStripe:pt,ProposalPaymentProviderCoinbase:(0,c.Z)(ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-28 h-12 flex flex-col items-center justify-center relative border cursor-not-allowed"},[t._m(0),t._v(" "),n("span",{staticClass:"absolute inset-auto"},[n("LogoCoinbase",{staticClass:"inline h-16 w-32 text-blue-700 opacity-50"})],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[n("span",{staticClass:"text-xs"},[t._v("🚧")])])}],!1,null,null,null).exports,IconHeroiconsMediumExclamation:m.Z,InputWithCurrency:ut},props:{proposal:{type:Object},editable:{type:Boolean,default:!0}},data:function(){return{}},computed:{settingsRoute:function(){return this.proposal.org.route_settings},isSelectedProviderReady:function(){var t;return null!==(t=this.proposal.is_selected_payment_provider_ready)&&void 0!==t&&t}},methods:{handleUpdateDepositAmount:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.editable){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.proposal.updateDepositAmount();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){ft(o,r,i,s,a,"next",t)}function a(t){ft(o,r,i,s,a,"throw",t)}s(void 0)}))})()}}};const mt=(0,c.Z)(vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 mb-2",attrs:{for:"deposit"}},[t._v("\n    Payment\n  ")]),t._v(" "),n("nav",[n("ul",{},[n("li",{staticClass:"relative pb-10"},[t._m(0),t._v(" "),n("div",{staticClass:"ml-12 mt-2"},[n("div",[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600"},[t._v("\n              Provider\n            ")]),t._v(" "),n("div",{staticClass:"flex gap-x-3 mt-1"},[n("ProposalPaymentProviderStripe"),t._v(" "),n("ProposalPaymentProviderCoinbase")],1),t._v(" "),t.isSelectedProviderReady?t._e():[n("inertia-link",{staticClass:"block text-xs leading-5 text-red-500 mt-2 hover:text-red-400",attrs:{href:t.settingsRoute}},[n("IconHeroiconsMediumExclamation",{staticClass:"h-5 w-5 mr-1 inline-block"}),t._v(" "),n("span",{staticClass:"align-middle"},[t._v("Provider not ready, see settings »")])],1)],t._v(" "),n("InputWithCurrency",{staticClass:"mt-4 space-y-1",attrs:{"currency-model":t.proposal.value_currency_code,"amount-model":t.proposal.deposit_amount,max:999999999,editable:t.editable,"can-switch-currency":!1,label:"Amount"},on:{"update:amountModel":function(e){return t.$set(t.proposal,"deposit_amount",e)},"update:amount-model":function(e){return t.$set(t.proposal,"deposit_amount",e)},changed:t.handleUpdateDepositAmount}})],2)])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative flex items-start space-x-4 group focus:outline-none"},[n("div",{staticClass:"h-9 flex items-center"},[n("span",{staticClass:"relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-primary-yellow-500 rounded-full"},[n("span",{staticClass:"h-2.5 w-2.5 flex items-center justify-center text-primary-yellow-500"},[t._v("\n                1\n              ")])])]),t._v(" "),n("div",{staticClass:"min-w-0"},[n("h3",{staticClass:"text-xs leading-4 font-semibold uppercase tracking-wide text-primary-yellow-500"},[t._v("\n              Acceptance\n            ")]),t._v(" "),n("p",{staticClass:"text-xs sm:text-sm leading-5 text-gray-500"},[t._v("\n              Upfront payment to start the project.\n            ")])])])}],!1,null,null,null).exports;const gt=(0,c.Z)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z","clip-rule":"evenodd"}}),t._v(" "),n("path",{attrs:{d:"M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"}})])}),[],!1,null,null,null).exports;const yt=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"}})])}),[],!1,null,null,null).exports;var wt=n(9073);const bt={components:{IconHeroiconsMediumCheckCircle:n(8933).Z},props:{name:{type:String},colors:{type:Array},active:{type:Boolean,default:!0}},data:function(){return{}}};const xt=(0,c.Z)(bt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-32 h-16 flex flex-col items-center justify-center relative border border-primary-yellow-400 cursor-pointer"},[t._m(0),t._v(" "),n("span",{staticClass:"font-medium text-gray-600 text-xs"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),t._m(1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[e("input",{staticClass:"form-radio h-4 w-4 text-primary-yellow-400 transition duration-150 ease-in-out",attrs:{type:"radio",checked:"",disabled:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex overflow-hidden"},[n("div",{staticClass:"inline-block h-6 w-6 rounded-full text-white shadow-solid | bg-blue-gray-200"}),t._v(" "),n("div",{staticClass:"-ml-1 inline-block h-6 w-6 rounded-full text-white shadow-solid | bg-gray-50 "})])}],!1,null,null,null).exports;function St(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}const Ct={name:"ProposalTweakView",components:{IconHeroiconsSmallBriefcase:gt,IconHeroiconsSmallAdjustments:yt,IconHeroiconsMediumInformationCircle:wt.Z,InputWithCurrency:ut,ProposalDepositConfigure:mt,ProposalThemeBlock:xt,Tabs:N.Z,TabPane:T.Z},props:{proposal:{type:Object},proposalEditorMachineState:{}},data:function(){return{tabIndex:1}},computed:{detailsTabIcon:function(){return gt},designTabIcon:function(){return yt}},methods:{handleUpdateProjectValue:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.proposalEditorMachineState.context.canEdit){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.proposal.updateProjectValue();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){St(o,r,i,s,a,"next",t)}function a(t){St(o,r,i,s,a,"throw",t)}s(void 0)}))})()}}};const kt=(0,c.Z)(Ct,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-1 flex flex-col justify-between"},[n("div",{staticClass:"px-4 sm:px-6"},[n("Tabs",{attrs:{"selected-index":t.tabIndex,"show-tab-text-when-inactive":!1,"active-tab-class":"border-b-2 border-primary-yellow-500 text-primary-yellow-600 focus:outline-none focus:text-primary-yellow-800 focus:border-primary-yellow-700","active-tab-icon-class":"text-primary-yellow-500 group-focus:text-primary-yellow-600","tabs-class":"mt-8"},on:{"update:selectedIndex":function(e){t.tabIndex=e},"update:selected-index":function(e){t.tabIndex=e}}},[n("TabPane",{attrs:{title:"Design",icon:t.designTabIcon}},[n("div",{staticClass:"space-y-6 pt-6 pb-5"},[n("div",{staticClass:"space-y-1"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600",attrs:{for:"proposal_theme"}},[t._v("\n              Theme\n            ")]),t._v(" "),n("div",{staticClass:"flex gap-2 items-center"},[n("ProposalThemeBlock",{staticClass:"flex-shrink-0",attrs:{name:"Cool Grey"}}),t._v(" "),n("p",{staticClass:"flex-1 text-center text-gray-400 text-xs"},[n("IconHeroiconsMediumInformationCircle",{staticClass:"inline w-5 h-5 align-bottom"}),t._v("\n                More theme choices coming soon!\n              ")],1)],1)])])]),t._v(" "),n("TabPane",{attrs:{title:"Details",icon:t.detailsTabIcon}},[n("div",{staticClass:"space-y-6 pt-6 pb-5"},[n("InputWithCurrency",{staticClass:"space-y-1",attrs:{"currency-model":t.proposal.value_currency_code,"amount-model":t.proposal.value_amount,editable:t.proposalEditorMachineState.context.canEdit,max:999999999,label:"Project Value"},on:{"update:currencyModel":function(e){return t.$set(t.proposal,"value_currency_code",e)},"update:currency-model":function(e){return t.$set(t.proposal,"value_currency_code",e)},"update:amountModel":function(e){return t.$set(t.proposal,"value_amount",e)},"update:amount-model":function(e){return t.$set(t.proposal,"value_amount",e)},changed:t.handleUpdateProjectValue}}),t._v(" "),n("ProposalDepositConfigure",{staticClass:"space-y-1",attrs:{proposal:t.proposal,editable:t.proposalEditorMachineState.context.canEdit}})],1)])],1)],1)])}),[],!1,null,null,null).exports;function _t(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}const Mt={components:{ApplicationLogo:s.Z,BadgeWithDot:p.Z,BaseSlideOver:l,ProposalRecipientSelector:u.Z,ProposalCreatorAvatar:d.Z,ProposalTweakView:kt,ProposalConfirmView:E},props:{proposal:{type:Object},proposalEditorMachineState:{}},created:function(){var t=this;this.contentMachineService.onTransition((function(e){t.contentCurrentState=e,t.contentContext=e.context})).start(),this.setupInitialMachineContext()},data:function(){var t=Tt.withConfig({services:{publishAction:this.publishAction}});return{isVisible:!1,contentMachineService:(0,o.kJ)(t,{devTools:!0}),contentCurrentState:t.initialState,contentContext:t.context}},computed:{isDefaultView:function(){return this.contentCurrentState.matches("defaultView")},isSuccessPublishView:function(){return this.contentCurrentState.matches("confirmPublishView.publishSuccess")},bodyComponent:function(){return this.isDefaultView?kt:E},leaveClass:function(){return this.isDefaultView,"translate-x-0"},leaveToClass:function(){return this.isDefaultView?"translate-x-full":"-translate-x-full"},enterClass:function(){return this.isDefaultView?"-translate-x-full":"translate-x-full"},enterToClass:function(){return this.isDefaultView,"translate-x-0"},footerLeaveClass:function(){return this.isDefaultView,"translate-x-0"},footerLeaveToClass:function(){return this.isDefaultView,"-translate-x-full"},footerEnterClass:function(){return this.isDefaultView,"-translate-x-full"},footerEnterToClass:function(){return this.isDefaultView,"translate-x-0"}},methods:{handleExtraCloseButtonHit:function(){this.isVisible?this.hide():this.show()},show:function(){this.isVisible=!0},hide:function(){this.isVisible=!1},setupInitialMachineContext:function(){this.handleHasThingsToPublishEvent(this.proposal.has_things_to_fix_before_publish),this.handleHasBeenPublishedEvent(this.proposal.has_been_published)},handleHasThingsToPublishEvent:function(t){var e=t?"CANNOT_PUBLISH":"CAN_PUBLISH";this.contentMachineService.send(e)},handleHasBeenPublishedEvent:function(t){var e=t?"IS_PUBLISHED":"IS_NOT_PUBLISHED";this.contentMachineService.send(e)},publishAction:function(){var t,e=this;return(t=i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.proposal.publish();case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){_t(o,r,i,s,a,"next",t)}function a(t){_t(o,r,i,s,a,"throw",t)}s(void 0)}))})()}},watch:{"proposal.has_things_to_fix_before_publish":{handler:function(t){this.handleHasThingsToPublishEvent(t)}}}};const Ot=(0,c.Z)(Mt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("transition",{attrs:{"enter-active-class":"ease-in-out duration-300","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in-out duration-75","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isVisible,expression:"!isVisible"}],staticClass:"absolute h-full right-0 top-0"},[n("div",{staticClass:"fixed h-screen"},[n("button",{staticClass:"absolute bottom-0 top-0 right-0 bg-white inline-block h-20 my-auto rounded-l-full w-7 shadow focus:outline-none focus:shadow-xl",on:{click:t.handleExtraCloseButtonHit}},[n("svg",{staticClass:"h-5 w-5 ml-1 text-primary-yellow-500 animate-wave",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M15 19l-7-7 7-7"}})])])])])]),t._v(" "),n("BaseSlideOver",{attrs:{"is-visible":t.isVisible,"is-rounded":!0,"is-divide-y":!1},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e}},scopedSlots:t._u([{key:"header",fn:function(e){var r=e.handleCloseButtonHit;return[n("header",{staticClass:"space-y-1 py-6 px-4 relative bg-primary-yellow-400 sm:px-6"},[n("div",{staticClass:"flex items-center justify-between space-x-3 items-baseline"},[n("ApplicationLogo",{staticClass:"h-7 w-auto"}),t._v(" "),n("div",{staticClass:"h-7 flex items-center"},[n("button",{staticClass:"text-primary-yellow-50 hover:text-primary-yellow-600 focus:outline-none focus:text-primary-yellow-600 transition ease-in-out duration-150",attrs:{"aria-label":"Close panel"},on:{click:r}},[n("svg",{staticClass:"h-6 w-6",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])],1),t._v(" "),n("h2",{staticClass:"text-lg leading-7 font-medium text-primary-yellow-800 truncate mt-0.5"},[t._v("\n          » "+t._s(t.proposal.name)+"\n        ")]),t._v(" "),n("div",{staticClass:"h-10"}),t._v(" "),n("div",{staticClass:"absolute h-16 left-0 right-0 grid grid-cols-3 items-center justify-evenly z-10 -bottom-8"},[n("div",{staticClass:"relative col-span-1"},[n("div",{staticClass:"absolute w-full flex items-center justify-center text-xs tracking-wider uppercase text-primary-yellow-700 font-semibold -mt-8"},[t._v("\n              Creator\n            ")]),t._v(" "),n("div",{staticClass:"flex space-x-2 justify-center"},[n("ProposalCreatorAvatar",{attrs:{proposal:t.proposal}})],1)]),t._v(" "),n("div",{staticClass:"flex col-span-1 justify-center"},[n("BadgeWithDot",{attrs:{"custom-badge-class":"bg-white text-primary-yellow-800 shadow-md","custom-dot-class":"text-primary-yellow-400"}},[t._v("\n              "+t._s(t._f("titleCase")(t.proposal.status_name))+"\n            ")])],1),t._v(" "),n("div",{staticClass:"relative col-span-1"},[n("div",{staticClass:"absolute w-full flex items-center justify-center text-xs tracking-wider uppercase text-primary-yellow-700 font-semibold -mt-8"},[t._v("\n              Recipient\n            ")]),t._v(" "),n("div",{staticClass:"flex space-x-2 justify-center"},[n("ProposalRecipientSelector",{attrs:{proposal:t.proposal,editable:t.proposalEditorMachineState.context.canEdit,options:t.proposal.recipient_options},on:{"update:proposal":function(e){t.proposal=e}}})],1)])])])]}},{key:"body",fn:function(){return[n("div",{staticClass:"relative"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":t.enterClass,"enter-to-class":t.enterToClass,"leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":t.leaveClass,"leave-to-class":t.leaveToClass}},[n("keep-alive",{attrs:{include:"ProposalTweakView"}},[n(t.bodyComponent,{tag:"component",staticClass:"absolute inset-0",attrs:{proposal:t.proposal,state:t.contentCurrentState,"proposal-editor-machine-state":t.proposalEditorMachineState},on:{"back-to-default-view":function(e){return t.contentMachineService.send("BACK_TO_DEFAULT_VIEW")},publish:function(e){return t.contentMachineService.send("PUBLISH")}}})],1)],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"overflow-hidden flex flex-shrink-0"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":t.footerEnterClass,"enter-to-class":t.footerEnterToClass,"leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":t.footerLeaveClass,"leave-to-class":t.footerLeaveToClass}},[t.isDefaultView||t.isSuccessPublishView?n("div",{staticClass:"px-4 py-4 flex flex-1 border-t border-gray-200"},[t.isDefaultView?[n("span",{staticClass:"inline-flex rounded-md shadow-sm flex-1"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out flex-1",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.contentMachineService.send("PREPARE_TO_PUBLISH")}}},[t._v("\n                  "+t._s(t.contentContext.isPublished?"View Access Details »":"Ready to Publish »")+"\n                ")])])]:t._e(),t._v(" "),t.isSuccessPublishView?[n("span",{staticClass:"inline-flex rounded-md shadow-sm flex-1"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out flex-1",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.contentMachineService.send("BACK_TO_DEFAULT_VIEW")}}},[t._v("\n                  Back to details\n                ")])])]:t._e()],2):t._e()])],1)]},proxy:!0},{key:"extra-close-button-handling",fn:function(e){e.handleCloseButtonHit;return[n("button",{staticClass:"absolute bottom-0 top-0 -ml-13 bg-white inline-block h-20 my-auto rounded-l-full w-7 focus:outline-none",staticStyle:{"margin-left":"-1.65rem","box-shadow":"-5px 3px 10px -2px rgba(0, 0, 0, 0.1), -5px 10px 10px -5px rgba(0, 0, 0, 0.04)"},on:{click:t.handleExtraCloseButtonHit}},[n("svg",{staticClass:"h-5 w-5 ml-1 text-primary-yellow-500",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M9 5l7 7-7 7"}})])])]}}])})],1)}),[],!1,null,null,null).exports;var Et=n(9944),Nt=n(375),Tt=(0,Et.J)({id:"proposalSlideOverContent",context:{isPublished:!1,canPublish:!1,hasSufficientCredits:!0,isPublishing:!1},initial:"defaultView",states:{defaultView:{on:{PREPARE_TO_PUBLISH:"confirmPublishView"}},confirmPublishView:{initial:"entering",on:{BACK_TO_DEFAULT_VIEW:"defaultView"},states:{entering:{always:[{target:"publishSuccess",cond:"isPublished"},{target:"cannotPublish",cond:"cannotPublish"},{target:"canPublish",cond:"canPublish"}]},cannotPublish:{on:{CAN_PUBLISH:{target:["entering"],actions:["setCanPublish"]}}},canPublish:{initial:"ready",on:{CANNOT_PUBLISH:{target:["entering"],actions:["setCannotPublish"]}},states:{ready:{on:{PUBLISH:{target:["publishing"],actions:["setIsPublishing"]}}},publishing:{invoke:{src:"publishAction",onDone:{target:"#publishSuccess",actions:["setIsNotPublishing","setIsPublished"]},onError:{target:"publishError",actions:["setIsNotPublishing"]}}},publishError:{on:{PUBLISH:{target:["publishing"],actions:["setIsPublishing"]}}}}},publishSuccess:{id:"publishSuccess"}}}},on:{CAN_PUBLISH:{actions:["setCanPublish"]},CANNOT_PUBLISH:{actions:["setCannotPublish"]},IS_PUBLISHED:{actions:["setIsPublished"]},IS_NOT_PUBLISHED:{actions:["setIsNotPublished"]}}},{guards:{cannotPublish:function(t){return!1===t.canPublish},canPublish:function(t){return t.canPublish},isPublished:function(t){return t.isPublished}},actions:{setCanPublish:(0,Nt.f0)({canPublish:function(t){return t.canPublish=!0}}),setCannotPublish:(0,Nt.f0)({canPublish:function(t){return t.canPublish=!1}}),setIsPublishing:(0,Nt.f0)({isPublishing:function(t){return t.isPublishing=!0}}),setIsNotPublishing:(0,Nt.f0)({isPublishing:function(t){return t.isPublishing=!1}}),setIsPublished:(0,Nt.f0)({isPublished:function(t){return t.isPublished=!0}}),setIsNotPublished:(0,Nt.f0)({isPublished:function(t){return t.isPublished=!1}})}})},9006:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});var r=[{code:"GBP",symbol_native:"£",emoji:"🇬🇧"},{code:"USD",symbol_native:"$",emoji:"🇺🇸"},{code:"EUR",symbol_native:"€",emoji:"🇪🇺"},{code:"AUD",symbol_native:"$",emoji:"🇦🇺"},{code:"CAD",symbol_native:"$",emoji:"🇨🇦"},{code:"NZD",symbol_native:"$",emoji:"🇳🇿"}]},6485:t=>{t.exports=function(t){var e;return function(t){return navigator.clipboard?navigator.clipboard.writeText(t):Promise.reject()}(t).catch((function(n){return e=n,function(t){var e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre",document.body.appendChild(e);var n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(e),n.addRange(r);var i,o=!1;try{o=window.document.execCommand("copy")}catch(t){i=t}return n.removeAllRanges(),window.document.body.removeChild(e),o?Promise.resolve():Promise.reject(i)}(t)})).catch((function(t){throw t||e||new DOMException("The request is not allowed","NotAllowedError")}))}},1102:(t,e,n)=>{"use strict";var r=n(6291),i=o(Error);function o(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=r.apply(null,arguments)),new t(e)}}t.exports=i,i.eval=o(EvalError),i.range=o(RangeError),i.reference=o(ReferenceError),i.syntax=o(SyntaxError),i.type=o(TypeError),i.uri=o(URIError),i.create=o},6291:t=>{!function(){var e;function n(t){for(var e,n,r,i,o=1,s=[].slice.call(arguments),a=0,c=t.length,l="",u=!1,d=!1,p=function(){return s[o++]},h=function(){for(var n="";/\d/.test(t[a]);)n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<c;++a)if(e=t[a],u)switch(u=!1,"."==e?(d=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(d=!0,e=t[a+=2]):d=!0,i=h(),e){case"b":l+=parseInt(p(),10).toString(2);break;case"c":l+="string"==typeof(n=p())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(p(),10);break;case"f":r=String(parseFloat(p()).toFixed(i||6)),l+=d?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(p());break;case"o":l+="0"+parseInt(p(),10).toString(8);break;case"s":l+=p();break;case"x":l+="0x"+parseInt(p(),10).toString(16);break;case"X":l+="0x"+parseInt(p(),10).toString(16).toUpperCase();break;default:l+=e}else"%"===e?u=!0:l+=e;return l}(e=t.exports=n).format=n,e.vsprintf=function(t,e){return n.apply(null,[t].concat(e))},"undefined"!=typeof console&&"function"==typeof console.log&&(e.printf=function(){console.log(n.apply(null,arguments))})}()},7802:t=>{function e(t){Object.freeze(t);var n="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(r){!Object.hasOwnProperty.call(t,r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||n&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(t[r])||e(t[r])})),t}class n{constructor(t){void 0===t.data&&(t.data={}),this.data=t.data}ignoreMatch(){this.ignore=!0}}function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function i(t,...e){var n={};for(const e in t)n[e]=t[e];return e.forEach((function(t){for(const e in t)n[e]=t[e]})),n}function o(t){return t.nodeName.toLowerCase()}var s=Object.freeze({__proto__:null,escapeHTML:r,inherit:i,nodeStream:function(t){var e=[];return function t(n,r){for(var i=n.firstChild;i;i=i.nextSibling)3===i.nodeType?r+=i.nodeValue.length:1===i.nodeType&&(e.push({event:"start",offset:r,node:i}),r=t(i,r),o(i).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:i}));return r}(t,0),e},mergeStreams:function(t,e,n){var i=0,s="",a=[];function c(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function l(t){s+="<"+o(t)+[].map.call(t.attributes,(function(t){return" "+t.nodeName+'="'+r(t.value)+'"'})).join("")+">"}function u(t){s+="</"+o(t)+">"}function d(t){("start"===t.event?l:u)(t.node)}for(;t.length||e.length;){var p=c();if(s+=r(n.substring(i,p[0].offset)),i=p[0].offset,p===t){a.reverse().forEach(u);do{d(p.splice(0,1)[0]),p=c()}while(p===t&&p.length&&p[0].offset===i);a.reverse().forEach(l)}else"start"===p[0].event?a.push(p[0].node):a.pop(),d(p.splice(0,1)[0])}return s+r(n.substr(i))}});const a=t=>!!t.kind;class c{constructor(t,e){this.buffer="",this.classPrefix=e.classPrefix,t.walk(this)}addText(t){this.buffer+=r(t)}openNode(t){if(!a(t))return;let e=t.kind;t.sublanguage||(e=`${this.classPrefix}${e}`),this.span(e)}closeNode(t){a(t)&&(this.buffer+="</span>")}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class l{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const e={kind:t,children:[]};this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,e){return"string"==typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach((e=>this._walk(t,e))),t.closeNode(e)),t}static _collapse(t){"string"!=typeof t&&t.children&&(t.children.every((t=>"string"==typeof t))?t.children=[t.children.join("")]:t.children.forEach((t=>{l._collapse(t)})))}}class u extends l{constructor(t){super(),this.options=t}addKeyword(t,e){""!==t&&(this.openNode(e),this.addText(t),this.closeNode())}addText(t){""!==t&&this.add(t)}addSublanguage(t,e){const n=t.root;n.kind=e,n.sublanguage=!0,this.add(n)}toHTML(){return new c(this,this.options).value()}finalize(){return!0}}function d(t){return t?"string"==typeof t?t:t.source:null}const p="[a-zA-Z]\\w*",h="[a-zA-Z_]\\w*",f="\\b\\d+(\\.\\d+)?",v="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",m="\\b(0b[01]+)",g={begin:"\\\\[\\s\\S]",relevance:0},y={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[g]},w={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[g]},b={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},x=function(t,e,n={}){var r=i({className:"comment",begin:t,end:e,contains:[]},n);return r.contains.push(b),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},S=x("//","$"),C=x("/\\*","\\*/"),k=x("#","$"),_={className:"number",begin:f,relevance:0},M={className:"number",begin:v,relevance:0},O={className:"number",begin:m,relevance:0},E={className:"number",begin:f+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},N={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[g,{begin:/\[/,end:/\]/,relevance:0,contains:[g]}]}]},T={className:"title",begin:p,relevance:0},A={className:"title",begin:h,relevance:0},D={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var P=Object.freeze({__proto__:null,IDENT_RE:p,UNDERSCORE_IDENT_RE:h,NUMBER_RE:f,C_NUMBER_RE:v,BINARY_NUMBER_RE:m,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=function(...t){return t.map((t=>d(t))).join("")}(e,/.*\b/,t.binary,/\b.*/)),i({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,e)=>{0!==t.index&&e.ignoreMatch()}},t)},BACKSLASH_ESCAPE:g,APOS_STRING_MODE:y,QUOTE_STRING_MODE:w,PHRASAL_WORDS_MODE:b,COMMENT:x,C_LINE_COMMENT_MODE:S,C_BLOCK_COMMENT_MODE:C,HASH_COMMENT_MODE:k,NUMBER_MODE:_,C_NUMBER_MODE:M,BINARY_NUMBER_MODE:O,CSS_NUMBER_MODE:E,REGEXP_MODE:N,TITLE_MODE:T,UNDERSCORE_TITLE_MODE:A,METHOD_GUARD:D,END_SAME_AS_BEGIN:function(t){return Object.assign(t,{"on:begin":(t,e)=>{e.data._beginMatch=t[1]},"on:end":(t,e)=>{e.data._beginMatch!==t[1]&&e.ignoreMatch()}})}}),R="of and for in not or if then".split(" ");function I(t){function e(e,n){return new RegExp(d(e),"m"+(t.case_insensitive?"i":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(t,e){e.position=this.position++,this.matchIndexes[this.matchAt]=e,this.regexes.push([e,t]),this.matchAt+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(t)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const t=this.regexes.map((t=>t[1]));this.matcherRe=e(function(t,e="|"){for(var n=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,r=0,i="",o=0;o<t.length;o++){var s=r+=1,a=d(t[o]);for(o>0&&(i+=e),i+="(";a.length>0;){var c=n.exec(a);if(null==c){i+=a;break}i+=a.substring(0,c.index),a=a.substring(c.index+c[0].length),"\\"===c[0][0]&&c[1]?i+="\\"+String(Number(c[1])+s):(i+=c[0],"("===c[0]&&r++)}i+=")"}return i}(t),!0),this.lastIndex=0}exec(t){this.matcherRe.lastIndex=this.lastIndex;const e=this.matcherRe.exec(t);if(!e)return null;const n=e.findIndex(((t,e)=>e>0&&void 0!==t)),r=this.matchIndexes[n];return e.splice(0,n),Object.assign(e,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(t){if(this.multiRegexes[t])return this.multiRegexes[t];const e=new n;return this.rules.slice(t).forEach((([t,n])=>e.addRule(t,n))),e.compile(),this.multiRegexes[t]=e,e}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(t,e){this.rules.push([t,e]),"begin"===e.type&&this.count++}exec(t){const e=this.getMatcher(this.regexIndex);e.lastIndex=this.lastIndex;let n=e.exec(t);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const e=this.getMatcher(0);e.lastIndex=this.lastIndex+1,n=e.exec(t)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}function o(t,e){const n=t.input[t.index-1],r=t.input[t.index+t[0].length];"."!==n&&"."!==r||e.ignoreMatch()}if(t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return function n(s,a){const c=s;if(s.compiled)return c;s.compiled=!0,s.__beforeBegin=null,s.keywords=s.keywords||s.beginKeywords;let l=null;if("object"==typeof s.keywords&&(l=s.keywords.$pattern,delete s.keywords.$pattern),s.keywords&&(s.keywords=function(t,e){var n={};"string"==typeof t?r("keyword",t):Object.keys(t).forEach((function(e){r(e,t[e])}));return n;function r(t,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");n[r[0]]=[t,$(r[0],r[1])]}))}}(s.keywords,t.case_insensitive)),s.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return c.keywordPatternRe=e(s.lexemes||l||/\w+/,!0),a&&(s.beginKeywords&&(s.begin="\\b("+s.beginKeywords.split(" ").join("|")+")(?=\\b|\\s)",s.__beforeBegin=o),s.begin||(s.begin=/\B|\b/),c.beginRe=e(s.begin),s.endSameAsBegin&&(s.end=s.begin),s.end||s.endsWithParent||(s.end=/\B|\b/),s.end&&(c.endRe=e(s.end)),c.terminator_end=d(s.end)||"",s.endsWithParent&&a.terminator_end&&(c.terminator_end+=(s.end?"|":"")+a.terminator_end)),s.illegal&&(c.illegalRe=e(s.illegal)),void 0===s.relevance&&(s.relevance=1),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map((function(t){return function(t){t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(e){return i(t,{variants:null},e)})));if(t.cached_variants)return t.cached_variants;if(B(t))return i(t,{starts:t.starts?i(t.starts):null});if(Object.isFrozen(t))return i(t);return t}("self"===t?s:t)}))),s.contains.forEach((function(t){n(t,c)})),s.starts&&n(s.starts,a),c.matcher=function(t){const e=new r;return t.contains.forEach((t=>e.addRule(t.begin,{rule:t,type:"begin"}))),t.terminator_end&&e.addRule(t.terminator_end,{type:"end"}),t.illegal&&e.addRule(t.illegal,{type:"illegal"}),e}(c),c}(t)}function B(t){return!!t&&(t.endsWithParent||B(t.starts))}function $(t,e){return e?Number(e):function(t){return R.includes(t.toLowerCase())}(t)?0:1}const z={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!hljs.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,r(this.code);let t;return this.autoDetect?(t=hljs.highlightAuto(this.code),this.detectedLanguage=t.language):(t=hljs.highlight(this.language,this.code,this.ignoreIllegals),this.detectectLanguage=this.language),t.value},autoDetect(){return!this.language||(t=this.autodetect,Boolean(t||""===t));var t},ignoreIllegals:()=>!0},render(t){return t("pre",{},[t("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}},V={install(t){t.component("highlightjs",z)}},F=r,L=i,{nodeStream:j,mergeStreams:H}=s,Z=Symbol("nomatch");var K=function(t){var r=[],i=Object.create(null),o=Object.create(null),s=[],a=!0,c=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?";const d={disableAutodetect:!0,name:"Plain text",contains:[]};var p={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:u};function h(t){return p.noHighlightRe.test(t)}function f(t,e,n,r){var i={code:e,language:t};C("before:highlight",i);var o=i.result?i.result:v(i.language,i.code,n,r);return o.code=i.code,C("after:highlight",o),o}function v(t,e,r,o){var s=e;function c(t,e){var n=S.case_insensitive?e[0].toLowerCase():e[0];return Object.prototype.hasOwnProperty.call(t.keywords,n)&&t.keywords[n]}function u(){null!=_.subLanguage?function(){if(""!==E){var t=null;if("string"==typeof _.subLanguage){if(!i[_.subLanguage])return void O.addText(E);t=v(_.subLanguage,E,!0,M[_.subLanguage]),M[_.subLanguage]=t.top}else t=m(E,_.subLanguage.length?_.subLanguage:null);_.relevance>0&&(N+=t.relevance),O.addSublanguage(t.emitter,t.language)}}():function(){if(!_.keywords)return void O.addText(E);let t=0;_.keywordPatternRe.lastIndex=0;let e=_.keywordPatternRe.exec(E),n="";for(;e;){n+=E.substring(t,e.index);const r=c(_,e);if(r){const[t,i]=r;O.addText(n),n="",N+=i,O.addKeyword(e[0],t)}else n+=e[0];t=_.keywordPatternRe.lastIndex,e=_.keywordPatternRe.exec(E)}n+=E.substr(t),O.addText(n)}(),E=""}function d(t){return t.className&&O.openNode(t.className),_=Object.create(t,{parent:{value:_}})}function h(t,e,r){let i=function(t,e){var n=t&&t.exec(e);return n&&0===n.index}(t.endRe,r);if(i){if(t["on:end"]){const r=new n(t);t["on:end"](e,r),r.ignore&&(i=!1)}if(i){for(;t.endsParent&&t.parent;)t=t.parent;return t}}if(t.endsWithParent)return h(t.parent,e,r)}function f(t){return 0===_.matcher.regexIndex?(E+=t[0],1):(D=!0,0)}function g(t){var e=t[0],r=t.rule;const i=new n(r),o=[r.__beforeBegin,r["on:begin"]];for(const n of o)if(n&&(n(t,i),i.ignore))return f(e);return r&&r.endSameAsBegin&&(r.endRe=new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),r.skip?E+=e:(r.excludeBegin&&(E+=e),u(),r.returnBegin||r.excludeBegin||(E=e)),d(r),r.returnBegin?0:e.length}function y(t){var e=t[0],n=s.substr(t.index),r=h(_,t,n);if(!r)return Z;var i=_;i.skip?E+=e:(i.returnEnd||i.excludeEnd||(E+=e),u(),i.excludeEnd&&(E=e));do{_.className&&O.closeNode(),_.skip||_.subLanguage||(N+=_.relevance),_=_.parent}while(_!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),i.returnEnd?0:e.length}var w={};function x(e,n){var i=n&&n[0];if(E+=e,null==i)return u(),0;if("begin"===w.type&&"end"===n.type&&w.index===n.index&&""===i){if(E+=s.slice(n.index,n.index+1),!a){const e=new Error("0 width match regex");throw e.languageName=t,e.badRule=w.rule,e}return 1}if(w=n,"begin"===n.type)return g(n);if("illegal"===n.type&&!r){const t=new Error('Illegal lexeme "'+i+'" for mode "'+(_.className||"<unnamed>")+'"');throw t.mode=_,t}if("end"===n.type){var o=y(n);if(o!==Z)return o}if("illegal"===n.type&&""===i)return 1;if(A>1e5&&A>3*n.index){throw new Error("potential infinite loop, way more iterations than matches")}return E+=i,i.length}var S=b(t);if(!S)throw console.error(l.replace("{}",t)),new Error('Unknown language: "'+t+'"');var C=I(S),k="",_=o||C,M={},O=new p.__emitter(p);!function(){for(var t=[],e=_;e!==S;e=e.parent)e.className&&t.unshift(e.className);t.forEach((t=>O.openNode(t)))}();var E="",N=0,T=0,A=0,D=!1;try{for(_.matcher.considerAll();;){A++,D?D=!1:_.matcher.considerAll(),_.matcher.lastIndex=T;const t=_.matcher.exec(s);if(!t)break;const e=x(s.substring(T,t.index),t);T=t.index+e}return x(s.substr(T)),O.closeAllNodes(),O.finalize(),k=O.toHTML(),{relevance:N,value:k,language:t,illegal:!1,emitter:O,top:_}}catch(e){if(e.message&&e.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:e.message,context:s.slice(T-100,T+100),mode:e.mode},sofar:k,relevance:0,value:F(s),emitter:O};if(a)return{illegal:!1,relevance:0,value:F(s),emitter:O,language:t,top:_,errorRaised:e};throw e}}function m(t,e){e=e||p.languages||Object.keys(i);var n=function(t){const e={relevance:0,emitter:new p.__emitter(p),value:F(t),illegal:!1,top:d};return e.emitter.addText(t),e}(t),r=n;return e.filter(b).filter(S).forEach((function(e){var i=v(e,t,!1);i.language=e,i.relevance>r.relevance&&(r=i),i.relevance>n.relevance&&(r=n,n=i)})),r.language&&(n.second_best=r),n}function g(t){return p.tabReplace||p.useBR?t.replace(c,(t=>"\n"===t?p.useBR?"<br>":t:p.tabReplace?t.replace(/\t/g,p.tabReplace):t)):t}function y(t){let e=null;const n=function(t){var e=t.className+" ";e+=t.parentNode?t.parentNode.className:"";const n=p.languageDetectRe.exec(e);if(n){var r=b(n[1]);return r||(console.warn(l.replace("{}",n[1])),console.warn("Falling back to no-highlight mode for this block.",t)),r?n[1]:"no-highlight"}return e.split(/\s+/).find((t=>h(t)||b(t)))}(t);if(h(n))return;C("before:highlightBlock",{block:t,language:n}),p.useBR?(e=document.createElement("div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n")):e=t;const r=e.textContent,i=n?f(n,r,!0):m(r),s=j(e);if(s.length){const t=document.createElement("div");t.innerHTML=i.value,i.value=H(s,j(t),r)}i.value=g(i.value),C("after:highlightBlock",{block:t,result:i}),t.innerHTML=i.value,t.className=function(t,e,n){var r=e?o[e]:n,i=[t.trim()];return t.match(/\bhljs\b/)||i.push("hljs"),t.includes(r)||i.push(r),i.join(" ").trim()}(t.className,n,i.language),t.result={language:i.language,re:i.relevance,relavance:i.relevance},i.second_best&&(t.second_best={language:i.second_best.language,re:i.second_best.relevance,relavance:i.second_best.relevance})}const w=()=>{if(!w.called){w.called=!0;var t=document.querySelectorAll("pre code");r.forEach.call(t,y)}};function b(t){return t=(t||"").toLowerCase(),i[t]||i[o[t]]}function x(t,{languageName:e}){"string"==typeof t&&(t=[t]),t.forEach((t=>{o[t]=e}))}function S(t){var e=b(t);return e&&!e.disableAutodetect}function C(t,e){var n=t;s.forEach((function(t){t[n]&&t[n](e)}))}Object.assign(t,{highlight:f,highlightAuto:m,fixMarkup:function(t){return console.warn("fixMarkup is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2534"),g(t)},highlightBlock:y,configure:function(t){t.useBR&&(console.warn("'useBR' option is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2559")),p=L(p,t)},initHighlighting:w,initHighlightingOnLoad:function(){window.addEventListener("DOMContentLoaded",w,!1)},registerLanguage:function(e,n){var r=null;try{r=n(t)}catch(t){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!a)throw t;console.error(t),r=d}r.name||(r.name=e),i[e]=r,r.rawDefinition=n.bind(null,t),r.aliases&&x(r.aliases,{languageName:e})},listLanguages:function(){return Object.keys(i)},getLanguage:b,registerAliases:x,requireLanguage:function(t){var e=b(t);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",t))},autoDetection:S,inherit:L,addPlugin:function(t){s.push(t)},vuePlugin:V}),t.debugMode=function(){a=!1},t.safeMode=function(){a=!0},t.versionString="10.3.1";for(const t in P)"object"==typeof P[t]&&e(P[t]);return Object.assign(t,P),t}({});t.exports=K},4941:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});const r=function(){this.__data__=[],this.size=0};var i=n(2373);const o=function(t,e){for(var n=t.length;n--;)if((0,i.Z)(t[n][0],e))return n;return-1};var s=Array.prototype.splice;const a=function(t){var e=this.__data__,n=o(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)};const c=function(t){var e=this.__data__,n=o(e,t);return n<0?void 0:e[n][1]};const l=function(t){return o(this.__data__,t)>-1};const u=function(t,e){var n=this.__data__,r=o(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=a,d.prototype.get=c,d.prototype.has=l,d.prototype.set=u;const p=d},2990:(t,e,n)=>{"use strict";n.d(e,{Z:()=>C});const r=(0,n(570).Z)(Object,"create");const i=function(){this.__data__=r?r(null):{},this.size=0};const o=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var s=Object.prototype.hasOwnProperty;const a=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(e,t)?e[t]:void 0};var c=Object.prototype.hasOwnProperty;const l=function(t){var e=this.__data__;return r?void 0!==e[t]:c.call(e,t)};const u=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=a,d.prototype.has=l,d.prototype.set=u;const p=d;var h=n(4941),f=n(6686);const v=function(){this.size=0,this.__data__={hash:new p,map:new(f.Z||h.Z),string:new p}};const m=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const g=function(t,e){var n=t.__data__;return m(e)?n["string"==typeof e?"string":"hash"]:n.map};const y=function(t){var e=g(this,t).delete(t);return this.size-=e?1:0,e};const w=function(t){return g(this,t).get(t)};const b=function(t){return g(this,t).has(t)};const x=function(t,e){var n=g(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function S(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}S.prototype.clear=v,S.prototype.delete=y,S.prototype.get=w,S.prototype.has=b,S.prototype.set=x;const C=S},4513:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}},918:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});const r=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var i=n(6986),o=n(9350),s=n(9710),a=n(3564),c=n(760),l=Object.prototype.hasOwnProperty;const u=function(t,e){var n=(0,o.Z)(t),u=!n&&(0,i.Z)(t),d=!n&&!u&&(0,s.Z)(t),p=!n&&!u&&!d&&(0,c.Z)(t),h=n||u||d||p,f=h?r(t.length,String):[],v=f.length;for(var m in t)!e&&!l.call(t,m)||h&&("length"==m||d&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||(0,a.Z)(m,v))||f.push(m);return f}},1059:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},6776:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const r=function(t){return function(e,n,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++i];if(!1===n(o[c],c,o))break}return e}}();var i=n(8130);const o=function(t,e){return t&&r(t,e,i.Z)};var s=n(5710);const a=function(t,e){return function(n,r){if(null==n)return n;if(!(0,s.Z)(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}(o)},2619:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},3791:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(1855),i=n(5429);const o=function(t,e){for(var n=0,o=(e=(0,r.Z)(e,t)).length;null!=t&&n<o;)t=t[(0,i.Z)(e[n++])];return n&&n==o?t:void 0}},1560:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(1059),i=n(9350);const o=function(t,e,n){var o=e(t);return(0,i.Z)(t)?o:(0,r.Z)(o,n(t))}},5389:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2619);const i=function(t){return t!=t};const o=function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1};const s=function(t,e,n){return e==e?o(t,e,n):(0,r.Z)(t,i,n)}},3246:(t,e,n)=>{"use strict";n.d(e,{Z:()=>lt});var r=n(4941);const i=function(){this.__data__=new r.Z,this.size=0};const o=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const s=function(t){return this.__data__.get(t)};const a=function(t){return this.__data__.has(t)};var c=n(6686),l=n(2990);const u=function(t,e){var n=this.__data__;if(n instanceof r.Z){var i=n.__data__;if(!c.Z||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new l.Z(i)}return n.set(t,e),this.size=n.size,this};function d(t){var e=this.__data__=new r.Z(t);this.size=e.size}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=s,d.prototype.has=a,d.prototype.set=u;const p=d;const h=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const f=function(t){return this.__data__.has(t)};function v(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new l.Z;++e<n;)this.add(t[e])}v.prototype.add=v.prototype.push=h,v.prototype.has=f;const m=v;const g=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};const y=function(t,e){return t.has(e)};const w=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var u=-1,d=!0,p=2&n?new m:void 0;for(o.set(t,e),o.set(e,t);++u<a;){var h=t[u],f=e[u];if(r)var v=s?r(f,h,u,e,t,o):r(h,f,u,t,e,o);if(void 0!==v){if(v)continue;d=!1;break}if(p){if(!g(e,(function(t,e){if(!y(p,e)&&(h===t||i(h,t,n,r,o)))return p.push(e)}))){d=!1;break}}else if(h!==f&&!i(h,f,n,r,o)){d=!1;break}}return o.delete(t),o.delete(e),d};var b=n(5876);const x=n(6169).Z.Uint8Array;var S=n(2373),C=n(924),k=n(9679),_=b.Z?b.Z.prototype:void 0,M=_?_.valueOf:void 0;const O=function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new x(t),new x(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,S.Z)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=C.Z;case"[object Set]":var c=1&r;if(a||(a=k.Z),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var u=w(a(t),a(e),r,i,o,s);return s.delete(t),u;case"[object Symbol]":if(M)return M.call(t)==M.call(e)}return!1};var E=n(1560),N=n(8479),T=n(8130);const A=function(t){return(0,E.Z)(t,T.Z,N.Z)};var D=Object.prototype.hasOwnProperty;const P=function(t,e,n,r,i,o){var s=1&n,a=A(t),c=a.length;if(c!=A(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:D.call(e,u)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var p=!0;o.set(t,e),o.set(e,t);for(var h=s;++l<c;){var f=t[u=a[l]],v=e[u];if(r)var m=s?r(v,f,u,e,t,o):r(f,v,u,t,e,o);if(!(void 0===m?f===v||i(f,v,n,r,o):m)){p=!1;break}h||(h="constructor"==u)}if(p&&!h){var g=t.constructor,y=e.constructor;g==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(t),o.delete(e),p};var R=n(7262),I=n(9350),B=n(9710),$=n(760),z="[object Arguments]",V="[object Array]",F="[object Object]",L=Object.prototype.hasOwnProperty;const j=function(t,e,n,r,i,o){var s=(0,I.Z)(t),a=(0,I.Z)(e),c=s?V:(0,R.Z)(t),l=a?V:(0,R.Z)(e),u=(c=c==z?F:c)==F,d=(l=l==z?F:l)==F,h=c==l;if(h&&(0,B.Z)(t)){if(!(0,B.Z)(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new p),s||(0,$.Z)(t)?w(t,e,n,r,i,o):O(t,e,c,n,r,i,o);if(!(1&n)){var f=u&&L.call(t,"__wrapped__"),v=d&&L.call(e,"__wrapped__");if(f||v){var m=f?t.value():t,g=v?e.value():e;return o||(o=new p),i(m,g,n,r,o)}}return!!h&&(o||(o=new p),P(t,e,n,r,i,o))};var H=n(3195);const Z=function t(e,n,r,i,o){return e===n||(null==e||null==n||!(0,H.Z)(e)&&!(0,H.Z)(n)?e!=e&&n!=n:j(e,n,r,i,t,o))};const K=function(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=Object(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var c=(a=n[i])[0],l=t[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{var d=new p;if(r)var h=r(l,u,c,t,e,d);if(!(void 0===h?Z(u,l,3,r,d):h))return!1}}return!0};var W=n(9122);const J=function(t){return t==t&&!(0,W.Z)(t)};const U=function(t){for(var e=(0,T.Z)(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,J(i)]}return e};const q=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};const X=function(t){var e=U(t);return 1==e.length&&e[0][2]?q(e[0][0],e[0][1]):function(n){return n===t||K(n,t,e)}};var G=n(7398);const Y=function(t,e){return null!=t&&e in Object(t)};var Q=n(7754);const tt=function(t,e){return null!=t&&(0,Q.Z)(t,e,Y)};var et=n(8633),nt=n(5429);const rt=function(t,e){return(0,et.Z)(t)&&J(e)?q((0,nt.Z)(t),e):function(n){var r=(0,G.Z)(n,t);return void 0===r&&r===e?tt(n,t):Z(e,r,3)}};var it=n(3305);const ot=function(t){return function(e){return null==e?void 0:e[t]}};var st=n(3791);const at=function(t){return function(e){return(0,st.Z)(e,t)}};const ct=function(t){return(0,et.Z)(t)?ot((0,nt.Z)(t)):at(t)};const lt=function(t){return"function"==typeof t?t:null==t?it.Z:"object"==typeof t?(0,I.Z)(t)?rt(t[0],t[1]):X(t):ct(t)}},9143:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(6776),i=n(5710);const o=function(t,e){var n=-1,o=(0,i.Z)(t)?Array(t.length):[];return(0,r.Z)(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},2029:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(570);const i=function(){try{var t=(0,r.Z)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const o=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var s=n(2373),a=Object.prototype.hasOwnProperty;const c=function(t,e,n){var r=t[e];a.call(t,e)&&(0,s.Z)(r,n)&&(void 0!==n||e in t)||o(t,e,n)};var l=n(1855),u=n(3564),d=n(9122),p=n(5429);const h=function(t,e,n,r){if(!(0,d.Z)(t))return t;for(var i=-1,o=(e=(0,l.Z)(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var h=(0,p.Z)(e[i]),f=n;if(i!=s){var v=a[h];void 0===(f=r?r(v,h,a):void 0)&&(f=(0,d.Z)(v)?v:(0,u.Z)(e[i+1])?[]:{})}c(a,h,f),a=a[h]}return t}},1855:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(9350),i=n(8633),o=n(2990);function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(s.Cache||o.Z),n}s.Cache=o.Z;const a=s;var c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g;const u=function(t){var e=a(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(c,(function(t,n,r,i){e.push(r?i.replace(l,"$1"):n||t)})),e}));var d=n(3633);const p=function(t,e){return(0,r.Z)(t)?t:(0,i.Z)(t,e)?[t]:u((0,d.Z)(t))}},8479:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4513),i=n(9756),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(t){return null==t?[]:(t=Object(t),(0,r.Z)(s(t),(function(e){return o.call(t,e)})))}:i.Z},7754:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(1855),i=n(6986),o=n(9350),s=n(3564),a=n(523),c=n(5429);const l=function(t,e,n){for(var l=-1,u=(e=(0,r.Z)(e,t)).length,d=!1;++l<u;){var p=(0,c.Z)(e[l]);if(!(d=null!=t&&n(t,p)))break;t=t[p]}return d||++l!=u?d:!!(u=null==t?0:t.length)&&(0,a.Z)(u)&&(0,s.Z)(p,u)&&((0,o.Z)(t)||(0,i.Z)(t))}},3564:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},8633:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(9350),i=n(7828),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(t,e){if((0,r.Z)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!(0,i.Z)(t))||(s.test(t)||!o.test(t)||null!=e&&t in Object(e))}},924:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},9679:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},5429:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(7828);const i=function(t){if("string"==typeof t||(0,r.Z)(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},6152:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(9122),i=n(6169);const o=function(){return i.Z.Date.now()};var s=n(7422),a=Math.max,c=Math.min;const l=function(t,e,n){var i,l,u,d,p,h,f=0,v=!1,m=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=i,r=l;return i=l=void 0,f=e,d=t.apply(r,n)}function w(t){return f=t,p=setTimeout(x,e),v?y(t):d}function b(t){var n=t-h;return void 0===h||n>=e||n<0||m&&t-f>=u}function x(){var t=o();if(b(t))return S(t);p=setTimeout(x,function(t){var n=e-(t-h);return m?c(n,u-(t-f)):n}(t))}function S(t){return p=void 0,g&&i?y(t):(i=l=void 0,d)}function C(){var t=o(),n=b(t);if(i=arguments,l=this,h=t,n){if(void 0===p)return w(h);if(m)return clearTimeout(p),p=setTimeout(x,e),y(h)}return void 0===p&&(p=setTimeout(x,e)),d}return e=(0,s.Z)(e)||0,(0,r.Z)(n)&&(v=!!n.leading,u=(m="maxWait"in n)?a((0,s.Z)(n.maxWait)||0,e):u,g="trailing"in n?!!n.trailing:g),C.cancel=function(){void 0!==p&&clearTimeout(p),f=0,i=h=l=p=void 0},C.flush=function(){return void 0===p?d:S(o())},C}},2373:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){return t===e||t!=t&&e!=e}},8438:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(3246),i=n(5710),o=n(8130);const s=function(t){return function(e,n,s){var a=Object(e);if(!(0,i.Z)(e)){var c=(0,r.Z)(n,3);e=(0,o.Z)(e),n=function(t){return c(a[t],t,a)}}var l=t(e,n,s);return l>-1?a[c?e[l]:l]:void 0}};var a=n(2619),c=n(2758),l=Math.max;const u=s((function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=null==n?0:(0,c.Z)(n);return o<0&&(o=l(i+o,0)),(0,a.Z)(t,(0,r.Z)(e,3),o)}))},7398:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(3791);const i=function(t,e,n){var i=null==t?void 0:(0,r.Z)(t,e);return void 0===i?n:i}},3305:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return t}},5288:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return null==t}},8130:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(918),i=n(9169),o=n(5710);const s=function(t){return(0,o.Z)(t)?(0,r.Z)(t):(0,i.Z)(t)}},7684:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(2029);const i=function(t,e,n){return null==t?t:(0,r.Z)(t,e,n)}},9756:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(){return[]}},8325:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var r=n(3503),i=n(6581),o=n(5389);const s=function(t,e){for(var n=t.length;n--&&(0,o.Z)(e,t[n],0)>-1;);return n};const a=function(t,e){for(var n=-1,r=t.length;++n<r&&(0,o.Z)(e,t[n],0)>-1;);return n};var c=n(945),l=n(3633),u=/^\s+|\s+$/g;const d=function(t,e,n){if((t=(0,l.Z)(t))&&(n||void 0===e))return t.replace(u,"");if(!t||!(e=(0,r.Z)(e)))return t;var o=(0,c.Z)(t),d=(0,c.Z)(e),p=a(o,d),h=s(o,d)+1;return(0,i.Z)(o,p,h).join("")}},6470:(t,e,n)=>{"use strict";var r=n(7802),i=n(1102);a.prototype.addText=function(t){var e,n,r=this.stack;if(""===t)return;e=r[r.length-1],(n=e.children[e.children.length-1])&&"text"===n.type?n.value+=t:e.children.push({type:"text",value:t})},a.prototype.addKeyword=function(t,e){this.openNode(e),this.addText(t),this.closeNode()},a.prototype.addSublanguage=function(t,e){var n=this.stack,r=n[n.length-1],i=t.rootNode.children,o=e?{type:"element",tagName:"span",properties:{className:[e]},children:i}:i;r.children=r.children.concat(o)},a.prototype.openNode=function(t){var e=this.stack,n=this.options.classPrefix+t,r=e[e.length-1],i={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(i),e.push(i)},a.prototype.closeNode=function(){this.stack.pop()},a.prototype.closeAllNodes=c,a.prototype.finalize=c,a.prototype.toHTML=function(){return""};var o="hljs-";function s(t,e,n){var s,c=r.configure({}),l=(n||{}).prefix;if("string"!=typeof t)throw i("Expected `string` for name, got `%s`",t);if(!r.getLanguage(t))throw i("Unknown language: `%s` is not registered",t);if("string"!=typeof e)throw i("Expected `string` for value, got `%s`",e);if(null==l&&(l=o),r.configure({__emitter:a,classPrefix:l}),s=r.highlight(t,e,!0),r.configure(c||{}),s.errorRaised)throw s.errorRaised;return{relevance:s.relevance,language:s.language,value:s.emitter.rootNode.children}}function a(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function c(){}},2778:(t,e,n)=>{"use strict";n.d(e,{YR:()=>k,QF:()=>y,uo:()=>p,xb:()=>u,uJ:()=>m,w9:()=>g,ym:()=>v});var r=n(1081),i=n(8638),o=n(6922);function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function c(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function l(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function u(t,e){var n=t.selection,i=n.$from,o=n.$to,s=i.blockRange(o),a=s&&(0,r.k9)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function d(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function p(t,e){var n=t.selection,r=n.$head,i=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(i))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=d(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var l=r.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(o.Selection.near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0}function h(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof o.NodeSelection&&t.selection.node.isBlock)return!(!s.parentOffset||!(0,r.Ax)(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var c=a.parentOffset==a.parent.content.size,l=t.tr;t.selection instanceof o.TextSelection&&l.deleteSelection();var u=0==s.depth?null:d(s.node(-1).contentMatchAt(s.indexAfter(-1))),p=c&&u?[{type:u}]:null,h=(0,r.Ax)(l.doc,l.mapping.map(s.pos),1,p);p||h||!(0,r.Ax)(l.doc,l.mapping.map(s.pos),1,u&&[{type:u}])||(p=[{type:u}],h=!0),h&&(l.split(l.mapping.map(s.pos),1,p),c||s.parentOffset||s.parent.type==u||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),i.Fragment.from(u.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),u)),e(l.scrollIntoView())}return!0}function f(t,e,n){var s,a,c=e.nodeBefore,l=e.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(t,e,n){var i=e.nodeBefore,o=e.nodeAfter,s=e.index();return!(!(i&&o&&i.type.compatibleContent(o.type))||(!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!o.isTextblock&&!(0,r.Mn)(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var u=e.pos+l.nodeSize,d=i.Fragment.empty,p=s.length-1;p>=0;p--)d=i.Fragment.from(s[p].create(null,d));d=i.Fragment.from(c.copy(d));var h=t.tr.step(new r.FC(e.pos-1,u,e.pos,u,new i.Slice(d,1,0),s.length,!0)),f=u+2*s.length;(0,r.Mn)(h.doc,f)&&h.join(f),n(h.scrollIntoView())}return!0}var v=o.Selection.findFrom(e,1),m=v&&v.$from.blockRange(v.$to),g=m&&(0,r.k9)(m);return null!=g&&g>=e.depth&&(n&&n(t.tr.lift(m,g).scrollIntoView()),!0)}function v(t,e){return function(n,i){var o=n.selection,s=o.$from,a=o.$to,c=s.blockRange(a),l=c&&(0,r.nd)(c,t,e);return!!l&&(i&&i(n.tr.wrap(c,l).scrollIntoView()),!0)}}function m(t,e){return function(n,r){var i=n.selection,o=i.from,s=i.to,a=!1;return n.doc.nodesBetween(o,s,(function(r,i){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var o=n.doc.resolve(i),s=o.index();a=o.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(o,s,t,e).scrollIntoView()),!0)}}function g(t,e){return function(n,r){var i=n.selection,o=i.empty,s=i.$cursor,a=i.ranges;if(o&&!s||!function(t,e,n){for(var r=function(r){var i=e[r],o=i.$from,s=i.$to,a=0==o.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},i=0;i<e.length;i++){var o=r(i);if(o)return o.v}return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,l=n.tr,u=0;!c&&u<a.length;u++){var d=a[u],p=d.$from,h=d.$to;c=n.doc.rangeHasMark(p.pos,h.pos,t)}for(var f=0;f<a.length;f++){var v=a[f],m=v.$from,g=v.$to;c?l.removeMark(m.pos,g.pos,t):l.addMark(m.pos,g.pos,t.create(e))}r(l.scrollIntoView())}return!0}}function y(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}var w=y(s,(function(t,e,n){var i=t.selection.$cursor;if(!i||(n?!n.endOfTextblock("backward",t):i.parentOffset>0))return!1;var s=c(i);if(!s){var l=i.blockRange(),u=l&&(0,r.k9)(l);return null!=u&&(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}var d=s.nodeBefore;if(!d.type.spec.isolating&&f(t,s,e))return!0;if(0==i.parent.content.size&&(a(d,"end")||o.NodeSelection.isSelectable(d))){if(e){var p=t.tr.deleteRange(i.before(),i.after());p.setSelection(a(d,"end")?o.Selection.findFrom(p.doc.resolve(p.mapping.map(s.pos,-1)),-1):o.NodeSelection.create(p.doc,s.pos-d.nodeSize)),e(p.scrollIntoView())}return!0}return!(!d.isAtom||s.depth!=i.depth-1)&&(e&&e(t.tr.delete(s.pos-d.nodeSize,s.pos).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,i=r.$head,s=i;if(!r.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=c(i)}var a=s&&s.nodeBefore;return!(!a||!o.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(o.NodeSelection.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)})),b=y(s,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var i=l(r);if(!i)return!1;var s=i.nodeAfter;if(f(t,i,e))return!0;if(0==r.parent.content.size&&(a(s,"start")||o.NodeSelection.isSelectable(s))){if(e){var c=t.tr.deleteRange(r.before(),r.after());c.setSelection(a(s,"start")?o.Selection.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):o.NodeSelection.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}return!(!s.isAtom||i.depth!=r.depth-1)&&(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,i=r.$head,s=i;if(!r.empty)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=l(i)}var a=s&&s.nodeAfter;return!(!a||!o.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(o.NodeSelection.create(t.doc,s.pos)).scrollIntoView()),!0)})),x={Enter:y((function(t,e){var n=t.selection,r=n.$head,i=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,i=n.$to;if(r.parent.inlineContent||i.parent.inlineContent)return!1;var s=d(r.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(o.TextSelection.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var i=n.before();if((0,r.Ax)(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}var o=n.blockRange(),s=o&&(0,r.k9)(o);return null!=s&&(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)}),h),"Mod-Enter":p,Backspace:w,"Mod-Backspace":w,Delete:b,"Mod-Delete":b,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new o.AllSelection(t.doc))),!0}},S={"Ctrl-h":x.Backspace,"Alt-Backspace":x["Mod-Backspace"],"Ctrl-d":x.Delete,"Ctrl-Alt-Backspace":x["Mod-Delete"],"Alt-Delete":x["Mod-Delete"],"Alt-d":x["Mod-Delete"]};for(var C in x)S[C]=x[C];var k=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?S:x},896:(t,e,n)=>{"use strict";n.d(e,{VK:()=>o,Hw:()=>s,zK:()=>u,dU:()=>c,S0:()=>l});var r=n(6922),i=n(1081),o=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,i){var o=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);o+=e[0].slice(s+e[1].length);var a=(r+=s)-i;a>0&&(o=e[0].slice(s-a,s)+o,r=i)}return t.tr.insertText(o,r,i)}):e};function s(t){var e=t.rules,n=new r.Plugin({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,i,o){return a(t,r,i,o,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&a(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}function a(t,e,n,r,i,o){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+r,l=0;l<i.length;l++){var u=i[l].match.exec(c),d=u&&i[l].handler(s,u,e-(u[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(o,{transform:d,from:e,to:n,text:r})),!0}return!1}function c(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var i=n[r],o=void 0;if(i.spec.isInputRules&&(o=i.getState(t))){if(e){for(var s=t.tr,a=o.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var l=s.doc.resolve(o.from).marks();e(s.replaceWith(o.from,o.to,t.schema.text(o.text,l)))}return!0}}return!1}new o(/--$/,"—"),new o(/\.\.\.$/,"…"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new o(/"$/,"”"),new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new o(/'$/,"’");function l(t,e,n,r){return new o(t,(function(t,o,s,a){var c=n instanceof Function?n(o):n,l=t.tr.delete(s,a),u=l.doc.resolve(s).blockRange(),d=u&&(0,i.nd)(u,e,c);if(!d)return null;l.wrap(u,d);var p=l.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&(0,i.Mn)(l.doc,s-1)&&(!r||r(o,p))&&l.join(s-1),l}))}function u(t,e,n){return new o(t,(function(t,r,i,o){var s=t.doc.resolve(i),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(i,o).setBlockType(i,i,e,a):null}))}},4751:(t,e,n)=>{"use strict";n.d(e,{$:()=>y,h:()=>g});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=o&&(c||+o[1]<57)||a&&c,d=0;d<10;d++)r[48+d]=r[96+d]=String(d);for(d=1;d<=24;d++)r[d+111]="F"+d;for(d=65;d<=90;d++)r[d]=String.fromCharCode(d+32),i[d]=String.fromCharCode(d);for(var p in r)i.hasOwnProperty(p)||(i[p]=r[p]);var h=n(6922),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function v(t){var e,n,r,i,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(var a=0;a<o.length-1;a++){var c=o[a];if(/^(cmd|meta|m)$/i.test(c))i=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);f?i=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),i&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function m(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function g(t){return new h.Plugin({props:{handleKeyDown:y(t)}})}function y(t){var e=function(t){var e=Object.create(null);for(var n in t)e[v(n)]=t[n];return e}(t);return function(t,n){var o,a=function(t){var e=!(u&&(t.ctrlKey||t.altKey||t.metaKey)||(s||l)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?i:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),c=1==a.length&&" "!=a,d=e[m(a,n,!c)];if(d&&d(t.state,t.dispatch,t))return!0;if(c&&(n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(o=r[n.keyCode])&&o!=a){var p=e[m(o,n,!0)];if(p&&p(t.state,t.dispatch,t))return!0}else if(c&&n.shiftKey){var h=e[m(a,n,!0)];if(h&&h(t.state,t.dispatch,t))return!0}return!1}}},8638:(t,e,n)=>{"use strict";function r(t){this.content=t}n.r(e),n.d(e,{ContentMatch:()=>V,DOMParser:()=>st,DOMSerializer:()=>yt,Fragment:()=>a,Mark:()=>p,MarkType:()=>rt,Node:()=>I,NodeRange:()=>D,NodeType:()=>Q,ReplaceError:()=>h,ResolvedPos:()=>O,Schema:()=>it,Slice:()=>f}),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,o=i.find(t),s=i.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var i=this.remove(e),o=i.content.slice(),s=i.find(t);return o.splice(-1==s?o.length:s,0,e,n),new r(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};const i=r;function o(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){var c=o(i.content,s.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function s(t,e,n,r){for(var i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};var a=t.child(--i),c=e.child(--o),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){for(var u=0,d=Math.min(a.text.length,c.text.length);u<d&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var p=s(a.content,c.content,n-1,r-1);if(p)return p}n-=l,r-=l}else n-=l,r-=l}}var a=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},c={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};a.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,i,o)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},a.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},a.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)}),0),i},a.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new a(r,this.size+t.size)},a.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var i=0,o=0;o<e;i++){var s=this.content[i],c=o+s.nodeSize;c>t&&((o<t||c>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),r+=s.nodeSize),o=c}return new a(n,r)},a.prototype.cutByIndex=function(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))},a.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,i)},a.prototype.addToStart=function(t){return new a([t].concat(this.content),this.size+t.nodeSize)},a.prototype.addToEnd=function(t){return new a(this.content.concat(t),this.size+t.nodeSize)},a.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},c.firstChild.get=function(){return this.content.length?this.content[0]:null},c.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},c.childCount.get=function(){return this.content.length},a.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},a.prototype.maybeChild=function(t){return this.content[t]},a.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},a.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),o(this,t,e)},a.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),s(this,t,e,n)},a.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return u(0,t);if(t==this.size)return u(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?u(n+1,i):u(n,r);r=i}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},a.fromJSON=function(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))},a.fromArray=function(t){if(!t.length)return a.empty;for(var e,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new a(e||t,n)},a.from=function(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(a.prototype,c);var l={index:0,offset:0};function u(t,e){return l.index=t,l.offset=e,l}function d(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!d(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e)||!d(t[i],e[i]))return!1;for(var o in e)if(!(o in t))return!1}return!0}a.empty=new a([],0);var p=function(t,e){this.type=t,this.attrs=e};function h(t){var e=Error.call(this,t);return e.__proto__=h.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&d(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},p.none=[],h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="ReplaceError";var f=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},v={size:{configurable:!0}};function m(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),c=a.index,l=a.offset;if(o==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(m(s.content,e-o-1,n-o-1)))}function g(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=g(a.content,e-s-1,n);return c&&t.replaceChild(o,a.copy(c))}function y(t,e,n){if(n.openStart>t.depth)throw new h("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new h("Inconsistent open depths");return w(t,e,n,0)}function w(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=w(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var c=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),i=n-1;i>=0;i--)r=e.node(i).copy(a.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return k(o,_(t,c.start,c.end,e,r))}var l=t.parent,u=l.content;return k(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return k(o,M(t,e,r))}function b(t,e){if(!e.type.compatibleContent(t.type))throw new h("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return b(r,e.node(n)),r}function S(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function C(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(S(t.nodeAfter,r),o++));for(var a=o;a<s;a++)S(i.child(a),r);e&&e.depth==n&&e.textOffset&&S(e.nodeBefore,r)}function k(t,e){if(!t.type.validContent(e))throw new h("Invalid content for node "+t.type.name);return t.copy(e)}function _(t,e,n,r,i){var o=t.depth>i&&x(t,e,i+1),s=r.depth>i&&x(n,r,i+1),c=[];return C(null,t,i,c),o&&s&&e.index(i)==n.index(i)?(b(o,s),S(k(o,_(t,e,n,r,i+1)),c)):(o&&S(k(o,M(t,e,i+1)),c),C(e,n,i,c),s&&S(k(s,M(n,r,i+1)),c)),C(r,null,i,c),new a(c)}function M(t,e,n){var r=[];(C(null,t,n,r),t.depth>n)&&S(k(x(t,e,n+1),M(t,e,n+1)),r);return C(e,null,n,r),new a(r)}v.size.get=function(){return this.content.size-this.openStart-this.openEnd},f.prototype.insertAt=function(t,e){var n=g(this.content,t+this.openStart,e,null);return n&&new f(n,this.openStart,this.openEnd)},f.prototype.removeBetween=function(t,e){return new f(m(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},f.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},f.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},f.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},f.fromJSON=function(t,e){if(!e)return f.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)},f.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new f(t,n,r)},Object.defineProperties(f.prototype,v),f.empty=new f(a.empty,0,0);var O=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},E={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};O.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},O.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},O.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},O.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},O.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},O.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},O.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},O.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},E.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},O.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,i=0;i<t;i++)r+=n.child(i).nodeSize;return r},O.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},O.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},O.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},O.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new D(this,t,n)},O.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},O.prototype.max=function(t){return t.pos>this.pos?t:this},O.prototype.min=function(t){return t.pos<this.pos?t:this},O.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},O.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,c=s.offset,l=i-c;if(n.push(o,a,r+c),!l)break;if((o=o.child(a)).isText)break;i=l-1,r+=c+1}return new O(e,n,i)},O.resolveCached=function(t,e){for(var n=0;n<N.length;n++){var r=N[n];if(r.pos==e&&r.doc==t)return r}var i=N[T]=O.resolve(t,e);return T=(T+1)%A,i},Object.defineProperties(O.prototype,E);var N=[],T=0,A=12,D=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},P={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};P.start.get=function(){return this.$from.before(this.depth+1)},P.end.get=function(){return this.$to.after(this.depth+1)},P.parent.get=function(){return this.$from.node(this.depth)},P.startIndex.get=function(){return this.$from.index(this.depth)},P.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(D.prototype,P);var R=Object.create(null),I=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||a.empty,this.marks=r||p.none},B={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};B.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},B.childCount.get=function(){return this.content.childCount},I.prototype.child=function(t){return this.content.child(t)},I.prototype.maybeChild=function(t){return this.content.maybeChild(t)},I.prototype.forEach=function(t){this.content.forEach(t)},I.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},I.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},B.textContent.get=function(){return this.textBetween(0,this.content.size,"")},I.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},B.firstChild.get=function(){return this.content.firstChild},B.lastChild.get=function(){return this.content.lastChild},I.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},I.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},I.prototype.hasMarkup=function(t,e,n){return this.type==t&&d(this.attrs,e||t.defaultAttrs||R)&&p.sameSet(this.marks,n||p.none)},I.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},I.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},I.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},I.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return f.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new f(a,r.depth-o,i.depth-o)},I.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},I.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(!(e=e.maybeChild(r)))return null;if(i==t||e.isText)return e;t-=i+1}},I.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},I.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},I.prototype.resolve=function(t){return O.resolveCached(this,t)},I.prototype.resolveNoCache=function(t){return O.resolve(this,t)},I.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},B.isBlock.get=function(){return this.type.isBlock},B.isTextblock.get=function(){return this.type.isTextblock},B.inlineContent.get=function(){return this.type.inlineContent},B.isInline.get=function(){return this.type.isInline},B.isText.get=function(){return this.type.isText},B.isLeaf.get=function(){return this.type.isLeaf},B.isAtom.get=function(){return this.type.isAtom},I.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),z(this.marks,t)},I.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},I.prototype.canReplace=function(t,e,n,r,i){void 0===n&&(n=a.empty),void 0===r&&(r=0),void 0===i&&(i=n.childCount);var o=this.contentMatchAt(t).matchFragment(n,r,i),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var c=r;c<i;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},I.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},I.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},I.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},I.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},I.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(I.prototype,B);var $=function(t){function e(e,n,r,i){if(t.call(this,e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(I);function z(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var V=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},F={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};V.parse=function(t,e){var n=new L(t,e);if(null==n.next)return V.empty;var r=H(n);n.next&&n.err("Unexpected trailing text");var i=function(t){var e=Object.create(null);return n(q(t,0));function n(r){var i=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];q(t,r).forEach((function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var o=e[r.join(",")]=new V(r.indexOf(t.length-1)>-1),s=0;s<i.length;s+=2){var a=i[s+1].sort(U);o.next.push(i[s],e[a.join(",")]||n(a))}return o}}(function(t){var e=[[]];return i(o(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((function(t){return t.to=e}))}function o(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(o(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=o(t.exprs[s],e);if(s==t.exprs.length-1)return a;i(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),i(o(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return i(o(t.expr,e),l),i(o(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(o(t.expr,e));if("range"==t.type){for(var u=e,d=0;d<t.min;d++){var p=n();i(o(t.expr,u),p),u=p}if(-1==t.max)i(o(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var f=n();r(u,f),i(o(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var c=i.next[a],l=i.next[a+1];s.push(c.name),!o||c.isText||c.hasRequiredAttrs()||(o=!1),-1==r.indexOf(l)&&r.push(l)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i},V.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},V.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},F.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},F.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},V.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},V.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function i(o,s){var c=o.matchFragment(t,n);if(c&&(!e||c.validEnd))return a.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<o.next.length;l+=2){var u=o.next[l],d=o.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var p=i(d,s.concat(u));if(p)return p}}}(this,[])},V.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},V.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var c=i.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},F.edgeCount.get=function(){return this.next.length>>1},V.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},V.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r})).join("\n")},Object.defineProperties(V.prototype,F),V.empty=new V(!0);var L=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},j={next:{configurable:!0}};function H(t){var e=[];do{e.push(Z(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Z(t){var e=[];do{e.push(K(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function K(t){for(var e=function(t){if(t.eat("(")){var e=H(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}0==i.length&&t.err("No node type or group '"+e+"' found");return i}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=J(t,e)}return e}function W(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function J(t,e){var n=W(t),r=n;return t.eat(",")&&(r="}"!=t.next?W(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function U(t,e){return e-t}function q(t,e){var n=[];return function e(r){var i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(U)}function X(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function G(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function Y(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new et(t[n]);return e}j.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},L.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,j);var Q=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=Y(n.attrs),this.defaultAttrs=X(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},tt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};tt.isInline.get=function(){return!this.isBlock},tt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},tt.isLeaf.get=function(){return this.contentMatch==V.empty},tt.isAtom.get=function(){return this.isLeaf||this.spec.atom},Q.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Q.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Q.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:G(this.attrs,t)},Q.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(t),a.from(e),p.setFrom(n))},Q.prototype.createChecked=function(t,e,n){if(e=a.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new I(this,this.computeAttrs(t),e,p.setFrom(n))},Q.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=a.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var i=this.contentMatch.matchFragment(e).fillBefore(a.empty,!0);return i?new I(this,t,e.append(i),p.setFrom(n)):null},Q.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Q.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Q.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Q.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},Q.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Q(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Q.prototype,tt);var et=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},nt={isRequired:{configurable:!0}};nt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(et.prototype,nt);var rt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=Y(r.attrs),this.rank=e,this.excluded=null;var i=X(this.attrs);this.instance=i&&new p(this,i)};rt.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,G(this.attrs,t))},rt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,i){return n[t]=new rt(t,r++,e,i)})),n},rt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},rt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},rt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var it=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=i.from(t.nodes),this.spec.marks=i.from(t.marks),this.nodes=Q.compile(this.spec.nodes,this),this.marks=rt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=n[s]||(n[s]=V.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ot(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:ot(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ot(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var c=t.marks[a];("_"==i||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}it.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Q))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},it.prototype.text=function(t,e){var n=this.nodes.text;return new $(n,n.defaultAttrs,t,p.setFrom(e))},it.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},it.prototype.nodeFromJSON=function(t){return I.fromJSON(this,t)},it.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},it.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var st=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};st.prototype.parse=function(t,e){void 0===e&&(e={});var n=new pt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},st.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new pt(this,e,!0);return n.addAll(t,null,e.from,e.to),f.maxOpen(n.finish())},st.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ft(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},st.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},st.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r];if((null==i.priority?50:i.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=vt(t)),t.mark=e}))};for(var i in t.marks)r(i);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach((function(t){n(t=vt(t)),t.node=s}));return e},st.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new st(t,st.schemaRules(t)))};var at={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ct={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lt={ol:!0,ul:!0};function ut(t){return(t?1:0)|("full"===t?2:0)}var dt=function(t,e,n,r,i,o,s){this.type=t,this.attrs=e,this.solid=i,this.match=o||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=p.none,this.pendingMarks=r,this.stashMarks=[]};dt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(a.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},dt.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=a.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},dt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(this.stashMarks[e].type==t)return this.stashMarks.splice(e,1)[0]},dt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];if((this.type?this.type.allowsMarkType(r.type):mt(r.type,t))&&!r.isInSet(this.activeMarks)){var i=gt(r,this.activeMarks);i&&this.stashMarks.push(i),this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks)}}};var pt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,i=e.topNode,o=ut(e.preserveWhitespace)|(n?4:0);r=i?new dt(i.type,i.attrs,p.none,p.none,!0,e.topMatch||i.type.contentMatch,o):new dt(n?null:t.schema.topNodeType,null,p.none,p.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},ht={top:{configurable:!0},currentPos:{configurable:!0}};function ft(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function vt(t){var e={};for(var n in t)e[n]=t[n];return e}function mt(t,e){var n=e.schema.nodes,r=function(r){var i=n[r];if(i.allowsMarkType(t)){var o=[],s=function(t){o.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),i=r.type,a=r.next;if(i==e)return!0;if(o.indexOf(a)<0&&s(a))return!0}};return s(i.contentMatch)?{v:!0}:void 0}};for(var i in n){var o=r(i);if(o)return o.v}}function gt(t,e){for(var n=0;n<e.length;n++)if(t.type==e[n].type)return e[n]}ht.top.get=function(){return this.nodes[this.open]},pt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var i=0;i<n.length;i++)this.addPendingMark(n[i]);if(this.addElement(t),null!=n)for(var o=0;o<n.length;o++)this.removePendingMark(n[o],r)}},pt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)2&n.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},pt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();lt.hasOwnProperty(e)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&lt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ct.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,i=this.top,o=this.needsBlock;if(at.hasOwnProperty(e))r=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(t,n)},pt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},pt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},pt.prototype.addElementByRule=function(t,e){var n,r,i,o=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return o.insertNode(t)}));else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),i&&this.removePendingMark(i,s)},pt.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&at.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},pt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},pt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},pt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},pt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t,e);var o=null==r?-5&i.options:ut(r);4&i.options&&0==i.content.length&&(o|=4),this.nodes.push(new dt(t,e,i.activeMarks,i.pendingMarks,n,null,o)),this.open++},pt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},pt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},pt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},ht.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},pt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},pt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},pt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},pt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},pt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},pt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},pt.prototype.addPendingMark=function(t){var e=gt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},pt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var i=r.popFromStashMark(t.type);i&&(r.activeMarks=i.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(pt.prototype,ht);var yt=function(t,e){this.nodes=t||{},this.marks=e||{}};function wt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}yt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var i=n,o=null;return t.forEach((function(t){if(o||t.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<t.marks.length;){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(o.push(c,i),i.appendChild(l.dom),i=l.contentDOM||l.dom)}}i.appendChild(r.serializeNode(t,e))})),n},yt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=yt.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},yt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},yt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&yt.renderSpec(bt(n),r(t,e))},yt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],i=r.indexOf(" ");i>0&&(n=r.slice(0,i),r=r.slice(i+1));var o=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var d=c;d<e.length;d++){var p=e[d];if(0===p){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=yt.renderSpec(t,p,n),f=h.dom,v=h.contentDOM;if(s.appendChild(f),v){if(o)throw new RangeError("Multiple content holes");o=v}}return{dom:s,contentDOM:o}},yt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new yt(this.nodesFromSchema(t),this.marksFromSchema(t)))},yt.nodesFromSchema=function(t){var e=wt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},yt.marksFromSchema=function(t){return wt(t.marks)}},6922:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AllSelection:()=>h,EditorState:()=>S,NodeSelection:()=>d,Plugin:()=>M,PluginKey:()=>N,Selection:()=>s,SelectionRange:()=>c,TextSelection:()=>l,Transaction:()=>g});var r=n(8638),i=n(1081),o=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r.Slice.empty);for(var n=e.content.lastChild,i=null,o=0;o<e.openEnd;o++)i=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,d=l.$to,p=t.mapping.slice(s);t.replaceRange(p.map(u.pos),p.map(d.pos),c?r.Slice.empty:e),0==c&&m(t,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,i=0;i<r.length;i++){var o=r[i],s=o.$from,a=o.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);i?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),m(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new l(t):v(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var i=t.depth-1;i>=0;i--){var o=e<0?v(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):v(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(o)return o}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return v(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return v(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=o[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in o)throw new RangeError("Duplicate use of selection JSON ID "+t);return o[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},l=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));if(!i.parent.inlineContent)return t.near(i);var o=n.resolve(r.map(this.anchor));return new e(o.parent.inlineContent?o:i,i)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),t.prototype.replace.call(this,e,n),n==r.Slice.empty){var i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new u(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,i){var o=n.pos-r.pos;if(i&&!o||(i=o>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,i,!0)||t.findFrom(r,-i,!0);if(!s)return t.near(r,i);r=s.$head}return n.parent.inlineContent||(0==o||(n=(t.findFrom(n,-i,!0)||t.findFrom(n,i,!0)).$anchor).pos<r.pos!=o<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",l);var u=function(t,e){this.anchor=t,this.head=e};u.prototype.map=function(t){return new u(t.map(this.anchor),t.map(this.head))},u.prototype.resolve=function(t){return l.between(t.resolve(this.anchor),t.resolve(this.head))};var d=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=r.mapResult(this.anchor),o=i.deleted,s=i.pos,a=n.resolve(s);return o?t.near(a):new e(a)},e.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new p(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);d.prototype.visible=!1,s.jsonID("node",d);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new u(r,r):new p(r)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){e.delete(0,e.doc.content.size);var i=t.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return f},e}(s);s.jsonID("all",h);var f={map:function(){return this},resolve:function(t){return new h(t)}};function v(t,e,n,r,i,o){if(e.inlineContent)return l.create(t,n);for(var s=r-(i>0?0:1);i>0?s<e.childCount:s>=0;s+=i){var a=e.child(s);if(a.isAtom){if(!o&&d.isSelectable(a))return d.create(t,n-(i<0?a.nodeSize:0))}else{var c=v(t,a,n+i,i<0?a.childCount:0,i,o);if(c)return c}n+=a.nodeSize*i}}function m(t,e,n){var r=t.steps.length-1;if(!(r<e)){var o,a=t.steps[r];if(a instanceof i.Pu||a instanceof i.FC)t.mapping.maps[r].forEach((function(t,e,n,r){null==o&&(o=r)})),t.setSelection(s.near(t.doc.resolve(o),n))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var i=this.storedMarks;if(!i){var o=this.doc.resolve(e);i=n==e?o.marks():o.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(i.wx);function y(t,e){return e&&t?t.bind(e):t}var w=function(t,e,n){this.name=t,this.init=y(e.init,n),this.apply=y(e.apply,n)},b=[new w("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new w("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new w("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new w("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],x=function(t,e){var n=this;this.schema=t,this.fields=b.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new w(t.key,t.spec.state,t))}))},S=function(t){this.config=t},C={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};C.schema.get=function(){return this.config.schema},C.plugins.get=function(){return this.config.plugins},S.prototype.apply=function(t){return this.applyTransaction(t).state},S.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},S.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var i=!1,o=0;o<this.config.plugins.length;o++){var s=this.config.plugins[o];if(s.spec.appendTransaction){var a=r?r[o].n:0,c=r?r[o].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,o)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<o?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),i=!0}r&&(r[o]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}},S.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new S(this.config),n=this.config.fields,r=0;r<n.length;r++){var i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}for(var o=0;o<k.length;o++)k[o](this,t,e);return e},C.tr.get=function(){return new g(this)},S.create=function(t){for(var e=new x(t.schema||t.doc.type.schema,t.plugins),n=new S(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},S.prototype.reconfigure=function(t){for(var e=new x(t.schema||this.schema,t.plugins),n=e.fields,r=new S(e),i=0;i<n.length;i++){var o=n[i].name;r[o]=this.hasOwnProperty(o)?this[o]:n[i].init(t,r)}return r},S.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e},S.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var i=new x(t.schema,t.plugins),o=new S(i);return i.fields.forEach((function(i){if("doc"==i.name)o.doc=r.Node.fromJSON(t.schema,e.doc);else if("selection"==i.name)o.selection=s.fromJSON(o.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==i.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(o[i.name]=l.fromJSON.call(c,t,e[a],o))}o[i.name]=i.init(t,o)}})),o},S.addApplyListener=function(t){k.push(t)},S.removeApplyListener=function(t){var e=k.indexOf(t);e>-1&&k.splice(e,1)},Object.defineProperties(S.prototype,C);var k=[];function _(t,e,n){for(var r in t){var i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=_(i,e,{})),n[r]=i}return n}var M=function(t){this.props={},t.props&&_(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:E("plugin")};M.prototype.getState=function(t){return t[this.key]};var O=Object.create(null);function E(t){return t in O?t+"$"+ ++O[t]:(O[t]=0,t+"$")}var N=function(t){void 0===t&&(t="key"),this.key=E(t)};N.prototype.get=function(t){return t.config.pluginsByKey[this.key]},N.prototype.getState=function(t){return t[this.key]}},9132:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CellSelection:()=>R,TableMap:()=>f,TableView:()=>Ot,__clipCells:()=>V,__insertCells:()=>j,__pastedCells:()=>$,addColSpan:()=>D,addColumn:()=>it,addColumnAfter:()=>st,addColumnBefore:()=>ot,addRow:()=>ut,addRowAfter:()=>pt,addRowBefore:()=>dt,cellAround:()=>x,colCount:()=>E,columnIsHeader:()=>P,columnResizing:()=>Tt,columnResizingPluginKey:()=>Nt,deleteColumn:()=>ct,deleteRow:()=>ft,deleteTable:()=>Mt,findCell:()=>O,fixTables:()=>nt,fixTablesKey:()=>tt,goToNextCell:()=>_t,handlePaste:()=>q,inSameTable:()=>M,isInTable:()=>S,mergeCells:()=>mt,moveCellForward:()=>_,nextCell:()=>N,pointsAtCell:()=>k,removeColSpan:()=>A,removeColumn:()=>at,removeRow:()=>ht,rowIsHeader:()=>lt,selectedRect:()=>rt,selectionCell:()=>C,setAttr:()=>T,setCellAttr:()=>wt,splitCell:()=>gt,splitCellWithType:()=>yt,tableEditing:()=>Bt,tableEditingKey:()=>b,tableNodeTypes:()=>w,tableNodes:()=>y,toggleHeader:()=>xt,toggleHeaderCell:()=>kt,toggleHeaderColumn:()=>Ct,toggleHeaderRow:()=>St,updateColumnsOnResize:()=>Et});var r,i,o=n(6922),s=n(8638),a=n(4751),c=n(8780),l=n(1081);if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(t){return u.get(t)},i=function(t,e){return u.set(t,e),e}}else{var d=[],p=0;r=function(t){for(var e=0;e<d.length;e+=2)if(d[e]==t)return d[e+1]},i=function(t,e){return 10==p&&(p=0),d[p++]=t,d[p++]=e}}var h=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},f=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function v(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function m(t,e){var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,i=Number(t.getAttribute("colspan")||1),o={colspan:i,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==i?r:null};for(var s in e){var a=e[s].getFromDOM,c=a&&a(t);null!=c&&(o[s]=c)}return o}function g(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var i=e[r].setDOMAttr;i&&i(t.attrs[r],n)}return n}function y(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["td",g(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return m(t,e)}}],toDOM:function(t){return["th",g(t,e),0]}}}}function w(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],i=r.spec.tableRole;i&&(e[i]=r)}return e}f.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,i=e/this.width|0,o=r+1,s=i+1,a=1;o<this.width&&this.map[e+a]==n;a++)o++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return new h(r,i,o,s)}}throw new RangeError("No cell with offset "+t+" found")},f.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},f.prototype.nextCell=function(t,e,n){var r=this.findCell(t),i=r.left,o=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==i:o==this.width)?null:this.map[s*this.width+(n<0?i-1:o)]:(n<0?0==s:a==this.height)?null:this.map[i+this.width*(n<0?s-1:a)]},f.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,i=n.right,o=n.top,s=n.bottom,a=this.findCell(e),c=a.left,l=a.right,u=a.top,d=a.bottom;return new h(Math.min(r,c),Math.min(o,u),Math.max(i,l),Math.max(s,d))},f.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var i=t.left;i<t.right;i++){var o=r*this.width+i,s=this.map[o];n[s]||(n[s]=!0,i==t.left&&i&&this.map[o-1]==s||r==t.top&&r&&this.map[o-this.width]==s||e.push(s))}return e},f.prototype.positionAt=function(t,e,n){for(var r=0,i=0;;r++){var o=i+n.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<i;)s++;return s==a?o-1:this.map[s]}i=o}},f.get=function(t){return r(t)||i(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var i=t.child(r),o=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(o+=l.attrs.colspan)}for(var u=0;u<i.childCount;u++){var d=i.child(u);o+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}(t),n=t.childCount,r=[],i=0,o=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var d=t.child(l);u++;for(var p=0;;p++){for(;i<r.length&&0!=r[i];)i++;if(p==d.childCount)break;for(var h=d.child(p),m=h.attrs,g=m.colspan,y=m.rowspan,w=m.colwidth,b=0;b<y;b++){if(b+l>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:u,n:y-b});break}for(var x=i+b*e,S=0;S<g;S++){0==r[x+S]?r[x+S]=u:(o||(o=[])).push({type:"collision",row:l,pos:u,n:g-S});var C=w&&w[S];if(C){var k=(x+S)%e*2,_=s[k];null==_||_!=C&&1==s[k+1]?(s[k]=C,s[k+1]=1):_==C&&s[k+1]++}}}i+=g,u+=h.nodeSize}for(var M=(l+1)*e,O=0;i<M;)0==r[i++]&&O++;O&&(o||(o=[])).push({type:"missing",row:l,n:O}),u++}for(var E=new f(e,n,r,o),N=!1,T=0;!N&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(N=!0);N&&function(t,e,n){t.problems||(t.problems=[]);for(var r=0,i={};r<t.map.length;r++){var o=t.map[r];if(!i[o]){i[o]=!0;for(var s=n.nodeAt(o),a=null,c=0;c<s.attrs.colspan;c++){var l=e[2*((r+c)%t.width)];null==l||s.attrs.colwidth&&s.attrs.colwidth[c]==l||((a||(a=v(s.attrs)))[c]=l)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}}(E,s,t);return E}(t))};var b=new o.PluginKey("selectingCells");function x(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function S(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function C(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:x(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var i=t.nodeBefore,o=t.pos;i;i=i.lastChild,o--){var s=i.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(o-i.nodeSize)}}(e.$head)}function k(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function _(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function M(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function O(t){return f.get(t.node(-1)).findCell(t.pos-t.start(-1))}function E(t){return f.get(t.node(-1)).colCount(t.pos-t.start(-1))}function N(t,e,n){var r=t.start(-1),i=f.get(t.node(-1)).nextCell(t.pos-r,e,n);return null==i?null:t.node(0).resolve(r+i)}function T(t,e,n){var r={};for(var i in t)r[i]=t[i];return r[e]=n,r}function A(t,e,n){void 0===n&&(n=1);var r=T(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function D(t,e,n){void 0===n&&(n=1);var r=T(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var i=0;i<n;i++)r.colwidth.splice(e,0,0)}return r}function P(t,e,n){for(var r=w(e.type.schema).header_cell,i=0;i<t.height;i++)if(e.nodeAt(t.map[n+i*t.width]).type!=r)return!1;return!0}var R=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),i=f.get(r),s=e.start(-1),a=i.rectBetween(e.pos-s,n.pos-s),c=e.node(0),l=i.cellsInRect(a).filter((function(t){return t!=n.pos-s}));l.unshift(n.pos-s);var u=l.map((function(t){var e=r.nodeAt(t),n=t+s+1;return new o.SelectionRange(c.resolve(n),c.resolve(n+e.content.size))}));t.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),i=t.resolve(n.map(this.$headCell.pos));if(k(r)&&k(i)&&M(r,i)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?e.rowSelection(r,i):s&&this.isColSelection()?e.colSelection(r,i):new e(r,i)}return o.TextSelection.between(r,i)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=f.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),i={},o=[],a=r.top;a<r.bottom;a++){for(var c=[],l=a*e.width+r.left,u=r.left;u<r.right;u++,l++){var d=e.map[l];if(!i[d]){i[d]=!0;var p=e.findCell(d),h=t.nodeAt(d),v=r.left-p.left,m=p.right-r.right;if(v>0||m>0){var g=h.attrs;v>0&&(g=A(g,0,v)),m>0&&(g=A(g,g.colspan-m,m)),h=p.left<r.left?h.type.createAndFill(g):h.type.create(g,h.content)}if(p.top<r.top||p.bottom>r.bottom){var y=T(h.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));h=p.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}c.push(h)}}o.push(t.child(a).copy(s.Fragment.from(c)))}var w=this.isColSelection()&&this.isRowSelection()?t:o;return new s.Slice(s.Fragment.from(w),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=s.Slice.empty);for(var r=e.steps.length,i=this.ranges,o=0;o<i.length;o++){var a=i[o],c=a.$from,l=a.$to,u=e.mapping.slice(r);e.replace(u.map(c.pos),u.map(l.pos),o?s.Slice.empty:n)}var d=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);d&&e.setSelection(d)},e.prototype.replaceWith=function(t,e){this.replace(t,new s.Slice(s.Fragment.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=f.get(e),r=this.$anchorCell.start(-1),i=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),o=0;o<i.length;o++)t(e.nodeAt(i[o]),r+i[o])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.top<=s.top?(o.top>0&&(t=a.resolve(i+r.map[o.left])),s.bottom<r.height&&(n=a.resolve(i+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(i+r.map[s.left])),o.bottom<r.height&&(t=a.resolve(i+r.map[r.width*(r.height-1)+o.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=f.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var i=n+this.$anchorCell.nodeAfter.attrs.colspan,o=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(i,o)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),i=t.start(-1),o=r.findCell(t.pos-i),s=r.findCell(n.pos-i),a=t.node(0);return o.left<=s.left?(o.left>0&&(t=a.resolve(i+r.map[o.top*r.width])),s.right<r.width&&(n=a.resolve(i+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(i+r.map[s.top*r.width])),o.right<r.width&&(t=a.resolve(i+r.map[r.width*(o.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new I(this.$anchorCell.pos,this.$headCell.pos)},e}(o.Selection);R.prototype.visible=!1,o.Selection.jsonID("cell",R);var I=function(t,e){this.anchor=t,this.head=e};function B(t){if(!(t.selection instanceof R))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(c.p.node(n,n+t.nodeSize,{class:"selectedCell"}))})),c.EH.create(t.doc,e)}function $(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,r=t.openEnd;1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)n--,r--,e=e.firstChild.content;var i=e.firstChild,o=i.type.spec.tableRole,a=i.type.schema,c=[];if("row"==o)for(var l=0;l<e.childCount;l++){var u=e.child(l).content,d=l?0:Math.max(0,n-1),p=l<e.childCount-1?0:Math.max(0,r-1);(d||p)&&(u=z(w(a).row,new s.Slice(u,d,p)).content),c.push(u)}else{if("cell"!=o&&"header_cell"!=o)return null;c.push(n||r?z(w(a).row,new s.Slice(e,n,r)).content:e)}return function(t,e){for(var n=[],r=0;r<e.length;r++)for(var i=e[r],o=i.childCount-1;o>=0;o--)for(var a=i.child(o).attrs,c=a.rowspan,l=a.colspan,u=r;u<r+c;u++)n[u]=(n[u]||0)+l;for(var d=0,p=0;p<n.length;p++)d=Math.max(d,n[p]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(s.Fragment.empty),n[h]<d){for(var f=w(t).cell.createAndFill(),v=[],m=n[h];m<d;m++)v.push(f);e[h]=e[h].append(s.Fragment.from(v))}return{height:e.length,width:d,rows:e}}(a,c)}function z(t,e){var n=t.createAndFill();return new l.wx(n).replace(0,n.content.size,e).doc}function V(t,e,n){var r=t.width,i=t.height,o=t.rows;if(r!=e){for(var a=[],c=[],l=0;l<o.length;l++){for(var u=o[l],d=[],p=a[l]||0,h=0;p<e;h++){var f=u.child(h%u.childCount);p+f.attrs.colspan>e&&(f=f.type.create(A(f.attrs,f.attrs.colspan,p+f.attrs.colspan-e),f.content)),d.push(f),p+=f.attrs.colspan;for(var v=1;v<f.attrs.rowspan;v++)a[l+v]=(a[l+v]||0)+f.attrs.colspan}c.push(s.Fragment.from(d))}o=c,r=e}if(i!=n){for(var m=[],g=0,y=0;g<n;g++,y++){for(var w=[],b=o[y%i],x=0;x<b.childCount;x++){var S=b.child(x);g+S.attrs.rowspan>n&&(S=S.type.create(T(S.attrs,"rowspan",Math.max(1,n-S.attrs.rowspan)),S.content)),w.push(S)}m.push(s.Fragment.from(w))}o=m,i=n}return{width:r,height:i,rows:o}}function F(t,e,n,r,i,o,s,a){if(0==s||s==e.height)return!1;for(var c=!1,l=i;l<o;l++){var u=s*e.width+l,d=e.map[u];if(e.map[u-e.width]==d){c=!0;var p=n.nodeAt(d),h=e.findCell(d),f=h.top,v=h.left;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,T(p.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,v,n)),p.type.createAndFill(T(p.attrs,"rowspan",f+p.attrs.rowspan-s))),l+=p.attrs.colspan-1}}return c}function L(t,e,n,r,i,o,s,a){if(0==s||s==e.width)return!1;for(var c=!1,l=i;l<o;l++){var u=l*e.width+s,d=e.map[u];if(e.map[u-1]==d){c=!0;var p=n.nodeAt(d),h=e.colCount(d),f=t.mapping.slice(a).map(d+r);t.setNodeMarkup(f,null,A(p.attrs,s-h,p.attrs.colspan-(s-h))),t.insert(f+p.nodeSize,p.type.createAndFill(A(p.attrs,0,s-h))),l+=p.attrs.rowspan-1}}return c}function j(t,e,n,r,i){var o=n?t.doc.nodeAt(n-1):t.doc,a=f.get(o),c=r.top,l=r.left,u=l+i.width,d=c+i.height,p=t.tr,h=0;function v(){o=n?p.doc.nodeAt(n-1):p.doc,a=f.get(o),h=p.mapping.maps.length}(function(t,e,n,r,i,o,a){var c,l,u=w(t.doc.type.schema);if(i>e.width)for(var d=0,p=0;d<e.height;d++){var h=n.child(d);p+=h.nodeSize;var f=[],v=void 0;v=null==h.lastChild||h.lastChild.type==u.cell?c||(c=u.cell.createAndFill()):l||(l=u.header_cell.createAndFill());for(var m=e.width;m<i;m++)f.push(v);t.insert(t.mapping.slice(a).map(p-1+r),f)}if(o>e.height){for(var g=[],y=0,b=(e.height-1)*e.width;y<Math.max(e.width,i);y++){var x=!(y>=e.width)&&n.nodeAt(e.map[b+y]).type==u.header_cell;g.push(x?l||(l=u.header_cell.createAndFill()):c||(c=u.cell.createAndFill()))}for(var S=u.row.create(null,s.Fragment.from(g)),C=[],k=e.height;k<o;k++)C.push(S);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),C)}return!(!c&&!l)})(p,a,o,n,u,d,h)&&v(),F(p,a,o,n,l,u,c,h)&&v(),F(p,a,o,n,l,u,d,h)&&v(),L(p,a,o,n,c,d,l,h)&&v(),L(p,a,o,n,c,d,u,h)&&v();for(var m=c;m<d;m++){var g=a.positionAt(m,l,o),y=a.positionAt(m,u,o);p.replace(p.mapping.slice(h).map(g+n),p.mapping.slice(h).map(y+n),new s.Slice(i.rows[m-c],0,0))}v(),p.setSelection(new R(p.doc.resolve(n+a.positionAt(c,l,o)),p.doc.resolve(n+a.positionAt(d-1,u-1,o)))),e(p)}I.prototype.map=function(t){return new I(t.map(this.anchor),t.map(this.head))},I.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&M(e,n)?new R(e,n):o.Selection.near(n,1)};var H=(0,a.$)({ArrowLeft:K("horiz",-1),ArrowRight:K("horiz",1),ArrowUp:K("vert",-1),ArrowDown:K("vert",1),"Shift-ArrowLeft":W("horiz",-1),"Shift-ArrowRight":W("horiz",1),"Shift-ArrowUp":W("vert",-1),"Shift-ArrowDown":W("vert",1),Backspace:J,"Mod-Backspace":J,Delete:J,"Mod-Delete":J});function Z(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function K(t,e){return function(n,r,i){var s=n.selection;if(s instanceof R)return Z(n,r,o.Selection.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;var a=G(i,t,e);if(null==a)return!1;if("horiz"==t)return Z(n,r,o.Selection.near(n.doc.resolve(s.head+e),e));var c,l=n.doc.resolve(a),u=N(l,t,e);return c=u?o.Selection.near(u,1):e<0?o.Selection.near(n.doc.resolve(l.before(-1)),-1):o.Selection.near(n.doc.resolve(l.after(-1)),1),Z(n,r,c)}}function W(t,e){return function(n,r,i){var o=n.selection;if(!(o instanceof R)){var s=G(i,t,e);if(null==s)return!1;o=new R(n.doc.resolve(s))}var a=N(o.$headCell,t,e);return!!a&&Z(n,r,new R(o.$anchorCell,a))}}function J(t,e){var n=t.selection;if(!(n instanceof R))return!1;if(e){var r=t.tr,i=w(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(i)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new s.Slice(i,0,0))})),r.docChanged&&e(r)}return!0}function U(t,e){var n=x(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new R(n))),!0)}function q(t,e,n){if(!S(t.state))return!1;var r=$(n),i=t.state.selection;if(i instanceof R){r||(r={width:1,height:1,rows:[s.Fragment.from(z(w(t.state.schema).cell,n))]});var o=i.$anchorCell.node(-1),a=i.$anchorCell.start(-1),c=f.get(o).rectBetween(i.$anchorCell.pos-a,i.$headCell.pos-a);return r=V(r,c.right-c.left,c.bottom-c.top),j(t.state,t.dispatch,a,c,r),!0}if(r){var l=C(t.state),u=l.start(-1);return j(t.state,t.dispatch,u,f.get(l.node(-1)).findCell(l.pos-u),r),!0}return!1}function X(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=Y(t,e.target);if(e.shiftKey&&t.state.selection instanceof R)i(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=x(t.state.selection.$anchor))&&Q(t,e).pos!=n.pos)i(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",o),t.root.addEventListener("dragstart",o),t.root.addEventListener("mousemove",s)}function i(e,n){var r=Q(t,n),i=null==b.getState(t.state);if(!r||!M(e,r)){if(!i)return;r=e}var o=new R(e,r);if(i||!t.state.selection.eq(o)){var s=t.state.tr.setSelection(o);i&&s.setMeta(b,e.pos),t.dispatch(s)}}function o(){t.root.removeEventListener("mouseup",o),t.root.removeEventListener("dragstart",o),t.root.removeEventListener("mousemove",s),null!=b.getState(t.state)&&t.dispatch(t.state.tr.setMeta(b,-1))}function s(n){var s,a=b.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(Y(t,n.target)!=r&&!(s=Q(t,e)))return o();s&&i(s,n)}}function G(t,e,n){if(!(t.state.selection instanceof o.TextSelection))return null;for(var r=t.state.selection.$head,i=r.depth-1;i>=0;i--){var s=r.node(i);if((n<0?r.index(i):r.indexAfter(i))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=r.before(i),c="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?a:null}}return null}function Y(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Q(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?x(t.state.doc.resolve(n.pos)):null}var tt=new o.PluginKey("fix-tables");function et(t,e,n,r){var i=t.childCount,o=e.childCount;t:for(var s=0,a=0;s<o;s++){for(var c=e.child(s),l=a,u=Math.min(i,s+3);l<u;l++)if(t.child(l)==c){a=l+1,n+=c.nodeSize;continue t}r(c,n),a<i&&t.child(a).sameMarkup(c)?et(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function nt(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){var i=f.get(e);if(!i.problems)return r;r||(r=t.tr);for(var o,s,a=[],c=0;c<i.height;c++)a.push(0);for(var l=0;l<i.problems.length;l++){var u=i.problems[l];if("collision"==u.type){for(var d=e.nodeAt(u.pos),p=0;p<d.attrs.rowspan;p++)a[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,A(d.attrs,d.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var h=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,T(h.attrs,"rowspan",h.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var v=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,T(v.attrs,"colwidth",u.colwidth))}}for(var m=0;m<a.length;m++)a[m]&&(null==o&&(o=m),s=m);for(var g=0,y=n+1;g<i.height;g++){var b=e.child(g),x=y+b.nodeSize,S=a[g];if(S>0){var C="cell";b.firstChild&&(C=b.firstChild.type.spec.tableRole);for(var k=[],_=0;_<S;_++)k.push(w(t.schema)[C].createAndFill());var M=0!=g&&o!=g-1||s!=g?x-1:y+1;r.insert(r.mapping.map(M),k)}y=x}return r.setMeta(tt,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&et(e.doc,t.doc,0,r):t.doc.descendants(r),n}function rt(t){var e,n=t.selection,r=C(t),i=r.node(-1),o=r.start(-1),s=f.get(i);return(e=n instanceof R?s.rectBetween(n.$anchorCell.pos-o,n.$headCell.pos-o):s.findCell(r.pos-o)).tableStart=o,e.map=s,e.table=i,e}function it(t,e,n){var r=e.map,i=e.tableStart,o=e.table,s=n>0?-1:0;P(r,o,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=o.nodeAt(l);t.setNodeMarkup(t.mapping.map(i+l),null,D(u.attrs,n-r.colCount(l))),a+=u.attrs.rowspan-1}else{var d=null==s?w(o.type.schema).cell:o.nodeAt(r.map[c+s]).type,p=r.positionAt(a,n,o);t.insert(t.mapping.map(i+p),d.createAndFill())}}return t}function ot(t,e){if(!S(t))return!1;if(e){var n=rt(t);e(it(t.tr,n,n.left))}return!0}function st(t,e){if(!S(t))return!1;if(e){var n=rt(t);e(it(t.tr,n,n.right))}return!0}function at(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],u=i.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(o+l),null,A(u.attrs,n-r.colCount(l)));else{var d=t.mapping.slice(s).map(o+l);t.delete(d,d+u.nodeSize)}a+=u.attrs.rowspan}}function ct(t,e){if(!S(t))return!1;if(e){var n=rt(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var i=n.right-1;at(r,n,i),i!=n.left;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function lt(t,e,n){for(var r=w(e.type.schema).header_cell,i=0;i<t.width;i++)if(e.nodeAt(t.map[i+n*t.width]).type!=r)return!1;return!0}function ut(t,e,n){for(var r=e.map,i=e.tableStart,o=e.table,s=i,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=[],l=n>0?-1:0;lt(r,o,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,d=r.width*n;u<r.width;u++,d++)if(n>0&&n<r.height&&r.map[d]==r.map[d-r.width]){var p=r.map[d],h=o.nodeAt(p).attrs;t.setNodeMarkup(i+p,null,T(h,"rowspan",h.rowspan+1)),u+=h.colspan-1}else{var f=null==l?w(o.type.schema).cell:o.nodeAt(r.map[d+l*r.width]).type;c.push(f.createAndFill())}return t.insert(s,w(o.type.schema).row.create(null,c)),t}function dt(t,e){if(!S(t))return!1;if(e){var n=rt(t);e(ut(t.tr,n,n.top))}return!0}function pt(t,e){if(!S(t))return!1;if(e){var n=rt(t);e(ut(t.tr,n,n.bottom))}return!0}function ht(t,e,n){for(var r=e.map,i=e.table,o=e.tableStart,s=0,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=s+i.child(n).nodeSize,l=t.mapping.maps.length;t.delete(s+o,c+o);for(var u=0,d=n*r.width;u<r.width;u++,d++){var p=r.map[d];if(n>0&&p==r.map[d-r.width]){var h=i.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(l).map(p+o),null,T(h,"rowspan",h.rowspan-1)),u+=h.colspan-1}else if(n<r.width&&p==r.map[d+r.width]){var f=i.nodeAt(p),v=f.type.create(T(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=r.positionAt(n+1,u,i);t.insert(t.mapping.slice(l).map(o+m),v),u+=f.attrs.colspan-1}}}function ft(t,e){if(!S(t))return!1;if(e){var n=rt(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var i=n.bottom-1;ht(r,n,i),i!=n.top;i--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function vt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function mt(t,e){var n=t.selection;if(!(n instanceof R)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=rt(t),i=r.map;if(function(t,e){for(var n=t.width,r=t.height,i=t.map,o=e.top*n+e.left,s=o,a=(e.bottom-1)*n+e.left,c=o+(e.right-e.left-1),l=e.top;l<e.bottom;l++){if(e.left>0&&i[s]==i[s-1]||e.right<n&&i[c]==i[c+1])return!0;s+=n,c+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&i[o]==i[o-n]||e.bottom<r&&i[a]==i[a+n])return!0;o++,a++}return!1}(i,r))return!1;if(e){for(var o,a,c=t.tr,l={},u=s.Fragment.empty,d=r.top;d<r.bottom;d++)for(var p=r.left;p<r.right;p++){var h=i.map[d*i.width+p],f=r.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==o)o=h,a=f;else{vt(f)||(u=u.append(f.content));var v=c.mapping.map(h+r.tableStart);c.delete(v,v+f.nodeSize)}}if(c.setNodeMarkup(o+r.tableStart,null,T(D(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var m=o+1+a.content.size,g=vt(a)?o+1:m;c.replaceWith(g+r.tableStart,m+r.tableStart,u)}c.setSelection(new R(c.doc.resolve(o+r.tableStart))),e(c)}return!0}function gt(t,e){var n=w(t.schema);return yt((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function yt(t){return function(e,n){var r,i,o=e.selection;if(o instanceof R){if(o.$anchorCell.pos!=o.$headCell.pos)return!1;r=o.$anchorCell.nodeAfter,i=o.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(o.$from)))return!1;i=x(o.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=T(s,"rowspan",1)),s.colspan>1&&(s=T(s,"colspan",1));for(var l,u=rt(e),d=e.tr,p=0;p<u.right-u.left;p++)a.push(c?T(s,"colwidth",c&&c[p]?[c[p]]:null):s);for(var h=u.top;h<u.bottom;h++){var f=u.map.positionAt(h,u.left,u.table);h==u.top&&(f+=r.nodeSize);for(var v=u.left,m=0;v<u.right;v++,m++)v==u.left&&h==u.top||d.insert(l=d.mapping.map(f+u.tableStart,1),t({node:r,row:h,col:v}).createAndFill(a[m]))}d.setNodeMarkup(i,t({node:r,row:u.top,col:u.left}),a[0]),o instanceof R&&d.setSelection(new R(d.doc.resolve(o.$anchorCell.pos),l&&d.doc.resolve(l))),n(d)}return!0}}function wt(t,e){return function(n,r){if(!S(n))return!1;var i=C(n);if(i.nodeAfter.attrs[t]===e)return!1;if(r){var o=n.tr;n.selection instanceof R?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&o.setNodeMarkup(r,null,T(n.attrs,t,e))})):o.setNodeMarkup(i.pos,null,T(i.nodeAfter.attrs,t,e)),r(o)}return!0}}function bt(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),i=0;i<r.length;i++){var o=e.table.nodeAt(r[i]);if(o&&o.type!==n.header_cell)return!1}return!0}function xt(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!S(e))return!1;if(n){for(var r=w(e.schema),i=rt(e),o=e.tr,s=i.map.cellsInRect("column"==t?new h(i.left,0,i.right,i.map.height):"row"==t?new h(0,i.top,i.map.width,i.bottom):i),a=s.map((function(t){return i.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&o.setNodeMarkup(i.tableStart+s[c],r.cell,a[c].attrs);if(0==o.steps.length)for(var l=0;l<s.length;l++)o.setNodeMarkup(i.tableStart+s[l],r.header_cell,a[l].attrs);n(o)}return!0}}(t):function(e,n){if(!S(e))return!1;if(n){var r=w(e.schema),i=rt(e),o=e.tr,s=bt("row",i,r),a=bt("column",i,r),c=("column"===t?s:"row"===t&&a)?1:0,l="column"==t?new h(0,c,1,i.map.height):"row"==t?new h(c,0,i.map.width,1):i,u="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;i.map.cellsInRect(l).forEach((function(t){var e=t+i.tableStart,n=o.doc.nodeAt(e);n&&o.setNodeMarkup(e,u,n.attrs)})),n(o)}return!0}}var St=xt("row",{useDeprecatedLogic:!0}),Ct=xt("column",{useDeprecatedLogic:!0}),kt=xt("cell",{useDeprecatedLogic:!0});function _t(t){return function(e,n){if(!S(e))return!1;var r=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,i=t.before();r>=0;r--){var o=t.node(-1).child(r);if(o.childCount)return i-1-o.lastChild.nodeSize;i-=o.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}(C(e),t);if(null!=r){if(n){var i=e.doc.resolve(r);n(e.tr.setSelection(o.TextSelection.between(i,_(i))).scrollIntoView())}return!0}}}function Mt(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Ot=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Et(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Et(t,e,n,r,i,o){for(var s=0,a=!0,c=e.firstChild,l=t.firstChild,u=0,d=0;u<l.childCount;u++)for(var p=l.child(u).attrs,h=p.colspan,f=p.colwidth,v=0;v<h;v++,d++){var m=i==d?o:f&&f[v],g=m?m+"px":"";s+=m||r,m||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Ot.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Et(t,this.colgroup,this.table,this.cellMinWidth),!0)},Ot.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var Nt=new o.PluginKey("tableColumnResizing");function Tt(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Ot);var i=t.lastColumnResizable;return void 0===i&&(i=!0),new o.Plugin({key:Nt,state:{init:function(t,e){return this.spec.props.nodeViews[w(e.schema).table.name]=function(t,e){return new r(t,n,e)},new At(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return Nt.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,r,i){var o=Nt.getState(t.state);if(!o.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,u=c.right;e.clientX-l<=n?a=Dt(t,e,"left"):u-e.clientX<=n&&(a=Dt(t,e,"right"))}if(a!=o.activeHandle){if(!i&&-1!==a){var d=t.state.doc.resolve(a),p=d.node(-1),h=f.get(p),v=d.start(-1);if(h.colCount(d.pos-v)+d.nodeAfter.attrs.colspan-1==h.width-1)return}Rt(t,a)}}}(t,n,e,0,i)},mouseleave:function(t){!function(t){var e=Nt.getState(t.state);e.activeHandle>-1&&!e.dragging&&Rt(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var r=Nt.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var i=t.state.doc.nodeAt(r.activeHandle),o=function(t,e,n){var r=n.colspan,i=n.colwidth,o=i&&i[i.length-1];if(o)return o;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,c=r;if(i)for(var l=0;l<r;l++)i[l]&&(a-=i[l],c--);return a/c}(t,r.activeHandle,i.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=Nt.getState(t.state);r.dragging&&(!function(t,e,n){for(var r=t.state.doc.resolve(e),i=r.node(-1),o=f.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,l=0;l<o.height;l++){var u=l*o.width+a;if(!l||o.map[u]!=o.map[u-o.width]){var d=o.map[u],p=i.nodeAt(d).attrs,h=1==p.colspan?0:a-o.colCount(d);if(!p.colwidth||p.colwidth[h]!=n){var v=p.colwidth?p.colwidth.slice():It(p.colspan);v[h]=n,c.setNodeMarkup(s+d,null,T(p,"colwidth",v))}}}c.docChanged&&t.dispatch(c)}(t,r.activeHandle,Pt(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(Nt,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=Nt.getState(t.state),i=Pt(r.dragging,e,n);!function(t,e,n,r){var i=t.state.doc.resolve(e),o=i.node(-1),s=i.start(-1),a=f.get(o).colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,c=t.domAtPos(i.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;Et(o,c.firstChild,c,r,a,n)}(t,r.activeHandle,i,n)}t.dispatch(t.state.tr.setMeta(Nt,{setDragging:{startX:e.clientX,startWidth:o}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=Nt.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],r=t.doc.resolve(e),i=r.node(-1),o=f.get(i),s=r.start(-1),a=o.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,l=0;l<o.height;l++){var u=a+l*o.width-1;if(!(a!=o.width&&o.map[u]==o.map[u+1]||0!=l&&o.map[u-1]==o.map[u-1-o.width])){var d=o.map[u],p=s+d+i.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(c.p.widget(p,h))}}return c.EH.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}})}var At=function(t,e){this.activeHandle=t,this.dragging=e};function Dt(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var i=r.pos,o=x(t.state.doc.resolve(i));if(!o)return-1;if("right"==n)return o.pos;var s=f.get(o.node(-1)),a=o.start(-1),c=s.map.indexOf(o.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function Pt(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Rt(t,e){t.dispatch(t.state.tr.setMeta(Nt,{setHandle:e}))}function It(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Bt(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new o.Plugin({key:b,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(b);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),i=r.deleted,o=r.pos;return i?null:o}},props:{decorations:B,handleDOMEvents:{mousedown:X},createSelectionBetween:function(t){if(null!=b.getState(t.state))return t.state.selection},handleTripleClick:U,handleKeyDown:H,handlePaste:q},appendTransaction:function(t,n,r){return function(t,e,n){var r,i,s=(e||t).selection,a=(e||t).doc;if(s instanceof o.NodeSelection&&(i=s.node.type.spec.tableRole)){if("cell"==i||"header_cell"==i)r=R.create(a,s.from);else if("row"==i){var c=a.resolve(s.from+1);r=R.rowSelection(c,c)}else if(!n){var l=f.get(s.node),u=s.from+1,d=u+l.map[l.width*l.height-1];r=R.create(a,u+1,d)}}else s instanceof o.TextSelection&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,i=n.pos,o=e.depth;o>=0&&!(e.after(o+1)<e.end(o));o--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,i--);return r==i&&/row|table/.test(e.node(o).type.spec.tableRole)}(s)?r=o.TextSelection.create(a,s.from):s instanceof o.TextSelection&&function(t){for(var e,n,r=t.$from,i=t.$to,o=r.depth;o>0;o--){var s=r.node(o);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=i.depth;a>0;a--){var c=i.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===i.parentOffset}(s)&&(r=o.TextSelection.create(a,s.$from.start(),s.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,nt(r,n),e)}})}At.prototype.apply=function(t){var e=this,n=t.getMeta(Nt);if(n&&null!=n.setHandle)return new At(n.setHandle,null);if(n&&void 0!==n.setDragging)return new At(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);k(t.doc.resolve(r))||(r=null),e=new At(r,e.dragging)}return e}},1081:(t,e,n)=>{"use strict";n.d(e,{vs:()=>c,FC:()=>g,Pu:()=>m,wx:()=>u,Mn:()=>k,Ax:()=>C,nj:()=>M,nd:()=>x,k9:()=>b});var r=n(8638),i=Math.pow(2,16);function o(t){return 65535&t}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=o(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/i}(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[c+o],d=this.ranges[c+a],p=l+u;if(t<=p){var h=l+r+((u?t==l?-1:t==p?1:e:e)<0?0:d);if(n)return h;var f=t==(e<0?l:p)?null:c/3+(t-l)*i;return new s(h,e<0?t!=l:t!=p,f)}r+=d-u}return n?t+r:new s(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=o(e),i=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[a+i];if(t<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,i=0;r<this.ranges.length;r+=3){var o=this.ranges[r],s=o-(this.inverted?i:0),a=o+(this.inverted?0:i),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),i+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var c=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function l(t){var e=Error.call(this,t);return e.__proto__=l.prototype,e}c.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new c(this.maps,this.mirror,t,e)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},c.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},c.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},c.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},c.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},c.prototype.invert=function(){var t=new c;return t.appendMappingInverted(this),t},c.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},c.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},c.prototype._map=function(t,e,n){for(var r=!1,i=this.from;i<this.to;i++){var o=this.maps[i].mapResult(t,e);if(null!=o.recover){var a=this.getMirror(i);if(null!=a&&a>i&&a<this.to){i=a,t=this.maps[a].recover(o.recover);continue}}o.deleted&&(r=!0),t=o.pos}return n?t:new s(t,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var u=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new c},d={before:{configurable:!0},docChanged:{configurable:!0}};function p(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},u.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new l(e.failed);return this},u.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},u.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(u.prototype,d);var h=Object.create(null),f=function(){};f.prototype.apply=function(t){return p()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(t){return p()},f.prototype.map=function(t){return p()},f.prototype.merge=function(t){return null},f.prototype.toJSON=function(){return p()},f.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},f.jsonID=function(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e};var v=function(t,e){this.doc=t,this.failed=e};v.ok=function(t){return new v(t,null)},v.fail=function(t){return new v(null,t)},v.fromReplace=function(t,e,n,i){try{return v.ok(t.replace(e,n,i))}catch(t){if(t instanceof r.ReplaceError)return v.fail(t.message);throw t}};var m=function(t){function e(e,n,r,i){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&y(t,this.from,this.to)?v.fail("Structure replace would overwrite content"):v.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var i=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),i,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(f);f.jsonID("replace",m);var g=function(t){function e(e,n,r,i,o,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return v.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return v.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?v.fromReplace(t,this.from,this.to,n):v.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return n.deleted&&r.deleted||i<n.pos||o>r.pos?null:new e(n.pos,r.pos,i,o,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(f);function y(t,e,n){for(var r=t.resolve(e),i=n-e,o=r.depth;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0)for(var s=r.node(o).maybeChild(r.indexAfter(o));i>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,i--}return!1}function w(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function b(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),i=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(i,o,e))return n;if(0==n||r.type.spec.isolating||!w(r,i,o))break}}function x(t,e,n,r){void 0===r&&(r=t);var i=function(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;var s=o.length?o[0]:e;return n.canReplaceWith(r,i,s)?o:null}(t,e),o=i&&function(t,e){var n=t.parent,r=t.startIndex,i=t.endIndex,o=n.child(r),s=e.contentMatch.findWrapping(o.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,e);return o?i.map(S).concat({type:e,attrs:n}).concat(o.map(S)):null}function S(t){return{type:t,attrs:null}}function C(t,e,n,r){void 0===n&&(n=1);var i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(var a=i.depth-1,c=n-2;a>o;a--,c--){var l=i.node(a),u=i.index(a);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(d=d.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(d))return!1}var h=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(h,h,f?f.type:i.node(o+1).type)}function k(t,e){var n=t.resolve(e),r=n.index();return _(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function _(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function M(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var i=n.content,o=0;o<n.openStart;o++)i=i.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,i):r.node(a).contentMatchAt(l).findWrapping(i.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function O(t,e,n){for(var i=[],o=0;o<t.childCount;o++){var s=t.child(o);s.content.size&&(s=s.copy(O(s.content,e,s))),s.isInline&&(s=e(s,n,o)),i.push(s)}return r.Fragment.fromArray(i)}f.jsonID("replaceAround",g),u.prototype.lift=function(t,e){for(var n=t.$from,i=t.$to,o=t.depth,s=n.before(o+1),a=i.after(o+1),c=s,l=a,u=r.Fragment.empty,d=0,p=o,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,u=r.Fragment.from(n.node(p).copy(u)),d++):c--;for(var f=r.Fragment.empty,v=0,m=o,y=!1;m>e;m--)y||i.after(m+1)<i.end(m)?(y=!0,f=r.Fragment.from(i.node(m).copy(f)),v++):l++;return this.step(new g(c,l,s,a,new r.Slice(u.append(f),d,v),u.size-d,!0))},u.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,i=e.length-1;i>=0;i--)n=r.Fragment.from(e[i].type.create(e[i].attrs,n));var o=t.start,s=t.end;return this.step(new g(o,s,o,s,new r.Slice(n,0,0),e.length,!0))},u.prototype.setBlockType=function(t,e,n,i){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,i)&&function(t,e,n){var r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(o.doc,o.mapping.slice(s).map(e),n)){o.clearIncompatible(o.mapping.slice(s).map(e,1),n);var a=o.mapping.slice(s),c=a.map(e,1),l=a.map(e+t.nodeSize,1);return o.step(new g(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(i,null,t.marks)),0,0),1,!0)),!1}})),this},u.prototype.setNodeMarkup=function(t,e,n,i){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var s=e.create(n,null,i||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,s);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new g(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},u.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var i=this.doc.resolve(t),o=r.Fragment.empty,s=r.Fragment.empty,a=i.depth,c=i.depth-e,l=e-1;a>c;a--,l--){o=r.Fragment.from(i.node(a).copy(o));var u=n&&n[l];s=r.Fragment.from(u?u.type.create(u.attrs,s):i.node(a).copy(s))}return this.step(new m(t,t,new r.Slice(o.append(s),e,e),!0))},u.prototype.join=function(t,e){void 0===e&&(e=1);var n=new m(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var E=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),i=t.resolve(this.from),o=i.node(i.sharedDepth(this.to)),s=new r.Slice(O(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return v.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new N(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);f.jsonID("addMark",E);var N=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),i=new r.Slice(O(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return v.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new E(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);function T(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}f.jsonID("removeMark",N),u.prototype.addMark=function(t,e,n){var r=this,i=[],o=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,t),p=Math.min(c+r.nodeSize,e),h=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(h)||(s&&s.to==d&&s.mark.eq(u[f])?s.to=p:i.push(s=new N(d,p,u[f])));a&&a.to==d?a.to=p:o.push(a=new E(d,p,n))}}})),i.forEach((function(t){return r.step(t)})),o.forEach((function(t){return r.step(t)})),this},u.prototype.removeMark=function(t,e,n){var i=this;void 0===n&&(n=null);var o=[],s=0;return this.doc.nodesBetween(t,e,(function(i,a){if(i.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(i.marks);l&&(c=[l])}else n?n.isInSet(i.marks)&&(c=[n]):c=i.marks;if(c&&c.length)for(var u=Math.min(a+i.nodeSize,e),d=0;d<c.length;d++){for(var p=c[d],h=void 0,f=0;f<o.length;f++){var v=o[f];v.step==s-1&&p.eq(o[f].style)&&(h=v)}h?(h.to=u,h.step=s):o.push({style:p,from:Math.max(a,t),to:u,step:s})}}})),o.forEach((function(t){return i.step(new N(t.from,t.to,t.style))})),this},u.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var i=this.doc.nodeAt(t),o=[],s=t+1,a=0;a<i.childCount;a++){var c=i.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var d=0;d<c.marks.length;d++)e.allowsMarkType(c.marks[d].type)||this.step(new N(s,l,c.marks[d]))}else o.push(new m(s,l,r.Slice.empty));s=l}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(p,0,0))}for(var h=o.length-1;h>=0;h--)this.step(o[h]);return this},u.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var i=function(t,e,n,i){if(void 0===n&&(n=e),void 0===i&&(i=r.Slice.empty),e==n&&!i.size)return null;var o=t.resolve(e),s=t.resolve(n);return T(o,s,i)?new m(e,n,i):new A(o,s,i).fit()}(this.doc,t,e,n);return i&&this.step(i),this},u.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},u.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var A=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var i=0;i<=t.depth;i++){var o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}this.placed=r.Fragment.empty;for(var s=t.depth;s>0;s--)this.placed=r.Fragment.from(t.node(s).copy(this.placed))},D={depth:{configurable:!0}};function P(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(P(t.firstChild.content,e-1,n)))}function R(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(R(t.lastChild.content,e-1,n)))}function I(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function B(t,e,n){if(e<=0)return t;var i=t.content;return e>1&&(i=i.replaceChild(0,B(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.Fragment.empty,!0)))),t.copy(i)}function $(t,e,n,r,i){var o=t.node(e),s=i?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;var a=r.fillBefore(o.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,o.content,s)?a:null}function z(t,e,n,i,o){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(z(s.content,e+1,n,i,s)))}if(e>i){var a=o.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return t}function V(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var i=t.start(r);if(i<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;i==e.start(r)&&n.push(r)}return n}D.depth.get=function(){return this.frontier.length-1},A.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,o=this.close(e<0?this.$to:i.doc.resolve(e));if(!o)return null;for(var s=this.placed,a=i.depth,c=o.depth;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;var l=new r.Slice(s,a,c);return e>-1?new g(i.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new m(i.pos,o.pos,l):void 0},A.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,i=(e?(n=I(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var s=this.frontier[o],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(i?c.matchType(i.type)||(u=c.fillBefore(r.Fragment.from(i),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:u};if(2==t&&i&&(l=c.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},A.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,i=t.openEnd,o=I(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new r.Slice(e,n+1,Math.max(i,o.size+n>=e.size-i?n+1:0)),!0)},A.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,i=t.openEnd,o=I(e,n);if(o.childCount<=1&&n>0){var s=e.size-n<=n+o.size;this.unplaced=new r.Slice(P(e,n-1,1),n-1,s?n-1:i)}else this.unplaced=new r.Slice(P(e,n,1),n,i)},A.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,i=t.parent,o=t.inject,s=t.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=i?i.content:c.content,u=c.openStart-e,d=0,p=[],h=this.frontier[n],f=h.match,v=h.type;if(o){for(var m=0;m<o.childCount;m++)p.push(o.child(m));f=f.matchFragment(o)}for(var g=l.size+e-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),w=f.matchType(y.type);if(!w)break;(++d>1||0==u||y.content.size)&&(f=w,p.push(B(y.mark(v.allowedMarks(y.marks)),1==d?u:0,d==l.childCount?g:-1)))}var b=d==l.childCount;b||(g=-1),this.placed=R(this.placed,n,r.Fragment.from(p)),this.frontier[n].match=f,b&&g<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,S=l;x<g;x++){var C=S.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),S=C.content}this.unplaced=b?0==e?r.Slice.empty:new r.Slice(P(c.content,e-1,1),e-1,g<0?c.openEnd:e-1):new r.Slice(P(c.content,e,d),c.openStart,c.openEnd)},A.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!$(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},A.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,i=n.type,o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=$(t,e,i,r,o);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=$(t,a,c.type,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:s,move:o?t.doc.resolve(t.after(e+1)):t}}}},A.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=R(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),i=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,i)}return t},A.prototype.openFrontierNode=function(t,e,n){var i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=R(this.placed,this.depth,r.Fragment.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},A.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);t.childCount&&(this.placed=R(this.placed,this.frontier.length,t))},Object.defineProperties(A.prototype,D),u.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var i=this.doc.resolve(t),o=this.doc.resolve(e);if(T(i,o,n))return this.step(new m(t,e,n));var s=V(i,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(i.depth+1);s.unshift(a);for(var c=i.depth,l=i.pos-1;c>0;c--,l--){var u=i.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:i.before(c)==l&&s.splice(1,0,-c)}for(var d=s.indexOf(a),p=[],h=n.openStart,f=n.content,v=0;;v++){var g=f.firstChild;if(p.push(g),v==n.openStart)break;f=g.content}h>0&&p[h-1].type.spec.defining&&i.node(d).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&i.node(d).type!=p[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var w=(y+h+1)%(n.openStart+1),b=p[w];if(b)for(var x=0;x<s.length;x++){var S=s[(x+d)%s.length],C=!0;S<0&&(C=!1,S=-S);var k=i.node(S-1),_=i.index(S-1);if(k.canReplaceWith(_,_,b.type,b.marks))return this.replace(i.before(S),C?o.after(S):e,new r.Slice(z(n.content,0,n.openStart,w),w,n.openEnd))}}for(var M=this.steps.length,O=s.length-1;O>=0&&(this.replace(t,e,n),!(this.steps.length>M));O--){var E=s[O];O<0||(t=i.before(E),e=o.after(E))}return this},u.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var i=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var i=r.depth-1;i>=0;i--){var o=r.index(i);if(r.node(i).canReplaceWith(o,o,n))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=i&&(t=e=i)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),i=V(n,r),o=0;o<i.length;o++){var s=i[o],a=o==i.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},9124:(t,e,n)=>{"use strict";var r=n(6922),i=n(8638),o=n(9132),s=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,i=t.length;r<i;r++){var o=D(t[r])(n.selection);if(o){var s=v(o.pos,e)(n);if(s!==n)return s}}return n}},a=function(t){return function(e){if(p(e.selection)){var n=e.selection,o=n.$from,s=n.$to;if(t instanceof i.Fragment&&o.parent.canReplace(o.index(),o.indexAfter(),t)||o.parent.canReplaceWith(o.index(),o.indexAfter(),t.type))return f(e.replaceWith(o.pos,s.pos,t).setSelection(new r.NodeSelection(e.doc.resolve(o.pos))))}return e}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var i=r.Selection.findFrom(n.doc.resolve(t),e,!0);return i?n.setSelection(i):n}},l=function(t){return t.type&&t.type.spec.selectable},u=function(t,e,n){return function(t){return l(t)&&t.type.isLeaf}(t)?n.setSelection(new r.NodeSelection(n.doc.resolve(e))):c(e)(n)},d=function(t,e,n){return function(r){var i="number"==typeof e,o=r.selection.$from,c=i?r.doc.resolve(e):p(r.selection)?r.doc.resolve(o.pos+1):o,d=c.parent;if(p(r.selection)&&n&&r!==(r=a(t)(r)))return r;if(b(d)&&r!==(r=s(d.type,t)(r))){var h=l(t)?c.before(c.depth):c.pos;return u(t,h,r)}if(w(c,t)){r.insert(c.pos,t);var v=i?c.pos:l(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(u(t,v,r))}for(var m=c.depth;m>0;m--){var g=c.after(m),y=r.doc.resolve(g);if(w(y,t))return r.insert(g,t),f(u(t,g,r))}return r}},p=function(t){return t instanceof r.NodeSelection},h=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},f=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},v=function(t,e){return function(n){var r=n.doc.nodeAt(t),i=n.doc.resolve(t);if(m(i,e)){var o=(n=n.replaceWith(t,t+r.nodeSize,e)).selection.$from.pos-1;return n=c(Math.max(o,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},m=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof i.Fragment?e:i.Fragment.from(e))},g=function(t){return function(e){var n=e.doc.nodeAt(t);return f(e.delete(t,t+n.nodeSize))}},y=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},w=function(t,e){var n=t.index();return e instanceof i.Fragment?t.parent.canReplace(n,n,e):e instanceof i.Node&&t.parent.canReplaceWith(n,n,e.type)},b=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},S=function(t){return function(e){for(var n=o.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),i=n.cellsInRect(t),s=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),a=0,c=i.length;a<c;a++)if(-1===s.indexOf(i[a]))return!1;return!0}},C=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},k=function(t){for(var e=o.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var i=[],s={},a=0;a<e.width;a++){var c=e.map[r*e.width+a],l=t.nodeAt(c),u=e.findCell(c);s[c]||u.top!==r?i.push(null):(s[c]=!0,i.push(l))}n.push(i)}return n},_=function(t,e){for(var n=[],r=o.TableMap.get(t),i=0;i<r.height;i++){for(var s=t.child(i),a=[],c=0;c<r.width;c++)if(e[i][c]){var l=r.map[i*r.width+c],u=e[i][c],d=t.nodeAt(l).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);a.push(d)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return t.type.createChecked(t.attrs,n,t.marks)},M=function(t,e,n,r){var i=e[0]>n[0]?-1:1,o=t.splice(e[0],e.length),s=o.length%2==0?1:0,a=void 0;return a=-1===r&&1===i?n[0]-1:1===r&&-1===i?n[n.length-1]-s+1:-1===i?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(o)),t},O=function(t,e,n,r){var i="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1===(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(i)}else if(-1!==n.slice(1).indexOf(e))throw new Error(i);return!0},E=function(t){return function(e){var n=e.$from;return N(n,t)}},N=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},T=function(t,e){return function(n){var r=E(t)(n);if(r)return R(r.pos,e)}},A=function(t){return function(e){return!!E(t)(e)}},D=function(t){return function(e){return E((function(e){return h(t,e)}))(e)}},P=function(t){var e=t.$from.nodeBefore,n=r.Selection.findFrom(t.$from,-1);if(n&&e){var i=D(e.type)(n);return i?i.pos:n.$from.pos}},R=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},I=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},B=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return I(t,n).filter((function(t){return e(t.node)}))},$=function(t,e,n){return B(t,(function(t){return t.type===e}),n)};var z=function(t){return E((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},V=function(t){return t instanceof o.CellSelection},F=function(t){if(V(t)){var e=o.TableMap.get(t.$anchorCell.node(-1));return S({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},L=function(t){return function(e){var n=z(e);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.width-1){var i=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(i.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},j=function(t){return function(e){var n=z(e);if(n){var r=o.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.height-1){var i=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(i.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},H=function(t){return function(e,n){return function(r){var i=z(r.selection),s="row"===t;if(i){var a=o.TableMap.get(i.node);if(e>=0&&e<(s?a.height:a.width)){var c=s?0:e,l=s?e:0,u=s?a.width:e+1,d=s?e+1:a.height;if(n){var p=G(r.selection.$from);if(!p)return r;var h=a.findCell(p.pos-i.start);s?(l=Math.min(l,h.top),d=Math.max(d,h.bottom)):(c=Math.min(c,h.left),u=Math.max(u,h.right))}var v=a.cellsInRect({left:c,top:l,right:s?u:c+1,bottom:s?l+1:d}),m=d-l==1?v:a.cellsInRect({left:s?c:u-1,top:s?d-1:l,right:u,bottom:d}),g=i.start+v[0],y=i.start+m[m.length-1],w=r.doc.resolve(g),b=r.doc.resolve(y);return f(r.setSelection(new o.CellSelection(b,w)))}}return r}}},Z=H("column"),K=H("row"),W=function(t){return function(e){var n=z(e.selection);if(n){var r=o.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var i=n.node,s=y(i.type.schema),a=n.start,c=0;c<t+1;c++)a+=i.child(c).nodeSize;var l=i.child(t),u=[],p=0;if(l.forEach((function(t){1===t.attrs.rowspan&&(p+=t.attrs.colspan,u.push(s[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),p<r.width){for(var h=[],f=function(n){var r=Q(n,(function(e,r){var i=e.node.attrs.rowspan;return i>1&&n+i>t}))(e);h.push.apply(h,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},v=t;v>=0;v--)f(v);h.length&&h.forEach((function(t){e=X(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return d(s.row.create(l.attrs,u),a)(e)}}return e}},J=function(t){return function(e){var n=z(e.selection);if(n){var r=o.TableMap.get(n.node);if(0===t&&1===r.width)return q(e);if(t>=0&&t<=r.width)return o.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},U=function(t){return function(e){var n=z(e.selection);if(n){var r=o.TableMap.get(n.node);if(0===t&&1===r.height)return q(e);if(t>=0&&t<=r.height)return o.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},q=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--){if("table"===e.node(n).type.spec.tableRole)return f(t.delete(e.before(n),e.after(n)))}return t},X=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),f(n)):n}},G=function(t){return N(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},Y=function(t){var e=G(t);if(e){var n=function(t){return N(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),r=o.TableMap.get(n.node),i=e.pos-n.start;return r.rectBetween(i,i)}},Q=function(t,e){return function(n){var r=[],i=j(t)(n.selection);if(i)for(var o=i.length-1;o>=0;o--)e(i[o],n)&&r.push(i[o]);return r}},tt=function(t){return function(e){for(var n=t,r=t,i=function(t){var i=L(t)(e.selection);i&&i.forEach((function(e){var i=e.node.attrs.colspan+t-1;i>=n&&(n=t),i>r&&(r=i)}))},o=t;o>=0;o--)i(o);var s=function(t){var n=L(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(o=t;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=L(o)(e.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=L(n)(e.selection),u=j(0)(e.selection),d=e.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=L(h)(e.selection);if(f&&f.length){for(var v=u.length-1;v>=0;v--)if(u[v].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:e.doc.resolve(p.pos),indexes:a}}},et=function(t){return function(e){for(var n=t,r=t,i=function(t){j(t)(e.selection).forEach((function(e){var i=e.node.attrs.rowspan+t-1;i>=n&&(n=t),i>r&&(r=i)}))},o=t;o>=0;o--)i(o);var s=function(t){j(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(o=t;o<=r;o++)s(o);var a=[];for(o=n;o<=r;o++){var c=j(o)(e.selection);c&&c.length&&a.push(o)}n=a[0],r=a[a.length-1];for(var l=j(n)(e.selection),u=L(0)(e.selection),d=e.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=j(h)(e.selection);if(f&&f.length){for(var v=u.length-1;v>=0;v--)if(u[v].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:e.doc.resolve(p.pos),indexes:a}}};e.Kk=E,e.a1=function(t){return function(e){if(p(e)){var n=e.node,r=e.$from;if(h(t,n))return{node:n,pos:r.pos,depth:r.depth}}}}},8780:(t,e,n)=>{"use strict";n.d(e,{p:()=>Me,EH:()=>Te,tk:()=>Le});var r=n(6922),i=n(8638),o=n(1081),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!d,s.chrome_version=d&&+d[1],s.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},f=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},v=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},m=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,i){for(;;){if(t==n&&e==r)return!0;if(e==(i<0?0:y(t))){var o=t.parentNode;if(1!=o.nodeType||w(t)||m.test(t.nodeName)||"false"==t.contentEditable)return!1;e=p(t)+(i<0?0:1),t=o}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(i<0?-1:0)]).contentEditable)return!1;e=i<0?y(t):0}}}function y(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function w(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var b=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function S(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function C(t,e){return"number"==typeof t?t:t[e]}function k(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth,top:e.top,bottom:e.top+t.clientHeight}}function _(t,e,n){for(var r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument,s=n||t.dom;s;s=h(s))if(1==s.nodeType){var a=s==o.body||1!=s.nodeType,c=a?S(o):k(s),l=0,u=0;if(e.top<c.top+C(r,"top")?u=-(c.top-e.top+C(i,"top")):e.bottom>c.bottom-C(r,"bottom")&&(u=e.bottom-c.bottom+C(i,"bottom")),e.left<c.left+C(r,"left")?l=-(c.left-e.left+C(i,"left")):e.right>c.right-C(r,"right")&&(l=e.right-c.right+C(i,"right")),l||u)if(a)o.defaultView.scrollBy(l,u);else{var d=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var f=s.scrollLeft-d,v=s.scrollTop-p;e={left:e.left-f,top:e.top-v,right:e.right-f,bottom:e.bottom-v}}if(a)break}}function M(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=h(t));return e}function O(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=r.dom,o=r.top,s=r.left;i.scrollTop!=o+e&&(i.scrollTop=o+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var E=null;function N(t,e){for(var n,r,i=2e8,o=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=f(c).getClientRects()}for(var d=0;d<u.length;d++){var p=u[d];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(h<i){n=c,i=h,r=h&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==c.nodeType&&h&&(o=l+(e.left>=(p.left+p.right)/2?1:0));continue}}!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(o=l+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),i=0;i<n;i++){r.setEnd(t,i+1),r.setStart(t,i);var o=P(r,1);if(o.top!=o.bottom&&T(e,o))return{node:t,offset:i+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||i&&1==n.nodeType?{node:t,offset:o}:N(n,r)}function T(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function A(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=i;;){var s=t.childNodes[o];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(T(e,l))return A(s,e,l)}if((o=(o+1)%r)==i)break}return t}function D(t,e){var n,r,i,o,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(i=(n=c).offsetNode,o=n.offset)}catch(t){}if(!i&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(e.left,e.top);l&&(i=(r=l).startContainer,o=r.startOffset)}var u,d=a.elementFromPoint(e.left,e.top+1);if(!d||!t.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=t.dom.getBoundingClientRect();if(!T(e,p))return null;if(!(d=A(t.dom,e,p)))return null}if(s.safari&&d.draggable&&(i=o=null),d=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(d,e),i){if(s.gecko&&1==i.nodeType&&(o=Math.min(o,i.childNodes.length))<i.childNodes.length){var h,f=i.childNodes[o];"IMG"==f.nodeName&&(h=f.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&o++}i==t.dom&&o==i.childNodes.length-1&&1==i.lastChild.nodeType&&e.top>i.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=o&&1==i.nodeType&&"BR"==i.childNodes[o-1].nodeName||(u=function(t,e,n,r){for(var i=-1,o=e;o!=t.dom;){var s=t.docView.nearestDesc(o,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)i=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;i=s.posAfter}}o=s.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n)}(t,i,o,e))}null==u&&(u=function(t,e,n){var r=N(e,n),i=r.node,o=r.offset,s=-1;if(1==i.nodeType&&!i.firstChild){var a=i.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(i,o,s)}(t,d,e));var v=t.docView.nearestDesc(d,!0);return{pos:u,inside:v?v.posAtStart-v.border:-1}}function P(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function R(t,e){var n=t.docView.domFromPos(e),r=n.node,i=n.offset;if(3==r.nodeType&&(s.webkit||s.gecko)){var o=P(f(r,i,i),0);if(s.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=P(f(r,i-1,i-1),-1);if(a.top==o.top){var c=P(f(r,i,i+1),-1);if(c.top!=o.top)return I(c,c.left<a.left)}}return o}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var l,u=!0;if(i<r.childNodes.length){var d=r.childNodes[i];1==d.nodeType&&(l=d.getBoundingClientRect())}if(!l&&i){var p=r.childNodes[i-1];1==p.nodeType&&(l=p.getBoundingClientRect(),u=!1)}return function(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}(l||r.getBoundingClientRect(),u)}for(var h=-1;h<2;h+=2)if(h<0&&i){var v=void 0,m=3==r.nodeType?f(r,i-1,i):3==(v=r.childNodes[i-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(m){var g=P(m,1);if(g.top<g.bottom)return I(g,!1)}}else if(h>0&&i<y(r)){var w=void 0,b=3==r.nodeType?f(r,i,i+1):3==(w=r.childNodes[i]).nodeType?f(w):1==w.nodeType?w:null;if(b){var x=P(b,-1);if(x.top<x.bottom)return I(x,!0)}}return I(P(3==r.nodeType?f(r):r,0),!1)}function I(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function B(t,e,n){var r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}var $=/[\u0590-\u08ac]/;var z=null,V=null,F=!1;function L(t,e,n){return z==e&&V==n?F:(z=e,V=n,F="up"==n||"down"==n?function(t,e,n){var r=e.selection,i="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return B(t,e,(function(){for(var e=t.docView.domFromPos(i.pos).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var o=R(t,i.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<o.top+1:l.top>o.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var i=r.parentOffset,o=!i,s=i==r.parent.content.size,a=getSelection();return $.test(r.parent.textContent)&&a.modify?B(t,e,(function(){var e=a.getRangeAt(0),i=a.focusNode,o=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||i==a.focusNode&&o==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?o:s}(t,e,n))}var j=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},H={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};j.prototype.matchesWidget=function(){return!1},j.prototype.matchesMark=function(){return!1},j.prototype.matchesNode=function(){return!1},j.prototype.matchesHack=function(){return!1},H.beforePosition.get=function(){return!1},j.prototype.parseRule=function(){return null},j.prototype.stopEvent=function(){return!1},H.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},H.border.get=function(){return 0},j.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},j.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},H.posBefore.get=function(){return this.parent.posBeforeChild(this)},H.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},H.posAfter.get=function(){return this.posBefore+this.size},H.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},j.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,i;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(i=r.pmViewDesc)||i.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}var o,s;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&(!(s=o.pmViewDesc)||s.parent!=this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},j.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var i=this.getDesc(r);if(i&&(!e||i.node)){if(!n||!i.nodeDOM||(1==i.nodeDOM.nodeType?i.nodeDOM.contains(1==t.nodeType?t:t.parentNode):i.nodeDOM==t))return i;n=!1}}},j.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},j.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var i=this.getDesc(r);if(i)return i.localPosFromDOM(t,e,n)}return-1},j.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],i=n+r.size;if(n==t&&i!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<i)return r.descAt(t-n-r.border);n=i}},j.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:p(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],i=e+r.size;if(t<i)return r.domFromPos(t-e-r.border);e=i}},j.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,i=-1,o=n,s=0;;s++){var a=this.children[s],c=o+a.size;if(-1==r&&t<=c){var l=o+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=o;for(var u=s;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=p(d.dom)+1;break}t-=d.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var h=s+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){i=p(f.dom);break}e+=f.size}-1==i&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:i}},j.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},j.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},j.prototype.setSelection=function(t,e,n,r){for(var i=Math.min(t,e),o=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var l=this.children[a],u=c+l.size;if(i>c&&o<u)return l.setSelection(t-c-l.border,e-c-l.border,n,r);c=u}var d=this.domFromPos(t),p=this.domFromPos(e),h=n.getSelection(),f=!1;if((s.gecko||s.safari)&&t==e){var m=d.node.childNodes[d.offset-1];f=m&&("BR"==m.nodeName||"false"==m.contentEditable)}if(r||f&&s.safari||!v(d.node,d.offset,h.anchorNode,h.anchorOffset)||!v(p.node,p.offset,h.focusNode,h.focusOffset)){var g=!1;if((h.extend||t==e)&&!f){h.collapse(d.node,d.offset);try{t!=e&&h.extend(p.node,p.offset),g=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!g){if(t>e){var y=d;d=p,p=y}var w=document.createRange();w.setEnd(p.node,p.offset),w.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(w)}}},j.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},H.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},j.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var i=this.children[r],o=n+i.size;if(n==o?t<=o&&e>=n:t<o&&e>n){var s=n+i.border,a=o-i.border;if(t>=s&&e<=a)return this.dirty=t==n||e==o?2:1,void(t!=s||e!=a||!i.contentLost&&i.dom.parentNode==this.contentDOM?i.markDirty(t-s,e-s):i.dirty=3);i.dirty=3}n=o}this.dirty=2},j.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(j.prototype,H);var Z=[],K=function(t){function e(e,n,r,i){var o,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return o?o.parent?o.parent.posBeforeChild(o):void 0:i}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,Z,s,null),this.widget=n,o=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(j),W=function(t){function e(e,n,r,i){t.call(this,e,Z,n,null),this.textDOM=r,this.text=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(j),J=function(t){function e(e,n,r,i){t.call(this,e,[],r,i),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var s=o.nodeViews[n.type.name],a=s&&s(n,o,r);return a&&a.dom||(a=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var i=e.create(this.parent,this.mark,!0,r),o=this.children,s=this.size;n<s&&(o=ut(o,n,s,r)),t>0&&(o=ut(o,0,t,r));for(var a=0;a<o.length;a++)o[a].parent=i;return i.children=o,i},e}(j),U=function(t){function e(e,n,r,i,o,s,a,c,l){t.call(this,e,n.isLeaf?Z:[],o,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=i,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,o,s,a){var c,l,u=s.nodeViews[n.type.name],d=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),p=d&&d.dom,h=d&&d.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=i.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=c.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var f=p;return p=ot(p,r,n),d?l=new Y(t,n,r,o,p,h,f,d,s,a+1):n.isText?new X(t,n,r,o,p,f,s):new e(t,n,r,o,p,h,f,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?i.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&st(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,a=r&&t.composing&&this.localCompositionNode(t,e),c=new ct(this,a&&a.node);!function(t,e,n,r){var i=e.locals(t),o=0;if(0==i.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,i,e.forChild(o,a),s),o+=a.nodeSize}return}for(var c=0,l=[],u=null,d=0;;){if(c<i.length&&i[c].to==o){for(var p=i[c++],h=void 0;c<i.length&&i[c].to==o;)(h||(h=[p])).push(i[c++]);if(h){h.sort(lt);for(var f=0;f<h.length;f++)n(h[f],d,!!u)}else n(p,d,!!u)}var v=void 0,m=void 0;if(u)m=-1,v=u,u=null;else{if(!(d<t.childCount))break;m=d,v=t.child(d++)}for(var g=0;g<l.length;g++)l[g].to<=o&&l.splice(g--,1);for(;c<i.length&&i[c].from<=o&&i[c].to>o;)l.push(i[c++]);var y=o+v.nodeSize;if(v.isText){var w=y;c<i.length&&i[c].from<w&&(w=i[c].from);for(var b=0;b<l.length;b++)l[b].to<w&&(w=l[b].to);w<y&&(u=v.cut(w-o),v=v.cut(0,w-o),y=w,m=-1)}r(v,l.length?v.isInline&&!v.isLeaf?l.filter((function(t){return!t.inline})):l.slice():Z,e.forChild(o,v),m),o=y}}(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?c.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?i.Mark.none:n.node.child(s).marks,r,t),c.placeWidget(e,t,o)}),(function(e,n,i,s){c.syncToMarks(e.marks,r,t),c.findNodeMatch(e,n,i,s)||c.updateNextNode(e,n,i,t,s)||c.addNode(e,n,i,t,o),o+=e.nodeSize})),c.syncToMarks(Z,r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),Q(this.contentDOM,this.children,t),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,i=n.from,o=n.to;if(!(!(t.state.selection instanceof r.TextSelection)||i<e||o>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=y(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(t,e,n,r){for(var i=0,o=0;i<t.childCount&&o<=r;){var s=t.child(i++),a=o;if(o+=s.nodeSize,s.isText){for(var c=s.text;i<t.childCount;){var l=t.child(i++);if(o+=l.nodeSize,!l.isText)break;c+=l.text}if(o>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}(this.node.content,c,i-e,o-e);return l<0?null:{node:a,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,i=e.text;if(!this.getDesc(n)){for(var o=n;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=null)}var s=new W(this,o,n,i);t.compositionNodes.push(s),this.children=ut(this.children,r,r+i.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!st(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=rt(this.dom,this.nodeDOM,nt(this.outerDeco,this.node,e),nt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(j);function q(t,e,n,r,i){return ot(r,e,t),new U(null,t,e,n,r,r,r,i,0)}var X=function(t){function e(e,n,r,i,o,s,a){t.call(this,e,n,r,i,o,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var i=this.node.cut(t,n),o=document.createTextNode(i.text);return new e(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)},e}(U),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(j),Y=function(t){function e(e,n,r,i,o,s,a,c,l,u){t.call(this,e,n,r,i,o,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,i){if(3==this.dirty)return!1;if(this.spec.update){var o=this.spec.update(e,n);return o&&this.updateInner(e,n,r,i),o}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,i)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,i)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(U);function Q(t,e,n){for(var r=t.firstChild,i=!1,o=0;o<e.length;o++){var s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=at(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(a,r);if(s instanceof J){var c=r?r.previousSibling:t.lastChild;Q(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=at(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}function tt(t){t&&(this.nodeName=t)}tt.prototype=Object.create(null);var et=[new tt];function nt(t,e,n){if(0==t.length)return et;for(var r=n?et[0]:new tt,i=[r],o=0;o<t.length;o++){var s=t[o].type.attrs,a=r;if(s)for(var c in s.nodeName&&i.push(a=new tt(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==i.length&&i.push(a=r=new tt(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return i}function rt(t,e,n,r){if(n==et&&r==et)return e;for(var i=e,o=0;o<r.length;o++){var s=r[o],a=n[o];if(o){var c=void 0;a&&a.nodeName==s.nodeName&&i!=t&&(c=i.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(i),a=et[0]),i=c}it(i,a||et[0],s)}return i}function it(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){for(var o=e.class?e.class.split(" "):Z,s=n.class?n.class.split(" "):Z,a=0;a<o.length;a++)-1==s.indexOf(o[a])&&t.classList.remove(o[a]);for(var c=0;c<s.length;c++)-1==o.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function ot(t,e,n){return rt(t,t,et,nt(e,n,1!=t.nodeType))}function st(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function at(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var ct=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=function(t,e){for(var n=[],r=t.childCount,i=e.length-1;r>0&&i>=0;i--){var o=e[i],s=o.node;if(s){if(s!=t.child(r-1))break;n.push(o),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function lt(t,e){return t.type.side-e.type.side}function ut(t,e,n,r,i){for(var o=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?o.push(c):(l<e&&o.push(c.slice(0,e-l,r)),i&&(o.push(i),i=null),u>n&&o.push(c.slice(n-l,c.size,r)))}return o}function dt(t,e){var n=t.root.getSelection(),i=t.state.doc;if(!n.focusNode)return null;var o=t.docView.nearestDesc(n.focusNode),s=o&&0==o.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=i.resolve(a);if(b(n)){for(c=u;o&&!o.node;)o=o.parent;if(o&&o.node.isAtom&&r.NodeSelection.isSelectable(o.node)&&o.parent&&(!o.node.isInline||!function(t,e,n){for(var r=0==e,i=e==y(t);r||i;){if(t==n)return!0;var o=p(t);if(!(t=t.parentNode))return!1;r=r&&0==o,i=i&&o==y(t)}}(n.focusNode,n.focusOffset,o.dom))){var d=o.posBefore;l=new r.NodeSelection(a==d?u:i.resolve(d))}}else{var h=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=i.resolve(h)}l||(l=wt(t,c,u,"pointer"==e||t.state.selection.head<u.pos&&!s?1:-1));return l}function pt(t,e){var n=t.state.selection;if(gt(t,n),t.editable?t.hasFocus():bt(t)&&document.activeElement&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,i="IMG"==r.nodeName;i?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!i&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var i,o,a=n.anchor,c=n.head;!ht||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(i=ft(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=ft(t,n.to))),t.docView.setSelection(a,c,t.root,e),ht&&(i&&mt(i),o&&mt(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==i||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}ct.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},ct.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},ct.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ct.prototype.syncToMarks=function(t,e,n){for(var r=0,i=this.stack.length>>1,o=Math.min(i,t.length);r<o&&(r==i-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<i;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[i])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=J.create(this.top,t[i],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,i++}},ct.prototype.findNodeMatch=function(t,e,n,r){var i=-1,o=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(o&&o.matchesNode(t,e,n))i=s.indexOf(o);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){i=a;break}}return!(i<0)&&(this.destroyBetween(this.index,i),this.index++,!0)},ct.prototype.updateNextNode=function(t,e,n,r,i){for(var o=this.index;o<this.top.children.length;o++){var s=this.top.children[o];if(s instanceof U){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=i)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&st(e,s.outerDeco)))&&s.update(t,e,n,r))return this.destroyBetween(this.index,o),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ct.prototype.addNode=function(t,e,n,r,i){this.top.children.splice(this.index++,0,U.create(this.top,t,e,n,r,i)),this.changed=!0},ct.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var i=new K(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++},ct.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof J;)t=t.children[t.children.length-1];if(!t||!(t instanceof X)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new G(this.top,Z,e,null)),this.changed=!0}};var ht=s.safari||s.chrome&&s.chrome_version<63;function ft(t,e){var n=t.docView.domFromPos(e),r=n.node,i=n.offset,o=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(s.safari&&o&&"false"==o.contentEditable)return vt(o);if(!(o&&"false"!=o.contentEditable||a&&"false"!=a.contentEditable)){if(o)return vt(o);if(a)return vt(a)}}function vt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function mt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gt(t,e){if(e instanceof r.NodeSelection){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(yt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else yt(t)}function yt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function wt(t,e,n,i){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.TextSelection.between(e,n,i)}function bt(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function xt(t,e){var n=t.selection,i=n.$anchor,o=n.$head,s=e>0?i.max(o):i.min(o),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,e)}function St(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Ct(t,e,n){var i=t.state.selection;if(!(i instanceof r.TextSelection)){if(i instanceof r.NodeSelection&&i.node.isInline)return St(t,new r.TextSelection(e>0?i.$to:i.$from));var o=xt(t.state,e);return!!o&&St(t,o)}if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=xt(t.state,e);return!!(a&&a instanceof r.NodeSelection)&&St(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=i.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var d=e<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=t.docView.descAt(d))&&!c.contentDOM)&&(r.NodeSelection.isSelectable(u)?St(t,new r.NodeSelection(e<0?t.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&St(t,new r.TextSelection(t.state.doc.resolve(e<0?d:d+u.nodeSize))))}}function kt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function _t(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Mt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var i,o,a=!1;for(s.gecko&&1==n.nodeType&&r<kt(n)&&_t(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(_t(c))i=n,o=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(Et(n))break;for(var l=n.previousSibling;l&&_t(l);)i=n.parentNode,o=p(l),l=l.previousSibling;if(l)r=kt(n=l);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Nt(t,e,n,r):i&&Nt(t,e,i,o)}}function Ot(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var i,o,s=kt(n);;)if(r<s){if(1!=n.nodeType)break;if(!_t(n.childNodes[r]))break;i=n,o=++r}else{if(Et(n))break;for(var a=n.nextSibling;a&&_t(a);)i=a.parentNode,o=p(a)+1,a=a.nextSibling;if(a)r=0,s=kt(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}i&&Nt(t,e,i,o)}}function Et(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Nt(t,e,n,r){if(b(e)){var i=document.createRange();i.setEnd(n,r),i.setStart(n,r),e.removeAllRanges(),e.addRange(i)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var o=t.state;setTimeout((function(){t.state==o&&pt(t)}),50)}function Tt(t,e,n){var i=t.state.selection;if(i instanceof r.TextSelection&&!i.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var o=i.$from,a=i.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=xt(t.state,e);if(c&&c instanceof r.NodeSelection)return St(t,c)}if(!o.parent.inlineContent){var l=r.Selection.findFrom(e<0?o:a,e);return!l||St(t,l)}return!1}function At(t,e){if(!(t.state.selection instanceof r.TextSelection))return!0;var n=t.state.selection,i=n.$head,o=n.$anchor,s=n.empty;if(!i.sameParent(o))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!i.textOffset&&(e<0?i.nodeBefore:i.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(i.pos-a.nodeSize,i.pos):c.delete(i.pos,i.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Dt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Pt(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?At(t,-1)||Mt(t):46==n||s.mac&&68==n&&"c"==r?At(t,1)||Ot(t):13==n||27==n||(37==n?Ct(t,-1,r)||Mt(t):39==n?Ct(t,1,r)||Ot(t):38==n?Tt(t,-1,r)||Mt(t):40==n?function(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var i=n.firstChild;Dt(t,i,!0),setTimeout((function(){return Dt(t,i,!1)}),20)}}}(t)||Tt(t,1,r)||Ot(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Rt(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function It(t,e,n,o,a){if(e<0){var c=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,l=dt(t,c);if(l&&!t.state.selection.eq(l)){var u=t.state.tr.setSelection(l);"pointer"==c?u.setMeta("pointer",!0):"key"==c&&u.scrollIntoView(),t.dispatch(u)}}else{var d=t.state.doc.resolve(e),p=d.sharedDepth(n);e=d.before(p+1),n=t.state.doc.resolve(n).after(p+1);var h,f,v=t.state.selection,m=function(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,d=t.root.getSelection(),p=null,h=d.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:d.anchorOffset}],b(d)||p.push({node:d.focusNode,offset:d.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var f=c;f>a;f--){var v=o.childNodes[f-1],m=v.pmViewDesc;if("BR"==v.nodeType&&!m){c=f;break}if(!m||m.size)break}var g=t.state.doc,y=t.someProp("domParser")||i.DOMParser.fromSchema(t.state.schema),w=g.resolve(l),x=null,S=y.parse(o,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Rt,context:w});if(p&&null!=p[0].pos){var C=p[0].pos,k=p[1]&&p[1].pos;null==k&&(k=C),x={anchor:C+l,head:k+l}}return{doc:S,sel:x,from:l,to:u}}(t,e,n),g=t.state.doc,y=g.slice(m.from,m.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.lastKeyCode=null;var w=function(t,e,n,r,i){var o=t.findDiffStart(e,n);if(null==o)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==i){r-=a+Math.max(0,o-Math.min(a,c))-o}if(a<o&&t.size<e.size){c=(o-=r<=o&&r>=a?o-r:0)+(c-a),a=o}else if(c<o){a=(o-=r<=o&&r>=c?o-r:0)+(a-c),c=o}return{start:o,endA:a,endB:c}}(y.content,m.doc.content,m.from,h,f);if(!w){if(!(o&&v instanceof r.TextSelection&&!v.empty&&v.$head.sameParent(v.$anchor))||t.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var S=Bt(t,t.state.doc,m.sel);S&&!S.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(S))}return}w={start:v.from,endA:v.to,endB:v.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof r.TextSelection&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>m.from&&"  "==m.doc.textBetween(w.start-m.from-1,w.start-m.from+1)&&(w.start--,w.endA--,w.endB--);var C,k=m.doc.resolveNoCache(w.start-m.from),_=m.doc.resolveNoCache(w.endB-m.from),M=k.sameParent(_)&&k.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!M||a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!M&&k.pos<m.doc.content.size&&(C=r.Selection.findFrom(m.doc.resolve(k.pos+1),1,!0))&&C.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>w.start&&function(t,e,n,r,i){if(!r.parent.isTextblock||n-e<=i.pos-r.pos||$t(r,!0,!1)<i.pos)return!1;var o=t.resolve(e);if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;var s=t.resolve($t(o,!0,!0));if(!s.parent.isTextblock||s.pos>n||$t(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,w.start,w.endA,k,_)&&t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.android&&!M&&k.start()!=_.start()&&0==_.parentOffset&&k.depth==_.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==w.endA&&(w.endB-=2,_=m.doc.resolveNoCache(w.endB-m.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))}))}),20));var O,E,N,T,A=w.start,D=w.endA;if(M)if(k.pos==_.pos)s.ie&&s.ie_version<=11&&0==k.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return pt(t)}),20)),O=t.state.tr.delete(A,D),E=g.resolve(w.start).marksAcross(g.resolve(w.endA));else if(w.endA==w.endB&&(T=g.resolve(w.start))&&(N=function(t,e){for(var n,r,o,s=t.firstChild.marks,a=e.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var d=0;d<s.length;d++)l=s[d].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(o(e.child(h)));if(i.Fragment.from(p).eq(t))return{mark:r,type:n}}(k.parent.content.cut(k.parentOffset,_.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start()))))O=t.state.tr,"add"==N.type?O.addMark(A,D,N.mark):O.removeMark(A,D,N.mark);else if(k.parent.child(k.index()).isText&&k.index()==_.index()-(_.textOffset?0:1)){var P=k.parent.textBetween(k.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,A,D,P)})))return;O=t.state.tr.insertText(P,A,D)}if(O||(O=t.state.tr.replace(A,D,m.doc.slice(w.start-m.from,w.endB-m.from))),m.sel){var R=Bt(t,O.doc,m.sel);R&&!(s.chrome&&s.android&&t.composing&&R.empty&&(R.head==A||R.head==O.mapping.map(D)-1)||s.ie&&R.empty&&R.head==A)&&O.setSelection(R)}E&&O.ensureMarks(E),t.dispatch(O.scrollIntoView())}}}function Bt(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:wt(t,e.resolve(n.anchor),e.resolve(n.head))}function $t(t,e,n){for(var r=t.depth,i=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n)for(var o=t.node(r).maybeChild(t.indexAfter(r));o&&!o.isLeaf;)o=o.firstChild,i++;return i}function zt(t,e){for(var n=[],r=e.content,o=e.openStart,s=e.openEnd;o>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){o--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||i.DOMSerializer.fromSchema(t.state.schema),l=Wt(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));for(var d,p=u.firstChild;p&&1==p.nodeType&&(d=Zt[p.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var f=l.createElement(d[h]);u.firstChild;)f.appendChild(u.firstChild);u.appendChild(f)}p=u.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+s+" "+JSON.stringify(n)),{dom:u,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Vt(t,e,n,r,o){var s,a,c=o.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,c||r)})),c)return new i.Slice(i.Fragment.from(t.state.schema.text(e)),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,o,r)}));u?a=u:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Wt().createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),o=0;(n=i&&Zt[i[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),o=n.length);r.innerHTML=t;for(var s=0;s<o;s++)r=r.firstChild;return r}(n);var d=s&&s.querySelector("[data-pm-slice]"),p=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||i.DOMParser.fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!l&&!p),context:o})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;o=i.Fragment.from(l.create(n[c+1],o)),s++,a++}return new i.Slice(o,s,a)}(function(t,e,n){e<t.openStart&&(t=new i.Slice(Ht(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new i.Slice(Ht(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+p[1],+p[2]),p[3]):i.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),o=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&o.length&&Lt(n,o,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=jt(s[s.length-1],o.length));var i=Ft(t,n);s.push(i),r=r.matchType(i.type,i.attrs),o=n}}})),s)return{v:i.Fragment.from(s)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}(a.content,o),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function Ft(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,i.Fragment.from(t));return t}function Lt(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var s=Lt(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(i.Fragment.from(Ft(n,t,o+1))))}}function jt(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,jt(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(i.Fragment.empty,!0);return t.copy(n.append(r))}function Ht(t,e,n,r,o,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return o<r-1&&(c=Ht(c,e,n,r,o+1,s)),o>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=o).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(i.Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}var Zt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Kt=null;function Wt(){return Kt||(Kt=document.implementation.createHTMLDocument("title"))}var Jt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ut=s.ie&&s.ie_version<=11,qt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};qt.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},qt.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Xt=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new qt,Ut&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Xt.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Xt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Xt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Jt),Ut&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Xt.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Ut&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Xt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Xt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Xt.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Xt.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&bt(t)){var t;if(this.suppressingSelectionUpdates)return pt(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&v(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Xt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Xt.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Xt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&bt(this.view)&&!this.ignoreSelectionChange(e),r=-1,i=-1,o=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var l=this.registerMutation(t[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(o=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(t){return"BR"==t.nodeName}));if(2==u.length){var d=u[0],p=u[1];d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,i),function(t){if(Gt)return;Gt=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,i,o,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||pt(this.view))}},Xt.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,i=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var o=0;o<t.addedNodes.length;o++){var a=t.addedNodes[o],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(i=l)}for(var u=r&&r.parentNode==t.target?p(r)+1:0,d=n.localPosFromDOM(t.target,u,-1),h=i&&i.parentNode==t.target?p(i):t.target.childNodes.length,f=0;f<t.addedNodes.length;f++)e.push(t.addedNodes[f]);return{from:d,to:n.localPosFromDOM(t.target,h,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Gt=!1;var Yt={},Qt={};function te(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function ee(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return ne(t,e)})}))}function ne(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function re(t){return{left:t.clientX,top:t.clientY}}function ie(t,e,n,r,i){if(-1==r)return!1;for(var o=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>o.depth?e(t,n,o.nodeAfter,o.before(r),i,!0):e(t,n,o.node(r),o.before(r),i,!1)})))return{v:!0}},a=o.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function oe(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function se(t,e,n,i,o){return ie(t,"handleClickOn",e,n,i)||t.someProp("handleClick",(function(n){return n(t,e,i)}))||(o?function(t,e){if(-1==e)return!1;var n,i,o=t.state.selection;o instanceof r.NodeSelection&&(n=o.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){i=n&&o.$from.depth>0&&a>=o.$from.depth&&s.before(o.$from.depth+1)==o.$from.pos?s.before(o.$from.depth):s.before(a);break}}return null!=i&&(oe(t,r.NodeSelection.create(t.state.doc,i),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&r.NodeSelection.isSelectable(i))&&(oe(t,new r.NodeSelection(n),"pointer"),!0)}(t,n))}function ae(t,e,n,r){return ie(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function ce(t,e,n,i){return ie(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",(function(n){return n(t,e,i)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(oe(t,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var i=n.resolve(e),o=i.depth+1;o>0;o--){var s=o>i.depth?i.nodeAfter:i.node(o),a=i.before(o);if(s.inlineContent)oe(t,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;oe(t,r.NodeSelection.create(n,a),"pointer")}return!0}}(t,n)}function le(t){return me(t)}Qt.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!pe(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Pt(t,e)?e.preventDefault():te(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Qt.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Qt.keypress=function(t,e){if(!(pe(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var i=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,i)}))||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),e.preventDefault()}}};var ue=s.mac?"metaKey":"ctrlKey";Yt.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=le(t),r=Date.now(),i="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[ue]&&("singleClick"==t.lastClick.type?i="doubleClick":"doubleClick"==t.lastClick.type&&(i="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:i};var o=t.posAtCoords(re(e));o&&("singleClick"==i?t.mouseDown=new de(t,o,e,n):("doubleClick"==i?ae:ce)(t,o.pos,o.inside,e)?e.preventDefault():te(t,"pointer"))};var de=function(t,e,n,i){var o,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=i,this.selectNode=n[ue],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),a=e.inside;else{var l=t.state.doc.resolve(e.pos);o=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=i?null:n.target,d=u?t.docView.nearestDesc(u,!0):null;this.target=d?d.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||t.state.selection instanceof r.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:o,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),te(t,"pointer")};function pe(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}de.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},de.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(re(t))),this.allowDefault||!e?te(this.view,"pointer"):se(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(oe(this.view,r.Selection.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):te(this.view,"pointer")}},de.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),te(this.view,"pointer")},Yt.touchdown=function(t){le(t),te(t,"pointer")},Yt.contextmenu=function(t){return le(t)};var he=s.android?5e3:-1;function fe(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return me(t)}),e))}function ve(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function me(t,e){if(t.domObserver.forceFlush(),ve(t),e||t.docView.dirty){var n=dt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}Qt.compositionstart=Qt.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),me(t,!0),t.markCursor=null;else if(me(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),i=r.focusNode,o=r.focusOffset;i&&1==i.nodeType&&0!=o;){var a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,o=-1}t.composing=!0}fe(t,he)},Qt.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,fe(t,20))};var ge=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ye(t,e,n,r){var o=Vt(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,o||i.Slice.empty)}))&&o){var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(o);t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Yt.copy=Qt.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var i=ge?null:e.clipboardData,o=zt(t,n.content()),s=o.dom,a=o.text;i?(e.preventDefault(),i.clearData(),i.setData("text/html",s.innerHTML),i.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Qt.paste=function(t,e){var n=ge?null:e.clipboardData,r=n&&n.getData("text/html"),i=n&&n.getData("text/plain");n&&(r||i||n.files.length)?(ye(t,i,r,e),e.preventDefault()):function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ye(t,r.value,null,e):ye(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var we=function(t,e){this.slice=t,this.move=e},be=s.mac?"altKey":"ctrlKey";for(var xe in Yt.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var i=t.state.selection,o=i.empty?null:t.posAtCoords(re(e));if(o&&o.pos>=i.from&&o.pos<=(i instanceof r.NodeSelection?i.to-1:i.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=zt(t,a),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(ge?"Text":"text/html",l.innerHTML),ge||e.dataTransfer.setData("text/plain",u),t.dragging=new we(a,!e[be])}},Yt.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Qt.dragover=Qt.dragenter=function(t,e){return e.preventDefault()},Qt.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(re(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||Vt(t,e.dataTransfer.getData(ge?"Text":"text/plain"),ge?null:e.dataTransfer.getData("text/html"),!1,a),l=n&&!e[be];if(t.someProp("handleDrop",(function(n){return n(t,e,c||i.Slice.empty,l)})))e.preventDefault();else if(c){e.preventDefault();var u=c?(0,o.nj)(t.state.doc,a.pos,c):a.pos;null==u&&(u=a.pos);var d=t.state.tr;l&&d.deleteSelection();var p=d.mapping.map(u),h=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,f=d.doc;if(h?d.replaceRangeWith(p,p,c.content.firstChild):d.replaceRange(p,p,c),!d.doc.eq(f)){var v=d.doc.resolve(p);if(h&&r.NodeSelection.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.NodeSelection(v));else{var m=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((function(t,e,n,r){return m=r})),d.setSelection(wt(t,v,d.doc.resolve(m)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}}}}}},Yt.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&pt(t)}),20))},Yt.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Yt.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Qt)Yt[xe]=Qt[xe];function Se(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var Ce=function(t,e){this.spec=e||Ne,this.side=this.spec.side||0,this.toDOM=t};Ce.prototype.map=function(t,e,n,r){var i=t.mapResult(e.from+r,this.side<0?-1:1),o=i.pos;return i.deleted?null:new Me(o-n,o-n,this)},Ce.prototype.valid=function(){return!0},Ce.prototype.eq=function(t){return this==t||t instanceof Ce&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Se(this.spec,t.spec))};var ke=function(t,e){this.spec=e||Ne,this.attrs=t};ke.prototype.map=function(t,e,n,r){var i=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return i>=o?null:new Me(i,o,this)},ke.prototype.valid=function(t,e){return e.from<e.to},ke.prototype.eq=function(t){return this==t||t instanceof ke&&Se(this.attrs,t.attrs)&&Se(this.spec,t.spec)},ke.is=function(t){return t.type instanceof ke};var _e=function(t,e){this.spec=e||Ne,this.attrs=t};_e.prototype.map=function(t,e,n,r){var i=t.mapResult(e.from+r,1);if(i.deleted)return null;var o=t.mapResult(e.to+r,-1);return o.deleted||o.pos<=i.pos?null:new Me(i.pos-n,o.pos-n,this)},_e.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,i=n.offset;return i==e.from&&i+t.child(r).nodeSize==e.to},_e.prototype.eq=function(t){return this==t||t instanceof _e&&Se(this.attrs,t.attrs)&&Se(this.spec,t.spec)};var Me=function(t,e,n){this.from=t,this.to=e,this.type=n},Oe={spec:{configurable:!0},inline:{configurable:!0}};Me.prototype.copy=function(t,e){return new Me(t,e,this.type)},Me.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Me.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Me.widget=function(t,e,n){return new Me(t,t,new Ce(e,n))},Me.inline=function(t,e,n,r){return new Me(t,e,new ke(n,r))},Me.node=function(t,e,n,r){return new Me(t,e,new _e(n,r))},Oe.spec.get=function(){return this.type.spec},Oe.inline.get=function(){return this.type instanceof ke},Object.defineProperties(Me.prototype,Oe);var Ee=[],Ne={},Te=function(t,e){this.local=t&&t.length?t:Ee,this.children=e&&e.length?e:Ee};Te.create=function(t,e){return e.length?Be(e,t,0,Ne):Ae},Te.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Te.prototype.findInner=function(t,e,n,r,i){for(var o=0;o<this.local.length;o++){var s=this.local[o];s.from<=e&&s.to>=t&&(!i||i(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,i)}},Te.prototype.map=function(t,e,n){return this==Ae||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Ne)},Te.prototype.mapInner=function(t,e,n,r,i){for(var o,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(o||(o=[])).push(a):i.onRemove&&i.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,i,o,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+o||(e>=a[s]+o?a[s+1]=-1:n>=i&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var p=n.map(t[d]+o),h=p-i;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(t[d+1]+o,-1)-i,v=r.content.findIndex(h),m=v.index,g=v.offset,y=r.maybeChild(m);if(y&&g==h&&g+y.nodeSize==f){var w=a[d+2].mapInner(n,y,p+1,t[d]+o+1,s);w!=Ae?(a[d]=h,a[d+1]=f,a[d+2]=w):(a[d+1]=-2,u=!0)}else u=!0}if(u){var b=Be(function(t,e,n,r,i,o,s){function a(t,e){for(var o=0;o<t.local.length;o++){var c=t.local[o].map(r,i,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[o].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+o+1);return n}(a,t,e||[],n,i,o,s),r,0,s);e=b.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var S=0,C=0;S<b.children.length;S+=3){for(var k=b.children[S];C<a.length&&a[C]<k;)C+=3;a.splice(C,0,b.children[S],b.children[S+1],b.children[S+2])}}return new Te(e&&e.sort($e),a)}(this.children,o,t,e,n,r,i):o?new Te(o.sort($e)):Ae},Te.prototype.add=function(t,e){return e.length?this==Ae?Te.create(t,e):this.addInner(t,e,0):this},Te.prototype.addInner=function(t,e,n){var r,i=this,o=0;t.forEach((function(t,s){var a,c=s+n;if(a=Re(e,t,c)){for(r||(r=i.children.slice());o<r.length&&r[o]<s;)o+=3;r[o]==s?r[o+2]=r[o+2].addInner(t,a,c+1):r.splice(o,0,s,s+t.nodeSize,Be(a,t,c+1,Ne)),o+=3}}));var s=Pe(o?Ie(e):e,-n);return new Te(s.length?this.local.concat(s).sort($e):this.local,r||this.children)},Te.prototype.remove=function(t){return 0==t.length||this==Ae?this:this.removeInner(t,0)},Te.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,i=0;i<n.length;i+=3){for(var o=void 0,s=n[i]+e,a=n[i+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(o||(o=[])).push(l));if(o){n==this.children&&(n=this.children.slice());var u=n[i+2].removeInner(o,s+1);u!=Ae?n[i+2]=u:(n.splice(i,3),i-=3)}}if(r.length)for(var d=0,p=void 0;d<t.length;d++)if(p=t[d])for(var h=0;h<r.length;h++)r[h].eq(p,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Te(r,n):Ae},Te.prototype.forChild=function(t,e){if(this==Ae)return this;if(e.isLeaf)return Te.empty;for(var n,r,i=0;i<this.children.length;i+=3)if(this.children[i]>=t){this.children[i]==t&&(n=this.children[i+2]);break}for(var o=t+1,s=o+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>o&&c.type instanceof ke){var l=Math.max(o,c.from)-o,u=Math.min(s,c.to)-o;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Te(r.sort($e));return n?new De([d,n]):d}return n||Ae},Te.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Te)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Te.prototype.locals=function(t){return ze(this.localsInner(t))},Te.prototype.localsInner=function(t){if(this==Ae)return Ee;if(t.inlineContent||!this.local.some(ke.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof ke||e.push(this.local[n]);return e};var Ae=new Te;Te.empty=Ae,Te.removeOverlap=ze;var De=function(t){this.members=t};function Pe(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];n.push(new Me(i.from+e,i.to+e,i.type))}return n}function Re(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,i=null,o=0,s=void 0;o<t.length;o++)(s=t[o])&&s.from>n&&s.to<r&&((i||(i=[])).push(s),t[o]=null);return i}function Ie(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Be(t,e,n,r){var i=[],o=!1;e.forEach((function(e,s){var a=Re(t,e,s+n);if(a){o=!0;var c=Be(a,e,n+s+1,r);c!=Ae&&i.push(s,s+e.nodeSize,c)}}));for(var s=Pe(o?Ie(t):t,-n).sort($e),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||i.length?new Te(s,i):Ae}function $e(t,e){return t.from-e.from||t.to-e.to}function ze(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var i=n+1;i<e.length;i++){var o=e[i];if(o.from!=r.from){o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Ve(e,i,r.copy(o.from,r.to)));break}o.to!=r.to&&(e==t&&(e=t.slice()),e[i]=o.copy(o.from,r.to),Ve(e,i+1,o.copy(r.to,o.to)))}}return e}function Ve(t,e,n){for(;e<t.length&&$e(n,t[e])>0;)e++;t.splice(e,0,n)}function Fe(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Ae&&e.push(r)})),t.cursorWrapper&&e.push(Te.create(t.state.doc,[t.cursorWrapper.deco])),De.from(e)}De.prototype.forChild=function(t,e){if(e.isLeaf)return Te.empty;for(var n=[],r=0;r<this.members.length;r++){var i=this.members[r].forChild(t,e);i!=Ae&&(i instanceof De?n=n.concat(i.members):n.push(i))}return De.from(n)},De.prototype.eq=function(t){if(!(t instanceof De)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},De.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var i=this.members[r].localsInner(t);if(i.length)if(e){n&&(e=e.slice(),n=!1);for(var o=0;o<i.length;o++)e.push(i[o])}else e=i}return e?ze(n?e:e.sort($e)):Ee},De.from=function(t){switch(t.length){case 0:return Ae;case 1:return t[0];default:return new De(t)}};var Le=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Ke(this),this.markCursor=null,this.cursorWrapper=null,Ze(this),this.nodeViews=We(this),this.docView=q(this.state.doc,He(this),Fe(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Xt(t,(function(e,n,r,i){return It(t,e,n,r,i)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Yt[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||ne(t,e)||!t.editable&&e.type in Qt||n(t,e)})};for(var n in Yt)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),ee(t)}(this),this.pluginViews=[],this.updatePluginViews()},je={props:{configurable:!0},root:{configurable:!0}};function He(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Me.node(0,t.state.doc.content.size,e)]}function Ze(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Me.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Ke(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function We(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}je.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Le.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ee(this),this._props=t,this.updateStateInner(t.state,!0)},Le.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Le.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Le.prototype.updateStateInner=function(t,e){var n=this,i=this.state,o=!1,a=!1;if(t.storedMarks&&this.composing&&(ve(this),a=!0),this.state=t,e){var c=We(this);(function(t,e){var n=0,r=0;for(var i in t){if(t[i]!=e[i])return!0;n++}for(var o in e)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,o=!0),ee(this)}this.editable=Ke(this),Ze(this);var l=Fe(this),u=He(this),d=e?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=o||!this.docView.matchesNode(t.doc,u,l);!p&&t.selection.eq(i.selection)||(a=!0);var h,f,m,g,y,w,b,x,S,C,k,E="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),i=Math.max(0,r.top),o=(r.left+r.right)/2,s=i+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(o,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=i-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:M(t.dom)}}(this);if(a){this.domObserver.stop();var N=p&&(s.ie||s.chrome)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&(g=i.selection,y=t.selection,w=Math.min(g.$anchor.sharedDepth(g.head),y.$anchor.sharedDepth(y.head)),g.$anchor.start(w)!=y.$anchor.start(w));if(p){var T=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!o&&this.docView.update(t.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=q(t.doc,u,l,this.dom,this)),T&&!this.trackWrites&&(N=!0)}N||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor),m=h.root.getSelection(),v(f.node,f.offset,m.anchorNode,m.anchorOffset)))?pt(this,N):(gt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var A=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r.NodeSelection?_(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),A):_(this,this.coordsAtPos(t.selection.head),A))}else E&&(x=(b=E).refDOM,S=b.refTop,C=b.stack,k=x?x.getBoundingClientRect().top:0,O(C,0==k?0:k-S))},Le.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},Le.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var i=this.state.plugins[r];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}},Le.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var i=this.state.plugins;if(i)for(var o=0;o<i.length;o++){var s=i[o].props[t];if(null!=s&&(n=e?e(s):s))return n}},Le.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Le.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(E)return t.focus(E);var e=M(t);t.focus(null==E?{get preventScroll(){return E={preventScroll:!0},!0}}:void 0),E||(E=!1,O(e,0))}(this.dom),pt(this),this.domObserver.start()},je.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Le.prototype.posAtCoords=function(t){return D(this,t)},Le.prototype.coordsAtPos=function(t){return R(this,t)},Le.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},Le.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Le.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Le.prototype.endOfTextblock=function(t,e){return L(this,e||this.state,t)},Le.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Fe(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Le.prototype.dispatchEvent=function(t){return function(t,e){ne(t,e)||!Yt[e.type]||!t.editable&&e.type in Qt||Yt[e.type](t,e)}(this,t)},Le.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Le.prototype,je)},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),s=new E(r||[]);return o._invoke=function(t,e,n){var r=d;return function(i,o){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(t,n,s),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",v={};function m(){}function g(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(N([])));x&&x!==n&&r.call(x,o)&&(w=x);var S=y.prototype=m.prototype=Object.create(w);function C(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(i,o,s,a){var c=u(t[i],t,o);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function _(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function N(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},C(k.prototype),k.prototype[s]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new k(l(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(S),c(S,a,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=N,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;O(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},3346:(t,e,n)=>{"use strict";n.d(e,{QF:()=>r.QF,uo:()=>r.uo,IB:()=>c,Cf:()=>f,K9:()=>g,x2:()=>v,$R:()=>m,P9:()=>y,uJ:()=>r.uJ,bw:()=>l,s6:()=>a,wr:()=>w,zK:()=>u.zK,Gz:()=>b,kQ:()=>S,w9:()=>r.w9,bm:()=>C,dy:()=>k,S0:()=>u.S0});var r=n(2778),i=n(1081),o=n(8638);function s(t,e){return function(n,r){var s=n.selection,a=s.$from,c=s.$to,l=a.blockRange(c),u=!1,d=l;if(!l)return!1;if(l.depth>=2&&a.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==a.index(l.depth-1))return!1;var p=n.doc.resolve(l.start-2);d=new o.NodeRange(p,p,l.depth),l.endIndex<l.parent.childCount&&(l=new o.NodeRange(a,n.doc.resolve(c.end(l.depth)),l.depth)),u=!0}var h=(0,i.nd)(d,t,e,l);return!!h&&(r&&r(function(t,e,n,r,s){for(var a=o.Fragment.empty,c=n.length-1;c>=0;c--)a=o.Fragment.from(n[c].type.create(n[c].attrs,a));t.step(new i.FC(e.start-(r?2:0),e.end,e.start,e.end,new o.Slice(a,0,0),n.length,!0));for(var l=0,u=0;u<n.length;u++)n[u].type==s&&(l=u+1);for(var d=n.length-l,p=e.start+n.length-(r?2:0),h=e.parent,f=e.startIndex,v=e.endIndex,m=!0;f<v;f++,m=!1)!m&&(0,i.Ax)(t.doc,p,d)&&(t.split(p,d),p+=2*d),p+=h.child(f).nodeSize;return t}(n.tr,l,h,u,t).scrollIntoView()),!0)}}function a(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=r.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var l=s.node(-1);if(l.type!=t)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(2==s.depth||s.node(-3).type!=t||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var u=o.Fragment.empty,d=s.index(-1)>0,p=s.depth-(d?1:2);p>=s.depth-3;p--)u=o.Fragment.from(s.node(p).copy(u));u=u.append(o.Fragment.from(t.createAndFill()));var h=e.tr.replace(s.before(d?null:-1),s.after(-3),new o.Slice(u,d?3:2,2));h.setSelection(e.selection.constructor.near(h.doc.resolve(s.pos+(d?3:2)))),n(h.scrollIntoView())}return!0}var f=a.pos==s.end()?l.contentMatchAt(0).defaultType:null,v=e.tr.delete(s.pos,a.pos),m=f&&[null,{type:f}];return!!(0,i.Ax)(v.doc,s.pos,2,m)&&(n&&n(v.split(s.pos,2,m).scrollIntoView()),!0)}}function c(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));return!!c&&(!n||(s.node(c.depth-1).type==t?function(t,e,n,r){var s=t.tr,a=r.end,c=r.$to.end(r.depth);a<c&&(s.step(new i.FC(a-1,c,a,c,new o.Slice(o.Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new o.NodeRange(s.doc.resolve(r.$from.pos),s.doc.resolve(c),r.depth));return e(s.lift(r,(0,i.k9)(r)).scrollIntoView()),!0}(e,n,t,c):function(t,e,n){for(var r=t.tr,s=n.parent,a=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)a-=s.child(c).nodeSize,r.delete(a-1,a+1);var u=r.doc.resolve(n.start),d=u.nodeAfter,p=0==n.startIndex,h=n.endIndex==s.childCount,f=u.node(-1),v=u.index(-1);if(!f.canReplace(v+(p?0:1),v+1,d.content.append(h?o.Fragment.empty:o.Fragment.from(s))))return!1;var m=u.pos,g=m+d.nodeSize;return r.step(new i.FC(m-(p?1:0),g+(h?1:0),m+1,g-1,new o.Slice((p?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))).append(h?o.Fragment.empty:o.Fragment.from(s.copy(o.Fragment.empty))),p?0:1,h?0:1),p?0:1)),e(r.scrollIntoView()),!0}(e,n,c)))}}function l(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var u=c.parent,d=u.child(l-1);if(d.type!=t)return!1;if(n){var p=d.lastChild&&d.lastChild.type==u.type,h=o.Fragment.from(p?t.create():null),f=new o.Slice(o.Fragment.from(t.create(null,o.Fragment.from(u.type.create(null,h)))),p?3:1,0),v=c.start,m=c.end;n(e.tr.step(new i.FC(v-(p?3:1),m,v,m,f,1,!0)).scrollIntoView())}return!0}}var u=n(896),d=n(6922),p=n(9146),h=n(9124);function f(t,e,n){return new u.VK(t,((t,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=t,c=r.length-1;let l=o,u=i;if(r[c]){const n=i+r[0].indexOf(r[c-1]),s=n+r[c-1].length-1,d=n+r[c-1].lastIndexOf(r[c]),p=d+r[c].length;if(function(t,e,n){let r=[];return n.doc.nodesBetween(t,e,((t,e)=>{r=[...r,...t.marks.map((n=>({start:e,end:e+t.nodeSize,mark:n})))]})),r}(i,o,t).filter((t=>{const{excluded:n}=t.mark.type;return n.find((t=>t.name===e.name))})).filter((t=>t.end>n)).length)return!1;p<s&&a.delete(p,s),d>n&&a.delete(n,d),u=n,l=u+r[c].length}return a.addMark(u,l,e.create(s)),a.removeStoredMark(e),a}))}function v(t,e,n){return new u.VK(t,((t,r,i,o)=>{const s=n instanceof Function?n(r):n,{tr:a}=t;return r[0]&&a.replaceWith(i-1,o,e.create(s)),a}))}function m(t,e,n){const r=i=>{const s=[];return i.forEach((i=>{if(i.isText){const{text:r}=i;let o,a=0;do{if(o=t.exec(r),o){const t=o.index,r=t+o[0].length,c=n instanceof Function?n(o[0]):n;t>0&&s.push(i.cut(a,t)),s.push(i.cut(t,r).mark(e.create(c).addToSet(i.marks))),a=r}}while(o);a<r.length&&s.push(i.cut(a))}else s.push(i.copy(r(i.content)))})),o.Fragment.fromArray(s)};return new d.Plugin({props:{transformPasted:t=>new o.Slice(r(t.content),t.openStart,t.openEnd)}})}function g(t,e,n){const r=(i,s)=>{const a=[];return i.forEach((i=>{if(i.isText){const{text:r,marks:o}=i;let c,l=0;const u=!!o.filter((t=>"link"===t.type.name))[0];for(;!u&&null!==(c=t.exec(r));)if(s&&s.type.allowsMarkType(e)&&c[1]){const t=c.index,r=t+c[0].length,o=t+c[0].indexOf(c[1]),s=o+c[1].length,u=n instanceof Function?n(c):n;t>0&&a.push(i.cut(l,t)),a.push(i.cut(o,s).mark(e.create(u).addToSet(i.marks))),l=r}l<r.length&&a.push(i.cut(l))}else a.push(i.copy(r(i.content,i)))})),o.Fragment.fromArray(a)};return new d.Plugin({props:{transformPasted:t=>new o.Slice(r(t.content),t.openStart,t.openEnd)}})}function y(t){return(e,n)=>{const{tr:r,selection:i}=e;let{from:o,to:s}=i;const{$from:a,empty:c}=i;if(c){const e=(0,p.IH)(a,t);o=e.from,s=e.to}return r.removeMark(o,s,t),n(r)}}function w(t){return function(e,n){const{$from:r,$to:i,node:s}=e.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(i))return!1;const a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let i=o.Fragment.empty;const s=r.index(-1)>0;for(let t=r.depth-(s?1:2);t>=r.depth-3;t--)i=o.Fragment.from(r.node(t).copy(i));i=i.append(o.Fragment.from(t.createAndFill()));const a=e.tr.replace(r.before(s?null:-1),r.after(-3),new o.Slice(i,s?3:2,2));a.setSelection(e.selection.constructor.near(a.doc.resolve(r.pos+(s?3:2)))),n(a.scrollIntoView())}return!0}const c=i.pos==r.end()?a.contentMatchAt(r.indexAfter(-1)).defaultType:null,l=e.tr.delete(r.pos,i.pos);let u=c&&[{type:t},{type:c}];return u||(u=[{type:t},null]),!!function(t,e,n=1,r){const i=t.resolve(e),o=i.depth-n,s=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!s.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let t=i.depth-1,e=n-2;t>o;t--,e--){const n=i.node(t),o=i.index(t);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount);const a=r&&r[e]||n;if(a!=n&&(s=s.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(o+1,n.childCount))return!1}const a=i.indexAfter(o),c=r&&r[0];return i.node(o).canReplaceWith(a,a,c?c.type:i.node(o+1).type)}(l.doc,r.pos,2,u)&&(n&&n(l.split(r.pos,2,u).scrollIntoView()),!0)}}function b(t,e,n={}){return(i,o,s)=>(0,p.W3)(i,t,n)?(0,r.uJ)(e)(i,o,s):(0,r.uJ)(t,n)(i,o,s)}function x(t,e){return t.type===e.nodes.bullet_list||t.type===e.nodes.ordered_list||t.type===e.nodes.todo_list}function S(t,e){return(n,r,i)=>{const{schema:o,selection:a}=n,{$from:l,$to:u}=a,d=l.blockRange(u);if(!d)return!1;const p=(0,h.Kk)((t=>x(t,o)))(a);if(d.depth>=1&&p&&d.depth-p.depth<=1){if(p.node.type===t)return c(e)(n,r,i);if(x(p.node,o)&&t.validContent(p.node.content)){const{tr:e}=n;return e.setNodeMarkup(p.pos,t),r&&r(e),!1}}return s(t)(n,r,i)}}function C(t,e={}){return(n,i,o)=>(0,p.W3)(n,t,e)?(0,r.xb)(n,i):(0,r.ym)(t,e)(n,i,o)}function k(t,e){return(n,r)=>{const{tr:i,selection:o,doc:s}=n,{ranges:a,empty:c}=o;if(c){const{from:n,to:r}=(0,p.IH)(o.$from,t);s.rangeHasMark(n,r,t)&&i.removeMark(n,r,t),i.addMark(n,r,t.create(e))}else a.forEach((n=>{const{$to:r,$from:o}=n;s.rangeHasMark(o.pos,r.pos,t)&&i.removeMark(o.pos,r.pos,t),i.addMark(o.pos,r.pos,t.create(e))}));return r(i)}}},5765:(t,e,n)=>{"use strict";n.d(e,{V6:()=>D,d8:()=>H,DY:()=>P,EK:()=>Z,dn:()=>R,TO:()=>q,U1:()=>I,X6:()=>B,Ay:()=>X,Ee:()=>z,Tx:()=>K,rU:()=>W,HC:()=>V,GS:()=>F,Re:()=>J,PK:()=>L,B4:()=>j,v6:()=>U});var r=n(4429),i=n(3346),o=(n(6470),n(8780)),s=(n(9124),n(8638),n(6922)),a=n(9132),c=n(9146),l=n(1081);new s.PluginKey("collab");var u=200,d=function(){};d.prototype.append=function(t){return t.length?(t=d.from(t),!this.length&&t||t.length<u&&this.leafAppend(t)||this.length<u&&t.leafPrepend(this)||this.appendInner(t)):this},d.prototype.prepend=function(t){return t.length?d.from(t).append(this):this},d.prototype.appendInner=function(t){return new h(this,t)},d.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?d.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},d.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},d.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},d.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},d.from=function(t){return t instanceof d?t:t&&t.length?new p(t):d.empty};var p=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var i=e;i<n;i++)if(!1===t(this.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var i=e-1;i>=n;i--)if(!1===t(this.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=u)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=u)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(d);d.empty=new p([]);var h=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var i=this.left.length;return!(e<i&&!1===this.left.forEachInner(t,e,Math.min(n,i),r))&&(!(n>i&&!1===this.right.forEachInner(t,Math.max(e-i,0),Math.min(this.length,n)-i,r+i))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var i=this.left.length;return!(e>i&&!1===this.right.forEachInvertedInner(t,e-i,Math.max(n,i)-i,r+i))&&(!(n<i&&!1===this.left.forEachInvertedInner(t,Math.min(e,i),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(d);const f=d;var v=function(t,e){this.items=t,this.eventCount=e};v.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,i,o=this.items.length;;o--){if(this.items.get(o-1).selection){--o;break}}e&&(r=this.remapping(o,this.items.length),i=r.maps.length);var s,a,c=t.tr,l=[],u=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(o,e+1),i=r.maps.length),i--,void u.push(t);if(r){u.push(new m(t.map));var d,p=t.step.map(r.slice(i));p&&c.maybeStep(p).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],l.push(new m(d,null,null,l.length+u.length))),i--,d&&r.appendMap(d,i)}else c.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(i)):t.selection,a=new v(n.items.slice(0,o).append(u.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},v.prototype.addTransform=function(t,e,n,r){for(var i=[],o=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var l,u=t.steps[c].invert(t.docs[c]),d=new m(t.mapping.maps[c],u,e);(l=a&&a.merge(d))&&(d=l,c?i.pop():s=s.slice(0,s.length-1)),i.push(d),e&&(o++,e=null),r||(a=d)}var p,h,f,g=o-n.depth;return g>y&&(h=g,(p=s).forEach((function(t,e){if(t.selection&&0==h--)return f=e,!1})),s=p.slice(f),o-=g),new v(s.append(i),o)},v.prototype.remapping=function(t,e){var n=new l.vs;return this.items.forEach((function(e,r){var i=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,i)}),t,e),n},v.prototype.addMaps=function(t){return 0==this.eventCount?this:new v(this.items.append(t.map((function(t){return new m(t)}))),this.eventCount)},v.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),i=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=i.getMirror(--a);if(null!=r){o=Math.min(o,r);var c=i.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),u=e.selection&&e.selection.map(i.slice(a+1,r));u&&s++,n.push(new m(c,l,u))}else n.push(new m(c))}}),r);for(var c=[],l=e;l<o;l++)c.push(new m(i.maps[l]));var u=this.items.slice(0,r).append(c).append(n),d=new v(u,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},v.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},v.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],i=0;return this.items.forEach((function(o,s){if(s>=t)r.push(o),o.selection&&i++;else if(o.step){var a=o.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var l=o.selection&&o.selection.map(e.slice(n));l&&i++;var u,d=new m(c.invert(),a,l),p=r.length-1;(u=r.length&&r[p].merge(d))?r[p]=u:r.push(d)}}else o.map&&n--}),this.items.length,0),new v(f.from(r.reverse()),i)},v.empty=new v(f.empty,0);var m=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};m.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new m(e.getMap().invert(),e,this.selection)}};var g=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},y=20;function w(t){var e=[];return t.forEach((function(t,n,r,i){return e.push(r,i)})),e}function b(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var i=e.map(t[r],1),o=e.map(t[r+1],-1);i<=o&&n.push(i,o)}return n}function x(t,e,n,r){var i=k(e),o=_.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,i);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,i),l=new g(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(_,{redo:r,historyState:l}).scrollIntoView())}}var S=!1,C=null;function k(t){var e=t.plugins;if(C!=e){S=!1,C=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){S=!0;break}}return S}var _=new s.PluginKey("history"),M=new s.PluginKey("closeHistory");function O(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new s.Plugin({key:_,state:{init:function(){return new g(v.empty,v.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var i,o=n.getMeta(_);if(o)return o.historyState;n.getMeta(M)&&(t=new g(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(_))return s.getMeta(_).redo?new g(t.done.addTransform(n,null,r,k(e)),t.undone,w(n.mapping.maps[n.steps.length-1]),t.prevTime):new g(t.done,t.undone.addTransform(n,null,r,k(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(i=n.getMeta("rebased"))?new g(t.done.rebased(n,i),t.undone.rebased(n,i),b(t.prevRanges,n.mapping),t.prevTime):new g(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),b(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var i=0;i<e.length;i+=2)t<=e[i+1]&&r>=e[i]&&(n=!0)})),n}(n,t.prevRanges)),c=s?b(t.prevRanges,n.mapping):w(n.mapping.maps[n.steps.length-1]);return new g(t.done.addTransform(n,a?e.selection.getBookmark():null,r,k(e)),v.empty,c,n.time)}(n,r,e,t)}},config:t})}function E(t,e){var n=_.getState(t);return!(!n||0==n.done.eventCount)&&(e&&x(n,t,e,!1),!0)}function N(t,e){var n=_.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&x(n,t,e,!0),!0)}function T(t){var e=_.getState(t);return e?e.done.eventCount:0}function A(t){var e=_.getState(t);return e?e.undone.eventCount:0}class D extends r.NB{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:t}){return()=>(0,i.bm)(t)}keys({type:t}){return{"Ctrl->":(0,i.bm)(t)}}inputRules({type:t}){return[(0,i.S0)(/^\s*>\s$/,t)]}}class P extends r.NB{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:t,schema:e}){return()=>(0,i.kQ)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-8":(0,i.kQ)(t,e.nodes.list_item)}}inputRules({type:t}){return[(0,i.S0)(/^\s*([-+*])\s$/,t)]}}class R extends r.NB{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:t,schema:e}){return()=>(0,i.Gz)(t,e.nodes.paragraph)}keys({type:t}){return{"Shift-Ctrl-\\":(0,i.uJ)(t)}}inputRules({type:t}){return[(0,i.zK)(/^```$/,t)]}}class I extends r.NB{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:t}){return()=>(0,i.QF)(i.uo,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)))}keys({type:t}){const e=(0,i.QF)(i.uo,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)));return{"Mod-Enter":e,"Shift-Enter":e}}}class B extends r.NB{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((t=>({tag:"h".concat(t),attrs:{level:t}}))),toDOM:t=>["h".concat(t.attrs.level),0]}}commands({type:t,schema:e}){return n=>(0,i.Gz)(t,e.nodes.paragraph,n)}keys({type:t}){return this.options.levels.reduce(((e,n)=>({...e,["Shift-Ctrl-".concat(n)]:(0,i.uJ)(t,{level:n})})),{})}inputRules({type:t}){return this.options.levels.map((e=>(0,i.zK)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,(()=>({level:e})))))}}const $=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/;class z extends r.NB{get name(){return"image"}get schema(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]}}commands({type:t}){return e=>(n,r)=>{const{selection:i}=n,o=i.$cursor?i.$cursor.pos:i.$to.pos,s=t.create(e);r(n.tr.insert(o,s))}}inputRules({type:t}){return[(0,i.x2)($,t,(t=>{const[,e,n,r]=t;return{src:n,alt:e,title:r}}))]}get plugins(){return[new r.Sy({props:{handleDOMEvents:{drop(t,e){if(!(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length))return;const n=Array.from(e.dataTransfer.files).filter((t=>/image/i.test(t.type)));if(0===n.length)return;e.preventDefault();const{schema:r}=t.state,i=t.posAtCoords({left:e.clientX,top:e.clientY});n.forEach((e=>{const n=new FileReader;n.onload=e=>{const n=r.nodes.image.create({src:e.target.result}),o=t.state.tr.insert(i.pos,n);t.dispatch(o)},n.readAsDataURL(e)}))}}}})]}}class V extends r.NB{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:t}){return{Enter:(0,i.s6)(t),Tab:(0,i.bw)(t),"Shift-Tab":(0,i.IB)(t)}}}class F extends r.NB{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}commands({type:t,schema:e}){return()=>(0,i.kQ)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-9":(0,i.kQ)(t,e.nodes.list_item)}}inputRules({type:t}){return[(0,i.S0)(/^(\d+)\.\s$/,t,(t=>({order:+t[1]})),((t,e)=>e.childCount+e.attrs.order===+t[1]))]}}(0,a.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:t=>t.style.backgroundColor||null,setDOMAttr(t,e){if(t){const n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}});class L extends r.NB{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","view"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:t=>{const{done:e}=t.attrs;return["li",{"data-type":this.name,"data-done":e.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:t=>({done:"true"===t.getAttribute("data-done")})}]}}keys({type:t}){return{Enter:(0,i.wr)(t),Tab:this.options.nested?(0,i.bw)(t):()=>{},"Shift-Tab":(0,i.IB)(t)}}}class j extends r.NB{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}commands({type:t,schema:e}){return()=>(0,i.kQ)(t,e.nodes.todo_item)}inputRules({type:t}){return[(0,i.S0)(/^\s*(\[ \])\s$/,t)]}}class H extends r.vc{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]}}keys({type:t}){return{"Mod-b":(0,i.w9)(t)}}commands({type:t}){return()=>(0,i.w9)(t)}inputRules({type:t}){return[(0,i.Cf)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}pasteRules({type:t}){return[(0,i.K9)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}}class Z extends r.vc{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:t}){return{"Mod-`":(0,i.w9)(t)}}commands({type:t}){return()=>(0,i.w9)(t)}inputRules({type:t}){return[(0,i.Cf)(/(?:`)([^`]+)(?:`)$/,t)]}pasteRules({type:t}){return[(0,i.K9)(/(?:`)([^`]+)(?:`)/g,t)]}}class K extends r.vc{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:t}){return{"Mod-i":(0,i.w9)(t)}}commands({type:t}){return()=>(0,i.w9)(t)}inputRules({type:t}){return[(0,i.Cf)(/(?:^|[^_])(_([^_]+)_)$/,t),(0,i.Cf)(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}pasteRules({type:t}){return[(0,i.K9)(/_([^_]+)_/g,t),(0,i.K9)(/\*([^*]+)\*/g,t)]}}class W extends r.vc{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target")})}],toDOM:t=>["a",{...t.attrs,rel:"noopener noreferrer nofollow",target:this.options.target},0]}}commands({type:t}){return e=>e.href?(0,i.dy)(t,e):(0,i.P9)(t)}pasteRules({type:t}){return[(0,i.$R)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,]*)/gi,t,(t=>({href:t})))]}get plugins(){return this.options.openOnClick?[new r.Sy({props:{handleClick:(t,e,n)=>{const{schema:r}=t.state,i=(0,c.Np)(t.state,r.marks.link);i.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(i.href,i.target))}}})]:[]}}class J extends r.vc{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],toDOM:()=>["s",0]}}keys({type:t}){return{"Mod-d":(0,i.w9)(t)}}commands({type:t}){return()=>(0,i.w9)(t)}inputRules({type:t}){return[(0,i.Cf)(/~([^~]+)~$/,t)]}pasteRules({type:t}){return[(0,i.K9)(/~([^~]+)~/g,t)]}}class U extends r.vc{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],toDOM:()=>["u",0]}}keys({type:t}){return{"Mod-u":(0,i.w9)(t)}}commands({type:t}){return()=>(0,i.w9)(t)}}class q extends r.hj{get name(){return"focus"}get defaultOptions(){return{className:"has-focus",nested:!1}}get plugins(){return[new r.Sy({props:{decorations:({doc:t,plugins:e,selection:n})=>{const r=e.find((t=>t.key.startsWith("editable$"))).props.editable()&&this.options.className,{focused:i}=this.editor,{anchor:s}=n,a=[];return!(!r||!i)&&(t.descendants(((t,e)=>{if(s>=e&&s<=e+t.nodeSize&&!t.isText){const n=o.p.node(e,e+t.nodeSize,{class:this.options.className});a.push(n)}return this.options.nested})),o.EH.create(t,a))}}})]}}class X extends r.hj{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":E,"Mod-y":N,"Shift-Mod-z":N,"Mod-я":E,"Shift-Mod-я":N}}get plugins(){return[O({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}commands(){return{undo:()=>E,redo:()=>N,undoDepth:()=>T,redoDepth:()=>A}}}},9146:(t,e,n)=>{"use strict";n.d(e,{Np:()=>i,IH:()=>s,ok:()=>o,GD:()=>a,W3:()=>c});var r=n(9124);function i(t,e){const{from:n,to:r}=t.selection;let i=[];t.doc.nodesBetween(n,r,(t=>{i=[...i,...t.marks]}));const o=i.find((t=>t.type.name===e.name));return o?o.attrs:{}}function o(t,e){const{from:n,to:r}=t.selection;let i=[];t.doc.nodesBetween(n,r,(t=>{i=[...i,t]}));const o=i.reverse().find((t=>t.type.name===e.name));return o?o.attrs:{}}function s(t=null,e=null){if(!t||!e)return!1;const n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;const r=n.node.marks.find((t=>t.type===e));if(!r)return!1;let i=t.index(),o=t.start()+n.offset,s=i+1,a=o+n.node.nodeSize;for(;i>0&&r.isInSet(t.parent.child(i-1).marks);)i-=1,o-=t.parent.child(i).nodeSize;for(;s<t.parent.childCount&&r.isInSet(t.parent.child(s).marks);)a+=t.parent.child(s).nodeSize,s+=1;return{from:o,to:a}}function a(t,e){const{from:n,$from:r,to:i,empty:o}=t.selection;return o?!!e.isInSet(t.storedMarks||r.marks()):!!t.doc.rangeHasMark(n,i,e)}function c(t,e,n={}){const i=(0,r.a1)(e)(t.selection)||(0,r.Kk)((t=>t.type===e))(t.selection);return Object.keys(n).length&&i?i.node.hasMarkup(e,{...i.node.attrs,...n}):!!i}},4429:(t,e,n)=>{"use strict";n.d(e,{QW:()=>M,ML:()=>N,kg:()=>T,eb:()=>I,hj:()=>x,vc:()=>C,NB:()=>_,Sy:()=>r.Plugin});var r=n(6922),i=n(8780),o=n(8638),s=n(1081);var a=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};a.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},a.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},a.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},a.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var i=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),o=n?i.bottom:i.top;n&&r&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:i.left,right:i.right,top:o-this.width/2,bottom:o+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-c.left+"px",this.element.style.top=t.top-c.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},a.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},a.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=(0,s.nj)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=e.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},a.prototype.dragend=function(){this.scheduleRemoval(20)},a.prototype.drop=function(){this.scheduleRemoval(20)},a.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var c=n(4751),l=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var i=n.resolve(r.map(this.head));return e.valid(i)?new e(i):t.near(i)},e.prototype.content=function(){return o.Slice.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new u(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var i=r.child(n);;i=i.firstChild){if(0==i.childCount&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,i){t:for(;;){if(!i&&e.valid(t))return t;for(var o=t.pos,s=null,a=t.depth;;a--){var c=t.node(a);if(n>0?t.indexAfter(a)<c.childCount:t.index(a)>0){s=c.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;o+=n;var l=t.doc.resolve(o);if(e.valid(l))return l}for(;;){var u=n>0?s.firstChild:s.lastChild;if(!u){if(s.isAtom&&!s.isText&&!r.NodeSelection.isSelectable(s)){t=t.doc.resolve(o+s.nodeSize*n),i=!1;continue t}break}s=u,o+=n;var d=t.doc.resolve(o);if(e.valid(d))return d}return null}},e}(r.Selection);l.prototype.visible=!1,r.Selection.jsonID("gapcursor",l);var u=function(t){this.pos=t};u.prototype.map=function(t){return new u(t.map(this.pos))},u.prototype.resolve=function(t){var e=t.resolve(this.pos);return l.valid(e)?new l(e):r.Selection.near(e)};var d=(0,c.$)({ArrowLeft:p("horiz",-1),ArrowRight:p("horiz",1),ArrowUp:p("vert",-1),ArrowDown:p("vert",1)});function p(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,i,o){var s=t.selection,a=e>0?s.$to:s.$from,c=s.empty;if(s instanceof r.TextSelection){if(!o.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=t.doc.resolve(e>0?a.after():a.before())}var u=l.findFrom(a,e,c);return!!u&&(i&&i(t.tr.setSelection(new l(u))),!0)}}function h(t,e,n){if(!t.editable)return!1;var i=t.state.doc.resolve(e);if(!l.valid(i))return!1;var o=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(o>-1&&r.NodeSelection.isSelectable(t.state.doc.nodeAt(o)))&&(t.dispatch(t.state.tr.setSelection(new l(i))),!0)}function f(t){if(!(t.selection instanceof l))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",i.EH.create(t.doc,[i.p.widget(t.selection.head,e,{key:"gapcursor"})])}var v=n(2778),m=n(896),g=n(9146),y=n(538),w=n(3346);class b{constructor(t,{editor:e,extension:n,parent:r,node:i,view:o,decorations:s,getPos:a}){this.component=t,this.editor=e,this.extension=n,this.parent=r,this.node=i,this.view=o,this.decorations=s,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const t=y.default.extend(this.component),e={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:t=>this.updateAttrs(t)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new t({parent:this.parent,propsData:e}).$mount(),this.vm.$el}update(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e})),!0)}updateComponentProps(t){if(!this.vm._props)return;const e=y.default.config.silent;y.default.config.silent=!0,Object.entries(t).forEach((([t,e])=>{this.vm._props[t]=e})),y.default.config.silent=e}updateAttrs(t){if(!this.view.editable)return;const{state:e}=this.view,{type:n}=this.node,r=this.getPos(),i={...this.node.attrs,...t},o=this.isMark?e.tr.removeMark(r.from,r.to,n).addMark(r.from,r.to,n.create(i)):e.tr.setNodeMarkup(r,null,i);this.view.dispatch(o)}ignoreMutation(t){return"selection"!==t.type&&(!this.contentDOM||!this.contentDOM.contains(t.target))}stopEvent(t){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(t);const e=!!this.extension.schema.draggable;if(e&&"mousedown"===t.type){const e=t.target.closest&&t.target.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const n="copy"===t.type,r="paste"===t.type,i="cut"===t.type,o=t.type.startsWith("drag")||"drop"===t.type;return!(e&&o||n||r||i)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const t=this.view.posAtDOM(this.dom),e=this.view.state.doc.resolve(t);return(0,g.IH)(e,this.node.type)}destroy(){this.vm.$destroy()}}class x{constructor(t={}){this.options={...this.defaultOptions,...t}}init(){return null}bindEditor(t=null){this.editor=t}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class S{constructor(t=[],e){t.forEach((t=>{t.bindEditor(e),t.init()})),this.extensions=t}get nodes(){return this.extensions.filter((t=>"node"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get options(){const{view:t}=this;return this.extensions.reduce(((e,n)=>({...e,[n.name]:new Proxy(n.options,{set(e,n,r){const i=e[n]!==r;return Object.assign(e,{[n]:r}),i&&t.updateState(t.state),!0}})})),{})}get marks(){return this.extensions.filter((t=>"mark"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get plugins(){return this.extensions.filter((t=>t.plugins)).reduce(((t,{plugins:e})=>[...t,...e]),[])}keymaps({schema:t}){return[...this.extensions.filter((t=>["extension"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({schema:t}))),...this.extensions.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({type:t["".concat(e.type,"s")][e.name],schema:t})))].map((t=>(0,c.h)(t)))}inputRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({type:t["".concat(e.type,"s")][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}pasteRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({type:t["".concat(e.type,"s")][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}commands({schema:t,view:e}){return this.extensions.filter((t=>t.commands)).reduce(((n,r)=>{const{name:i,type:o}=r,s={},a=r.commands({schema:t,...["node","mark"].includes(o)?{type:t["".concat(o,"s")][i]}:{}}),c=(t,n)=>!!e.editable&&(e.focus(),t(n)(e.state,e.dispatch,e)),l=(t,e)=>{Array.isArray(e)?s[t]=t=>e.forEach((e=>c(e,t))):"function"==typeof e&&(s[t]=t=>c(e,t))};return"object"==typeof a?Object.entries(a).forEach((([t,e])=>{l(t,e)})):l(i,a),{...n,...s}}),{})}}class C extends x{constructor(t={}){super(t)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function k(t=0,e=0,n=0){return Math.min(Math.max(parseInt(t,10),e),n)}class _ extends x{constructor(t={}){super(t)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class M extends _{get name(){return"doc"}get schema(){return{content:"block+"}}}class O extends _{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:t}){return()=>(0,w.uJ)(t)}}class E extends _{get name(){return"text"}get schema(){return{group:"inline"}}}class N extends class{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};const n=this._callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){if(arguments.length){const n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter((t=>t!==e)):delete this._callbacks[t])}else this._callbacks={};return this}}{constructor(t={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(t)}init(t={}){this.setOptions({...this.defaultOptions,...t}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(t){{const e=document.createElement("style");e.type="text/css",e.textContent=t;const{head:n}=document,{firstChild:r}=n;r?n.insertBefore(e,r):n.appendChild(e)}}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n'),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((t=>{var e;this.on(t,this.options[(e="on ".concat(t),e.replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,""))]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(t){this.options={...this.options,...t},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new M,new E,new O]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new S([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new o.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return r.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,(0,m.Hw)({rules:this.inputRules}),...this.pasteRules,...this.keymaps,(0,c.h)({Backspace:m.dU}),(0,c.h)(v.YR),...this.options.enableDropCursor?[(t=this.options.dropCursor,void 0===t&&(t={}),new r.Plugin({view:function(e){return new a(e,t)}}))]:[],...this.options.enableGapCursor?[new r.Plugin({props:{decorations:f,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&l.valid(n))return new l(n)},handleClick:h,handleKeyDown:d}})]:[],new r.Plugin({key:new r.PluginKey("editable"),props:{editable:()=>this.options.editable}}),new r.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(t,e)=>{this.focused=!0,this.emit("focus",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(t,e)=>{this.focused=!1,this.emit("blur",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new r.Plugin({props:this.options.editorProps})]});var t}createDocument(t,e=this.options.parseOptions){if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof t)try{return this.schema.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){const n="<div>".concat(t,"</div>"),r=(new window.DOMParser).parseFromString(n,"text/html").body.firstElementChild;return o.DOMParser.fromSchema(this.schema).parse(r,e)}return!1}createView(){return new i.tk(this.element,{state:this.createState(),handlePaste:(...t)=>{this.emit("paste",...t)},handleDrop:(...t)=>{this.emit("drop",...t)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(t=null){t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:t,extensions:e}){return e.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.view)).reduce(((e,n)=>({...e,[n.name]:(e,r,i,o)=>{const s=n.view;return new b(s,{editor:this,extension:n,parent:t,node:e,view:r,getPos:i,decorations:o})}})),{})}dispatchTransaction(t){const e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}emitUpdate(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}resolveSelection(t=null){if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{doc:t}=this.state;return{from:t.content.size,to:t.content.size}}return{from:t,to:t}}focus(t=null){if(this.view.focused&&null===t||!1===t)return;const{from:e,to:n}=this.resolveSelection(t);this.setSelection(e,n),setTimeout((()=>this.view.focus()),10)}setSelection(t=0,e=0){const{doc:n,tr:i}=this.state,o=k(t,0,n.content.size),s=k(e,0,n.content.size),a=r.TextSelection.create(n,o,s),c=i.setSelection(a);this.view.dispatch(c)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const t=document.createElement("div"),e=o.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(t={},e=!1,n){const{doc:i,tr:o}=this.state,s=this.createDocument(t,n),a=r.TextSelection.create(i,0,i.content.size),c=o.setSelection(a).replaceSelectionWith(s,!1).setMeta("preventUpdate",!e);this.view.dispatch(c)}clearContent(t=!1){this.setContent(this.options.emptyDocument,t)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:(t={})=>(0,g.GD)(this.state,n,t)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:(0,g.Np)(this.state,n)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((t,[e,n])=>({...t,[e]:(t={})=>(0,g.W3)(this.state,n,t)})),{})}getMarkAttrs(t=null){return this.activeMarkAttrs[t]}getNodeAttrs(t=null){return{...(0,g.ok)(this.state,this.schema.nodes[t])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((t,[e,n])=>({...t,[e]:(t={})=>n(t)})),{})}registerPlugin(t=null,e){const n="function"==typeof e?e(t,this.state.plugins):[t,...this.state.plugins],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t=null){if(!t||!this.view.docView)return;const e=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith("".concat(t,"$"))))});this.view.updateState(e)}destroy(){this.view&&this.view.destroy()}}var T={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.element&&this.$nextTick((()=>{this.$el.appendChild(t.element.firstChild),t.setParentComponent(this)}))}}},render:t=>t("div"),beforeDestroy(){this.editor.element=this.$el}};function A(t,e,n){const r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r}function D(t,e){const n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function P(t,e,n=!1){const{node:r,offset:i}=t.docView.domFromPos(e);let o,s;if(3===r.nodeType)n&&i<r.nodeValue.length?(s=D(A(r,i-1,i),-1),o="right"):i<r.nodeValue.length&&(s=D(A(r,i,i+1),-1),o="left");else if(r.firstChild){if(i<r.childNodes.length){const t=r.childNodes[i];s=D(3===t.nodeType?A(t):t,-1),o="left"}if((!s||s.top===s.bottom)&&i){const t=r.childNodes[i-1];s=D(3===t.nodeType?A(t):t,1),o="right"}}else s=r.getBoundingClientRect(),o="left";const a=s[o];return{top:s.top,bottom:s.bottom,left:a,right:a}}class R{constructor({options:t,editorView:e}){this.options={element:null,keepInBounds:!0,onUpdate:()=>!1,...t},this.editorView=e,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=({view:t})=>{this.update(t)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=({event:t})=>{this.preventHide?this.preventHide=!1:this.hide(t)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}update(t,e){const{state:n}=t;if(t.composing)return;if(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection))return;if(n.selection.empty)return void this.hide();const{from:r,to:i}=n.selection,o=P(t,r),s=P(t,i,!0),a=this.options.element.offsetParent;if(!a)return void this.hide();const c=a.getBoundingClientRect(),l=this.options.element.getBoundingClientRect(),u=(o.left+s.left)/2-c.left;this.left=Math.round(this.options.keepInBounds?Math.min(c.width-l.width/2,Math.max(u,l.width/2)):u),this.bottom=Math.round(c.bottom-o.top),this.top=Math.round(s.bottom-c.top),this.isActive=!0,this.sendUpdate()}sendUpdate(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}hide(t){t&&t.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}var I={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:()=>({menu:{isActive:!1,left:0,bottom:0}}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick((()=>{var e;t.registerPlugin((e={editor:t,element:this.$el,keepInBounds:this.keepInBounds,onUpdate:t=>{t.isActive&&!1===this.menu.isActive?this.$emit("show",t):t.isActive||!0!==this.menu.isActive||this.$emit("hide",t),this.menu=t}},new r.Plugin({key:new r.PluginKey("menu_bubble"),view:t=>new R({editorView:t,options:e})})))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy(){this.editor.unregisterPlugin("menu_bubble")}}},5892:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={name:"ProposalCreatorAvatar",props:{proposal:{type:Object}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inline-flex justify-center items-center h-10 w-10 bg-white text-orange-400 rounded-full shadow-md select-none"},[t.proposal.creator_has_profile_photo?[n("img",{staticClass:"rounded-full h-9 w-9 object-cover",attrs:{src:t.proposal.creator_profile_photo_url,alt:"Creator profile photo"}})]:[t._v("\n    "+t._s(t.proposal.creator_initials)+"\n  ")]],2)}),[],!1,null,null,null).exports},7299:(t,e,n)=>{"use strict";n.d(e,{Z:()=>v});var r=n(7757),i=n.n(r),o=n(8325),s=n(4513),a=n(6776);const c=function(t,e){var n=[];return(0,a.Z)(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n};var l=n(3246),u=n(9350);const d=function(t,e){return((0,u.Z)(t)?s.Z:c)(t,(0,l.Z)(e,3))};var p=n(7684);function h(t,e,n,r,i,o,s){try{var a=t[o](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,i)}const f={props:{options:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!0},proposal:{type:Object},filterSearchValue:{type:String,default:"name"},fragmentItemClass:{type:String,default:""},canBounce:{type:Boolean,default:!0}},data:function(){return{isOpen:!1,isAdding:!1,focusedOption:null,input:"",vcoConfig:{handler:this.onClickOutside,middleware:this.determineWhetherClickOutside,events:["dblclick","click"],isActive:!0}}},computed:{canAddNewRecipient:function(){return(0,o.Z)(this.input).length>0&&!this.isAdding},shouldAnimateBounce:function(){return this.canBounce&&!this.isOpen&&!this.proposal.has_recipient},filteredOptions:function(){var t=this,e=this.input;return d(this.options,(function(n){return n[t.filterSearchValue].toLowerCase().indexOf(e.toLowerCase())>-1}))},selectedOptionId:function(){var t,e;return null===(t=this.proposal)||void 0===t||null===(e=t.recipient)||void 0===e?void 0:e.id}},methods:{isSelected:function(t){return this.selectedOptionId===t.id},handleSelectButtonClick:function(){this.editable&&(this.isOpen=!this.isOpen)},onClickOutside:function(t){this.isOpen&&(this.isOpen=!1)},selectOptionEnterPressed:function(t){t.preventDefault(),this.isOpen&&this.focusedOption&&this.selectOption(this.focusedOption)},handleOptionFocus:function(t){this.focusedOption=t},selectOption:function(t){var e,n,r=!((null===(e=this.proposal.recipient)||void 0===e?void 0:e.id)===t.id),i=(0,p.Z)(this.proposal,"recipient",t);this.$emit("update:proposal",i),this.isOpen=!1,r&&this.proposal.updateRecipient(),null===(n=this.$refs.triggerButton)||void 0===n||n.focus()},handleAddNewRecipient:function(){var t,e=this;return(t=i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.isAdding=!0,t.next=4,e.proposal.addRecipient({name:e.input});case 4:t.sent,e.isAdding=!1,e.isOpen=!1,null===(n=e.$refs.triggerButton)||void 0===n||n.focus(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.isAdding=!1;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function s(t){h(o,r,i,s,a,"next",t)}function a(t){h(o,r,i,s,a,"throw",t)}s(void 0)}))})()}},watch:{isOpen:{handler:function(t){var e=this;t?this.$nextTick((function(){var t;null===(t=e.$refs.input)||void 0===t||t.focus()})):(this.input="",this.focusedOption=null)}}}};const v=(0,n(1900).Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[t.editable?[n("focus-trap",{model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("div",{staticClass:"relative",class:t.fragmentItemClass},[n("button",{ref:"triggerButton",staticClass:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md text-gray-400 focus:outline-none focus:text-gray-500 hover:text-gray-500 transition ease-in-out duration-150",class:{"animate-bounce":t.shouldAnimateBounce},attrs:{type:"button",title:"Add proposal recipient","aria-label":"Add proposal recipient","aria-haspopup":"true","aria-expanded":t.isOpen},on:{click:t.handleSelectButtonClick}},[t.proposal.has_recipient?n("span",{staticClass:"text-orange-400",attrs:{title:t.proposal.recipient_name}},[t._v("\n            "+t._s(t._f("initials")(t.proposal.recipient_name))+"\n          ")]):n("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"}})])]),t._v(" "),n("transition",{attrs:{"enter-active-class":"transition ease-out duration-100","enter-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"}},[t.isOpen?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.vcoConfig,expression:"vcoConfig"}],staticClass:"w-52 sm:w-60 z-10 origin-top absolute right-0 mt-1 rounded-md shadow-lg"},[n("div",{staticClass:"rounded-md bg-white shadow-xs"},[n("div",{staticClass:"py-1"},[n("span",{staticClass:"px-2 py-2 font-semibold text-xs"},[t._v("Add new or existing contact")]),t._v(" "),n("div",{staticClass:"flex rounded-md shadow-sm mx-1.5 mb-1"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],ref:"input",staticClass:"focus:ring-primary-yellow-500 focus:border-primary-yellow-500 block w-full rounded-none rounded-l-md sm:text-sm border-gray-300 shadow-inner",attrs:{type:"text",placeholder:"Enter Name…"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-200 shadow-inner text-sm leading-5 font-medium rounded-r-md text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-inner focus:border-blue-300 active:bg-gray-100 active:text-gray-700 focus:ring-1 focus:ring-primary-yellow-500 focus:border-primary-yellow-500",class:{"cursor-not-allowed":!t.canAddNewRecipient},attrs:{disabled:!t.canAddNewRecipient},on:{click:t.handleAddNewRecipient}},[t.isAdding?n("svg",{staticClass:"animate-spin h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[n("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),n("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})]):n("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"}})]),t._v(" "),n("span",{staticClass:"hidden sm:inline ml-2"},[t._v("Add")])])]),t._v(" "),n("ul",{ref:"existingContactsList",staticClass:"h-48 outline-none overflow-y-scroll",attrs:{role:"listbox",tabindex:"-1"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selectOptionEnterPressed(e)}}},t._l(t.filteredOptions,(function(e,r){return n("li",{key:e.id,staticClass:"relative block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900",attrs:{tabindex:r,"aria-selected":t.isSelected(e),role:"option"},on:{click:function(n){return t.selectOption(e)},focus:function(n){return t.handleOptionFocus(e)}}},[n("div",{staticClass:"flex items-center space-x-3"},[n("div",{staticClass:"flex justify-center items-center bg-yellow-300 flex-shrink-0 h-7 w-7 rounded-full text-xs"},[t._v("\n                        "+t._s(t._f("initials")(e.name))+"\n                      ")]),t._v(" "),n("span",{staticClass:"font-normal block truncate"},[t._v("\n                        "+t._s(e.name)+"\n                      ")])]),t._v(" "),t.isSelected(e)?n("span",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-4"},[n("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])]):t._e()])})),0)])])]):t._e()])],1)])]:[n("div",{class:t.fragmentItemClass},[n("div",{staticClass:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md text-gray-400 focus:outline-none focus:text-gray-500 hover:text-gray-500 transition ease-in-out duration-150",attrs:{title:t.proposal.recipient_name}},[t.proposal.has_recipient?n("span",{staticClass:"text-orange-400 select-none"},[t._v("\n          "+t._s(t._f("initials")(t.proposal.recipient_name))+"\n        ")]):t._e()])])]],2)}),[],!1,null,null,null).exports},7866:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={props:{animationLengthMs:{type:Number,default:1e3},toBlurAfterSuccessEl:{}},data:function(){return{isSuccess:!1}},methods:{success:function(){var t=this;this.isSuccess||(this.isSuccess=!0,setTimeout((function(){var e;t.isSuccess=!1,null===(e=t.toBlurAfterSuccessEl)||void 0===e||e.blur()}),this.animationLengthMs))}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("fragment",[t.isSuccess?t._e():t._t("normal"),t._v(" "),t.isSuccess?t._t("success"):t._e()],2)}),[],!1,null,null,null).exports},6391:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const r={props:{title:{type:String,required:!0},order:{type:Number,default:0},iconRef:{type:String},icon:{}},data:function(){return{paneDidLoad:!1,icon__:null}},computed:{seq:function(){return this.order},index:function(){return this.$parent.$parent.orderedTabPanes.indexOf(this)},isSelected:function(){return this.$parent.$parent.selectedIndex__===this.index},contentInstance:function(){return this.$slots.default&&0!==this.$slots.default.length?this.$slots.default[0].componentInstance:null}},watch:{"$parent.$parent.selectedIndex__":function(t){var e=this;this.index===t&&(this.$nextTick((function(){e.handleSelected()})),this.$emit("tab-selected",this.title))}},created:function(){this.$parent.$parent.tabPanes.push(this)},beforeDestroy:function(){this.$parent.$parent.deleteTab(this)},methods:{resetPaneDidLoad:function(){this.paneDidLoad=!1},handleSelected:function(){this.paneDidLoad||(this.paneDidLoad=!0,this.$emit("did-load"),this.contentInstance&&(this.contentInstance.__paneDidLoad__||this.contentInstance.__paneDidLoad__ instanceof Function)&&this.contentInstance.__paneDidLoad__())}},render:function(){return this.$scopedSlots.default({isSelected:this.isSelected})}};var i=n(1900);const o=(0,i.Z)(r,undefined,undefined,!1,null,null,null).exports,s={props:{title:{type:String,required:!0},icon:{}},components:{RenderlessTabPane:o}};const a=(0,i.Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RenderlessTabPane",{attrs:{title:t.title,icon:t.icon},on:{"did-load":function(e){return t.$emit("did-load")}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.isSelected;return[n("div",{directives:[{name:"show",rawName:"v-show",value:r,expression:"isSelected"}]},[t._t("default")],2)]}}],null,!0)})}),[],!1,null,null,null).exports},9388:(t,e,n)=>{"use strict";n.d(e,{Z:()=>b});var r=n(758),i=n(3246),o=n(9143);const s=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var a=n(4827),c=n(7828);const l=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=(0,c.Z)(t),s=void 0!==e,a=null===e,l=e==e,u=(0,c.Z)(e);if(!a&&!u&&!o&&t>e||o&&s&&l&&!a&&!u||r&&s&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!l)return-1}return 0};const u=function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var c=l(i[r],o[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index};var d=n(3305);const p=function(t,e,n){var c=-1;e=(0,r.Z)(e.length?e:[d.Z],(0,a.Z)(i.Z));var l=(0,o.Z)(t,(function(t,n,i){return{criteria:(0,r.Z)(e,(function(e){return e(t)})),index:++c,value:t}}));return s(l,(function(t,e){return u(t,e,n)}))};var h=n(9350);const f=function(t,e,n,r){return null==t?[]:((0,h.Z)(e)||(e=null==e?[]:[e]),n=r?void 0:n,(0,h.Z)(n)||(n=null==n?[]:[n]),p(t,e,n))};var v=n(8438);const m={props:{selectedIndex:{type:Number,default:-1}},data:function(){return{tabPanes:[],selectedIndex__:this.selectedIndex}},computed:{orderedTabPanes:function(){return f(this.tabPanes,"seq")}},watch:{selectedIndex:function(t){this.select(t)},selectedIndex__:function(t){this.$emit("update:selectedIndex",t)}},mounted:function(){-1===this.selectedIndex__&&this.select(0)},methods:{isActive:function(t){return t===this.selectedIndex__},select:function(t){this.selectedIndex__!==t&&(this.$emit("tabs-selected",t),this.selectedIndex__=t)},selectTabPaneId:function(t){var e=(0,v.Z)(this.tabPanes,{id:t});if(e){var n=this.orderedTabPanes.indexOf(e);this.select(n)}},deleteTab:function(t){var e=this.tabPanes.indexOf(t);-1!==e&&this.tabPanes.splice(e,1)}},render:function(){return this.$scopedSlots.default({orderedTabPanes:this.orderedTabPanes,isActive:this.isActive,select:this.select})}};var g=n(1900);const y=(0,g.Z)(m,undefined,undefined,!1,null,null,null).exports,w={props:{selectedIndex:{type:Number,default:-1},align:{type:String,default:"center",validator:function(t){return["center"].includes(t)}},showTabTextWhenInactive:{type:Boolean,default:!0},tabsClass:{type:String},activeTabClass:{type:String,default:"border-b-2 border-indigo-500 text-indigo-600 focus:outline-none focus:text-indigo-800 focus:border-indigo-700"},activeTabIconClass:{type:String,default:"text-indigo-500 group-focus:text-indigo-600"},inactiveTabClass:{type:String,default:"cursor-pointer border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300"},inactiveTabIconClass:{type:String,default:"text-gray-400 group-hover:text-gray-500 group-focus:text-gray-600"}},components:{RenderlessTabs:y},data:function(){return{selectedIndex__:this.selectedIndex}},watch:{selectedIndex:function(t){this.$refs.renderlessTabs.select(t)},selectedIndex__:function(t){this.$emit("update:selectedIndex",t)}},methods:{shouldShowTabText:function(t,e){return!!this.showTabTextWhenInactive||this.$refs.renderlessTabs.isActive(e)}}};const b=(0,g.Z)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RenderlessTabs",{ref:"renderlessTabs",attrs:{"selected-index":t.selectedIndex__},on:{"update:selectedIndex":function(e){t.selectedIndex__=e},"update:selected-index":function(e){t.selectedIndex__=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.orderedTabPanes,i=e.isActive,o=e.select;return[n("fragment",[n("div",{class:t.tabsClass},[n("div",{staticClass:"border-b border-gray-200"},[n("nav",{staticClass:"flex -mb-px",class:{"justify-center":"center"===t.align}},t._l(r,(function(e,r){return n("a",{key:e.name,staticClass:"group inline-flex items-center py-2 px-3 select-none text-sm leading-5 font-medium",class:i(r)?t.activeTabClass:t.inactiveTabClass,attrs:{title:e.title},on:{click:function(t){return o(r)}}},[n(e.icon,{tag:"component",staticClass:"h-5 w-5",class:{activeTabIconClass:i(r),inactiveTabIconClass:!i(r),"-ml-0.5 mr-2":t.shouldShowTabText(e,r)}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowTabText(e,r),expression:"shouldShowTabText(tab, index)"}]},[t._v("\n              "+t._s(e.title)+"\n            ")])],1)})),0)])]),t._v(" "),t._t("default")],2)]}}],null,!0)})}),[],!1,null,null,null).exports},3682:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=Object.prototype.hasOwnProperty;const i=function(t,e){return null!=t&&r.call(t,e)};var o=n(7754);const s=function(t,e){return null!=t&&(0,o.Z)(t,e,i)};var a=n(7398),c={indigo:{badgeColor:"bg-indigo-100 text-indigo-800",dotColor:"text-indigo-400"},red:{badgeColor:"bg-red-100 text-red-800",dotColor:"text-red-400"},pink:{badgeColor:"bg-pink-100 text-pink-800",dotColor:"text-pink-400"},blue:{badgeColor:"bg-blue-100 text-blue-800",dotColor:"text-blue-400"},gray:{badgeColor:"bg-gray-100 text-gray-800",dotColor:"text-gray-400"},yellow:{badgeColor:"bg-yellow-100 text-yellow-800",dotColor:"text-yellow-400"},orange:{badgeColor:"bg-orange-100 text-orange-800",dotColor:"text-orange-400"},green:{badgeColor:"bg-green-100 text-green-800",dotColor:"text-green-400"}};const l={props:{size:{default:"small",validator:function(t){return["small","large"].includes(t)}},color:{type:String,default:"blue",validator:function(t){return s(c,t)}},customBadgeClass:{type:String},customDotClass:{type:String},showDot:{type:Boolean,default:!0}},computed:{badgeSizeClass:function(){return"small"===this.size?"px-2.5 py-0.5 text-xs leading-4":"large"===this.size?"px-3 py-0.5 text-sm leading-5":void 0},dotSizeClass:function(){return"small"===this.size?"-ml-0.5 mr-1.5 h-2 w-2":"large"===this.size?"-ml-1 mr-1.5 h-2 w-2":void 0},badgeClass:function(){return"".concat(this.badgeSizeClass," ").concat(this.badgeColorClass)},dotClass:function(){return"".concat(this.dotSizeClass," ").concat(this.dotColorClass)},badgeColorClass:function(){return this.customBadgeClass?this.customBadgeClass:(0,a.Z)(c,"".concat(this.color,".badgeColor"))},dotColorClass:function(){return this.customDotClass?this.customDotClass:(0,a.Z)(c,"".concat(this.color,".dotColor"))}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"inline-flex items-center rounded-full font-medium",class:t.badgeClass},[t.showDot?t._t("dot",[n("svg",{class:t.dotClass,attrs:{fill:"currentColor",viewBox:"0 0 8 8"}},[n("circle",{attrs:{cx:"4",cy:"4",r:"3"}})])]):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports},2388:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"}})])}),[],!1,null,null,null).exports},2479:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})])}),[],!1,null,null,null).exports},8933:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports},8681:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})])}),[],!1,null,null,null).exports},9073:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports},7360:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={};const i=(0,n(1900).Z)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])}),[],!1,null,null,null).exports},6434:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"}})])}),[],!1,null,null,null).exports},981:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"animate-spin",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[n("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),n("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})])}),[],!1,null,null,null).exports},9160:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{height:"118",viewBox:"0 0 524 118",width:"524",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{fill:"currentColor","fill-rule":"evenodd"}},[e("path",{attrs:{d:"m53.9987704 103.47462c0 8.022146-5.3721426 14.52538-11.9990163 14.52538h-5.9995082c-6.6268737 0-11.9990163-6.503234-11.9990163-14.52538h5.9995082c0 4.011073 2.6860713 7.26269 5.9995081 7.26269h5.9995082c3.3134368 0 5.9995081-3.251617 5.9995081-7.26269zm5.9995081-18.7479228c0 6.6851216-5.3721426 12.1044835-11.9990163 12.1044835h-17.9985244c-6.6268737 0-11.9990163-5.4193619-11.9990163-12.1044835v-12.2376328c-14.59851814-9.410589-21.29243498-27.4086387-16.43306735-44.1838716 4.85936763-16.775233 20.10681425-28.3051928 37.43134585-28.3051928s32.5719782 11.5299598 37.4313458 28.3051928c4.8593677 16.7752329-1.8345492 34.7732826-16.4330673 44.1838716zm-35.9970489 0c0 3.3425608 2.6860713 6.0522417 5.9995082 6.0522417h17.9985244c3.3134369 0 5.9995082-2.7096809 5.9995082-6.0522417v-15.7358285c13.5860116-6.9940219 20.6497162-22.4700731 17.0844057-37.430662-3.5653105-14.9605888-16.8303945-25.50647558-32.0831761-25.50647558s-28.5178656 10.54588678-32.08317611 25.50647558c-3.56531048 14.9605889 3.49839411 30.4366401 17.08440571 37.430662z","fill-rule":"nonzero"}}),e("g",{attrs:{"fill-rule":"nonzero",stroke:"currentColor",transform:"translate(19 20)"}},[e("path",{attrs:{d:"m40.5690392 3.06542121c.275902.27756252.4309608.65444001.4309608 1.04746979 0 .39302979-.1550588.76990728-.4309608 1.0474698l-20.5367827 20.7126795c-.2752054.2782651-.6488823.434652-1.0385744.434652s-.7633691-.1563869-1.0385745-.434652l-8.80147826-8.8768626c-.37104692-.3742249-.51595724-.9196696-.38014464-1.4308704.13581259-.5112007.53171493-.910494 1.03857444-1.0474698.50685956-.1369758 1.04767216.0091757 1.41871906.3834006l7.7629039 7.8323518 19.4982082-19.66816869c.2752054-.27826509.6488824-.43465198 1.0385744-.43465198.3896921 0 .7633691.15638689 1.0385745.43465198z"}}),e("path",{attrs:{d:"m18.9009303 2.92579514c-8.8325357 0-15.99272064 7.19747416-15.99272064 16.07600856 0 8.8785343 7.16018494 16.0760085 15.99272064 16.0760085 8.8325358 0 15.9927207-7.1974742 15.9927207-16.0760085 0-.8071395.6509259-1.4614553 1.4538837-1.4614553s1.4538837.6543158 1.4538837 1.4614553c-.0010986 8.5987918-5.7474631 16.1248491-14.0104402 18.3495801s-16.98231174-1.406569-21.25895733-8.8536173-3.04428176-16.85303 3.00467538-22.93309885c6.04895715-6.08006888 15.40628665-7.31824678 22.81447815-3.01885089.4732077.24883156.772612.73841687.7798398 1.27519273s-.2788843 1.03432765-.7452187 1.29594252c-.4663345.26161488-1.0378167.24517592-1.4885048-.04281755-2.43024-1.41267011-5.1890399-2.15386211-7.9963604-2.14833932z","stroke-width":"2"}})]),e("path",{attrs:{d:"m2.5 0c-1.38071187 0-2.5 1.11928813-2.5 2.5s1.11928813 2.5 2.5 2.5 2.5-1.11928813 2.5-2.5-1.11928813-2.5-2.5-2.5z",transform:"translate(37 101)",fill:"currentColor"}}),e("path",{attrs:{d:"m102 35.7h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85zm57.6 9.1c-4.733357 0-8.933315-1.066656-12.6-3.2s-6.49999-5.033315-8.5-8.7-3-7.733311-3-12.2c0-4.400022.983323-8.433315 2.95-12.1 1.966676-3.666685 4.783315-6.566656 8.45-8.7s7.899976-3.2 12.7-3.2 9.016648 1.066656 12.65 3.2c3.633351 2.133344 6.433323 5.033315 8.4 8.7 1.966676 3.666685 2.95 7.699978 2.95 12.1 0 4.466689-.99999 8.533315-3 12.2s-4.816649 6.566656-8.45 8.7c-3.633352 2.133344-7.816643 3.2-12.55 3.2zm.3-8.8c3.866686 0 6.916655-1.433319 9.15-4.3 2.233344-2.866681 3.35-6.466645 3.35-10.8s-1.199988-7.9833185-3.6-10.95-5.566647-4.45-9.5-4.45c-3.800019 0-6.849989 1.466652-9.15 4.4-2.300012 2.933348-3.45 6.599978-3.45 11 0 4.266688 1.233321 7.8499855 3.7 10.75s5.633314 4.35 9.5 4.35zm51 8.8c-3.200016 0-6.51665-.4166625-9.95-1.25-3.433351-.8333375-5.883326-1.816661-7.35-2.95l3.6-8.5c4.00002 2.800014 8.566641 4.2 13.7 4.2s7.7-1.499985 7.7-4.5c0-1.33334-.533328-2.366663-1.6-3.1s-2.966653-1.599995-5.7-2.6l-3.8-1.4c-4.00002-1.600008-7.166655-3.5166555-9.5-5.75s-3.5-5.183315-3.5-8.85c0-4.200021 1.649983-7.4833215 4.95-9.85 3.300016-2.3666785 7.716639-3.55 13.25-3.55 2.733347 0 5.416653.299997 8.05.9 2.633346.6 4.649993 1.366662 6.05 2.3l-3.9 8.6c-.866671-.866671-2.249991-1.6166635-4.15-2.25-1.90001-.6333365-4.016655-.95-6.35-.95-4.733357 0-7.1 1.433319-7.1 4.3 0 1.6.633327 2.8166625 1.9 3.65s3.333319 1.749995 6.2 2.75c.266668.066667 1.299991.43333 3.1 1.1 4.266688 1.666675 7.433323 3.566656 9.5 5.7s3.1 4.86665 3.1 8.2c0 4.533356-1.71665 7.966655-5.15 10.3-3.433351 2.333345-7.783307 3.5-13.05 3.5zm30.2-46.9h11.2v45.9h-11.2zm5.5-8.6c-2.066677 0-3.8-.699993-5.2-2.1-1.400007-1.400007-2.1-3.133323-2.1-5.2 0-1.866676.699993-3.46666 2.1-4.8 1.4-1.33334 3.133323-2 5.2-2 2.00001 0 3.7.66666 5.1 2 1.400007 1.33334 2.1 2.933324 2.1 4.8 0 2.066677-.683327 3.799993-2.05 5.2-1.366674 1.400007-3.083323 2.1-5.15 2.1zm24.7 17.4h-8.1v-8.8h8.1v-18.7l10.9-2.4v21.1h10.6v8.8h-10.6v37.1h-10.9zm35.7 38.1c-2.00001 0-3.7-.6833265-5.1-2.05-1.400007-1.3666735-2.1-3.04999-2.1-5.05 0-2.066677.683326-3.7833265 2.05-5.15 1.366673-1.3666735 3.083323-2.05 5.15-2.05s3.783326.6833265 5.15 2.05c1.366673 1.3666735 2.05 3.083323 2.05 5.15 0 2.00001-.683327 3.6833265-2.05 5.05-1.366674 1.3666735-3.083323 2.05-5.15 2.05zm40 0c-4.133354 0-7.949983-.9833235-11.45-2.95-3.500018-1.9666765-6.29999-4.7666485-8.4-8.4-2.100011-3.6333515-3.15-7.883309-3.15-12.75 0-4.800024.916657-8.999982 2.75-12.6 1.833342-3.600018 4.449983-6.4 7.85-8.4 3.400017-2.00001 7.399977-3 12-3 2.66668 0 5.166655.466662 7.5 1.4s4.299992 2.0833265 5.9 3.45 2.666664 2.71666 3.2 4.05l.2-7.7h10.3v45.9h-10.2l-.2-8.1c-1.133339 2.400012-3.199985 4.5166575-6.2 6.35s-6.366648 2.75-10.1 2.75zm1.8-9c3.800019 0 6.999987-1.3166535 9.6-3.95s3.9-6.083312 3.9-10.35v-.7c0-2.866681-.599994-5.433322-1.8-7.7s-2.833323-4.033327-4.9-5.3-4.333321-1.9-6.8-1.9c-4.266688 0-7.566655 1.3833195-9.9 4.15s-3.5 6.349978-3.5 10.75c0 4.466689 1.149988 8.0833195 3.45 10.85 2.300011 2.7666805 5.616645 4.15 9.95 4.15zm39.6-37.9h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85zm36.4-37.8h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85z","fill-rule":"nonzero",fill:"currentColor"}})])])}),[],!1,null,null,null).exports},5790:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{height:"151",viewBox:"0 0 100 151",width:"100",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"fill-rule":"evenodd",fill:"currentColor"}},[e("path",{attrs:{d:"m69.2291928 132.412437c0 10.265628-6.8873623 18.587563-15.3833542 18.587563h-7.6916772c-8.4959919 0-15.3833542-8.321935-15.3833542-18.587563h7.6916771c0 5.132814 3.4436812 9.293782 7.6916771 9.293782h7.6916772c4.2479959 0 7.6916771-4.160968 7.6916771-9.293782zm7.6916771-23.990985c0 8.554689-6.8873623 15.489635-15.3833542 15.489635h-23.0750314c-8.4959919 0-15.3833542-6.934946-15.3833542-15.489635v-15.6600221c-18.71604887-12.0423639-27.29799353-35.0737665-21.06803503-56.5403781 6.2299585-21.4666117 25.77796693-36.2210518 47.98890493-36.2210518s41.7589464 14.7544401 47.9889049 36.2210518c6.2299581 21.4666116-2.3519861 44.4980142-21.068035 56.5403781zm-46.1500627 0c0 4.277344 3.4436812 7.744817 7.6916771 7.744817h23.0750314c4.2479959 0 7.6916771-3.467473 7.6916771-7.744817v-20.1365268c17.4179636-8.9499772 26.4739951-28.7540766 21.9030843-47.898559-4.5709109-19.1444823-21.5774289-32.63964248-41.1322771-32.63964248s-36.5613662 13.49516018-41.13227706 32.63964248c-4.57091088 19.1444824 4.48512066 38.9485818 21.90308426 47.898559z","fill-rule":"nonzero",fill:"currentColor"}}),e("g",{attrs:{"fill-rule":"nonzero",stroke:"currentColor",transform:"translate(24 26)",fill:"currentColor"}},[e("path",{attrs:{d:"m52.4429043 3.95277998c.3566538.35790957.5570957.84388317.5570957 1.35068474 0 .50680156-.2004419.99277517-.5570957 1.35068473l-26.5475483 26.70845515c-.3557533.3588155-.8387992.5604723-1.3425475.5604723s-.9867941-.2016568-1.3425474-.5604723l-11.3775207-11.4464808c-.479646-.4825531-.6669691-1.1858897-.4914065-1.8450696s.6873388-1.1740581 1.3425474-1.3506848c.6552087-.1766267 1.354308.0118318 1.833954.494385l10.0349732 10.0996115 25.2050009-25.36158592c.3557533-.3588155.8387992-.56047229 1.3425475-.56047229s.9867941.20165679 1.3425474.56047229z"}}),e("path",{attrs:{d:"m24.43291 3.77273584c-11.4176682 0-20.67351703 9.28095356-20.67351703 20.72958996s9.25584883 20.72959 20.67351703 20.72959c11.4176681 0 20.673517-9.2809536 20.673517-20.72959 0-1.0407851.8414408-1.8845082 1.8794106-1.8845082s1.8794106.8437231 1.8794106 1.8845082c-.0014202 11.0879158-7.4296475 20.7925686-18.1110569 23.6613007s-21.95274442-1.8137337-27.48109115-11.4165065c-5.52834674-9.6027728-3.93529105-21.7315387 3.88409256-29.5716275 7.81938359-7.84008882 19.91544379-9.43668664 29.49188639-3.89272879.6117075.32086175.9987423.95216912 1.0080856 1.64432747s-.360509 1.33373828-.9633315 1.67108379c-.6028226.3373455-1.341568.31614789-1.9241647-.05521211-3.1415298-1.82160093-6.7077833-2.77734851-10.3367585-2.77022702z","stroke-width":"2"}})]),e("path",{attrs:{d:"m3.5 0c-1.93299662 0-3.5 1.56700338-3.5 3.5s1.56700338 3.5 3.5 3.5 3.5-1.56700338 3.5-3.5-1.56700338-3.5-3.5-3.5z",transform:"translate(47 129)",fill:"currentColor"}})])])}),[],!1,null,null,null).exports},8998:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{"vertical-align":"-0.125em","-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)",transform:"rotate(360deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M2.391 13.861c.089.195.204.37.341.524a1.975 1.975 0 0 1-.963.235C.744 14.62 0 13.944 0 12.866c0-1.086.782-1.762 1.769-1.762c.351 0 .628.076.908.225c-.131.16-.238.342-.32.541a1.388 1.388 0 0 0-.52-.098c-.607 0-1.078.388-1.078 1.094c0 .668.456 1.094 1.109 1.094c.187 0 .36-.034.523-.099zm2.062-2.757c1.01 0 1.739.714 1.739 1.762c0 1.04-.729 1.754-1.739 1.754c-1.002 0-1.731-.714-1.731-1.754c0-1.048.729-1.762 1.731-1.762zm0 .645c-.562 0-.972.433-.972 1.117c0 .676.41 1.109.972 1.109c.577 0 .98-.433.98-1.109c0-.684-.403-1.117-.98-1.117zm2.217 2.795V11.18h.751v3.364H6.67zm-.099-4.397a.472.472 0 0 1 .942 0a.48.48 0 0 1-.471.478a.48.48 0 0 1-.471-.478zm1.506 1.246a4.49 4.49 0 0 1 1.541-.289c.858 0 1.405.326 1.405 1.276v2.164h-.744v-2.096c0-.486-.304-.661-.721-.661a2.59 2.59 0 0 0-.729.099v2.658h-.752v-3.151zm3.575-2.013h.752v1.891c.159-.084.471-.167.766-.167c.972 0 1.701.623 1.701 1.701c0 1.086-.721 1.815-1.966 1.815c-.486 0-.911-.098-1.253-.22V9.38zm.752 4.527c.144.045.334.068.524.068c.69 0 1.184-.38 1.184-1.155c0-.653-.463-1.04-1.032-1.04a1.41 1.41 0 0 0-.676.159v1.968zm4.638-1.618c0-.365-.273-.532-.645-.532a1.9 1.9 0 0 0-.972.273v-.653a2.241 2.241 0 0 1 1.093-.273c.737 0 1.26.304 1.26 1.147v2.225a5.026 5.026 0 0 1-1.153.137c-.873 0-1.511-.266-1.511-1.026c0-.683.584-1.017 1.556-1.017h.372v-.281zm0 .782h-.319c-.524 0-.865.152-.865.494c0 .349.319.486.774.486c.114 0 .274-.016.41-.038v-.942zm1.283.562c.311.235.683.38 1.025.38c.334 0 .554-.114.554-.38c0-.274-.197-.372-.63-.486c-.698-.16-.995-.441-.995-1.025c0-.684.517-1.018 1.2-1.018c.38 0 .683.083.964.258v.691c-.296-.212-.584-.342-.941-.342c-.327 0-.501.16-.501.38s.144.334.531.441c.767.167 1.101.455 1.101 1.063c0 .706-.539 1.025-1.268 1.025c-.395 0-.789-.106-1.04-.273v-.714zm3.337-.6v.015c.045.6.562.927 1.085.927c.463 0 .798-.107 1.131-.327v.661c-.303.213-.751.311-1.184.311c-1.047 0-1.761-.668-1.761-1.731c0-1.071.698-1.785 1.625-1.785c.979 0 1.442.63 1.442 1.549v.38h-2.338zm1.632-.486c-.015-.524-.273-.813-.759-.813c-.433 0-.752.304-.85.813h1.609z",fill:"currentColor"}})])}),[],!1,null,null,null).exports},2603:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{"vertical-align":"-0.125em","-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)",transform:"rotate(360deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"}},[e("path",{attrs:{d:"M8.25 10.435l-2.165.46l-.01 7.12c0 1.315.99 2.165 2.305 2.165c.73 0 1.265-.135 1.56-.295v-1.69c-.285.115-1.685.525-1.685-.785v-3.16H9.94v-1.89H8.255zm4.455 2.58l-.135-.655h-1.92v7.66h2.215v-5.155c.525-.69 1.41-.555 1.695-.465v-2.04c-.3-.105-1.335-.3-1.855.655zM17.32 9.4l-2.23.475v1.81l2.23-.475zM2.245 14.615c0-.345.29-.48.755-.485c.675 0 1.535.205 2.21.57v-2.09a5.925 5.925 0 0 0-2.205-.405c-1.8 0-3 .94-3 2.51c0 2.46 3.375 2.06 3.375 3.12c0 .41-.355.545-.85.545c-.735 0-1.685-.305-2.43-.71v2c.825.355 1.66.505 2.425.505c1.845 0 3.115-.79 3.115-2.39c0-2.645-3.395-2.17-3.395-3.17zM32 16.28c0-2.275-1.1-4.07-3.21-4.07s-3.395 1.795-3.395 4.055c0 2.675 1.515 3.91 3.675 3.91c1.06 0 1.855-.24 2.46-.575v-1.67c-.605.305-1.3.49-2.18.49c-.865 0-1.625-.305-1.725-1.345h4.345c.01-.115.03-.58.03-.795zm-4.395-.84c0-1 .615-1.42 1.17-1.42c.545 0 1.125.42 1.125 1.42zm-5.645-3.23c-.87 0-1.43.41-1.74.695l-.115-.55H18.15v10.24l2.22-.47l.005-2.51c.32.235.795.56 1.57.56c1.59 0 3.04-1.16 3.04-3.98c.005-2.58-1.465-3.985-3.025-3.985zm-.53 6.125c-.52 0-.83-.19-1.045-.42l-.015-3.3c.23-.255.55-.44 1.06-.44c.81 0 1.37.91 1.37 2.07c.005 1.195-.545 2.09-1.37 2.09zm-6.335 1.685h2.23v-7.66h-2.23z",fill:"currentColor"}})])}),[],!1,null,null,null).exports},1144:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={props:{showDefaultModalStyle:{type:Boolean,default:!0},modalRootClass:{type:String,default:"fixed bottom-0 inset-x-0 px-4 pb-4 sm:inset-0 sm:flex sm:items-center sm:justify-center"},isVisible:{type:Boolean,default:!1},rootVisibleHideDelay:{type:Number,default:300},cancelActionButtonText:{type:String,default:"Cancel"},mainActionButtonText:{type:String,default:"Ok"},mainActionButtonColors:{type:String,default:"border border-transparent bg-red-400 text-white hover:bg-red-300 focus:outline-none focus:border-red-500 focus:shadow-outline-red"},showBottomButtonGroup:{type:Boolean,default:!0},hintIconBackgroundColor:{type:String,default:"bg-red-100"},hintTitle:{type:String,default:"Title"},hintDescription:{type:String,default:"This is some description of what is happening."},onBackgroundHit:{type:Function},onCloseButtonHit:{type:Function},onCancelActionButtonHit:{type:Function},onMainActionButtonHit:{type:Function},onEscapeKeyHit:{type:Function}},data:function(){return{isRootVisible:!1,isVisible__:!1}},computed:{handleBackgroundHit:function(){return"function"==typeof this.onBackgroundHit?this.onBackgroundHit.bind(this):this.defaultHandleBackgroundHit},handleCloseButtonHit:function(){return"function"==typeof this.onCloseButtonHit?this.onCloseButtonHit.bind(this):this.defaultHandleCloseButtonHit},handleCancelActionButtonHit:function(){return"function"==typeof this.onCancelActionButtonHit?this.onCancelActionButtonHit.bind(this):this.defaultHandleCancelActionButtonHit},handleMainActionButtonHit:function(){return"function"==typeof this.onMainActionButtonHit?this.onMainActionButtonHit.bind(this):this.defaultHandleMainActionButtonHit},handleEscapeKeyHit:function(){return"function"==typeof this.onEscapeKeyHit?this.onEscapeKeyHit.bind(this):this.defaultEscapeKeyHit}},watch:{isVisible__:function(t){var e=this;if(this.$emit("update:isVisible",t),t)return this.isRootVisible=!0,this.$nextTick((function(){e.$refs.modal.focus()})),void this.$emit("opened");setTimeout((function(){return e.isRootVisible=!1}),this.rootVisibleHideDelay)},isVisible:{immediate:!0,handler:function(t){this.isVisible__=t}}},methods:{defaultHandleBackgroundHit:function(){this.isVisible__=!1},defaultHandleCloseButtonHit:function(){this.isVisible__=!1},defaultHandleCancelActionButtonHit:function(){this.isVisible__=!1},defaultHandleMainActionButtonHit:function(){this.isVisible__=!1},defaultEscapeKeyHit:function(){this.isVisible__=!1}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("focus-trap",{model:{value:t.isVisible__,callback:function(e){t.isVisible__=e},expression:"isVisible__"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isRootVisible,expression:"isRootVisible"}],ref:"modal",class:t.modalRootClass,attrs:{tabindex:"0"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleEscapeKeyHit(e)}}},[n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible__,expression:"isVisible__"}],staticClass:"fixed inset-0 transition-opacity",on:{click:t.handleBackgroundHit}},[n("div",{staticClass:"absolute inset-0 bg-gray-500 opacity-75"})])]),t._v(" "),t.showDefaultModalStyle?n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible__,expression:"isVisible__"}],staticClass:"relative bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6"},[t._t("close-button",[n("div",{staticClass:"hidden sm:block absolute top-0 right-0 pt-4 pr-4"},[n("button",{staticClass:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150",attrs:{type:"button"},on:{click:t.handleCloseButtonHit}},[n("svg",{staticClass:"h-6 w-6",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])]),t._v(" "),n("div",{staticClass:"sm:flex sm:items-start"},[n("div",{staticClass:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10",class:t.hintIconBackgroundColor},[t._t("hint-icon",[n("svg",{staticClass:"h-6 w-6 text-red-600",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}}),n("path",{attrs:{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}})])])],2),t._v(" "),n("div",{staticClass:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},[n("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900"},[t._v("\n              "+t._s(t.hintTitle)+"\n            ")]),t._v(" "),t._t("hint-body-section",[n("div",{staticClass:"mt-2"},[n("p",{staticClass:"text-sm leading-5 text-gray-500",domProps:{innerHTML:t._s(t.hintDescription)}})])])],2)]),t._v(" "),t.showBottomButtonGroup?t._t("bottom-button-group",[n("div",{staticClass:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},[n("span",{staticClass:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md px-4 py-2 text-base leading-6 font-medium shadow-sm transition ease-in-out duration-150 sm:text-sm sm:leading-5",class:t.mainActionButtonColors,attrs:{type:"button"},on:{click:t.handleMainActionButtonHit}},[t._v("\n                "+t._s(t.mainActionButtonText)+"\n              ")])]),t._v(" "),n("span",{staticClass:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline transition ease-in-out duration-150 sm:text-sm sm:leading-5",attrs:{type:"button"},on:{click:t.handleCancelActionButtonHit}},[t._v("\n                "+t._s(t.cancelActionButtonText)+"\n              ")])])])]):t._e()],2)]):t._e(),t._v(" "),t.showDefaultModalStyle?t._e():t._t("alternative-modal")],2)])}),[],!1,null,null,null).exports},7460:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={components:{BaseModal:n(1144).Z},data:function(){return{isVisible:!1}},computed:{hintTitle:function(){return"Welcome to Posit!"},hintDescription:function(){return'You can see what it\'s like to create a proposal right away! <br><br> <span class="italic">Please note that <span class="underline">you\'ll need to sign in to have your changes saved</span> & use the rest of the feature set.</span>'}},methods:{show:function(){return this.isVisible=!0,this},handleBackgroundHit:function(){this.isVisible=!1},handleCloseButtonHit:function(){this.isVisible=!1},handleWhenOpened:function(){}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseModal",{attrs:{"is-visible":t.isVisible,"hint-description":t.hintDescription,"hint-title":t.hintTitle,"show-bottom-button-group":!1,"hint-icon-background-color":"bg-orange-50"},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e},opened:t.handleWhenOpened},scopedSlots:t._u([{key:"hint-icon",fn:function(){return[n("svg",{staticClass:"h-6 w-6 text-orange-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])]},proxy:!0}])})}),[],!1,null,null,null).exports},5583:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});const r={components:{BaseModal:n(1144).Z},data:function(){return{isVisible:!1,canClose:!0}},computed:{hintTitle:function(){return"Sign in to your Posit account"},hintDescription:function(){return""}},methods:{show:function(){return this.isVisible=!0,this},handleBackgroundHit:function(){this.canClose&&(this.isVisible=!1)},handleCloseButtonHit:function(){this.canClose&&(this.isVisible=!1)},handleEscapeKeyHit:function(){this.canClose&&(this.isVisible=!1)},handleWhenOpened:function(){},handleLoginSuccess:function(){var t=this;this.canClose=!0,setTimeout((function(){t.isVisible=!1}),400)}}};const i=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseModal",{attrs:{"is-visible":t.isVisible,"hint-description":t.hintDescription,"hint-title":t.hintTitle,"show-bottom-button-group":!1,"on-background-hit":t.handleBackgroundHit,"on-close-button-hit":t.handleCloseButtonHit,"on-escape-key-hit":t.handleEscapeKeyHit,"hint-icon-background-color":"bg-gray-50"},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e},opened:t.handleWhenOpened},scopedSlots:t._u([{key:"hint-icon",fn:function(){return[n("svg",{staticClass:"h-6 w-6 text-orange-300",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}})])]},proxy:!0},{key:"hint-body-section",fn:function(){},proxy:!0}])})}),[],!1,null,null,null).exports},214:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(1097),i=n(7460),o=n(5583),s=n(4429),a=n(5765);const c={components:{ProposalSlideOver:r.oc,FirstWelcomeModal:i.Z,LoginModal:o.Z,EditorContent:s.kg},data:function(){return{keepInBounds:!0,editor:new s.ML({extensions:[new a.V6,new a.DY,new a.dn,new a.U1,new a.X6({levels:[1,2,3]}),new a.HC,new a.GS,new a.PK,new a.B4,new a.rU,new a.d8,new a.EK,new a.Tx,new a.Re,new a.v6,new a.Ay],content:"\n          <h2>\n            Proposal\n          </h2>\n          <p></p>\n          <p>\n            Here is my proposal...\n          </p>\n          <p></p>\n          <ul>\n            <li>\n              <p>🔥 Really compelling point</p>\n            </li>\n            <li>\n              <p>💪 Another one</p>\n            </li>\n            <li>\n              <p>✅  Choose me!</p>\n            </li>\n          </ul>\n          <p></p>\n          <p>\n            If you would like to proceed, <strong>please pay the deposit...</strong>\n          </p>\n        "})}},mounted:function(){var t=this;setTimeout((function(){t.$refs.proposalSlideOver.show()}),1200),console.log(this.$page.props.user),setTimeout((function(){}),2e3)},methods:{toggleProposalSlideOver:function(){var t=this.$refs.proposalSlideOver;t&&(t.isVisible?t.hide():t.show())}},beforeDestroy:function(){this.editor.destroy()}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("div",{staticClass:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[n("div",{staticClass:"max-w-3xl mx-auto"},[n("div",{staticClass:"bg-white overflow-hidden shadow rounded-lg mt-5"},[n("div",{staticClass:"px-4 py-5 sm:p-6"},[n("editor-content",{attrs:{editor:t.editor}})],1)])])]),t._v(" "),n("span",{staticClass:"cursor-pointer inline-flex items-center justify-center h-10 w-10 rounded-full overflow-hidden bg-indigo-50 absolute bottom-2 right-3 md:bottom-auto md:top-auto",on:{click:t.toggleProposalSlideOver}},[n("svg",{staticClass:"h-8 w-8 text-indigo-500 hover:text-indigo-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}}),n("path",{attrs:{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}})])]),t._v(" "),n("ProposalSlideOver",{ref:"proposalSlideOver"}),t._v(" "),n("FirstWelcomeModal",{ref:"firstWelcomeModal"}),t._v(" "),n("LoginModal",{ref:"loginModal"})],1)}),[],!1,null,null,null).exports},1900:(t,e,n)=>{"use strict";function r(t,e,n,r,i,o,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):i&&(c=a?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}n.d(e,{Z:()=>r})},392:(t,e,n)=>{"use strict";n.d(e,{mu:()=>s,Bc:()=>a});var r=n(9823),i=n(797);function o(t){return{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:t}}}}function s(t,e,n,s){var a,c=(0,r.j)(t.src),l=null===(a=null==e?void 0:e.options.services)||void 0===a?void 0:a[c.type],u=t.data?(0,r.QX)(t.data,n,s):void 0,d=l?function(t,e,n){var s=o(e);s.deferred=!0,(0,r.O4)(t)&&(s.state=(0,i.J)(void 0,(function(){return(n?t.withContext(n):t).initialState})));return s}(l,t.id,u):o(t.id);return d.meta=t,d}function a(t){try{return"function"==typeof t.send}catch(t){return!1}}},9944:(t,e,n)=>{"use strict";n.d(e,{J:()=>w});var r=n(3056),i=n(7353),o=n(4066),s=n(9823),a=n(9043),c=n(6115),l=n(3884),u=n(375),d=n(4911),p=n(392);function h(t){if("string"==typeof t){var e={type:t,toString:function(){return t}};return e}return t}function f(t){return(0,r.pi)((0,r.pi)({type:l.dw},t),{toJSON:function(){t.onDone,t.onError;var e=(0,r._T)(t,["onDone","onError"]);return(0,r.pi)((0,r.pi)({},e),{type:l.dw,src:h(t.src)})}})}var v="*",m={},g=function(t){return"#"===t[0]},y=function(){function t(e,n,a){var l=this;this.config=e,this.context=a,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:i.iS),this.id=this.config.id||(0,r.fl)([this.machine.key],this.path).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&(0,s.XP)(this.config.states).length?"compound":this.config.history?"history":"atomic"),o.M||(0,s.ZK)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=this.config.initial,this.states=this.config.states?(0,s.Q8)(this.config.states,(function(e,n){var i,o=new t(e,{_parent:l,_key:n});return Object.assign(l.idMap,(0,r.pi)(((i={})[o.id]=o,i),o.idMap)),o})):m;var d=0;!function t(e){var n,i;e.order=d++;try{for(var o=(0,r.XA)((0,c.G)(e)),s=o.next();!s.done;s=o.next()){t(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return""===t.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=(0,s.qo)(this.config.entry||this.config.onEntry).map((function(t){return(0,u.Q8)(t)})),this.onExit=(0,s.qo)(this.config.exit||this.config.onExit).map((function(t){return(0,u.Q8)(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=(0,s.qo)(this.config.invoke).map((function(t,e){var n,i;if((0,s.O4)(t))return l.machine.options.services=(0,r.pi)(((n={})[t.id]=t,n),l.machine.options.services),f({src:t.id,id:t.id});if((0,s.HD)(t.src))return f((0,r.pi)((0,r.pi)({},t),{id:t.id||t.src,src:t.src}));if((0,s.O4)(t.src)||(0,s.mf)(t.src)){var o=l.id+":invocation["+e+"]";return l.machine.options.services=(0,r.pi)(((i={})[o]=t.src,i),l.machine.options.services),f((0,r.pi)((0,r.pi)({id:o},t),{src:o}))}var a=t.src;return f((0,r.pi)((0,r.pi)({id:a.type},t),{src:a}))})),this.activities=(0,s.qo)(this.config.activities).concat(this.invoke).map((function(t){return(0,u.XA)(t)})),this.transition=this.transition.bind(this)}return t.prototype._init=function(){this.__cache.transitions||(0,c.ac)(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,n){void 0===n&&(n=this.context);var i=this.options,o=i.actions,s=i.activities,a=i.guards,c=i.services,l=i.delays;return new t(this.config,{actions:(0,r.pi)((0,r.pi)({},o),e.actions),activities:(0,r.pi)((0,r.pi)({},s),e.activities),guards:(0,r.pi)((0,r.pi)({},a),e.guards),services:(0,r.pi)((0,r.pi)({},c),e.services),delays:(0,r.pi)((0,r.pi)({},l),e.delays)},n)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:(0,s.Q8)(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=""===t,n=this.transitions.filter((function(n){var r=n.eventType===t;return e?r:r||n.eventType===v}));return this.__cache.candidates[t]=n,n},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var n=function(e,n){var r=(0,s.mf)(e)?t.id+":delay["+n+"]":e,i=(0,u.e4)(r,t.id);return t.onEntry.push((0,u.lW)(i,{delay:e})),t.onExit.push((0,u.al)(i)),i};return((0,s.kJ)(e)?e.map((function(t,e){var i=n(t.delay,e);return(0,r.pi)((0,r.pi)({},t),{event:i})})):(0,s.xH)((0,s.XP)(e).map((function(t,i){var o=e[t],a=(0,s.HD)(o)?{target:o}:o,c=isNaN(+t)?t:+t,l=n(c,i);return(0,s.qo)(a).map((function(t){return(0,r.pi)((0,r.pi)({},t),{event:l,delay:c})}))})))).map((function(e){var n=e.delay;return(0,r.pi)((0,r.pi)({},t.formatTransition(e)),{delay:n})}))},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof d.ZM?t.value:(0,s.WM)(t,this.delimiter);if((0,s.HD)(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((e={})[r]=i,e)):[this.states[r]]}var o=(0,s.XP)(r);return o.map((function(t){return n.getStateNode(t)})).concat(o.reduce((function(t,e){var i=n.getStateNode(e).getStateNodes(r[e]);return t.concat(i)}),[]))},t.prototype.handles=function(t){var e=(0,s.x6)(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=Array.from((0,c.P_)([],this.getStateNodes(t.value)));return new d.ZM((0,r.pi)((0,r.pi)({},t),{value:this.resolve(t.value),configuration:e}))},t.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t).next(e,n);return r&&r.transitions.length?r:this.next(e,n)},t.prototype.transitionCompoundNode=function(t,e,n){var r=(0,s.XP)(t),i=this.getStateNode(r[0])._transition(t[r[0]],e,n);return i&&i.transitions.length?i:this.next(e,n)},t.prototype.transitionParallelNode=function(t,e,n){var i,o,a={};try{for(var c=(0,r.XA)((0,s.XP)(t)),l=c.next();!l.done;l=c.next()){var u=l.value,d=t[u];if(d){var p=this.getStateNode(u)._transition(d,e,n);p&&(a[u]=p)}}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}var h=(0,s.XP)(a).map((function(t){return a[t]})),f=(0,s.xH)(h.map((function(t){return t.transitions})));if(!h.some((function(t){return t.transitions.length>0})))return this.next(e,n);var v=(0,s.xH)(h.map((function(t){return t.entrySet}))),m=(0,s.xH)((0,s.XP)(a).map((function(t){return a[t].configuration})));return{transitions:f,entrySet:v,exitSet:(0,s.xH)(h.map((function(t){return t.exitSet}))),configuration:m,source:e,actions:(0,s.xH)((0,s.XP)(a).map((function(t){return a[t].actions})))}},t.prototype._transition=function(t,e,n){return(0,s.HD)(t)?this.transitionLeafNode(t,e,n):1===(0,s.XP)(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.next=function(t,e){var n,i,o,a=this,c=e.name,l=[],u=[];try{for(var d=(0,r.XA)(this.getCandidates(c)),p=d.next();!p.done;p=d.next()){var h=p.value,f=h.cond,v=h.in,m=t.context,y=!v||((0,s.HD)(v)&&g(v)?t.matches((0,s.WM)(this.getStateNodeById(v).path,this.delimiter)):(0,s.W)((0,s.WM)(v,this.delimiter),(0,s.ET)(this.path.slice(0,-2))(t.value))),w=!1;try{w=!f||(0,s.vx)(this.machine,f,m,e,t)}catch(t){throw new Error("Unable to evaluate guard '"+(f.name||f.type)+"' in transition for event '"+c+"' in state node '"+this.id+"':\n"+t.message)}if(w&&y){void 0!==h.target&&(u=h.target),l.push.apply(l,(0,r.fl)(h.actions)),o=h;break}}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}if(o){if(!u.length)return{transitions:[o],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:l};var b=(0,s.xH)(u.map((function(e){return a.getRelativeStateNodes(e,t.historyValue)}))),x=!!o.internal;return{transitions:[o],entrySet:x?[]:(0,s.xH)(b.map((function(t){return a.nodesFromChild(t)}))),exitSet:x?[]:[this],configuration:b,source:t,actions:l}}},t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.getActions=function(t,e,n,i){var o,a,l,d,p=(0,c.P_)([],i?this.getStateNodes(i.value):[this]),h=t.configuration.length?(0,c.P_)(p,t.configuration):p;try{for(var f=(0,r.XA)(h),v=f.next();!v.done;v=f.next()){var m=v.value;(0,c.e$)(p,m)||t.entrySet.push(m)}}catch(t){o={error:t}}finally{try{v&&!v.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}try{for(var g=(0,r.XA)(p),y=g.next();!y.done;y=g.next()){m=y.value;(0,c.e$)(h,m)&&!(0,c.e$)(t.exitSet,m.parent)||t.exitSet.push(m)}}catch(t){l={error:t}}finally{try{y&&!y.done&&(d=g.return)&&d.call(g)}finally{if(l)throw l.error}}t.source||(t.exitSet=[],t.entrySet.push(this));var w=(0,s.xH)(t.entrySet.map((function(r){var i=[];if("final"!==r.type)return i;var o=r.parent;if(!o.parent)return i;i.push((0,u.aT)(r.id,r.doneData),(0,u.aT)(o.id,r.doneData?(0,s.QX)(r.doneData,e,n):void 0));var a=o.parent;return"parallel"===a.type&&(0,c.G)(a).every((function(e){return(0,c.Ij)(t.configuration,e)}))&&i.push((0,u.aT)(a.id)),i})));t.exitSet.sort((function(t,e){return e.order-t.order})),t.entrySet.sort((function(t,e){return t.order-e.order}));var b=new Set(t.entrySet),x=new Set(t.exitSet),S=(0,r.CR)([(0,s.xH)(Array.from(b).map((function(t){return(0,r.fl)(t.activities.map((function(t){return(0,u.BL)(t)})),t.onEntry)}))).concat(w.map(u.OU)),(0,s.xH)(Array.from(x).map((function(t){return(0,r.fl)(t.onExit,t.activities.map((function(t){return(0,u.sT)(t)})))})))],2),C=S[0],k=S[1];return(0,u.AE)(k.concat(t.actions).concat(C),this.machine.options.actions)},t.prototype.transition=function(t,e,n){void 0===t&&(t=this.initialState);var i,a=(0,s.g5)(e);if(t instanceof d.ZM)i=void 0===n?t:this.resolveState(d.ZM.from(t,n));else{var l=(0,s.HD)(t)?this.resolve((0,s.on)(this.getResolvedPath(t))):this.resolve(t),u=n||this.machine.context;i=this.resolveState(d.ZM.from(l,u))}if(!o.M&&a.name===v)throw new Error("An event cannot have the wildcard type ('*')");if(this.strict&&!this.events.includes(a.name)&&!(0,s.JQ)(a.name))throw new Error("Machine '"+this.id+"' does not accept event '"+a.name+"'");var p=this._transition(i.value,i,a)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:i,actions:[]},h=(0,c.P_)([],this.getStateNodes(i.value)),f=p.configuration.length?(0,c.P_)(h,p.configuration):h;return p.configuration=(0,r.fl)(f),this.resolveTransition(p,i,a)},t.prototype.resolveRaisedTransition=function(t,e,n){var i,o=t.actions;return(t=this.transition(t,e))._event=n,t.event=n.data,(i=t.actions).unshift.apply(i,(0,r.fl)(o)),t},t.prototype.resolveTransition=function(t,e,n,i){var o,h,f=this;void 0===n&&(n=u.bf),void 0===i&&(i=this.machine.context);var v=t.configuration,m=!e||t.transitions.length>0?(0,c.NA)(this.machine,v):void 0,g=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,y=e?e.context:i,w=this.getActions(t,y,n,e),b=e?(0,r.pi)({},e.activities):{};try{for(var x=(0,r.XA)(w),S=x.next();!S.done;S=x.next()){var C=S.value;C.type===l.BL?b[C.activity.id||C.activity.type]=C:C.type===l.sT&&(b[C.activity.id||C.activity.type]=!1)}}catch(t){o={error:t}}finally{try{S&&!S.done&&(h=x.return)&&h.call(x)}finally{if(o)throw o.error}}var k=(0,r.CR)((0,u.yC)(this,e,y,n,w),2),_=k[0],M=k[1],O=(0,r.CR)((0,s.uK)(_,(function(t){return t.type===l.OU||t.type===l.lW&&t.to===a.K.Internal})),2),E=O[0],N=O[1],T=_.filter((function(t){var e;return t.type===l.BL&&(null===(e=t.activity)||void 0===e?void 0:e.type)===l.dw})).reduce((function(t,e){return t[e.activity.id]=(0,p.mu)(e.activity,f.machine,M,n),t}),e?(0,r.pi)({},e.children):{}),A=m?t.configuration:e?e.configuration:[],D=A.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{}),P=(0,c.Ij)(A,this),R=new d.ZM({value:m||e.value,context:M,_event:n,_sessionid:e?e._sessionid:null,historyValue:m?g?(0,s.yv)(g,m):void 0:e?e.historyValue:void 0,history:!m||t.source?e:void 0,actions:m?N:[],activities:m?b:e?e.activities:{},meta:m?D:e?e.meta:void 0,events:[],configuration:A,transitions:t.transitions,children:T,done:P}),I=y!==M;R.changed=n.name===l.Vx||I;var B=R.history;if(B&&delete B.history,!m)return R;var $=R;if(!P)for((this._transient||v.some((function(t){return t._transient})))&&($=this.resolveRaisedTransition($,{type:l.IA},n));E.length;){var z=E.shift();$=this.resolveRaisedTransition($,z._event,n)}var V=$.changed||(B?!!$.actions.length||I||typeof B.value!=typeof $.value||!(0,d.j_)($.value,B.value):void 0);return $.changed=V,$.historyValue=R.historyValue,$.history=B,$},t.prototype.getStateNode=function(t){if(g(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},t.prototype.getStateNodeById=function(t){var e=g(t)?t.slice("#".length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#"+e+"' does not exist on machine '"+this.id+"'");return n},t.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&g(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=(0,s.Q9)(t,this.delimiter).slice(),n=this;e.length;){var r=e.shift();if(!r.length)break;n=n.getStateNode(r)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||m;switch(this.type){case"parallel":return(0,s.Q8)(this.initialStateValue,(function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):m}));case"compound":if((0,s.HD)(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return(0,s.XP)(t).length?(0,s.Q8)(t,(function(t,e){return t?n.getStateNode(e).resolve(t):m})):this.initialStateValue||{};default:return t||m}},t.prototype.getResolvedPath=function(t){if(g(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return(0,s.Q9)(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=(0,s.ib)(this.states,(function(t){return t.initialStateValue||m}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");e=(0,c.N9)(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(t,e){var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,e)},Object.defineProperty(t.prototype,"initialState",{get:function(){this._init();var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=(0,s.HD)(e.target)&&g(e.target)?(0,s.on)(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if((0,c.N9)(this))return[this];if("compound"===this.type&&!this.initial)return o.M||(0,s.ZK)(!1,"Compound state node '"+this.id+"' has no initial state."),[this];var e=(0,s.SA)(this.initialStateValue);return(0,s.xH)(e.map((function(e){return t.getFromRelativePath(e)})))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=(0,r.CR)(t),n=e[0],i=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+n+"' from node with no states");var o=this.getStateNode(n);if("history"===o.type)return o.resolveHistory();if(!this.states[n])throw new Error("Child state '"+n+"' does not exist on '"+this.id+"'");return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(t){if((0,s.XP)(this.states).length)return{current:t||this.initialStateValue,states:(0,s.ib)(this.states,(function(e,n){if(!t)return e.historyValue();var r=(0,s.HD)(t)?void 0:t[n];return e.historyValue(r||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var r=this.target;return r?(0,s.xH)((0,s.SA)(r).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var i=(0,s.gk)(n.path,"states")(t).current;return(0,s.HD)(i)?[n.getStateNode(i)]:(0,s.xH)((0,s.SA)(i).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=(0,s.xH)((0,s.XP)(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,n,i;if(this.__cache.events)return this.__cache.events;var o=this.states,a=new Set(this.ownEvents);if(o)try{for(var c=(0,r.XA)((0,s.XP)(o)),l=c.next();!l.done;l=c.next()){var u=o[l.value];if(u.states)try{for(var d=(n=void 0,(0,r.XA)(u.events)),p=d.next();!p.done;p=d.next()){var h=p.value;a.add(""+h)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(a)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!(0,s.HD)(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(t){throw new Error("Invalid transition definition for state node '"+e.id+"':\n"+t.message)}}))},t.prototype.formatTransition=function(t){var e=this,n=(0,s.rg)(t.target),i="internal"in t?t.internal:!n||n.some((function(t){return(0,s.HD)(t)&&t[0]===e.delimiter})),o=this.machine.options.guards,a=this.resolveTarget(n),c=(0,r.pi)((0,r.pi)({},t),{actions:(0,u.AE)((0,s.qo)(t.actions)),cond:(0,s.Qi)(t.cond,o),target:a,source:this,internal:i,eventType:t.event,toJSON:function(){return(0,r.pi)((0,r.pi)({},c),{target:c.target?c.target.map((function(t){return"#"+t.id})):void 0,source:"#"+e.id})}});return c},t.prototype.formatTransitions=function(){var t,e,n,i=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var a=this.config.on,c=v,l=a[c],d=void 0===l?[]:l,p=(0,r._T)(a,["*"]);n=(0,s.xH)((0,s.XP)(p).map((function(t){o.M||""!==t||(0,s.ZK)(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. Please check the `on` configuration for \"#"+i.id+'".');var e=(0,s.jh)(t,p[t]);return o.M||function(t,e,n){var r=n.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&((0,s.HD)(t.target)||(0,s.O4)(t.target))})),i=""===e?"the transient event":"event '"+e+"'";(0,s.ZK)(!r,"One or more transitions for "+i+" on state '"+t.id+"' are unreachable. Make sure that the default transition is the last one defined.")}(i,t,e),e})).concat((0,s.jh)(v,d)))}else n=[];var h=this.config.always?(0,s.jh)("",this.config.always):[],f=this.config.onDone?(0,s.jh)(String((0,u.aT)(this.id)),this.config.onDone):[];o.M||(0,s.ZK)(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'+this.id+'".');var m=(0,s.xH)(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,(0,r.fl)((0,s.jh)(String((0,u.Sl)(t.id)),t.onDone))),t.onError&&e.push.apply(e,(0,r.fl)((0,s.jh)(String((0,u.vU)(t.id)),t.onError))),e}))),g=this.after,y=(0,s.xH)((0,r.fl)(f,m,n,h).map((function(t){return(0,s.qo)(t).map((function(t){return i.formatTransition(t)}))})));try{for(var w=(0,r.XA)(g),b=w.next();!b.done;b=w.next()){var x=b.value;y.push(x)}}catch(e){t={error:e}}finally{try{b&&!b.done&&(e=w.return)&&e.call(w)}finally{if(t)throw t.error}}return y},t}();function w(t,e,n){void 0===n&&(n=t.context);var r="function"==typeof n?n():n;return new y(t,e,r)}},4911:(t,e,n)=>{"use strict";n.d(e,{ZM:()=>d,j1:()=>u,LW:()=>l,j_:()=>c});var r=n(3056),i=n(7353),o=n(9823),s=n(6115),a=n(375);function c(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if((0,o.HD)(t)||(0,o.HD)(e))return t===e;var n=(0,o.XP)(t),r=(0,o.XP)(e);return n.length===r.length&&n.every((function(n){return c(t[n],e[n])}))}function l(t){return!(0,o.HD)(t)&&("value"in t&&"history"in t)}function u(t,e){var n=t.exec;return(0,r.pi)((0,r.pi)({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}var d=function(){function t(t){var e=this;this.actions=[],this.activities=i.qP,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||i.qP,this.meta=t.meta||{},this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,Object.defineProperty(this,"nextEvents",{get:function(){return(0,s.nJ)(e.configuration)}})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:n,_event:a.bf,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=a.bf;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),(0,o.HD)(t))return[t];var i=(0,o.XP)(t);return i.concat.apply(i,(0,r.fl)(i.map((function(r){return n.toStrings(t[r],e).map((function(t){return r+e+t}))}))))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;return(0,r._T)(t,["configuration","transitions"])},t.prototype.matches=function(t){return(0,o.W)(t,this.value)},t}()},3056:(t,e,n)=>{"use strict";n.d(e,{pi:()=>r,CR:()=>s,_T:()=>i,fl:()=>a,XA:()=>o});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}},3884:(t,e,n)=>{"use strict";n.d(e,{f0:()=>u,al:()=>c,RN:()=>g,vU:()=>v,Mg:()=>f,S1:()=>p,dw:()=>h,cM:()=>d,IA:()=>l,Le:()=>y,OU:()=>s,lW:()=>a,BL:()=>i,sT:()=>o,Vx:()=>m});var r=n(9043),i=r.M.Start,o=r.M.Stop,s=r.M.Raise,a=r.M.Send,c=r.M.Cancel,l=r.M.NullEvent,u=r.M.Assign,d=(r.M.After,r.M.DoneState,r.M.Log),p=r.M.Init,h=r.M.Invoke,f=(r.M.ErrorExecution,r.M.ErrorPlatform),v=r.M.ErrorCustom,m=r.M.Update,g=r.M.Choose,y=r.M.Pure},375:(t,e,n)=>{"use strict";n.d(e,{e4:()=>w,f0:()=>y,al:()=>v,aT:()=>b,Sl:()=>x,vU:()=>S,o$:()=>l,bf:()=>c,OU:()=>h,yC:()=>C,lW:()=>f,BL:()=>m,sT:()=>g,Q8:()=>u,AE:()=>d,XA:()=>p});var r=n(3056),i=n(4066),o=n(9823),s=n(9043),a=n(3884),c=(0,o.g5)({type:a.S1});function l(t,e){return e&&e[t]||void 0}function u(t,e){var n;if((0,o.HD)(t)||"number"==typeof t){var i=l(t,e);n=(0,o.mf)(i)?{type:t,exec:i}:i||{type:t,exec:void 0}}else if((0,o.mf)(t))n={type:t.name||t.toString(),exec:t};else{i=l(t.type,e);if((0,o.mf)(i))n=(0,r.pi)((0,r.pi)({},t),{exec:i});else if(i){var s=i.type||t.type;n=(0,r.pi)((0,r.pi)((0,r.pi)({},i),t),{type:s})}else n=t}return Object.defineProperty(n,"toString",{value:function(){return n.type},enumerable:!1,configurable:!0}),n}var d=function(t,e){return t?((0,o.kJ)(t)?t:[t]).map((function(t){return u(t,e)})):[]};function p(t){var e=u(t);return(0,r.pi)((0,r.pi)({id:(0,o.HD)(t)?t:e.id},e),{type:e.type})}function h(t){return(0,o.HD)(t)?{type:a.OU,event:t}:f(t,{to:s.K.Internal})}function f(t,e){return{to:e?e.to:void 0,type:a.lW,event:(0,o.mf)(t)?t:(0,o._v)(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:(0,o.mf)(t)?t.name:(0,o.x6)(t)}}var v=function(t){return{type:a.al,sendId:t}};function m(t){var e=p(t);return{type:s.M.Start,activity:e,exec:void 0}}function g(t){var e=(0,o.mf)(t)?t:p(t);return{type:s.M.Stop,activity:e,exec:void 0}}var y=function(t){return{type:a.f0,assignment:t}};function w(t,e){var n=e?"#"+e:"";return s.M.After+"("+t+")"+n}function b(t,e){var n=s.M.DoneState+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function x(t,e){var n=s.M.DoneInvoke+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function S(t,e){var n=s.M.ErrorPlatform+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function C(t,e,n,c,l){var p=(0,r.CR)((0,o.uK)(l,(function(t){return t.type===a.f0})),2),h=p[0],f=p[1],v=h.length?(0,o.dt)(n,c,h,e):n;return[(0,o.xH)(f.map((function(n){var l,p;switch(n.type){case a.OU:return p=n,{type:a.OU,_event:(0,o.g5)(p.event)};case a.lW:var h=function(t,e,n,i){var s,a={_event:n},c=(0,o.g5)((0,o.mf)(t.event)?t.event(e,n.data,a):t.event);if((0,o.HD)(t.delay)){var l=i&&i[t.delay];s=(0,o.mf)(l)?l(e,n.data,a):l}else s=(0,o.mf)(t.delay)?t.delay(e,n.data,a):t.delay;var u=(0,o.mf)(t.to)?t.to(e,n.data,a):t.to;return(0,r.pi)((0,r.pi)({},t),{to:u,_event:c,event:c.data,delay:s})}(n,v,c,t.options.delays);return i.M||(0,o.ZK)(!(0,o.HD)(n.delay)||"number"==typeof h.delay,"No delay reference for delay expression '"+n.delay+"' was found on machine '"+t.id+"'"),h;case a.cM:return function(t,e,n){return(0,r.pi)((0,r.pi)({},t),{value:(0,o.HD)(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})}(n,v,c);case a.RN:if(!(m=null===(l=n.conds.find((function(n){var r=(0,o.Qi)(n.cond,t.options.guards);return!r||(0,o.vx)(t,r,v,c,e)})))||void 0===l?void 0:l.actions))return[];var f=C(t,e,v,c,d((0,o.qo)(m),t.options.actions));return v=f[1],f[0];case a.Le:var m;if(!(m=n.get(v,c.data)))return[];f=C(t,e,v,c,d((0,o.qo)(m),t.options.actions));return v=f[1],f[0];case a.sT:return function(t,e,n){var r=(0,o.mf)(t.activity)?t.activity(e,n.data):t.activity,i="string"==typeof r?{id:r}:r;return{type:s.M.Stop,activity:i}}(n,v,c);default:return u(n,t.options.actions)}}))),v]}},7353:(t,e,n)=>{"use strict";n.d(e,{TV:()=>o,qP:()=>i,iS:()=>r,rt:()=>s});var r=".",i={},o="xstate.guard",s=""},4066:(t,e,n)=>{"use strict";n.d(e,{M:()=>r});var r=!0},9805:(t,e,n)=>{"use strict";n.d(e,{kJ:()=>_});var r=n(3056),i=n(4066),o=n(9823),s=n(9043),a=n(6115),c=n(3884),l=n(375),u=n(4911),d=n(797),p=n(392),h={deferEvents:!1},f=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=(0,r.pi)((0,r.pi)({},h),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}(),v=new Map,m=0,g=function(){return"x:"+m++},y=function(t,e){return v.set(t,e),t},w=function(t){return v.get(t)},b=function(t){v.delete(t)};function x(t){if(!i.M&&"undefined"!=typeof window){var e=function(){var t=window;if(t.__xstate__)return t.__xstate__}();e&&e.register(t)}}var S,C={sync:!1,autoForward:!1};!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(S||(S={}));var k=function(){function t(e,n){var a=this;void 0===n&&(n=t.defaultOptions),this.machine=e,this.scheduler=new f,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=S.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if((0,o.kJ)(t))return a.batch(t),a.state;var n=(0,o.g5)((0,o._v)(t,e));if(a.status===S.Stopped)return i.M||(0,o.ZK)(!1,'Event "'+n.name+'" was sent to stopped service "'+a.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(n.data)),a.state;if(a.status!==S.Running&&!a.options.deferEvents)throw new Error('Event "'+n.name+'" was sent to uninitialized service "'+a.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(n.data));return a.scheduler.schedule((function(){a.forward(n);var t=a.nextState(n);a.update(t,n)})),a._state},this.sendTo=function(t,e){var n=a.parent&&(e===s.K.Parent||a.parent.id===e),u=n?a.parent:(0,p.Bc)(e)?e:a.children.get(e)||w(e);if(u)"machine"in u?u.send((0,r.pi)((0,r.pi)({},t),{name:t.name===c.vU?""+(0,l.vU)(a.id):t.name,origin:a.sessionId})):u.send(t.data);else{if(!n)throw new Error("Unable to send event to child '"+e+"' from service '"+a.id+"'.");i.M||(0,o.ZK)(!1,"Service '"+a.id+"' has no parent: unable to send event "+t.type)}};var u=(0,r.pi)((0,r.pi)({},t.defaultOptions),n),d=u.clock,h=u.logger,v=u.parent,m=u.id,y=void 0!==m?m:e.id;this.id=y,this.logger=h,this.clock=d,this.parent=v,this.options=u,this.scheduler=new f({deferEvents:this.options.deferEvents}),this.sessionId=g()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:(0,d.J)(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return i.M||(0,o.ZK)(this.status!==S.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first."),this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(t,e){var n,i;try{for(var o=(0,r.XA)(t.actions),s=o.next();!s.done;s=o.next()){var a=s.value;this.exec(a,t,e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.update=function(t,e){var n,i,s,c,u,d,p,h,f=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.children.forEach((function(t){f.state.children[t.id]=t})),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var v=(0,r.XA)(this.eventListeners),m=v.next();!m.done;m=v.next()){(0,m.value)(t.event)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var g=(0,r.XA)(this.listeners),y=g.next();!y.done;y=g.next()){(0,y.value)(t,t.event)}}catch(t){s={error:t}}finally{try{y&&!y.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}try{for(var w=(0,r.XA)(this.contextListeners),b=w.next();!b.done;b=w.next()){(0,b.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(t){u={error:t}}finally{try{b&&!b.done&&(d=w.return)&&d.call(w)}finally{if(u)throw u.error}}var x=(0,a.Ij)(t.configuration||[],this.machine);if(this.state.configuration&&x){this.state.configuration.forEach((function(e){var n,i;try{for(var o=(0,r.XA)(e.definition.exit),s=o.next();!s.done;s=o.next()){var a=s.value;f.exec(a,t)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}));var S=t.configuration.find((function(t){return"final"===t.type&&t.parent===f.machine})),C=S&&S.doneData?(0,o.QX)(S.doneData,t.context,e):void 0;try{for(var k=(0,r.XA)(this.doneListeners),_=k.next();!_.done;_=k.next()){(0,_.value)((0,l.Sl)(this.id,C))}}catch(t){p={error:t}}finally{try{_&&!_.done&&(h=k.return)&&h.call(k)}finally{if(p)throw p.error}}this.stop()}},t.prototype.onTransition=function(t){return this.listeners.add(t),this.status===S.Running&&t(this.state,this.state.event),this},t.prototype.subscribe=function(t,e,n){var r,i=this;if(!t)return{unsubscribe:function(){}};var o=n;return"function"==typeof t?r=t:(r=t.next.bind(t),o=t.complete.bind(t)),this.listeners.add(r),this.status===S.Running&&r(this.state),o&&this.onDone(o),{unsubscribe:function(){r&&i.listeners.delete(r),o&&i.doneListeners.delete(o)}}},t.prototype.onEvent=function(t){return this.eventListeners.add(t),this},t.prototype.onSend=function(t){return this.sendListeners.add(t),this},t.prototype.onChange=function(t){return this.contextListeners.add(t),this},t.prototype.onStop=function(t){return this.stopListeners.add(t),this},t.prototype.onDone=function(t){return this.doneListeners.add(t),this},t.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},t.prototype.start=function(t){var e=this;if(this.status===S.Running)return this;y(this.sessionId,this),this.initialized=!0,this.status=S.Running;var n=void 0===t?this.initialState:(0,d.J)(this,(function(){return(0,u.LW)(t)?e.machine.resolveState(t):e.machine.resolveState(u.ZM.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(n,l.bf)})),this},t.prototype.stop=function(){var t,e,n,i,s,a,c,l,u,d;try{for(var p=(0,r.XA)(this.listeners),h=p.next();!h.done;h=p.next()){var f=h.value;this.listeners.delete(f)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=p.return)&&e.call(p)}finally{if(t)throw t.error}}try{for(var v=(0,r.XA)(this.stopListeners),m=v.next();!m.done;m=v.next()){(f=m.value)(),this.stopListeners.delete(f)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var g=(0,r.XA)(this.contextListeners),y=g.next();!y.done;y=g.next()){f=y.value;this.contextListeners.delete(f)}}catch(t){s={error:t}}finally{try{y&&!y.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}try{for(var w=(0,r.XA)(this.doneListeners),x=w.next();!x.done;x=w.next()){f=x.value;this.doneListeners.delete(f)}}catch(t){c={error:t}}finally{try{x&&!x.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}this.children.forEach((function(t){(0,o.mf)(t.stop)&&t.stop()}));try{for(var C=(0,r.XA)((0,o.XP)(this.delayedEventsMap)),k=C.next();!k.done;k=C.next()){var _=k.value;this.clock.clearTimeout(this.delayedEventsMap[_])}}catch(t){u={error:t}}finally{try{k&&!k.done&&(d=C.return)&&d.call(C)}finally{if(u)throw u.error}}return this.scheduler.clear(),this.initialized=!1,this.status=S.Stopped,b(this.sessionId),this},t.prototype.batch=function(t){var e=this;if(this.status===S.NotStarted&&this.options.deferEvents)i.M||(0,o.ZK)(!1,t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this.status!==S.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule((function(){var n,i,s=e.state,a=!1,c=[],l=function(t){var n=(0,o.g5)(t);e.forward(n),s=(0,d.J)(e,(function(){return e.machine.transition(s,n)})),c.push.apply(c,(0,r.fl)(s.actions.map((function(t){return(0,u.j1)(t,s)})))),a=a||!!s.changed};try{for(var p=(0,r.XA)(t),h=p.next();!h.done;h=p.next()){l(h.value)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}s.changed=a,s.actions=c,e.update(s,(0,o.g5)(t[t.length-1]))}))},t.prototype.sender=function(t){return this.send.bind(this,t)},t.prototype.nextState=function(t){var e=this,n=(0,o.g5)(t);if(0===n.name.indexOf(c.Mg)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(c.Mg)})))throw n.data.data;return(0,d.J)(this,(function(){return e.machine.transition(e.state,n)}))},t.prototype.forward=function(t){var e,n;try{for(var i=(0,r.XA)(this.forwardTo),o=i.next();!o.done;o=i.next()){var s=o.value,a=this.children.get(s);if(!a)throw new Error("Unable to forward event '"+t+"' from interpreter '"+this.id+"' to nonexistant child '"+s+"'.");a.send(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout((function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)}),t.delay)},t.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},t.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions);var r=e.context,a=e._event,u=t.exec||(0,l.o$)(t.type,n),d=(0,o.mf)(u)?u:u?u.exec:t.exec;if(d)try{return d(r,a.data,{action:t,state:this.state,_event:a})}catch(t){throw this.parent&&this.parent.send({type:"xstate.error",data:t}),t}switch(t.type){case c.lW:var p=t;if("number"==typeof p.delay)return void this.defer(p);p.to?this.sendTo(p._event,p.to):this.send(p._event);break;case c.al:this.cancel(t.sendId);break;case c.BL:var h=t.activity;if(!this.state.activities[h.id||h.type])break;if(h.type===s.M.Invoke){var f=(0,o.j)(h.src),v=this.machine.options.services?this.machine.options.services[f.type]:void 0,m=h.id,g=h.data;i.M||(0,o.ZK)(!("forward"in h),"`forward` property is deprecated (found in invocation of '"+h.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var y="autoForward"in h?h.autoForward:!!h.forward;if(!v)return void(i.M||(0,o.ZK)(!1,"No service found for invocation '"+h.src+"' in machine '"+this.machine.id+"'."));var w=g?(0,o.QX)(g,r,a):void 0,b=(0,o.mf)(v)?v(r,a.data,{data:w,src:f}):v;(0,o.y8)(b)?this.spawnPromise(Promise.resolve(b),m):(0,o.mf)(b)?this.spawnCallback(b,m):(0,o.bi)(b)?this.spawnObservable(b,m):(0,o.O4)(b)&&this.spawnMachine(w?b.withContext(w):b,{id:m,autoForward:y})}else this.spawnActivity(h);break;case c.sT:this.stopChild(t.activity.id);break;case c.cM:var x=t.label,S=t.value;x?this.logger(x,S):this.logger(S);break;default:i.M||(0,o.ZK)(!1,"No implementation found for action type '"+t.type+"'")}},t.prototype.removeChild=function(t){this.children.delete(t),this.forwardTo.delete(t),delete this.state.children[t]},t.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),(0,o.mf)(e.stop)&&e.stop())},t.prototype.spawn=function(t,e,n){if((0,o.y8)(t))return this.spawnPromise(Promise.resolve(t),e);if((0,o.mf)(t))return this.spawnCallback(t,e);if((0,p.Bc)(t))return this.spawnActor(t);if((0,o.bi)(t))return this.spawnObservable(t,e);if((0,o.O4)(t))return this.spawnMachine(t,(0,r.pi)((0,r.pi)({},n),{id:e}));throw new Error('Unable to spawn entity "'+e+'" of type "'+typeof t+'".')},t.prototype.spawnMachine=function(e,n){var i=this;void 0===n&&(n={});var s=new t(e,(0,r.pi)((0,r.pi)({},this.options),{parent:this,id:n.id||e.id})),a=(0,r.pi)((0,r.pi)({},C),n);a.sync&&s.onTransition((function(t){i.send(c.Vx,{state:t,id:s.id})}));var l=s;return this.children.set(s.id,l),a.autoForward&&this.forwardTo.add(s.id),s.onDone((function(t){i.removeChild(s.id),i.send((0,o.g5)(t,{origin:s.id}))})).start(),l},t.prototype.spawnPromise=function(t,e){var n=this,r=!1;t.then((function(t){r||(n.removeChild(e),n.send((0,o.g5)((0,l.Sl)(e,t),{origin:e})))}),(function(t){if(!r){n.removeChild(e);var i=(0,l.vU)(e,t);try{n.send((0,o.g5)(i,{origin:e}))}catch(r){(0,o.v4)(t,r,e),n.devTools&&n.devTools.send(i,n.state),n.machine.strict&&n.stop()}}}));var i={id:e,send:function(){},subscribe:function(e,n,r){var i=!1;return t.then((function(t){i||(e&&e(t),i||r&&r())}),(function(t){i||n(t)})),{unsubscribe:function(){return i=!0}}},stop:function(){r=!0},toJSON:function(){return{id:e}}};return this.children.set(e,i),i},t.prototype.spawnCallback=function(t,e){var n,r=this,i=!1,s=new Set,a=new Set;try{n=t((function(t){a.forEach((function(e){return e(t)})),i||r.send(t)}),(function(t){s.add(t)}))}catch(t){this.send((0,l.vU)(e,t))}if((0,o.y8)(n))return this.spawnPromise(n,e);var c={id:e,send:function(t){return s.forEach((function(e){return e(t)}))},subscribe:function(t){return a.add(t),{unsubscribe:function(){a.delete(t)}}},stop:function(){i=!0,(0,o.mf)(n)&&n()},toJSON:function(){return{id:e}}};return this.children.set(e,c),c},t.prototype.spawnObservable=function(t,e){var n=this,r=t.subscribe((function(t){n.send((0,o.g5)(t,{origin:e}))}),(function(t){n.removeChild(e),n.send((0,o.g5)((0,l.vU)(e,t),{origin:e}))}),(function(){n.removeChild(e),n.send((0,o.g5)((0,l.Sl)(e),{origin:e}))})),i={id:e,send:function(){},subscribe:function(e,n,r){return t.subscribe(e,n,r)},stop:function(){return r.unsubscribe()},toJSON:function(){return{id:e}}};return this.children.set(e,i),i},t.prototype.spawnActor=function(t){return this.children.set(t.id,t),t},t.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else i.M||(0,o.ZK)(!1,"No implementation found for activity '"+t.type+"'")},t.prototype.spawnEffect=function(t,e){this.children.set(t,{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,toJSON:function(){return{id:t}}})},t.prototype.attachDev=function(){if(this.options.devTools&&"undefined"!=typeof window){if(window.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect((0,r.pi)((0,r.pi)({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},t),{features:(0,r.pi)({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}x(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[o.L$]=function(){return this},t.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return t.setTimeout.call(null,e,n)},clearTimeout:function(e){return t.clearTimeout.call(null,e)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"!=typeof self?self:n.g),t.interpret=_,t}();function _(t,e){return new k(t,e)}},797:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var r=[],i=function(t,e){r.push(t);var n=e(t);return r.pop(),n}},6115:(t,e,n)=>{"use strict";n.d(e,{ac:()=>a,G:()=>s,P_:()=>c,NA:()=>d,e$:()=>p,Ij:()=>f,N9:()=>o,nJ:()=>h});var r=n(3056),i=n(9823),o=function(t){return"atomic"===t.type||"final"===t.type};function s(t){return(0,i.XP)(t.states).map((function(e){return t.states[e]}))}function a(t){var e=[t];return o(t)?e:e.concat((0,i.xH)(s(t).map(a)))}function c(t,e){var n,i,o,a,c,l,d,p,h=u(new Set(t)),f=new Set(e);try{for(var v=(0,r.XA)(f),m=v.next();!m.done;m=v.next())for(var g=(M=m.value).parent;g&&!f.has(g);)f.add(g),g=g.parent}catch(t){n={error:t}}finally{try{m&&!m.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}var y=u(f);try{for(var w=(0,r.XA)(f),b=w.next();!b.done;b=w.next()){if("compound"!==(M=b.value).type||y.get(M)&&y.get(M).length){if("parallel"===M.type)try{for(var x=(c=void 0,(0,r.XA)(s(M))),S=x.next();!S.done;S=x.next()){var C=S.value;"history"!==C.type&&(f.has(C)||(f.add(C),h.get(C)?h.get(C).forEach((function(t){return f.add(t)})):C.initialStateNodes.forEach((function(t){return f.add(t)}))))}}catch(t){c={error:t}}finally{try{S&&!S.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}}else h.get(M)?h.get(M).forEach((function(t){return f.add(t)})):M.initialStateNodes.forEach((function(t){return f.add(t)}))}}catch(t){o={error:t}}finally{try{b&&!b.done&&(a=w.return)&&a.call(w)}finally{if(o)throw o.error}}try{for(var k=(0,r.XA)(f),_=k.next();!_.done;_=k.next()){var M;for(g=(M=_.value).parent;g&&!f.has(g);)f.add(g),g=g.parent}}catch(t){d={error:t}}finally{try{_&&!_.done&&(p=k.return)&&p.call(k)}finally{if(d)throw d.error}}return f}function l(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var r=n[0];if(!r)return{};if(o(r))return r.key}var i={};return n.forEach((function(t){i[t.key]=l(t,e)})),i}function u(t){var e,n,i=new Map;try{for(var o=(0,r.XA)(t),s=o.next();!s.done;s=o.next()){var a=s.value;i.has(a)||i.set(a,[]),a.parent&&(i.has(a.parent)||i.set(a.parent,[]),i.get(a.parent).push(a))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function d(t,e){return l(t,u(c([t],e)))}function p(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function h(t){return(0,i.xH)((0,r.fl)(new Set(t.map((function(t){return t.ownEvents})))))}function f(t,e){return"compound"===e.type?s(e).some((function(e){return"final"===e.type&&p(t,e)})):"parallel"===e.type&&s(e).every((function(e){return f(t,e)}))}},9043:(t,e,n)=>{"use strict";var r,i;n.d(e,{M:()=>r,K:()=>i}),function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(r||(r={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(i||(i={}))},9823:(t,e,n)=>{"use strict";n.d(e,{vx:()=>F,xH:()=>g,x6:()=>c,kJ:()=>E,JQ:()=>x,mf:()=>N,O4:()=>R,bi:()=>D,y8:()=>S,HD:()=>T,XP:()=>s,QX:()=>b,ib:()=>h,Q8:()=>p,W:()=>a,gk:()=>v,rg:()=>z,uK:()=>C,ET:()=>f,on:()=>d,v4:()=>V,L$:()=>P,qo:()=>w,_v:()=>I,Qi:()=>A,j:()=>L,g5:()=>B,Q9:()=>l,SA:()=>m,WM:()=>u,jh:()=>$,dt:()=>M,yv:()=>_,ZK:()=>O});var r=n(3056),i=n(7353),o=n(4066);function s(t){return Object.keys(t)}function a(t,e,n){void 0===n&&(n=i.iS);var r=u(t,n),o=u(e,n);return T(o)?!!T(r)&&o===r:T(r)?r in o:s(r).every((function(t){return t in o&&a(r[t],o[t])}))}function c(t){try{return T(t)||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function l(t,e){try{return E(t)?t:t.toString().split(e)}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function u(t,e){return"object"==typeof(n=t)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?t.value:E(t)?d(t):"string"!=typeof t?t:d(l(t,e));var n}function d(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function p(t,e){for(var n={},r=s(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function h(t,e,n){var i,o,a={};try{for(var c=(0,r.XA)(s(t)),l=c.next();!l.done;l=c.next()){var u=l.value,d=t[u];n(d)&&(a[u]=e(d,u,t))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return a}var f=function(t){return function(e){var n,i,o=e;try{for(var s=(0,r.XA)(t),a=s.next();!a.done;a=s.next()){o=o[a.value]}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}};function v(t,e){return function(n){var i,o,s=n;try{for(var a=(0,r.XA)(t),c=a.next();!c.done;c=a.next()){var l=c.value;s=s[e][l]}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return s}}function m(t){return t?T(t)?[[t]]:g(s(t).map((function(e){var n=t[e];return"string"==typeof n||n&&Object.keys(n).length?m(t[e]).map((function(t){return[e].concat(t)})):[[e]]}))):[[]]}function g(t){var e;return(e=[]).concat.apply(e,(0,r.fl)(t))}function y(t){return E(t)?t:[t]}function w(t){return void 0===t?[]:y(t)}function b(t,e,n){var i,o;if(N(t))return t(e,n.data);var s={};try{for(var a=(0,r.XA)(Object.keys(t)),c=a.next();!c.done;c=a.next()){var l=c.value,u=t[l];N(u)?s[l]=u(e,n.data):s[l]=u}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return s}function x(t){return/^(done|error)\./.test(t)}function S(t){return t instanceof Promise||!(null===t||!N(t)&&"object"!=typeof t||!N(t.then))}function C(t,e){var n,i,o=(0,r.CR)([[],[]],2),s=o[0],a=o[1];try{for(var c=(0,r.XA)(t),l=c.next();!l.done;l=c.next()){var u=l.value;e(u)?s.push(u):a.push(u)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[s,a]}function k(t,e){return p(t.states,(function(t,n){if(t){var r=(T(e)?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:k(t,r)}}}))}function _(t,e){return{current:e,states:k(t,e)}}function M(t,e,n,i){return o.M||O(!!t,"Attempting to update undefined context"),t?n.reduce((function(t,n){var o,a,c=n.assignment,l={state:i,action:n,_event:e},u={};if(N(c))u=c(t,e.data,l);else try{for(var d=(0,r.XA)(s(c)),p=d.next();!p.done;p=d.next()){var h=p.value,f=c[h];u[h]=N(f)?f(t,e.data,l):f}}catch(t){o={error:t}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return Object.assign({},t,u)}),t):t}var O=function(){};function E(t){return Array.isArray(t)}function N(t){return"function"==typeof t}function T(t){return"string"==typeof t}function A(t,e){if(t)return T(t)?{type:i.TV,name:t,predicate:e?e[t]:void 0}:N(t)?{type:i.TV,name:t.name,predicate:t}:t}function D(t){try{return"subscribe"in t&&N(t.subscribe)}catch(t){return!1}}o.M||(O=function(t,e){var n=t instanceof Error?t:void 0;if((n||!t)&&void 0!==console){var r=["Warning: "+e];n&&r.push(n),console.warn.apply(console,r)}});var P=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function R(t){try{return"__xstatenode"in t}catch(t){return!1}}function I(t,e){return T(t)||"number"==typeof t?(0,r.pi)({type:t},e):t}function B(t,e){if(!T(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=I(t);return(0,r.pi)({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function $(t,e){return y(e).map((function(e){return void 0===e||"string"==typeof e||R(e)?{target:e,event:t}:(0,r.pi)((0,r.pi)({},e),{event:t})}))}function z(t){if(void 0!==t&&t!==i.rt)return w(t)}function V(t,e,n){if(!o.M){var r=t.stack?" Stacktrace was '"+t.stack+"'":"";if(t===e)console.error("Missing onError handler for invocation '"+n+"', error was '"+t+"'."+r);else{var i=e.stack?" Stacktrace was '"+e.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+n+"'. Original error: '"+t+"'. "+r+" Current error is '"+e+"'."+i)}}}function F(t,e,n,r,o){var s=t.options.guards,a={state:o,cond:e,_event:r};if(e.type===i.TV)return e.predicate(n,r.data,a);var c=s[e.type];if(!c)throw new Error("Guard '"+e.type+"' is not implemented on machine '"+t.id+"'.");return c(n,r.data,a)}function L(t){return"string"==typeof t?{type:t}:t}}}]);