/*! For license information please see 883.246fc0ac0dbb91247142.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[883],{7757:(t,e,n)=>{t.exports=n(5666)},4975:(t,e,n)=>{"use strict";n.d(e,{oc:()=>Ut,Oe:()=>Gt});var r=n(7757),o=n.n(r),i=n(9805),s=n(9160);const a={props:{isVisible:{type:Boolean,default:!0},isRounded:{type:Boolean,default:!1},withBackgroundOverlay:{type:Boolean,default:!1},showStickyFooter:{type:Boolean,default:!0},isRoundedPaddingClass:{type:String,default:"py-2 pr-2"},isRoundedRoundClass:{type:String,default:"rounded-lg"},isDivideY:{type:Boolean,default:!0},isDivideYClass:{type:String,default:"divide-y divide-gray-200"},stickyFooterClass:{type:String,default:"flex-shrink-0 px-4 py-4 space-x-4 flex justify-end relative"},onCloseButtonHit:{type:Function},onBackgroundOverlayHit:{type:Function},headerTitle:{type:String},headerDescription:{type:String}},data:function(){return{isRootVisible:!1,isRootVisibleTimeout:null}},computed:{handleBackgroundOverlayHit:function(){return"function"==typeof this.onBackgroundOverlayHit?this.onBackgroundOverlayHit.bind(this):this.defaultHandleBackgroundOverlayHit},handleCloseButtonHit:function(){return"function"==typeof this.onCloseButtonHit?this.onCloseButtonHit.bind(this):this.defaultHandleCloseButtonHit},paddingClass:function(){return this.isRounded?this.isRoundedPaddingClass:""},roundedClass:function(){return this.isRounded?this.isRoundedRoundClass:""},divideYClass:function(){return this.isDivideY?this.isDivideYClass:""}},watch:{isVisible:{immediate:!0,handler:function(t){var e=this;if(t)return this.clearRootVisibleTimout(),this.isRootVisible=!0,void this.$emit("opened");this.clearRootVisibleTimout(),this.isRootVisibleTimeout=setTimeout((function(){e.isRootVisible=!1,e.isRootVisibleTimeout=null}),700)}}},methods:{clearRootVisibleTimout:function(){this.isRootVisibleTimeout&&clearTimeout(this.isRootVisibleTimeout)},defaultHandleBackgroundOverlayHit:function(){this.$emit("update:isVisible",!1)},defaultHandleCloseButtonHit:function(){this.$emit("update:isVisible",!1)}}};var c=n(1900);const l=(0,c.Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isRootVisible,expression:"isRootVisible"}],ref:"slideOver",staticClass:"fixed w-full overflow-hidden bottom-0 right-0 top-0",class:{"max-w-lg":!t.withBackgroundOverlay}},[n("div",{staticClass:"absolute inset-0 overflow-hidden"},[t.withBackgroundOverlay?n("transition",{attrs:{"enter-active-class":"ease-in-out duration-500","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in-out duration-500","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"absolute inset-0 bg-gray-500 bg-opacity-75 transition-opacity",on:{click:t.handleBackgroundOverlayHit}})]):t._e(),t._v(" "),n("section",{staticClass:"absolute inset-y-0 pl-16 max-w-full right-0 flex"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":"translate-x-full","enter-to-class":"translate-x-0","leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":"translate-x-0","leave-to-class":"translate-x-full"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"isVisible"}],staticClass:"relative w-screen max-w-md",class:t.paddingClass},[t._t("extra-close-button-handling",null,null,{handleCloseButtonHit:t.handleCloseButtonHit}),t._v(" "),n("div",{staticClass:"h-full flex flex-col bg-white shadow-xl",class:t.roundedClass+" "+t.divideYClass},[n("div",{staticClass:"flex-1 h-0 overflow-y-auto",class:t.roundedClass},[t._t("header",[n("header",{staticClass:"space-y-1 py-6 px-4 bg-indigo-700 sm:px-6"},[n("div",{staticClass:"flex items-center justify-between space-x-3"},[n("h2",{staticClass:"text-lg leading-7 font-medium text-white",domProps:{innerHTML:t._s(t.headerTitle)}}),t._v(" "),n("div",{staticClass:"h-7 flex items-center"},[n("button",{staticClass:"text-indigo-200 hover:text-white transition ease-in-out duration-150",attrs:{"aria-label":"Close panel"},on:{click:t.handleCloseButtonHit}},[n("svg",{staticClass:"h-6 w-6",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])]),t._v(" "),n("div",[n("p",{staticClass:"text-sm leading-5 text-indigo-300",domProps:{innerHTML:t._s(t.headerDescription)}})])])],null,{handleCloseButtonHit:t.handleCloseButtonHit}),t._v(" "),t._t("body")],2),t._v(" "),t._t("footer",[t.showStickyFooter?n("div",{class:t.stickyFooterClass},[t._t("footer-inner")],2):t._e()])],2)],2)])],1)],1)])}),[],!1,null,null,null).exports;var u=n(3697),d=n(5892),p=n(3682),h=n(5790),f=n(2388),m=n(6434),v=n(8681);const g=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"}})])}),[],!1,null,null,null).exports;const y=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports;var w=n(7360),b=n(2479),x=n(981),C=n(7866),k=n(6485),S=n.n(k);function _(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}function M(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){_(i,r,o,s,a,"next",t)}function a(t){_(i,r,o,s,a,"throw",t)}s(void 0)}))}}const O={components:{ApplicationMark:h.Z,BadgeWithDot:p.Z,IconCredits:f.Z,IconHeroiconsSmallExternalLink:m.Z,IconHeroiconsMediumExclamation:v.Z,IconHeroiconsMediumArrowNarrowRight:g,IconHeroiconsMediumExclamationCircle:y,IconHeroiconsSmallCheck:w.Z,IconHeroiconsSpinner:x.Z,IconHeroiconsMediumCheck:b.Z,SuccessFlashSwitcher:C.Z},props:{proposal:{type:Object},state:{type:Object}},methods:{handleCopyPublicLinkHit:function(){var t=this;return M(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()(t.proposal.route_pub_proposal_view_link);case 2:t.$refs.copyIcon.success();case 3:case"end":return e.stop()}}),e)})))()},handleCopyAccessCodeHit:function(){var t=this;return M(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()(t.proposal.recipient_access_code);case 2:t.$refs.copyAccessCodeIcon.success();case 3:case"end":return e.stop()}}),e)})))()},handleCopyMessageHit:function(){var t=this;return M(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S()(t.proposal.convenient_copyable_recipient_access_message);case 2:t.$refs.copyMessageIcon.success();case 3:case"end":return e.stop()}}),e)})))()}}};const E=(0,c.Z)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-1 flex flex-col justify-between"},[n("div",{staticClass:"px-4 sm:px-6"},[t.state.matches("confirmPublishView.cannotPublish")?[n("div",{staticClass:"text-center mt-10"},[n("IconHeroiconsMediumExclamationCircle",{staticClass:"h-20 w-20 text-primary-yellow-600 inline-block animate-wave"})],1),t._v(" "),n("h3",{staticClass:"mt-5 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Publish\n      ")]),t._v(" "),n("p",{staticClass:"text-gray-500 text-center text-sm"},[t._v("\n        Almost there! Please fix before publishing…\n      ")]),t._v(" "),t.proposal.has_things_to_fix_before_publish?n("div",{staticClass:"mt-5 text-sm leading-5 text-gray-600 sm:flex sm:items-center justify-center"},[n("ul",t._l(t.proposal.to_fix_before_publish,(function(e,r){return n("li",{key:e.text,staticClass:"flex gap-1",class:{"mt-0.5":r>0}},["warning"===e.icon?n("IconHeroiconsMediumExclamation",{staticClass:"h-5 w-5 text-primary-yellow-600 inline-block align-text-top flex-shrink-0"}):t._e(),t._v(" "),n("span",{staticClass:"align-middle font-medium text-primary-yellow-600",domProps:{innerHTML:t._s(e.text)}})],1)})),0)]):t._e(),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.$emit("back-to-default-view")}}},[t._v("\n            Ok, let me fix\n          ")])])])]:t._e(),t._v(" "),t.state.matches("confirmPublishView.canPublish")?[n("h3",{staticClass:"mt-10 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Confirm Publish\n      ")]),t._v(" "),n("div",{staticClass:"bg-white overflow-hidden shadow rounded-lg mt-3 mb-10"},[n("div",{staticClass:"px-4 py-5 sm:p-6"},[n("div",{staticClass:"grid grid-cols-3 grid-rows-2"},[n("div",{staticClass:"col-span-3 flex flex-col justify-center items-center"},[n("div",{staticClass:"flex flex-col justify-center items-center"},[n("BadgeWithDot",{attrs:{size:"large",color:"yellow"},scopedSlots:t._u([{key:"dot",fn:function(){return[n("IconCredits",{staticClass:"h-5 w-5 -ml-1 mr-1.5 text-yellow-400"})]},proxy:!0}],null,!1,527778206)},[t._v("\n\n                  1 Credit\n                ")]),t._v(" "),n("span",{staticClass:"text-xs text-gray-500 mt-3"},[t._v("\n                  Will be used to publish this proposal\n                ")])],1)]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"flex items-center justify-center"},[n("IconHeroiconsMediumArrowNarrowRight",{staticClass:"w-7 h-7"})],1),t._v(" "),t._m(1)])])]),t._v(" "),n("div",{staticClass:"text-center"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out relative",class:{"cursor-wait":t.state.matches("confirmPublishView.canPublish.publishing")},staticStyle:{"min-width":"200px"},attrs:{type:"submit",disabled:t.state.matches("confirmPublishView.canPublish.publishing")},on:{click:function(e){return e.preventDefault(),t.$emit("publish")}}},[t.state.matches("confirmPublishView.canPublish.publishing")?n("span",{staticClass:"absolute left-0 inset-y-0 flex items-center pl-3"},[n("IconHeroiconsSpinner",{staticClass:"h-5 w-5 text-primary-yellow-100"})],1):t._e(),t._v("\n\n            Publish Now\n          ")])])]),t._v(" "),t.state.matches("confirmPublishView.canPublish.ready")||t.state.matches("confirmPublishView.canPublish.publishError")?[t._m(2),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("span",{staticClass:"inline-flex rounded-md shadow-sm"},[n("button",{staticClass:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-md text-gray-700 bg-white hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:text-gray-800 active:bg-gray-50 transition ease-in-out duration-150",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$emit("back-to-default-view")}}},[t._v("\n              Go back\n            ")])])])]:t._e()]:t._e(),t._v(" "),t.state.matches("confirmPublishView.publishSuccess")?[n("h3",{staticClass:"mt-10 text-center text-2xl font-medium text-gray-800"},[t._v("\n        Published\n      ")]),t._v(" "),n("div",{staticClass:"text-center mt-5"},[n("IconHeroiconsMediumCheck",{staticClass:"h-20 w-20 text-primary-yellow-400 inline-block"})],1),t._v(" "),n("div",{staticClass:"space-y-1 mt-10"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600",attrs:{for:"public_link"}},[t._v("\n          Share Link\n        ")]),t._v(" "),n("div",{staticClass:"mt-1 flex rounded-md shadow-sm"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("a",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400 outline-none hover:text-primary-yellow-500 focus:text-primary-yellow-500 transition duration-150 ease-in-out",attrs:{href:t.proposal.route_pub_proposal_view_link,title:"Visit Public Link Now",rel:"noopener noreferrer",target:"_blank"}},[n("ApplicationMark",{staticClass:"w-5 h-5"})],1),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.proposal.route_pub_proposal_view_link,expression:"proposal.route_pub_proposal_view_link"}],staticClass:"form-input block w-full rounded-none rounded-l-md pl-10 transition ease-in-out duration-150 sm:text-sm sm:leading-5",attrs:{id:"public_link",disabled:""},domProps:{value:t.proposal.route_pub_proposal_view_link},on:{input:function(e){e.target.composing||t.$set(t.proposal,"route_pub_proposal_view_link",e.target.value)}}})]),t._v(" "),n("button",{ref:"copyButton",staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-r-md text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-outline-yellow focus:border-primary-yellow-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150",on:{click:function(e){return e.preventDefault(),t.handleCopyPublicLinkHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyIcon",attrs:{"to-blur-after-success-el":t.$refs.copyButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])]),t._v(" "),n("div",{staticClass:"space-y-1 mt-8"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 truncate",attrs:{for:"access_code_link"}},[t._v("\n          Access Code for "+t._s(t.proposal.recipient_name)+"\n        ")]),t._v(" "),n("div",{staticClass:"mt-1 flex rounded-md shadow-sm"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.proposal.recipient_access_code,expression:"proposal.recipient_access_code"}],staticClass:"form-input block w-full rounded-none rounded-l-md transition ease-in-out duration-150 sm:text-sm sm:leading-5 font-mono",attrs:{id:"access_code_link",disabled:""},domProps:{value:t.proposal.recipient_access_code},on:{input:function(e){e.target.composing||t.$set(t.proposal,"recipient_access_code",e.target.value)}}})]),t._v(" "),n("button",{ref:"copyAccessCodeButton",staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-r-md text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-outline-yellow focus:border-primary-yellow-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150",on:{click:function(e){return e.preventDefault(),t.handleCopyAccessCodeHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyAccessCodeIcon",attrs:{"to-blur-after-success-el":t.$refs.copyAccessCodeButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])]),t._v(" "),n("div",{staticClass:"space-y-1 mt-8 mb-20"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 truncate",attrs:{for:"copy_message"}},[t._v("\n          Example Message\n        ")]),t._v(" "),n("div",{staticClass:"relative"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.proposal.convenient_copyable_recipient_access_message,expression:"proposal.convenient_copyable_recipient_access_message"}],staticClass:"form-textarea resize-none block w-full transition duration-150 ease-in-out sm:text-sm sm:leading-5",attrs:{readonly:"",disabled:"",rows:"7"},domProps:{value:t.proposal.convenient_copyable_recipient_access_message},on:{input:function(e){e.target.composing||t.$set(t.proposal,"convenient_copyable_recipient_access_message",e.target.value)}}}),t._v(" "),n("div",{staticClass:"absolute bottom-0 right-0"},[n("button",{ref:"copyMessageButton",staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm leading-5 font-medium rounded-tl-md rounded-tr-none rounded-br-md rounded-bl-none text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-outline-yellow focus:border-primary-yellow-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150",on:{click:function(e){return e.preventDefault(),t.handleCopyMessageHit(e)}}},[n("SuccessFlashSwitcher",{ref:"copyMessageIcon",attrs:{"to-blur-after-success-el":t.$refs.copyMessageButton},scopedSlots:t._u([{key:"normal",fn:function(){return[n("IconHeroiconsSmallExternalLink",{staticClass:"h-5 w-5 text-gray-400"})]},proxy:!0},{key:"success",fn:function(){return[n("IconHeroiconsSmallCheck",{staticClass:"h-5 w-5 text-primary-yellow-400"})]},proxy:!0}],null,!1,2399327370)}),t._v(" "),n("span",{staticClass:"ml-2"},[t._v("Copy")])],1)])])])]:t._e()],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col items-center justify-center"},[n("span",{staticClass:"text-2xl"},[t._v("∞")]),t._v(" "),n("span",{staticClass:"text-sm text-gray-500 uppercase"},[t._v("Now")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex flex-col items-center justify-center"},[n("span",{staticClass:"text-2xl"},[t._v("∞")]),t._v(" "),n("span",{staticClass:"text-sm text-gray-500 uppercase"},[t._v("After")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-6 relative"},[n("div",{staticClass:"absolute inset-0 flex items-center"},[n("div",{staticClass:"w-full border-t border-gray-300"})]),t._v(" "),n("div",{staticClass:"relative flex justify-center text-sm leading-5"},[n("span",{staticClass:"px-2 bg-white text-gray-500"},[t._v("\n              OR\n            ")])])])}],!1,null,null,null).exports;var N=n(758),T=n(3246),A=n(6776),D=n(5710);const P=function(t,e){var n=-1,r=(0,D.Z)(t)?Array(t.length):[];return(0,A.Z)(t,(function(t,o,i){r[++n]=e(t,o,i)})),r};const R=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t};var I=n(4827),B=n(7828);const $=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,o=t==t,i=(0,B.Z)(t),s=void 0!==e,a=null===e,c=e==e,l=(0,B.Z)(e);if(!a&&!l&&!i&&t>e||i&&s&&c&&!a&&!l||r&&s&&c||!n&&c||!o)return 1;if(!r&&!i&&!l&&t<e||l&&n&&o&&!r&&!i||a&&n&&o||!s&&o||!c)return-1}return 0};const z=function(t,e,n){for(var r=-1,o=t.criteria,i=e.criteria,s=o.length,a=n.length;++r<s;){var c=$(o[r],i[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return t.index-e.index};var F=n(3305);const V=function(t,e,n){var r=-1;e=(0,N.Z)(e.length?e:[F.Z],(0,I.Z)(T.Z));var o=P(t,(function(t,n,o){return{criteria:(0,N.Z)(e,(function(e){return e(t)})),index:++r,value:t}}));return R(o,(function(t,e){return z(t,e,n)}))};var j=n(9350);const L=function(t,e,n,r){return null==t?[]:((0,j.Z)(e)||(e=null==e?[]:[e]),n=r?void 0:n,(0,j.Z)(n)||(n=null==n?[]:[n]),V(t,e,n))};var Z=n(8438);const H={props:{selectedIndex:{type:Number,default:-1}},data:function(){return{tabPanes:[],selectedIndex__:this.selectedIndex}},computed:{orderedTabPanes:function(){return L(this.tabPanes,"seq")}},watch:{selectedIndex:function(t){this.select(t)},selectedIndex__:function(t){this.$emit("update:selectedIndex",t)}},mounted:function(){-1===this.selectedIndex__&&this.select(0)},methods:{isActive:function(t){return t===this.selectedIndex__},select:function(t){this.selectedIndex__!==t&&(this.$emit("tabs-selected",t),this.selectedIndex__=t)},selectTabPaneId:function(t){var e=(0,Z.Z)(this.tabPanes,{id:t});if(e){var n=this.orderedTabPanes.indexOf(e);this.select(n)}},deleteTab:function(t){var e=this.tabPanes.indexOf(t);-1!==e&&this.tabPanes.splice(e,1)}},render:function(){return this.$scopedSlots.default({orderedTabPanes:this.orderedTabPanes,isActive:this.isActive,select:this.select})}};const W=(0,c.Z)(H,undefined,undefined,!1,null,null,null).exports,K={props:{selectedIndex:{type:Number,default:-1},align:{type:String,default:"center",validator:function(t){return["center"].includes(t)}},showTabTextWhenInactive:{type:Boolean,default:!0},tabsClass:{type:String},activeTabClass:{type:String,default:"border-b-2 border-indigo-500 text-indigo-600 focus:outline-none focus:text-indigo-800 focus:border-indigo-700"},activeTabIconClass:{type:String,default:"text-indigo-500 group-focus:text-indigo-600"},inactiveTabClass:{type:String,default:"cursor-pointer border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 focus:outline-none focus:text-gray-700 focus:border-gray-300"},inactiveTabIconClass:{type:String,default:"text-gray-400 group-hover:text-gray-500 group-focus:text-gray-600"}},components:{RenderlessTabs:W},data:function(){return{selectedIndex__:this.selectedIndex}},watch:{selectedIndex:function(t){this.$refs.renderlessTabs.select(t)},selectedIndex__:function(t){this.$emit("update:selectedIndex",t)}},methods:{shouldShowTabText:function(t,e){return!!this.showTabTextWhenInactive||this.$refs.renderlessTabs.isActive(e)}}};const U=(0,c.Z)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RenderlessTabs",{ref:"renderlessTabs",attrs:{"selected-index":t.selectedIndex__},on:{"update:selectedIndex":function(e){t.selectedIndex__=e},"update:selected-index":function(e){t.selectedIndex__=e}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.orderedTabPanes,o=e.isActive,i=e.select;return[n("fragment",[n("div",{class:t.tabsClass},[n("div",{staticClass:"border-b border-gray-200"},[n("nav",{staticClass:"flex -mb-px",class:{"justify-center":"center"===t.align}},t._l(r,(function(e,r){return n("a",{key:e.name,staticClass:"group inline-flex items-center py-2 px-3 select-none text-sm leading-5 font-medium",class:o(r)?t.activeTabClass:t.inactiveTabClass,attrs:{title:e.title},on:{click:function(t){return i(r)}}},[n(e.icon,{tag:"component",staticClass:"h-5 w-5",class:{activeTabIconClass:o(r),inactiveTabIconClass:!o(r),"-ml-0.5 mr-2":t.shouldShowTabText(e,r)}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.shouldShowTabText(e,r),expression:"shouldShowTabText(tab, index)"}]},[t._v("\n              "+t._s(e.title)+"\n            ")])],1)})),0)])]),t._v(" "),t._t("default")],2)]}}],null,!0)})}),[],!1,null,null,null).exports;const J={props:{title:{type:String,required:!0},order:{type:Number,default:0},iconRef:{type:String},icon:{}},data:function(){return{paneDidLoad:!1,icon__:null}},computed:{seq:function(){return this.order},index:function(){return this.$parent.$parent.orderedTabPanes.indexOf(this)},isSelected:function(){return this.$parent.$parent.selectedIndex__===this.index},contentInstance:function(){return this.$slots.default&&0!==this.$slots.default.length?this.$slots.default[0].componentInstance:null}},watch:{"$parent.$parent.selectedIndex__":function(t){var e=this;this.index===t&&(this.$nextTick((function(){e.handleSelected()})),this.$emit("tab-selected",this.title))}},created:function(){this.$parent.$parent.tabPanes.push(this)},beforeDestroy:function(){this.$parent.$parent.deleteTab(this)},methods:{resetPaneDidLoad:function(){this.paneDidLoad=!1},handleSelected:function(){this.paneDidLoad||(this.paneDidLoad=!0,this.$emit("did-load"),this.contentInstance&&(this.contentInstance.__paneDidLoad__||this.contentInstance.__paneDidLoad__ instanceof Function)&&this.contentInstance.__paneDidLoad__())}},render:function(){return this.$scopedSlots.default({isSelected:this.isSelected})}};const q=(0,c.Z)(J,undefined,undefined,!1,null,null,null).exports,G={props:{title:{type:String,required:!0},icon:{}},components:{RenderlessTabPane:q}};const Y=(0,c.Z)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("RenderlessTabPane",{attrs:{title:t.title,icon:t.icon},on:{"did-load":function(e){return t.$emit("did-load")}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.isSelected;return[n("div",{directives:[{name:"show",rawName:"v-show",value:r,expression:"isSelected"}]},[t._t("default")],2)]}}],null,!0)})}),[],!1,null,null,null).exports;var X="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Q=function(t,e,n,r,o,i,s,a,c,l){var u=this;u.numeralDecimalMark=t||".",u.numeralIntegerScale=e>0?e:0,u.numeralDecimalScale=n>=0?n:2,u.numeralThousandsGroupStyle=r||Q.groupStyle.thousand,u.numeralPositiveOnly=!!o,u.stripLeadingZeroes=!1!==i,u.prefix=s||""===s?s:"",u.signBeforePrefix=!!a,u.tailPrefix=!!c,u.delimiter=l||""===l?l:",",u.delimiterRE=l?new RegExp("\\"+l,"g"):""};Q.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},Q.prototype={getRawValue:function(t){return t.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(t){var e,n,r,o,i=this,s="";switch(t=t.replace(/[A-Za-z]/g,"").replace(i.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",i.numeralPositiveOnly?"":"-").replace("M",i.numeralDecimalMark),i.stripLeadingZeroes&&(t=t.replace(/^(-)?0+(?=\d)/,"$1")),n="-"===t.slice(0,1)?"-":"",r=void 0!==i.prefix?i.signBeforePrefix?n+i.prefix:i.prefix+n:n,o=t,t.indexOf(i.numeralDecimalMark)>=0&&(o=(e=t.split(i.numeralDecimalMark))[0],s=i.numeralDecimalMark+e[1].slice(0,i.numeralDecimalScale)),"-"===n&&(o=o.slice(1)),i.numeralIntegerScale>0&&(o=o.slice(0,i.numeralIntegerScale)),i.numeralThousandsGroupStyle){case Q.groupStyle.lakh:o=o.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+i.delimiter);break;case Q.groupStyle.wan:o=o.replace(/(\d)(?=(\d{4})+$)/g,"$1"+i.delimiter);break;case Q.groupStyle.thousand:o=o.replace(/(\d)(?=(\d{3})+$)/g,"$1"+i.delimiter)}return i.tailPrefix?n+o.toString()+(i.numeralDecimalScale>0?s.toString():"")+i.prefix:r+o.toString()+(i.numeralDecimalScale>0?s.toString():"")}};var tt=Q,et=function(t,e,n){var r=this;r.date=[],r.blocks=[],r.datePattern=t,r.dateMin=e.split("-").reverse().map((function(t){return parseInt(t,10)})),2===r.dateMin.length&&r.dateMin.unshift(0),r.dateMax=n.split("-").reverse().map((function(t){return parseInt(t,10)})),2===r.dateMax.length&&r.dateMax.unshift(0),r.initBlocks()};et.prototype={initBlocks:function(){var t=this;t.datePattern.forEach((function(e){"Y"===e?t.blocks.push(4):t.blocks.push(2)}))},getISOFormatDate:function(){var t=this,e=t.date;return e[2]?e[2]+"-"+t.addLeadingZero(e[1])+"-"+t.addLeadingZero(e[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(t){var e=this,n="";return t=t.replace(/[^\d]/g,""),e.blocks.forEach((function(r,o){if(t.length>0){var i=t.slice(0,r),s=i.slice(0,1),a=t.slice(r);switch(e.datePattern[o]){case"d":"00"===i?i="01":parseInt(s,10)>3?i="0"+s:parseInt(i,10)>31&&(i="31");break;case"m":"00"===i?i="01":parseInt(s,10)>1?i="0"+s:parseInt(i,10)>12&&(i="12")}n+=i,t=a}})),this.getFixedDateString(n)},getFixedDateString:function(t){var e,n,r,o=this,i=o.datePattern,s=[],a=0,c=0,l=0,u=0,d=0,p=0,h=!1;return 4===t.length&&"y"!==i[0].toLowerCase()&&"y"!==i[1].toLowerCase()&&(d=2-(u="d"===i[0]?0:2),e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),s=this.getFixedDate(e,n,0)),8===t.length&&(i.forEach((function(t,e){switch(t){case"d":a=e;break;case"m":c=e;break;default:l=e}})),p=2*l,u=a<=l?2*a:2*a+2,d=c<=l?2*c:2*c+2,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+4),10),h=4===t.slice(p,p+4).length,s=this.getFixedDate(e,n,r)),4!==t.length||"y"!==i[0]&&"y"!==i[1]||(p=2-(d="m"===i[0]?0:2),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),h=2===t.slice(p,p+2).length,s=[0,n,r]),6!==t.length||"Y"!==i[0]&&"Y"!==i[1]||(p=2-.5*(d="m"===i[0]?0:4),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+4),10),h=4===t.slice(p,p+4).length,s=[0,n,r]),s=o.getRangeFixedDate(s),o.date=s,0===s.length?t:i.reduce((function(t,e){switch(e){case"d":return t+(0===s[0]?"":o.addLeadingZero(s[0]));case"m":return t+(0===s[1]?"":o.addLeadingZero(s[1]));case"y":return t+(h?o.addLeadingZeroForYear(s[2],!1):"");case"Y":return t+(h?o.addLeadingZeroForYear(s[2],!0):"")}}),"")},getRangeFixedDate:function(t){var e=this,n=e.datePattern,r=e.dateMin||[],o=e.dateMax||[];return!t.length||r.length<3&&o.length<3||n.find((function(t){return"y"===t.toLowerCase()}))&&0===t[2]?t:o.length&&(o[2]<t[2]||o[2]===t[2]&&(o[1]<t[1]||o[1]===t[1]&&o[0]<t[0]))?o:r.length&&(r[2]>t[2]||r[2]===t[2]&&(r[1]>t[1]||r[1]===t[1]&&r[0]>t[0]))?r:t},getFixedDate:function(t,e,n){return t=Math.min(t,31),e=Math.min(e,12),n=parseInt(n||0,10),(e<7&&e%2==0||e>8&&e%2==1)&&(t=Math.min(t,2===e?this.isLeapYear(n)?29:28:30)),[t,e,n]},isLeapYear:function(t){return t%4==0&&t%100!=0||t%400==0},addLeadingZero:function(t){return(t<10?"0":"")+t},addLeadingZeroForYear:function(t,e){return e?(t<10?"000":t<100?"00":t<1e3?"0":"")+t:(t<10?"0":"")+t}};var nt=et,rt=function(t,e){var n=this;n.time=[],n.blocks=[],n.timePattern=t,n.timeFormat=e,n.initBlocks()};rt.prototype={initBlocks:function(){var t=this;t.timePattern.forEach((function(){t.blocks.push(2)}))},getISOFormatTime:function(){var t=this,e=t.time;return e[2]?t.addLeadingZero(e[0])+":"+t.addLeadingZero(e[1])+":"+t.addLeadingZero(e[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){return"12"===String(this.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(t){var e=this,n="";t=t.replace(/[^\d]/g,"");var r=e.getTimeFormatOptions();return e.blocks.forEach((function(o,i){if(t.length>0){var s=t.slice(0,o),a=s.slice(0,1),c=t.slice(o);switch(e.timePattern[i]){case"h":parseInt(a,10)>r.maxHourFirstDigit?s="0"+a:parseInt(s,10)>r.maxHours&&(s=r.maxHours+"");break;case"m":case"s":parseInt(a,10)>r.maxMinutesFirstDigit?s="0"+a:parseInt(s,10)>r.maxMinutes&&(s=r.maxMinutes+"")}n+=s,t=c}})),this.getFixedTimeString(n)},getFixedTimeString:function(t){var e,n,r,o=this,i=o.timePattern,s=[],a=0,c=0,l=0,u=0,d=0,p=0;return 6===t.length&&(i.forEach((function(t,e){switch(t){case"s":a=2*e;break;case"m":c=2*e;break;case"h":l=2*e}})),p=l,d=c,u=a,e=parseInt(t.slice(u,u+2),10),n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),s=this.getFixedTime(r,n,e)),4===t.length&&o.timePattern.indexOf("s")<0&&(i.forEach((function(t,e){switch(t){case"m":c=2*e;break;case"h":l=2*e}})),p=l,d=c,e=0,n=parseInt(t.slice(d,d+2),10),r=parseInt(t.slice(p,p+2),10),s=this.getFixedTime(r,n,e)),o.time=s,0===s.length?t:i.reduce((function(t,e){switch(e){case"s":return t+o.addLeadingZero(s[2]);case"m":return t+o.addLeadingZero(s[1]);case"h":return t+o.addLeadingZero(s[0])}}),"")},getFixedTime:function(t,e,n){return n=Math.min(parseInt(n||0,10),60),e=Math.min(e,60),[t=Math.min(t,60),e,n]},addLeadingZero:function(t){return(t<10?"0":"")+t}};var ot=rt,it=function(t,e){var n=this;n.delimiter=e||""===e?e:" ",n.delimiterRE=e?new RegExp("\\"+e,"g"):"",n.formatter=t};it.prototype={setFormatter:function(t){this.formatter=t},format:function(t){var e=this;e.formatter.clear();for(var n,r="",o=!1,i=0,s=(t=(t=(t=t.replace(/[^\d+]/g,"")).replace(/^\+/,"B").replace(/\+/g,"").replace("B","+")).replace(e.delimiterRE,"")).length;i<s;i++)n=e.formatter.inputDigit(t.charAt(i)),/[\s()-]/g.test(n)?(r=n,o=!0):o||(r=n);return r=(r=r.replace(/[()]/g,"")).replace(/[\s-]/g,e.delimiter)}};var st=it,at={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.concat(19-e)},getInfo:function(t,e){var n=at.blocks,r=at.re;for(var o in e=!!e,r)if(r[o].test(t)){var i=n[o];return{type:o,blocks:e?this.getStrictBlocks(i):i}}return{type:"unknown",blocks:e?this.getStrictBlocks(n.general):n.general}}},ct=at,lt={noop:function(){},strip:function(t,e){return t.replace(e,"")},getPostDelimiter:function(t,e,n){if(0===n.length)return t.slice(-e.length)===e?e:"";var r="";return n.forEach((function(e){t.slice(-e.length)===e&&(r=e)})),r},getDelimiterREByDelimiter:function(t){return new RegExp(t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(t,e,n,r,o){return e.length===t?n.length:t+this.getPositionOffset(t,e,n,r,o)},getPositionOffset:function(t,e,n,r,o){var i,s,a;return i=this.stripDelimiters(e.slice(0,t),r,o),s=this.stripDelimiters(n.slice(0,t),r,o),0!==(a=i.length-s.length)?a/Math.abs(a):0},stripDelimiters:function(t,e,n){var r=this;if(0===n.length){var o=e?r.getDelimiterREByDelimiter(e):"";return t.replace(o,"")}return n.forEach((function(e){e.split("").forEach((function(e){t=t.replace(r.getDelimiterREByDelimiter(e),"")}))})),t},headStr:function(t,e){return t.slice(0,e)},getMaxLength:function(t){return t.reduce((function(t,e){return t+e}),0)},getPrefixStrippedValue:function(t,e,n,r,o,i,s,a,c){if(0===n)return t;if(t===e&&""!==t)return"";if(c&&"-"==t.slice(0,1)){var l="-"==r.slice(0,1)?r.slice(1):r;return"-"+this.getPrefixStrippedValue(t.slice(1),e,n,l,o,i,s,a,c)}if(r.slice(0,n)!==e&&!a)return s&&!r&&t?t:"";if(r.slice(-n)!==e&&a)return s&&!r&&t?t:"";var u=this.stripDelimiters(r,o,i);return t.slice(0,n)===e||a?t.slice(-n)!==e&&a?u.slice(0,-n-1):a?t.slice(0,-n):t.slice(n):u.slice(n)},getFirstDiffIndex:function(t,e){for(var n=0;t.charAt(n)===e.charAt(n);)if(""===t.charAt(n++))return-1;return n},getFormattedValue:function(t,e,n,r,o,i){var s="",a=o.length>0,c="";return 0===n?t:(e.forEach((function(e,l){if(t.length>0){var u=t.slice(0,e),d=t.slice(e);c=a?o[i?l-1:l]||c:r,i?(l>0&&(s+=c),s+=u):(s+=u,u.length===e&&l<n-1&&(s+=c)),t=d}})),s)},fixPrefixCursor:function(t,e,n,r){if(t){var o=t.value,i=n||r[0]||" ";if(t.setSelectionRange&&e&&!(e.length+i.length<=o.length)){var s=2*o.length;setTimeout((function(){t.setSelectionRange(s,s)}),1)}}},checkFullSelection:function(t){try{return(window.getSelection()||document.getSelection()||{}).toString().length===t.length}catch(t){}return!1},setSelection:function(t,e,n){if(t===this.getActiveElement(n)&&!(t&&t.value.length<=e))if(t.createTextRange){var r=t.createTextRange();r.move("character",e),r.select()}else try{t.setSelectionRange(e,e)}catch(t){console.warn("The input element type does not support selection")}},getActiveElement:function(t){var e=t.activeElement;return e&&e.shadowRoot?this.getActiveElement(e.shadowRoot):e},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(t,e){return!!(this.isAndroid()&&t&&e)&&e===t.slice(0,-1)}},ut={assign:function(t,e){return e=e||{},(t=t||{}).creditCard=!!e.creditCard,t.creditCardStrictMode=!!e.creditCardStrictMode,t.creditCardType="",t.onCreditCardTypeChanged=e.onCreditCardTypeChanged||function(){},t.phone=!!e.phone,t.phoneRegionCode=e.phoneRegionCode||"AU",t.phoneFormatter={},t.time=!!e.time,t.timePattern=e.timePattern||["h","m","s"],t.timeFormat=e.timeFormat||"24",t.timeFormatter={},t.date=!!e.date,t.datePattern=e.datePattern||["d","m","Y"],t.dateMin=e.dateMin||"",t.dateMax=e.dateMax||"",t.dateFormatter={},t.numeral=!!e.numeral,t.numeralIntegerScale=e.numeralIntegerScale>0?e.numeralIntegerScale:0,t.numeralDecimalScale=e.numeralDecimalScale>=0?e.numeralDecimalScale:2,t.numeralDecimalMark=e.numeralDecimalMark||".",t.numeralThousandsGroupStyle=e.numeralThousandsGroupStyle||"thousand",t.numeralPositiveOnly=!!e.numeralPositiveOnly,t.stripLeadingZeroes=!1!==e.stripLeadingZeroes,t.signBeforePrefix=!!e.signBeforePrefix,t.tailPrefix=!!e.tailPrefix,t.swapHiddenInput=!!e.swapHiddenInput,t.numericOnly=t.creditCard||t.date||!!e.numericOnly,t.uppercase=!!e.uppercase,t.lowercase=!!e.lowercase,t.prefix=t.creditCard||t.date?"":e.prefix||"",t.noImmediatePrefix=!!e.noImmediatePrefix,t.prefixLength=t.prefix.length,t.rawValueTrimPrefix=!!e.rawValueTrimPrefix,t.copyDelimiter=!!e.copyDelimiter,t.initValue=void 0!==e.initValue&&null!==e.initValue?e.initValue.toString():"",t.delimiter=e.delimiter||""===e.delimiter?e.delimiter:e.date?"/":e.time?":":e.numeral?",":(e.phone," "),t.delimiterLength=t.delimiter.length,t.delimiterLazyShow=!!e.delimiterLazyShow,t.delimiters=e.delimiters||[],t.blocks=e.blocks||[],t.blocksLength=t.blocks.length,t.root="object"==typeof X&&X?X:window,t.document=e.document||t.root.document,t.maxLength=0,t.backspace=!1,t.result="",t.onValueChanged=e.onValueChanged||function(){},t}},dt=function(t,e){var n=this,r=!1;if("string"==typeof t?(n.element=document.querySelector(t),r=document.querySelectorAll(t).length>1):void 0!==t.length&&t.length>0?(n.element=t[0],r=t.length>1):n.element=t,!n.element)throw new Error("[cleave.js] Please check the element");if(r)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(t){}e.initValue=n.element.value,n.properties=dt.DefaultProperties.assign({},e),n.init()};dt.prototype={init:function(){var t=this,e=t.properties;e.numeral||e.phone||e.creditCard||e.time||e.date||0!==e.blocksLength||e.prefix?(e.maxLength=dt.Util.getMaxLength(e.blocks),t.isAndroid=dt.Util.isAndroid(),t.lastInputValue="",t.isBackward="",t.onChangeListener=t.onChange.bind(t),t.onKeyDownListener=t.onKeyDown.bind(t),t.onFocusListener=t.onFocus.bind(t),t.onCutListener=t.onCut.bind(t),t.onCopyListener=t.onCopy.bind(t),t.initSwapHiddenInput(),t.element.addEventListener("input",t.onChangeListener),t.element.addEventListener("keydown",t.onKeyDownListener),t.element.addEventListener("focus",t.onFocusListener),t.element.addEventListener("cut",t.onCutListener),t.element.addEventListener("copy",t.onCopyListener),t.initPhoneFormatter(),t.initDateFormatter(),t.initTimeFormatter(),t.initNumeralFormatter(),(e.initValue||e.prefix&&!e.noImmediatePrefix)&&t.onInput(e.initValue)):t.onInput(e.initValue)},initSwapHiddenInput:function(){var t=this;if(t.properties.swapHiddenInput){var e=t.element.cloneNode(!0);t.element.parentNode.insertBefore(e,t.element),t.elementSwapHidden=t.element,t.elementSwapHidden.type="hidden",t.element=e,t.element.id=""}},initNumeralFormatter:function(){var t=this.properties;t.numeral&&(t.numeralFormatter=new dt.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var t=this.properties;t.time&&(t.timeFormatter=new dt.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=dt.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var t=this.properties;t.date&&(t.dateFormatter=new dt.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=dt.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var t=this.properties;if(t.phone)try{t.phoneFormatter=new dt.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(t){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(t){var e=this,n=t.which||t.keyCode;e.lastInputValue=e.element.value,e.isBackward=8===n},onChange:function(t){var e=this,n=e.properties,r=dt.Util;e.isBackward=e.isBackward||"deleteContentBackward"===t.inputType;var o=r.getPostDelimiter(e.lastInputValue,n.delimiter,n.delimiters);e.isBackward&&o?n.postDelimiterBackspace=o:n.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var t=this,e=t.properties;t.lastInputValue=t.element.value,e.prefix&&e.noImmediatePrefix&&!t.element.value&&this.onInput(e.prefix),dt.Util.fixPrefixCursor(t.element,e.prefix,e.delimiter,e.delimiters)},onCut:function(t){dt.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(t),this.onInput(""))},onCopy:function(t){dt.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(t)},copyClipboardData:function(t){var e=this.properties,n=dt.Util,r=this.element.value,o="";o=e.copyDelimiter?r:n.stripDelimiters(r,e.delimiter,e.delimiters);try{t.clipboardData?t.clipboardData.setData("Text",o):window.clipboardData.setData("Text",o),t.preventDefault()}catch(t){}},onInput:function(t){var e=this,n=e.properties,r=dt.Util,o=r.getPostDelimiter(t,n.delimiter,n.delimiters);return n.numeral||!n.postDelimiterBackspace||o||(t=r.headStr(t,t.length-n.postDelimiterBackspace.length)),n.phone?(!n.prefix||n.noImmediatePrefix&&!t.length?n.result=n.phoneFormatter.format(t):n.result=n.prefix+n.phoneFormatter.format(t).slice(n.prefix.length),void e.updateValueState()):n.numeral?(n.prefix&&n.noImmediatePrefix&&0===t.length?n.result="":n.result=n.numeralFormatter.format(t),void e.updateValueState()):(n.date&&(t=n.dateFormatter.getValidatedDate(t)),n.time&&(t=n.timeFormatter.getValidatedTime(t)),t=r.stripDelimiters(t,n.delimiter,n.delimiters),t=r.getPrefixStrippedValue(t,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix,n.tailPrefix,n.signBeforePrefix),t=n.numericOnly?r.strip(t,/[^\d]/g):t,t=n.uppercase?t.toUpperCase():t,t=n.lowercase?t.toLowerCase():t,n.prefix&&(n.tailPrefix?t+=n.prefix:t=n.prefix+t,0===n.blocksLength)?(n.result=t,void e.updateValueState()):(n.creditCard&&e.updateCreditCardPropsByValue(t),t=r.headStr(t,n.maxLength),n.result=r.getFormattedValue(t,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow),void e.updateValueState()))},updateCreditCardPropsByValue:function(t){var e,n=this.properties,r=dt.Util;r.headStr(n.result,4)!==r.headStr(t,4)&&(e=dt.CreditCardDetector.getInfo(t,n.creditCardStrictMode),n.blocks=e.blocks,n.blocksLength=n.blocks.length,n.maxLength=r.getMaxLength(n.blocks),n.creditCardType!==e.type&&(n.creditCardType=e.type,n.onCreditCardTypeChanged.call(this,n.creditCardType)))},updateValueState:function(){var t=this,e=dt.Util,n=t.properties;if(t.element){var r=t.element.selectionEnd,o=t.element.value,i=n.result;r=e.getNextCursorPosition(r,o,i,n.delimiter,n.delimiters),t.isAndroid?window.setTimeout((function(){t.element.value=i,e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged()}),1):(t.element.value=i,n.swapHiddenInput&&(t.elementSwapHidden.value=t.getRawValue()),e.setSelection(t.element,r,n.document,!1),t.callOnValueChanged())}},callOnValueChanged:function(){var t=this,e=t.properties;e.onValueChanged.call(t,{target:{name:t.element.name,value:e.result,rawValue:t.getRawValue()}})},setPhoneRegionCode:function(t){var e=this;e.properties.phoneRegionCode=t,e.initPhoneFormatter(),e.onChange()},setRawValue:function(t){var e=this,n=e.properties;t=null!=t?t.toString():"",n.numeral&&(t=t.replace(".",n.numeralDecimalMark)),n.postDelimiterBackspace=!1,e.element.value=t,e.onInput(t)},getRawValue:function(){var t=this.properties,e=dt.Util,n=this.element.value;return t.rawValueTrimPrefix&&(n=e.getPrefixStrippedValue(n,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),n=t.numeral?t.numeralFormatter.getRawValue(n):e.stripDelimiters(n,t.delimiter,t.delimiters)},getISOFormatDate:function(){var t=this.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var t=this.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var t=this;t.element.removeEventListener("input",t.onChangeListener),t.element.removeEventListener("keydown",t.onKeyDownListener),t.element.removeEventListener("focus",t.onFocusListener),t.element.removeEventListener("cut",t.onCutListener),t.element.removeEventListener("copy",t.onCopyListener)},toString:function(){return"[Cleave Object]"}},dt.NumeralFormatter=tt,dt.DateFormatter=nt,dt.TimeFormatter=ot,dt.PhoneFormatter=st,dt.CreditCardDetector=ct,dt.Util=lt,dt.DefaultProperties=ut,("object"==typeof X&&X?X:window).Cleave=dt;const pt=dt,ht={props:{value:{},options:{},editable:{type:Boolean,default:!0}},mounted:function(){this.cleave=new pt(this.$el,this.options),this.cleave.setRawValue(this.value)},destroyed:function(){this.cleave.destroy()},watch:{value:"updateInput"},methods:{updateValue:function(){if(this.editable){var t=this.cleave.getRawValue();t!==this.value&&this.$emit("input",t)}},updateInput:function(){this.cleave.setRawValue(this.value)}}};const ft=(0,c.Z)(ht,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{attrs:{disabled:!t.editable,type:"text"},on:{keyup:t.updateValue}})}),[],!1,null,null,null).exports;var mt=n(6152);const vt=function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n};const gt=function(t){return function(e){return null==t?void 0:t[e]}}({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});var yt=n(3633),wt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const xt=function(t){return(t=(0,yt.Z)(t))&&t.replace(wt,gt).replace(bt,"")};var Ct=n(8426),kt=RegExp("['’]","g");const St=function(t){return function(e){return vt((0,Ct.Z)(xt(e).replace(kt,"")),t,"")}}((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var _t=n(5288),Mt=n(9006);function Ot(t){return function(t){if(Array.isArray(t))return Et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Nt={components:{InputCleave:ft},props:{label:{type:String,default:"Price"},defaultCurrencyCode:{type:String,default:"GBP"},currencies:{type:Array,default:function(){return Ot(Mt.V)}},currencyModel:{type:String},amountModel:{type:[String,Number]},notifyChangeDebounceMs:{type:Number,default:1e3},editable:{type:Boolean,default:!0},canSwitchCurrency:{type:Boolean,default:!0},min:Number,max:Number},created:function(){this.notifyChange=(0,mt.Z)((function(t){t.$emit("changed")}),this.notifyChangeDebounceMs)},computed:{isCurrencySwitchDisabled:function(){return!this.editable||!this.canSwitchCurrency},inputLabelId:function(){return St(this.label)},selectedCurrency:function(){return(0,Z.Z)(this.currencies,{code:this.selectedCurrencyCode})},selectCurrencyStyleObject:function(){return this.isCurrencySwitchDisabled?{backgroundImage:"none"}:{}},amount:{get:function(){return this.amountModel},set:function(t){this.$emit("update:amountModel",t),this.notifyChange(this)}},selectedCurrencyCode:{get:function(){return(0,_t.Z)(this.currencyModel)?this.defaultCurrencyCode:this.currencyModel},set:function(t){this.$emit("update:currencyModel",t),this.notifyChange(this)}}}};const Tt=(0,c.Z)(Nt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"block text-sm leading-5 font-medium text-gray-600",attrs:{for:t.inputLabelId}},[t._v("\n    "+t._s(t.label)+"\n\n    "),t._t("label-append")],2),t._v(" "),n("div",{staticClass:"mt-1 relative rounded-md shadow-sm"},[n("div",{staticClass:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[n("span",{staticClass:"text-gray-500 sm:text-sm sm:leading-5"},[t._v("\n        "+t._s(t.selectedCurrency.symbol_native)+"\n      ")])]),t._v(" "),n("InputCleave",{staticClass:"form-input block w-full pl-7 pr-12 sm:text-sm sm:leading-5",class:{"cursor-not-allowed":!t.editable},attrs:{id:t.inputLabelId,editable:t.editable,options:{numeral:!0,numeralPositiveOnly:!0,numeralThousandsGroupStyle:"thousand"},placeholder:"0.00"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),n("div",{staticClass:"absolute inset-y-0 right-0 flex items-center"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCurrencyCode,expression:"selectedCurrencyCode"}],staticClass:"form-select h-full py-0 pl-2 border-transparent bg-transparent text-gray-500 sm:text-sm sm:leading-5",class:t.isCurrencySwitchDisabled?"pr-2":"pr-7 cursor-pointer",style:t.selectCurrencyStyleObject,attrs:{"aria-label":"Currency",disabled:t.isCurrencySwitchDisabled},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.selectedCurrencyCode=e.target.multiple?n:n[0]}}},t._l(t.currencies,(function(e){return n("option",{key:e.code,domProps:{value:e.code}},[t._v("\n          "+t._s(e.code)+" "+t._s(e.emoji)+"  \n        ")])})),0)])],1)])}),[],!1,null,null,null).exports;const At={components:{LogoStripe:n(2603).Z},data:function(){return{}}};const Dt=(0,c.Z)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-28 h-12 flex flex-col items-center justify-center relative border border-primary-yellow-400 cursor-pointer"},[t._m(0),t._v(" "),n("LogoStripe",{staticClass:"inline h-11 w-10 text-indigo-600 absolute inset-auto"})],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[e("input",{staticClass:"form-radio h-4 w-4 text-primary-yellow-400 transition duration-150 ease-in-out",attrs:{type:"radio",checked:"",disabled:""}})])}],!1,null,null,null).exports;const Pt={components:{LogoCoinbase:n(8998).Z},data:function(){return{}}};function Rt(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}const It={components:{ProposalPaymentProviderStripe:Dt,ProposalPaymentProviderCoinbase:(0,c.Z)(Pt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-28 h-12 flex flex-col items-center justify-center relative border cursor-not-allowed"},[t._m(0),t._v(" "),n("span",{staticClass:"absolute inset-auto"},[n("LogoCoinbase",{staticClass:"inline h-15 w-32 text-blue-700 opacity-50"})],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[n("span",{staticClass:"text-xs"},[t._v("🚧")])])}],!1,null,null,null).exports,IconHeroiconsMediumExclamation:v.Z,InputWithCurrency:Tt},props:{proposal:{type:Object},editable:{type:Boolean,default:!0}},data:function(){return{}},computed:{settingsRoute:function(){return this.proposal.org.route_settings},isSelectedProviderReady:function(){var t;return null!==(t=this.proposal.is_selected_payment_provider_ready)&&void 0!==t&&t}},methods:{handleUpdateDepositAmount:function(){var t,e=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.editable){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.proposal.updateDepositAmount();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){Rt(i,r,o,s,a,"next",t)}function a(t){Rt(i,r,o,s,a,"throw",t)}s(void 0)}))})()}}};const Bt=(0,c.Z)(It,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600 mb-2",attrs:{for:"deposit"}},[t._v("\n      Payment\n    ")]),t._v(" "),n("nav",[n("ul",{},[n("li",{staticClass:"relative pb-10"},[t._m(0),t._v(" "),n("div",{staticClass:"ml-12 mt-2"},[n("div",[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600"},[t._v("\n                Provider\n              ")]),t._v(" "),n("div",{staticClass:"flex gap-x-3 mt-1"},[n("ProposalPaymentProviderStripe"),t._v(" "),n("ProposalPaymentProviderCoinbase")],1),t._v(" "),t.isSelectedProviderReady?t._e():[n("inertia-link",{staticClass:"block text-xs leading-5 text-red-500 mt-2 hover:text-red-400",attrs:{href:t.settingsRoute}},[n("IconHeroiconsMediumExclamation",{staticClass:"h-5 w-5 mr-1 inline-block"}),t._v(" "),n("span",{staticClass:"align-middle"},[t._v("Provider not ready, see settings »")])],1)],t._v(" "),n("InputWithCurrency",{staticClass:"mt-4 space-y-1",attrs:{"currency-model":t.proposal.value_currency_code,"amount-model":t.proposal.deposit_amount,max:999999999,editable:t.editable,"can-switch-currency":!1,label:"Amount"},on:{"update:amountModel":function(e){return t.$set(t.proposal,"deposit_amount",e)},"update:amount-model":function(e){return t.$set(t.proposal,"deposit_amount",e)},changed:t.handleUpdateDepositAmount}})],2)])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative flex items-start space-x-4 group focus:outline-none"},[n("div",{staticClass:"h-9 flex items-center"},[n("span",{staticClass:"relative z-10 w-8 h-8 flex items-center justify-center bg-white border-2 border-primary-yellow-500 rounded-full"},[n("span",{staticClass:"h-2.5 w-2.5 flex items-center justify-center text-primary-yellow-500"},[t._v("\n                  1\n                ")])])]),t._v(" "),n("div",{staticClass:"min-w-0"},[n("h3",{staticClass:"text-xs leading-4 font-semibold uppercase tracking-wide text-primary-yellow-500"},[t._v("\n                Acceptance\n              ")]),t._v(" "),n("p",{staticClass:"text-xs sm:text-sm leading-5 text-gray-500"},[t._v("\n                Upfront payment to start the project.\n              ")])])])}],!1,null,null,null).exports;const $t=(0,c.Z)({},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z","clip-rule":"evenodd"}}),t._v(" "),n("path",{attrs:{d:"M2 13.692V16a2 2 0 002 2h12a2 2 0 002-2v-2.308A24.974 24.974 0 0110 15c-2.796 0-5.487-.46-8-1.308z"}})])}),[],!1,null,null,null).exports;const zt=(0,c.Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{d:"M5 4a1 1 0 00-2 0v7.268a2 2 0 000 3.464V16a1 1 0 102 0v-1.268a2 2 0 000-3.464V4zM11 4a1 1 0 10-2 0v1.268a2 2 0 000 3.464V16a1 1 0 102 0V8.732a2 2 0 000-3.464V4zM16 3a1 1 0 011 1v7.268a2 2 0 010 3.464V16a1 1 0 11-2 0v-1.268a2 2 0 010-3.464V4a1 1 0 011-1z"}})])}),[],!1,null,null,null).exports;var Ft=n(9073);const Vt={components:{IconHeroiconsMediumCheckCircle:n(8086).Z},props:{name:{type:String},colors:{type:Array},active:{type:Boolean,default:!0}},data:function(){return{}}};const jt=(0,c.Z)(Vt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-white shadow overflow-hidden rounded-lg w-32 h-16 flex flex-col items-center justify-center relative border border-primary-yellow-400 cursor-pointer"},[t._m(0),t._v(" "),n("span",{staticClass:"font-medium text-gray-600 text-xs"},[t._v("\n    "+t._s(t.name)+"\n  ")]),t._v(" "),t._m(1)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"absolute inline-flex items-center top-1 left-1"},[e("input",{staticClass:"form-radio h-4 w-4 text-primary-yellow-400 transition duration-150 ease-in-out",attrs:{type:"radio",checked:"",disabled:""}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex overflow-hidden"},[n("div",{staticClass:"inline-block h-6 w-6 rounded-full text-white shadow-solid | bg-cool-gray-300"}),t._v(" "),n("div",{staticClass:"-ml-1 inline-block h-6 w-6 rounded-full text-white shadow-solid | bg-gray-50 "})])}],!1,null,null,null).exports;function Lt(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}const Zt={name:"ProposalTweakView",components:{IconHeroiconsSmallBriefcase:$t,IconHeroiconsSmallAdjustments:zt,IconHeroiconsMediumInformationCircle:Ft.Z,InputWithCurrency:Tt,ProposalDepositConfigure:Bt,ProposalThemeBlock:jt,Tabs:U,TabPane:Y},props:{proposal:{type:Object},proposalEditorMachineState:{}},data:function(){return{tabIndex:1}},computed:{detailsTabIcon:function(){return $t},designTabIcon:function(){return zt}},methods:{handleUpdateProjectValue:function(){var t,e=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.proposalEditorMachineState.context.canEdit){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.proposal.updateProjectValue();case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(2);case 9:case"end":return t.stop()}}),t,null,[[2,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){Lt(i,r,o,s,a,"next",t)}function a(t){Lt(i,r,o,s,a,"throw",t)}s(void 0)}))})()}}};const Ht=(0,c.Z)(Zt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex-1 flex flex-col justify-between"},[n("div",{staticClass:"px-4 sm:px-6"},[n("Tabs",{attrs:{"selected-index":t.tabIndex,"show-tab-text-when-inactive":!1,"active-tab-class":"border-b-2 border-primary-yellow-500 text-primary-yellow-600 focus:outline-none focus:text-primary-yellow-800 focus:border-primary-yellow-700","active-tab-icon-class":"text-primary-yellow-500 group-focus:text-primary-yellow-600","tabs-class":"mt-8"},on:{"update:selectedIndex":function(e){t.tabIndex=e},"update:selected-index":function(e){t.tabIndex=e}}},[n("TabPane",{attrs:{title:"Design",icon:t.designTabIcon}},[n("div",{staticClass:"space-y-6 pt-6 pb-5"},[n("div",{staticClass:"space-y-1"},[n("label",{staticClass:"block text-sm font-medium leading-5 text-gray-600",attrs:{for:"proposal_theme"}},[t._v("\n              Theme\n            ")]),t._v(" "),n("div",{staticClass:"flex gap-2 items-center"},[n("ProposalThemeBlock",{staticClass:"flex-shrink-0",attrs:{name:"Cool Grey"}}),t._v(" "),n("p",{staticClass:"flex-1 text-center text-gray-400 text-xs"},[n("IconHeroiconsMediumInformationCircle",{staticClass:"inline w-5 h-5 align-bottom"}),t._v("\n                More theme choices coming soon!\n              ")],1)],1)])])]),t._v(" "),n("TabPane",{attrs:{title:"Details",icon:t.detailsTabIcon}},[n("div",{staticClass:"space-y-6 pt-6 pb-5"},[n("InputWithCurrency",{staticClass:"space-y-1",attrs:{"currency-model":t.proposal.value_currency_code,"amount-model":t.proposal.value_amount,editable:t.proposalEditorMachineState.context.canEdit,max:999999999,label:"Project Value"},on:{"update:currencyModel":function(e){return t.$set(t.proposal,"value_currency_code",e)},"update:currency-model":function(e){return t.$set(t.proposal,"value_currency_code",e)},"update:amountModel":function(e){return t.$set(t.proposal,"value_amount",e)},"update:amount-model":function(e){return t.$set(t.proposal,"value_amount",e)},changed:t.handleUpdateProjectValue}}),t._v(" "),n("ProposalDepositConfigure",{staticClass:"space-y-1",attrs:{proposal:t.proposal,editable:t.proposalEditorMachineState.context.canEdit}})],1)])],1)],1)])}),[],!1,null,null,null).exports;function Wt(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}const Kt={components:{ApplicationLogo:s.Z,BadgeWithDot:p.Z,BaseSlideOver:l,ProposalRecipientSelector:u.Z,ProposalCreatorAvatar:d.Z,ProposalTweakView:Ht,ProposalConfirmView:E},props:{proposal:{type:Object},proposalEditorMachineState:{}},created:function(){var t=this;this.contentMachineService.onTransition((function(e){t.contentCurrentState=e,t.contentContext=e.context})).start(),this.setupInitialMachineContext()},data:function(){var t=Gt.withConfig({services:{publishAction:this.publishAction}});return{isVisible:!1,contentMachineService:(0,i.kJ)(t,{devTools:!0}),contentCurrentState:t.initialState,contentContext:t.context}},computed:{isDefaultView:function(){return this.contentCurrentState.matches("defaultView")},isSuccessPublishView:function(){return this.contentCurrentState.matches("confirmPublishView.publishSuccess")},bodyComponent:function(){return this.isDefaultView?Ht:E},leaveClass:function(){return this.isDefaultView,"translate-x-0"},leaveToClass:function(){return this.isDefaultView?"translate-x-full":"-translate-x-full"},enterClass:function(){return this.isDefaultView?"-translate-x-full":"translate-x-full"},enterToClass:function(){return this.isDefaultView,"translate-x-0"},footerLeaveClass:function(){return this.isDefaultView,"translate-x-0"},footerLeaveToClass:function(){return this.isDefaultView,"-translate-x-full"},footerEnterClass:function(){return this.isDefaultView,"-translate-x-full"},footerEnterToClass:function(){return this.isDefaultView,"translate-x-0"}},methods:{handleExtraCloseButtonHit:function(){this.isVisible?this.hide():this.show()},show:function(){this.isVisible=!0},hide:function(){this.isVisible=!1},setupInitialMachineContext:function(){this.handleHasThingsToPublishEvent(this.proposal.has_things_to_fix_before_publish),this.handleHasBeenPublishedEvent(this.proposal.has_been_published)},handleHasThingsToPublishEvent:function(t){var e=t?"CANNOT_PUBLISH":"CAN_PUBLISH";this.contentMachineService.send(e)},handleHasBeenPublishedEvent:function(t){var e=t?"IS_PUBLISHED":"IS_NOT_PUBLISHED";this.contentMachineService.send(e)},publishAction:function(){var t,e=this;return(t=o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.proposal.publish();case 2:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){Wt(i,r,o,s,a,"next",t)}function a(t){Wt(i,r,o,s,a,"throw",t)}s(void 0)}))})()}},watch:{"proposal.has_things_to_fix_before_publish":{handler:function(t){this.handleHasThingsToPublishEvent(t)}}}};const Ut=(0,c.Z)(Kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("transition",{attrs:{"enter-active-class":"ease-in-out duration-300","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in-out duration-75","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.isVisible,expression:"!isVisible"}],staticClass:"absolute h-full right-0 top-0"},[n("div",{staticClass:"fixed h-screen"},[n("button",{staticClass:"absolute bottom-0 top-0 right-0 bg-white inline-block h-20 my-auto rounded-l-full w-7 shadow focus:outline-none focus:shadow-xl",on:{click:t.handleExtraCloseButtonHit}},[n("svg",{staticClass:"h-5 w-5 ml-1 text-primary-yellow-500 animate-wave",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M15 19l-7-7 7-7"}})])])])])]),t._v(" "),n("BaseSlideOver",{attrs:{"is-visible":t.isVisible,"is-rounded":!0,"is-divide-y":!1},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e}},scopedSlots:t._u([{key:"header",fn:function(e){var r=e.handleCloseButtonHit;return[n("header",{staticClass:"space-y-1 py-6 px-4 relative bg-primary-yellow-400 sm:px-6"},[n("div",{staticClass:"flex items-center justify-between space-x-3 items-baseline"},[n("ApplicationLogo",{staticClass:"h-7 w-auto"}),t._v(" "),n("div",{staticClass:"h-7 flex items-center"},[n("button",{staticClass:"text-primary-yellow-50 hover:text-primary-yellow-600 focus:outline-none focus:text-primary-yellow-600 transition ease-in-out duration-150",attrs:{"aria-label":"Close panel"},on:{click:r}},[n("svg",{staticClass:"h-6 w-6",attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])],1),t._v(" "),n("h2",{staticClass:"text-lg leading-7 font-medium text-primary-yellow-800 truncate mt-0.5"},[t._v("\n          » "+t._s(t.proposal.name)+"\n        ")]),t._v(" "),n("div",{staticClass:"h-10"}),t._v(" "),n("div",{staticClass:"absolute h-15 left-0 right-0 grid grid-cols-3 items-center justify-evenly z-10",staticStyle:{bottom:"-1.875rem"}},[n("div",{staticClass:"relative col-span-1"},[n("div",{staticClass:"absolute w-full flex items-center justify-center text-xs tracking-wider uppercase text-primary-yellow-700 font-semibold -mt-8"},[t._v("\n              Creator\n            ")]),t._v(" "),n("div",{staticClass:"flex space-x-2 justify-center"},[n("ProposalCreatorAvatar",{attrs:{proposal:t.proposal}})],1)]),t._v(" "),n("div",{staticClass:"flex col-span-1 justify-center"},[n("BadgeWithDot",{attrs:{"custom-badge-class":"bg-white text-primary-yellow-800 shadow-md","custom-dot-class":"text-primary-yellow-400"}},[t._v("\n              "+t._s(t._f("titleCase")(t.proposal.status_name))+"\n            ")])],1),t._v(" "),n("div",{staticClass:"relative col-span-1"},[n("div",{staticClass:"absolute w-full flex items-center justify-center text-xs tracking-wider uppercase text-primary-yellow-700 font-semibold -mt-8"},[t._v("\n              Recipient\n            ")]),t._v(" "),n("div",{staticClass:"flex space-x-2 justify-center"},[n("ProposalRecipientSelector",{attrs:{proposal:t.proposal,options:t.proposal.recipient_options},on:{"update:proposal":function(e){t.proposal=e}}})],1)])])])]}},{key:"body",fn:function(){return[n("div",{staticClass:"relative"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":t.enterClass,"enter-to-class":t.enterToClass,"leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":t.leaveClass,"leave-to-class":t.leaveToClass}},[n("keep-alive",{attrs:{include:"ProposalTweakView"}},[n(t.bodyComponent,{tag:"component",staticClass:"absolute inset-0",attrs:{proposal:t.proposal,state:t.contentCurrentState,"proposal-editor-machine-state":t.proposalEditorMachineState},on:{"back-to-default-view":function(e){return t.contentMachineService.send("BACK_TO_DEFAULT_VIEW")},publish:function(e){return t.contentMachineService.send("PUBLISH")}}})],1)],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[n("div",{staticClass:"overflow-hidden flex flex-shrink-0"},[n("transition",{attrs:{"enter-active-class":"transform transition ease-in-out duration-500 sm:duration-700","enter-class":t.footerEnterClass,"enter-to-class":t.footerEnterToClass,"leave-active-class":"transform transition ease-in-out duration-500 sm:duration-700","leave-class":t.footerLeaveClass,"leave-to-class":t.footerLeaveToClass}},[t.isDefaultView||t.isSuccessPublishView?n("div",{staticClass:"px-4 py-4 flex flex-1 border-t border-gray-200"},[t.isDefaultView?[n("span",{staticClass:"inline-flex rounded-md shadow-sm flex-1"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out flex-1",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.contentMachineService.send("PREPARE_TO_PUBLISH")}}},[t._v("\n                  "+t._s(t.contentContext.isPublished?"View Access Details »":"Ready to Publish »")+"\n                ")])])]:t._e(),t._v(" "),t.isSuccessPublishView?[n("span",{staticClass:"inline-flex rounded-md shadow-sm flex-1"},[n("button",{staticClass:"inline-flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-primary-yellow-900 bg-primary-yellow-400 hover:bg-primary-yellow-300 focus:outline-none focus:border-primary-yellow-500 focus:shadow-outline-primary-yellow focus:bg-primary-yellow-300 active:bg-primary-yellow-300 transition duration-150 ease-in-out flex-1",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.contentMachineService.send("BACK_TO_DEFAULT_VIEW")}}},[t._v("\n                  Back to details\n                ")])])]:t._e()],2):t._e()])],1)]},proxy:!0},{key:"extra-close-button-handling",fn:function(e){e.handleCloseButtonHit;return[n("button",{staticClass:"absolute bottom-0 top-0 -ml-13 bg-white inline-block h-20 my-auto rounded-l-full w-7 focus:outline-none",staticStyle:{"margin-left":"-1.65rem","box-shadow":"-5px 3px 10px -2px rgba(0, 0, 0, 0.1), -5px 10px 10px -5px rgba(0, 0, 0, 0.04)"},on:{click:t.handleExtraCloseButtonHit}},[n("svg",{staticClass:"h-5 w-5 ml-1 text-primary-yellow-500",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M9 5l7 7-7 7"}})])])]}}])})],1)}),[],!1,null,null,null).exports;var Jt=n(9944),qt=n(375),Gt=(0,Jt.J)({id:"proposalSlideOverContent",context:{isPublished:!1,canPublish:!1,hasSufficientCredits:!0,isPublishing:!1},initial:"defaultView",states:{defaultView:{on:{PREPARE_TO_PUBLISH:"confirmPublishView"}},confirmPublishView:{initial:"entering",on:{BACK_TO_DEFAULT_VIEW:"defaultView"},states:{entering:{always:[{target:"publishSuccess",cond:"isPublished"},{target:"cannotPublish",cond:"cannotPublish"},{target:"canPublish",cond:"canPublish"}]},cannotPublish:{on:{CAN_PUBLISH:{target:["entering"],actions:["setCanPublish"]}}},canPublish:{initial:"ready",on:{CANNOT_PUBLISH:{target:["entering"],actions:["setCannotPublish"]}},states:{ready:{on:{PUBLISH:{target:["publishing"],actions:["setIsPublishing"]}}},publishing:{invoke:{src:"publishAction",onDone:{target:"#publishSuccess",actions:["setIsNotPublishing","setIsPublished"]},onError:{target:"publishError",actions:["setIsNotPublishing"]}}},publishError:{on:{PUBLISH:{target:["publishing"],actions:["setIsPublishing"]}}}}},publishSuccess:{id:"publishSuccess"}}}},on:{CAN_PUBLISH:{actions:["setCanPublish"]},CANNOT_PUBLISH:{actions:["setCannotPublish"]},IS_PUBLISHED:{actions:["setIsPublished"]},IS_NOT_PUBLISHED:{actions:["setIsNotPublished"]}}},{guards:{cannotPublish:function(t){return!1===t.canPublish},canPublish:function(t){return t.canPublish},isPublished:function(t){return t.isPublished}},actions:{setCanPublish:(0,qt.f0)({canPublish:function(t){return t.canPublish=!0}}),setCannotPublish:(0,qt.f0)({canPublish:function(t){return t.canPublish=!1}}),setIsPublishing:(0,qt.f0)({isPublishing:function(t){return t.isPublishing=!0}}),setIsNotPublishing:(0,qt.f0)({isPublishing:function(t){return t.isPublishing=!1}}),setIsPublished:(0,qt.f0)({isPublished:function(t){return t.isPublished=!0}}),setIsNotPublished:(0,qt.f0)({isPublished:function(t){return t.isPublished=!1}})}})},9006:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});var r=[{code:"GBP",symbol_native:"£",emoji:"🇬🇧"},{code:"USD",symbol_native:"$",emoji:"🇺🇸"},{code:"EUR",symbol_native:"€",emoji:"🇪🇺"},{code:"AUD",symbol_native:"$",emoji:"🇦🇺"},{code:"CAD",symbol_native:"$",emoji:"🇨🇦"},{code:"NZD",symbol_native:"$",emoji:"🇳🇿"}]},6485:t=>{t.exports=function(t){var e;return function(t){return navigator.clipboard?navigator.clipboard.writeText(t):Promise.reject()}(t).catch((function(n){return e=n,function(t){var e=document.createElement("span");e.textContent=t,e.style.whiteSpace="pre",document.body.appendChild(e);var n=window.getSelection(),r=window.document.createRange();n.removeAllRanges(),r.selectNode(e),n.addRange(r);var o,i=!1;try{i=window.document.execCommand("copy")}catch(t){o=t}return n.removeAllRanges(),window.document.body.removeChild(e),i?Promise.resolve():Promise.reject(o)}(t)})).catch((function(t){throw t||e||new DOMException("The request is not allowed","NotAllowedError")}))}},1102:(t,e,n)=>{"use strict";var r=n(6291),o=i(Error);function i(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=r.apply(null,arguments)),new t(e)}}t.exports=o,o.eval=i(EvalError),o.range=i(RangeError),o.reference=i(ReferenceError),o.syntax=i(SyntaxError),o.type=i(TypeError),o.uri=i(URIError),o.create=i},6291:t=>{!function(){var e;function n(t){for(var e,n,r,o,i=1,s=[].slice.call(arguments),a=0,c=t.length,l="",u=!1,d=!1,p=function(){return s[i++]},h=function(){for(var n="";/\d/.test(t[a]);)n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<c;++a)if(e=t[a],u)switch(u=!1,"."==e?(d=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(d=!0,e=t[a+=2]):d=!0,o=h(),e){case"b":l+=parseInt(p(),10).toString(2);break;case"c":l+="string"==typeof(n=p())||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(p(),10);break;case"f":r=String(parseFloat(p()).toFixed(o||6)),l+=d?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(p());break;case"o":l+="0"+parseInt(p(),10).toString(8);break;case"s":l+=p();break;case"x":l+="0x"+parseInt(p(),10).toString(16);break;case"X":l+="0x"+parseInt(p(),10).toString(16).toUpperCase();break;default:l+=e}else"%"===e?u=!0:l+=e;return l}(e=t.exports=n).format=n,e.vsprintf=function(t,e){return n.apply(null,[t].concat(e))},"undefined"!=typeof console&&"function"==typeof console.log&&(e.printf=function(){console.log(n.apply(null,arguments))})}()},7802:t=>{function e(t){Object.freeze(t);var n="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(r){!Object.hasOwnProperty.call(t,r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||n&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(t[r])||e(t[r])})),t}class n{constructor(t){void 0===t.data&&(t.data={}),this.data=t.data}ignoreMatch(){this.ignore=!0}}function r(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function o(t,...e){var n={};for(const e in t)n[e]=t[e];return e.forEach((function(t){for(const e in t)n[e]=t[e]})),n}function i(t){return t.nodeName.toLowerCase()}var s=Object.freeze({__proto__:null,escapeHTML:r,inherit:o,nodeStream:function(t){var e=[];return function t(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=t(o,r),i(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(t,0),e},mergeStreams:function(t,e,n){var o=0,s="",a=[];function c(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function l(t){s+="<"+i(t)+[].map.call(t.attributes,(function(t){return" "+t.nodeName+'="'+r(t.value)+'"'})).join("")+">"}function u(t){s+="</"+i(t)+">"}function d(t){("start"===t.event?l:u)(t.node)}for(;t.length||e.length;){var p=c();if(s+=r(n.substring(o,p[0].offset)),o=p[0].offset,p===t){a.reverse().forEach(u);do{d(p.splice(0,1)[0]),p=c()}while(p===t&&p.length&&p[0].offset===o);a.reverse().forEach(l)}else"start"===p[0].event?a.push(p[0].node):a.pop(),d(p.splice(0,1)[0])}return s+r(n.substr(o))}});const a=t=>!!t.kind;class c{constructor(t,e){this.buffer="",this.classPrefix=e.classPrefix,t.walk(this)}addText(t){this.buffer+=r(t)}openNode(t){if(!a(t))return;let e=t.kind;t.sublanguage||(e=`${this.classPrefix}${e}`),this.span(e)}closeNode(t){a(t)&&(this.buffer+="</span>")}value(){return this.buffer}span(t){this.buffer+=`<span class="${t}">`}}class l{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(t){this.top.children.push(t)}openNode(t){const e={kind:t,children:[]};this.add(e),this.stack.push(e)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(t){return this.constructor._walk(t,this.rootNode)}static _walk(t,e){return"string"==typeof e?t.addText(e):e.children&&(t.openNode(e),e.children.forEach((e=>this._walk(t,e))),t.closeNode(e)),t}static _collapse(t){"string"!=typeof t&&t.children&&(t.children.every((t=>"string"==typeof t))?t.children=[t.children.join("")]:t.children.forEach((t=>{l._collapse(t)})))}}class u extends l{constructor(t){super(),this.options=t}addKeyword(t,e){""!==t&&(this.openNode(e),this.addText(t),this.closeNode())}addText(t){""!==t&&this.add(t)}addSublanguage(t,e){const n=t.root;n.kind=e,n.sublanguage=!0,this.add(n)}toHTML(){return new c(this,this.options).value()}finalize(){return!0}}function d(t){return t?"string"==typeof t?t:t.source:null}const p="[a-zA-Z]\\w*",h="[a-zA-Z_]\\w*",f="\\b\\d+(\\.\\d+)?",m="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",v="\\b(0b[01]+)",g={begin:"\\\\[\\s\\S]",relevance:0},y={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[g]},w={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[g]},b={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},x=function(t,e,n={}){var r=o({className:"comment",begin:t,end:e,contains:[]},n);return r.contains.push(b),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},C=x("//","$"),k=x("/\\*","\\*/"),S=x("#","$"),_={className:"number",begin:f,relevance:0},M={className:"number",begin:m,relevance:0},O={className:"number",begin:v,relevance:0},E={className:"number",begin:f+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},N={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[g,{begin:/\[/,end:/\]/,relevance:0,contains:[g]}]}]},T={className:"title",begin:p,relevance:0},A={className:"title",begin:h,relevance:0},D={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0};var P=Object.freeze({__proto__:null,IDENT_RE:p,UNDERSCORE_IDENT_RE:h,NUMBER_RE:f,C_NUMBER_RE:m,BINARY_NUMBER_RE:v,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=function(...t){return t.map((t=>d(t))).join("")}(e,/.*\b/,t.binary,/\b.*/)),o({className:"meta",begin:e,end:/$/,relevance:0,"on:begin":(t,e)=>{0!==t.index&&e.ignoreMatch()}},t)},BACKSLASH_ESCAPE:g,APOS_STRING_MODE:y,QUOTE_STRING_MODE:w,PHRASAL_WORDS_MODE:b,COMMENT:x,C_LINE_COMMENT_MODE:C,C_BLOCK_COMMENT_MODE:k,HASH_COMMENT_MODE:S,NUMBER_MODE:_,C_NUMBER_MODE:M,BINARY_NUMBER_MODE:O,CSS_NUMBER_MODE:E,REGEXP_MODE:N,TITLE_MODE:T,UNDERSCORE_TITLE_MODE:A,METHOD_GUARD:D,END_SAME_AS_BEGIN:function(t){return Object.assign(t,{"on:begin":(t,e)=>{e.data._beginMatch=t[1]},"on:end":(t,e)=>{e.data._beginMatch!==t[1]&&e.ignoreMatch()}})}}),R="of and for in not or if then".split(" ");function I(t){function e(e,n){return new RegExp(d(e),"m"+(t.case_insensitive?"i":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(t,e){e.position=this.position++,this.matchIndexes[this.matchAt]=e,this.regexes.push([e,t]),this.matchAt+=function(t){return new RegExp(t.toString()+"|").exec("").length-1}(t)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const t=this.regexes.map((t=>t[1]));this.matcherRe=e(function(t,e="|"){for(var n=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,r=0,o="",i=0;i<t.length;i++){var s=r+=1,a=d(t[i]);for(i>0&&(o+=e),o+="(";a.length>0;){var c=n.exec(a);if(null==c){o+=a;break}o+=a.substring(0,c.index),a=a.substring(c.index+c[0].length),"\\"===c[0][0]&&c[1]?o+="\\"+String(Number(c[1])+s):(o+=c[0],"("===c[0]&&r++)}o+=")"}return o}(t),!0),this.lastIndex=0}exec(t){this.matcherRe.lastIndex=this.lastIndex;const e=this.matcherRe.exec(t);if(!e)return null;const n=e.findIndex(((t,e)=>e>0&&void 0!==t)),r=this.matchIndexes[n];return e.splice(0,n),Object.assign(e,r)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(t){if(this.multiRegexes[t])return this.multiRegexes[t];const e=new n;return this.rules.slice(t).forEach((([t,n])=>e.addRule(t,n))),e.compile(),this.multiRegexes[t]=e,e}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(t,e){this.rules.push([t,e]),"begin"===e.type&&this.count++}exec(t){const e=this.getMatcher(this.regexIndex);e.lastIndex=this.lastIndex;let n=e.exec(t);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const e=this.getMatcher(0);e.lastIndex=this.lastIndex+1,n=e.exec(t)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}function i(t,e){const n=t.input[t.index-1],r=t.input[t.index+t[0].length];"."!==n&&"."!==r||e.ignoreMatch()}if(t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return function n(s,a){const c=s;if(s.compiled)return c;s.compiled=!0,s.__beforeBegin=null,s.keywords=s.keywords||s.beginKeywords;let l=null;if("object"==typeof s.keywords&&(l=s.keywords.$pattern,delete s.keywords.$pattern),s.keywords&&(s.keywords=function(t,e){var n={};"string"==typeof t?r("keyword",t):Object.keys(t).forEach((function(e){r(e,t[e])}));return n;function r(t,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");n[r[0]]=[t,$(r[0],r[1])]}))}}(s.keywords,t.case_insensitive)),s.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return c.keywordPatternRe=e(s.lexemes||l||/\w+/,!0),a&&(s.beginKeywords&&(s.begin="\\b("+s.beginKeywords.split(" ").join("|")+")(?=\\b|\\s)",s.__beforeBegin=i),s.begin||(s.begin=/\B|\b/),c.beginRe=e(s.begin),s.endSameAsBegin&&(s.end=s.begin),s.end||s.endsWithParent||(s.end=/\B|\b/),s.end&&(c.endRe=e(s.end)),c.terminator_end=d(s.end)||"",s.endsWithParent&&a.terminator_end&&(c.terminator_end+=(s.end?"|":"")+a.terminator_end)),s.illegal&&(c.illegalRe=e(s.illegal)),void 0===s.relevance&&(s.relevance=1),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map((function(t){return function(t){t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(e){return o(t,{variants:null},e)})));if(t.cached_variants)return t.cached_variants;if(B(t))return o(t,{starts:t.starts?o(t.starts):null});if(Object.isFrozen(t))return o(t);return t}("self"===t?s:t)}))),s.contains.forEach((function(t){n(t,c)})),s.starts&&n(s.starts,a),c.matcher=function(t){const e=new r;return t.contains.forEach((t=>e.addRule(t.begin,{rule:t,type:"begin"}))),t.terminator_end&&e.addRule(t.terminator_end,{type:"end"}),t.illegal&&e.addRule(t.illegal,{type:"illegal"}),e}(c),c}(t)}function B(t){return!!t&&(t.endsWithParent||B(t.starts))}function $(t,e){return e?Number(e):function(t){return R.includes(t.toLowerCase())}(t)?0:1}const z={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!hljs.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,r(this.code);let t;return this.autoDetect?(t=hljs.highlightAuto(this.code),this.detectedLanguage=t.language):(t=hljs.highlight(this.language,this.code,this.ignoreIllegals),this.detectectLanguage=this.language),t.value},autoDetect(){return!this.language||(t=this.autodetect,Boolean(t||""===t));var t},ignoreIllegals:()=>!0},render(t){return t("pre",{},[t("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}},F={install(t){t.component("highlightjs",z)}},V=r,j=o,{nodeStream:L,mergeStreams:Z}=s,H=Symbol("nomatch");var W=function(t){var r=[],o=Object.create(null),i=Object.create(null),s=[],a=!0,c=/(^(<[^>]+>|\t|)+|\n)/gm,l="Could not find the language '{}', did you forget to load/include a language module?";const d={disableAutodetect:!0,name:"Plain text",contains:[]};var p={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:u};function h(t){return p.noHighlightRe.test(t)}function f(t,e,n,r){var o={code:e,language:t};k("before:highlight",o);var i=o.result?o.result:m(o.language,o.code,n,r);return i.code=o.code,k("after:highlight",i),i}function m(t,e,r,i){var s=e;function c(t,e){var n=C.case_insensitive?e[0].toLowerCase():e[0];return Object.prototype.hasOwnProperty.call(t.keywords,n)&&t.keywords[n]}function u(){null!=_.subLanguage?function(){if(""!==E){var t=null;if("string"==typeof _.subLanguage){if(!o[_.subLanguage])return void O.addText(E);t=m(_.subLanguage,E,!0,M[_.subLanguage]),M[_.subLanguage]=t.top}else t=v(E,_.subLanguage.length?_.subLanguage:null);_.relevance>0&&(N+=t.relevance),O.addSublanguage(t.emitter,t.language)}}():function(){if(!_.keywords)return void O.addText(E);let t=0;_.keywordPatternRe.lastIndex=0;let e=_.keywordPatternRe.exec(E),n="";for(;e;){n+=E.substring(t,e.index);const r=c(_,e);if(r){const[t,o]=r;O.addText(n),n="",N+=o,O.addKeyword(e[0],t)}else n+=e[0];t=_.keywordPatternRe.lastIndex,e=_.keywordPatternRe.exec(E)}n+=E.substr(t),O.addText(n)}(),E=""}function d(t){return t.className&&O.openNode(t.className),_=Object.create(t,{parent:{value:_}})}function h(t,e,r){let o=function(t,e){var n=t&&t.exec(e);return n&&0===n.index}(t.endRe,r);if(o){if(t["on:end"]){const r=new n(t);t["on:end"](e,r),r.ignore&&(o=!1)}if(o){for(;t.endsParent&&t.parent;)t=t.parent;return t}}if(t.endsWithParent)return h(t.parent,e,r)}function f(t){return 0===_.matcher.regexIndex?(E+=t[0],1):(D=!0,0)}function g(t){var e=t[0],r=t.rule;const o=new n(r),i=[r.__beforeBegin,r["on:begin"]];for(const n of i)if(n&&(n(t,o),o.ignore))return f(e);return r&&r.endSameAsBegin&&(r.endRe=new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),r.skip?E+=e:(r.excludeBegin&&(E+=e),u(),r.returnBegin||r.excludeBegin||(E=e)),d(r),r.returnBegin?0:e.length}function y(t){var e=t[0],n=s.substr(t.index),r=h(_,t,n);if(!r)return H;var o=_;o.skip?E+=e:(o.returnEnd||o.excludeEnd||(E+=e),u(),o.excludeEnd&&(E=e));do{_.className&&O.closeNode(),_.skip||_.subLanguage||(N+=_.relevance),_=_.parent}while(_!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),d(r.starts)),o.returnEnd?0:e.length}var w={};function x(e,n){var o=n&&n[0];if(E+=e,null==o)return u(),0;if("begin"===w.type&&"end"===n.type&&w.index===n.index&&""===o){if(E+=s.slice(n.index,n.index+1),!a){const e=new Error("0 width match regex");throw e.languageName=t,e.badRule=w.rule,e}return 1}if(w=n,"begin"===n.type)return g(n);if("illegal"===n.type&&!r){const t=new Error('Illegal lexeme "'+o+'" for mode "'+(_.className||"<unnamed>")+'"');throw t.mode=_,t}if("end"===n.type){var i=y(n);if(i!==H)return i}if("illegal"===n.type&&""===o)return 1;if(A>1e5&&A>3*n.index){throw new Error("potential infinite loop, way more iterations than matches")}return E+=o,o.length}var C=b(t);if(!C)throw console.error(l.replace("{}",t)),new Error('Unknown language: "'+t+'"');var k=I(C),S="",_=i||k,M={},O=new p.__emitter(p);!function(){for(var t=[],e=_;e!==C;e=e.parent)e.className&&t.unshift(e.className);t.forEach((t=>O.openNode(t)))}();var E="",N=0,T=0,A=0,D=!1;try{for(_.matcher.considerAll();;){A++,D?D=!1:_.matcher.considerAll(),_.matcher.lastIndex=T;const t=_.matcher.exec(s);if(!t)break;const e=x(s.substring(T,t.index),t);T=t.index+e}return x(s.substr(T)),O.closeAllNodes(),O.finalize(),S=O.toHTML(),{relevance:N,value:S,language:t,illegal:!1,emitter:O,top:_}}catch(e){if(e.message&&e.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:e.message,context:s.slice(T-100,T+100),mode:e.mode},sofar:S,relevance:0,value:V(s),emitter:O};if(a)return{illegal:!1,relevance:0,value:V(s),emitter:O,language:t,top:_,errorRaised:e};throw e}}function v(t,e){e=e||p.languages||Object.keys(o);var n=function(t){const e={relevance:0,emitter:new p.__emitter(p),value:V(t),illegal:!1,top:d};return e.emitter.addText(t),e}(t),r=n;return e.filter(b).filter(C).forEach((function(e){var o=m(e,t,!1);o.language=e,o.relevance>r.relevance&&(r=o),o.relevance>n.relevance&&(r=n,n=o)})),r.language&&(n.second_best=r),n}function g(t){return p.tabReplace||p.useBR?t.replace(c,(t=>"\n"===t?p.useBR?"<br>":t:p.tabReplace?t.replace(/\t/g,p.tabReplace):t)):t}function y(t){let e=null;const n=function(t){var e=t.className+" ";e+=t.parentNode?t.parentNode.className:"";const n=p.languageDetectRe.exec(e);if(n){var r=b(n[1]);return r||(console.warn(l.replace("{}",n[1])),console.warn("Falling back to no-highlight mode for this block.",t)),r?n[1]:"no-highlight"}return e.split(/\s+/).find((t=>h(t)||b(t)))}(t);if(h(n))return;k("before:highlightBlock",{block:t,language:n}),p.useBR?(e=document.createElement("div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n")):e=t;const r=e.textContent,o=n?f(n,r,!0):v(r),s=L(e);if(s.length){const t=document.createElement("div");t.innerHTML=o.value,o.value=Z(s,L(t),r)}o.value=g(o.value),k("after:highlightBlock",{block:t,result:o}),t.innerHTML=o.value,t.className=function(t,e,n){var r=e?i[e]:n,o=[t.trim()];return t.match(/\bhljs\b/)||o.push("hljs"),t.includes(r)||o.push(r),o.join(" ").trim()}(t.className,n,o.language),t.result={language:o.language,re:o.relevance,relavance:o.relevance},o.second_best&&(t.second_best={language:o.second_best.language,re:o.second_best.relevance,relavance:o.second_best.relevance})}const w=()=>{if(!w.called){w.called=!0;var t=document.querySelectorAll("pre code");r.forEach.call(t,y)}};function b(t){return t=(t||"").toLowerCase(),o[t]||o[i[t]]}function x(t,{languageName:e}){"string"==typeof t&&(t=[t]),t.forEach((t=>{i[t]=e}))}function C(t){var e=b(t);return e&&!e.disableAutodetect}function k(t,e){var n=t;s.forEach((function(t){t[n]&&t[n](e)}))}Object.assign(t,{highlight:f,highlightAuto:v,fixMarkup:function(t){return console.warn("fixMarkup is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2534"),g(t)},highlightBlock:y,configure:function(t){t.useBR&&(console.warn("'useBR' option is deprecated and will be removed entirely in v11.0"),console.warn("Please see https://github.com/highlightjs/highlight.js/issues/2559")),p=j(p,t)},initHighlighting:w,initHighlightingOnLoad:function(){window.addEventListener("DOMContentLoaded",w,!1)},registerLanguage:function(e,n){var r=null;try{r=n(t)}catch(t){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!a)throw t;console.error(t),r=d}r.name||(r.name=e),o[e]=r,r.rawDefinition=n.bind(null,t),r.aliases&&x(r.aliases,{languageName:e})},listLanguages:function(){return Object.keys(o)},getLanguage:b,registerAliases:x,requireLanguage:function(t){var e=b(t);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",t))},autoDetection:C,inherit:j,addPlugin:function(t){s.push(t)},vuePlugin:F}),t.debugMode=function(){a=!1},t.safeMode=function(){a=!0},t.versionString="10.3.1";for(const t in P)"object"==typeof P[t]&&e(P[t]);return Object.assign(t,P),t}({});t.exports=W},4941:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});const r=function(){this.__data__=[],this.size=0};var o=n(2373);const i=function(t,e){for(var n=t.length;n--;)if((0,o.Z)(t[n][0],e))return n;return-1};var s=Array.prototype.splice;const a=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)};const c=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]};const l=function(t){return i(this.__data__,t)>-1};const u=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=a,d.prototype.get=c,d.prototype.has=l,d.prototype.set=u;const p=d},6686:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(570),o=n(6169);const i=(0,r.Z)(o.Z,"Map")},2990:(t,e,n)=>{"use strict";n.d(e,{Z:()=>k});const r=(0,n(570).Z)(Object,"create");const o=function(){this.__data__=r?r(null):{},this.size=0};const i=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var s=Object.prototype.hasOwnProperty;const a=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(e,t)?e[t]:void 0};var c=Object.prototype.hasOwnProperty;const l=function(t){var e=this.__data__;return r?void 0!==e[t]:c.call(e,t)};const u=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this};function d(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=a,d.prototype.has=l,d.prototype.set=u;const p=d;var h=n(4941),f=n(6686);const m=function(){this.size=0,this.__data__={hash:new p,map:new(f.Z||h.Z),string:new p}};const v=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const g=function(t,e){var n=t.__data__;return v(e)?n["string"==typeof e?"string":"hash"]:n.map};const y=function(t){var e=g(this,t).delete(t);return this.size-=e?1:0,e};const w=function(t){return g(this,t).get(t)};const b=function(t){return g(this,t).has(t)};const x=function(t,e){var n=g(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function C(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}C.prototype.clear=m,C.prototype.delete=y,C.prototype.get=w,C.prototype.has=b,C.prototype.set=x;const k=C},4513:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var s=t[n];e(s,n,t)&&(i[o++]=s)}return i}},918:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});const r=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r};var o=n(6986),i=n(9350),s=n(9710),a=n(3564),c=n(760),l=Object.prototype.hasOwnProperty;const u=function(t,e){var n=(0,i.Z)(t),u=!n&&(0,o.Z)(t),d=!n&&!u&&(0,s.Z)(t),p=!n&&!u&&!d&&(0,c.Z)(t),h=n||u||d||p,f=h?r(t.length,String):[],m=f.length;for(var v in t)!e&&!l.call(t,v)||h&&("length"==v||d&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||(0,a.Z)(v,m))||f.push(v);return f}},1059:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}},6776:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const r=function(t){return function(e,n,r){for(var o=-1,i=Object(e),s=r(e),a=s.length;a--;){var c=s[t?a:++o];if(!1===n(i[c],c,i))break}return e}}();var o=n(8130);const i=function(t,e){return t&&r(t,e,o.Z)};var s=n(5710);const a=function(t,e){return function(n,r){if(null==n)return n;if(!(0,s.Z)(n))return t(n,r);for(var o=n.length,i=e?o:-1,a=Object(n);(e?i--:++i<o)&&!1!==r(a[i],i,a););return n}}(i)},2619:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e,n,r){for(var o=t.length,i=n+(r?1:-1);r?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},3791:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(1855),o=n(5429);const i=function(t,e){for(var n=0,i=(e=(0,r.Z)(e,t)).length;null!=t&&n<i;)t=t[(0,o.Z)(e[n++])];return n&&n==i?t:void 0}},1560:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(1059),o=n(9350);const i=function(t,e,n){var i=e(t);return(0,o.Z)(t)?i:(0,r.Z)(i,n(t))}},5389:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(2619);const o=function(t){return t!=t};const i=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1};const s=function(t,e,n){return e==e?i(t,e,n):(0,r.Z)(t,o,n)}},3246:(t,e,n)=>{"use strict";n.d(e,{Z:()=>lt});var r=n(4941);const o=function(){this.__data__=new r.Z,this.size=0};const i=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n};const s=function(t){return this.__data__.get(t)};const a=function(t){return this.__data__.has(t)};var c=n(6686),l=n(2990);const u=function(t,e){var n=this.__data__;if(n instanceof r.Z){var o=n.__data__;if(!c.Z||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new l.Z(o)}return n.set(t,e),this.size=n.size,this};function d(t){var e=this.__data__=new r.Z(t);this.size=e.size}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=s,d.prototype.has=a,d.prototype.set=u;const p=d;const h=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const f=function(t){return this.__data__.has(t)};function m(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new l.Z;++e<n;)this.add(t[e])}m.prototype.add=m.prototype.push=h,m.prototype.has=f;const v=m;const g=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1};const y=function(t,e){return t.has(e)};const w=function(t,e,n,r,o,i){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=i.get(t);if(l&&i.get(e))return l==e;var u=-1,d=!0,p=2&n?new v:void 0;for(i.set(t,e),i.set(e,t);++u<a;){var h=t[u],f=e[u];if(r)var m=s?r(f,h,u,e,t,i):r(h,f,u,t,e,i);if(void 0!==m){if(m)continue;d=!1;break}if(p){if(!g(e,(function(t,e){if(!y(p,e)&&(h===t||o(h,t,n,r,i)))return p.push(e)}))){d=!1;break}}else if(h!==f&&!o(h,f,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d};var b=n(5876);const x=n(6169).Z.Uint8Array;var C=n(2373),k=n(924),S=n(9679),_=b.Z?b.Z.prototype:void 0,M=_?_.valueOf:void 0;const O=function(t,e,n,r,o,i,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new x(t),new x(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,C.Z)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=k.Z;case"[object Set]":var c=1&r;if(a||(a=S.Z),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var u=w(a(t),a(e),r,o,i,s);return s.delete(t),u;case"[object Symbol]":if(M)return M.call(t)==M.call(e)}return!1};var E=n(1560),N=n(8479),T=n(8130);const A=function(t){return(0,E.Z)(t,T.Z,N.Z)};var D=Object.prototype.hasOwnProperty;const P=function(t,e,n,r,o,i){var s=1&n,a=A(t),c=a.length;if(c!=A(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:D.call(e,u)))return!1}var d=i.get(t);if(d&&i.get(e))return d==e;var p=!0;i.set(t,e),i.set(e,t);for(var h=s;++l<c;){var f=t[u=a[l]],m=e[u];if(r)var v=s?r(m,f,u,e,t,i):r(f,m,u,t,e,i);if(!(void 0===v?f===m||o(f,m,n,r,i):v)){p=!1;break}h||(h="constructor"==u)}if(p&&!h){var g=t.constructor,y=e.constructor;g==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(p=!1)}return i.delete(t),i.delete(e),p};var R=n(7262),I=n(9350),B=n(9710),$=n(760),z="[object Arguments]",F="[object Array]",V="[object Object]",j=Object.prototype.hasOwnProperty;const L=function(t,e,n,r,o,i){var s=(0,I.Z)(t),a=(0,I.Z)(e),c=s?F:(0,R.Z)(t),l=a?F:(0,R.Z)(e),u=(c=c==z?V:c)==V,d=(l=l==z?V:l)==V,h=c==l;if(h&&(0,B.Z)(t)){if(!(0,B.Z)(e))return!1;s=!0,u=!1}if(h&&!u)return i||(i=new p),s||(0,$.Z)(t)?w(t,e,n,r,o,i):O(t,e,c,n,r,o,i);if(!(1&n)){var f=u&&j.call(t,"__wrapped__"),m=d&&j.call(e,"__wrapped__");if(f||m){var v=f?t.value():t,g=m?e.value():e;return i||(i=new p),o(v,g,n,r,i)}}return!!h&&(i||(i=new p),P(t,e,n,r,o,i))};var Z=n(3195);const H=function t(e,n,r,o,i){return e===n||(null==e||null==n||!(0,Z.Z)(e)&&!(0,Z.Z)(n)?e!=e&&n!=n:L(e,n,r,o,t,i))};const W=function(t,e,n,r){var o=n.length,i=o,s=!r;if(null==t)return!i;for(t=Object(t);o--;){var a=n[o];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++o<i;){var c=(a=n[o])[0],l=t[c],u=a[1];if(s&&a[2]){if(void 0===l&&!(c in t))return!1}else{var d=new p;if(r)var h=r(l,u,c,t,e,d);if(!(void 0===h?H(u,l,3,r,d):h))return!1}}return!0};var K=n(9122);const U=function(t){return t==t&&!(0,K.Z)(t)};const J=function(t){for(var e=(0,T.Z)(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,U(o)]}return e};const q=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}};const G=function(t){var e=J(t);return 1==e.length&&e[0][2]?q(e[0][0],e[0][1]):function(n){return n===t||W(n,t,e)}};var Y=n(7398);const X=function(t,e){return null!=t&&e in Object(t)};var Q=n(7754);const tt=function(t,e){return null!=t&&(0,Q.Z)(t,e,X)};var et=n(8633),nt=n(5429);const rt=function(t,e){return(0,et.Z)(t)&&U(e)?q((0,nt.Z)(t),e):function(n){var r=(0,Y.Z)(n,t);return void 0===r&&r===e?tt(n,t):H(e,r,3)}};var ot=n(3305);const it=function(t){return function(e){return null==e?void 0:e[t]}};var st=n(3791);const at=function(t){return function(e){return(0,st.Z)(e,t)}};const ct=function(t){return(0,et.Z)(t)?it((0,nt.Z)(t)):at(t)};const lt=function(t){return"function"==typeof t?t:null==t?ot.Z:"object"==typeof t?(0,I.Z)(t)?rt(t[0],t[1]):G(t):ct(t)}},9169:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(9794);const o=(0,n(4012).Z)(Object.keys,Object);var i=Object.prototype.hasOwnProperty;const s=function(t){if(!(0,r.Z)(t))return o(t);var e=[];for(var n in Object(t))i.call(t,n)&&"constructor"!=n&&e.push(n);return e}},2029:(t,e,n)=>{"use strict";n.d(e,{Z:()=>h});var r=n(570);const o=function(){try{var t=(0,r.Z)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const i=function(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var s=n(2373),a=Object.prototype.hasOwnProperty;const c=function(t,e,n){var r=t[e];a.call(t,e)&&(0,s.Z)(r,n)&&(void 0!==n||e in t)||i(t,e,n)};var l=n(1855),u=n(3564),d=n(9122),p=n(5429);const h=function(t,e,n,r){if(!(0,d.Z)(t))return t;for(var o=-1,i=(e=(0,l.Z)(e,t)).length,s=i-1,a=t;null!=a&&++o<i;){var h=(0,p.Z)(e[o]),f=n;if(o!=s){var m=a[h];void 0===(f=r?r(m,h,a):void 0)&&(f=(0,d.Z)(m)?m:(0,u.Z)(e[o+1])?[]:{})}c(a,h,f),a=a[h]}return t}},4827:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return function(e){return t(e)}}},1855:(t,e,n)=>{"use strict";n.d(e,{Z:()=>p});var r=n(9350),o=n(8633),i=n(2990);function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var s=t.apply(this,r);return n.cache=i.set(o,s)||i,s};return n.cache=new(s.Cache||i.Z),n}s.Cache=i.Z;const a=s;var c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g;const u=function(t){var e=a(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(c,(function(t,n,r,o){e.push(r?o.replace(l,"$1"):n||t)})),e}));var d=n(3633);const p=function(t,e){return(0,r.Z)(t)?t:(0,o.Z)(t,e)?[t]:u((0,d.Z)(t))}},570:(t,e,n)=>{"use strict";n.d(e,{Z:()=>y});var r=n(5069);const o=n(6169).Z["__core-js_shared__"];var i,s=(i=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";const a=function(t){return!!s&&s in t};var c=n(9122),l=n(8723),u=/^\[object .+?Constructor\]$/,d=Function.prototype,p=Object.prototype,h=d.toString,f=p.hasOwnProperty,m=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const v=function(t){return!(!(0,c.Z)(t)||a(t))&&((0,r.Z)(t)?m:u).test((0,l.Z)(t))};const g=function(t,e){return null==t?void 0:t[e]};const y=function(t,e){var n=g(t,e);return v(n)?n:void 0}},8479:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(4513),o=n(9756),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const a=s?function(t){return null==t?[]:(t=Object(t),(0,r.Z)(s(t),(function(e){return i.call(t,e)})))}:o.Z},7262:(t,e,n)=>{"use strict";n.d(e,{Z:()=>k});var r=n(570),o=n(6169);const i=(0,r.Z)(o.Z,"DataView");var s=n(6686);const a=(0,r.Z)(o.Z,"Promise");const c=(0,r.Z)(o.Z,"Set");const l=(0,r.Z)(o.Z,"WeakMap");var u=n(6818),d=n(8723),p="[object Map]",h="[object Promise]",f="[object Set]",m="[object WeakMap]",v="[object DataView]",g=(0,d.Z)(i),y=(0,d.Z)(s.Z),w=(0,d.Z)(a),b=(0,d.Z)(c),x=(0,d.Z)(l),C=u.Z;(i&&C(new i(new ArrayBuffer(1)))!=v||s.Z&&C(new s.Z)!=p||a&&C(a.resolve())!=h||c&&C(new c)!=f||l&&C(new l)!=m)&&(C=function(t){var e=(0,u.Z)(t),n="[object Object]"==e?t.constructor:void 0,r=n?(0,d.Z)(n):"";if(r)switch(r){case g:return v;case y:return p;case w:return h;case b:return f;case x:return m}return e});const k=C},7754:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(1855),o=n(6986),i=n(9350),s=n(3564),a=n(523),c=n(5429);const l=function(t,e,n){for(var l=-1,u=(e=(0,r.Z)(e,t)).length,d=!1;++l<u;){var p=(0,c.Z)(e[l]);if(!(d=null!=t&&n(t,p)))break;t=t[p]}return d||++l!=u?d:!!(u=null==t?0:t.length)&&(0,a.Z)(u)&&(0,s.Z)(p,u)&&((0,i.Z)(t)||(0,o.Z)(t))}},3564:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=/^(?:0|[1-9]\d*)$/;const o=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},8633:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(9350),o=n(7828),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;const a=function(t,e){if((0,r.Z)(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!(0,o.Z)(t))||(s.test(t)||!i.test(t)||null!=e&&t in Object(e))}},9794:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=Object.prototype;const o=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},924:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},9730:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var r=n(8277);t=n.hmd(t);var o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&t&&!t.nodeType&&t,s=i&&i.exports===o&&r.Z.process;const a=function(){try{var t=i&&i.require&&i.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}()},4012:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){return function(n){return t(e(n))}}},9679:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},5429:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(7828);const o=function(t){if("string"==typeof t||(0,r.Z)(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}},8723:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=Function.prototype.toString;const o=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},6152:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(9122),o=n(6169);const i=function(){return o.Z.Date.now()};var s=n(7422),a=Math.max,c=Math.min;const l=function(t,e,n){var o,l,u,d,p,h,f=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var n=o,r=l;return o=l=void 0,f=e,d=t.apply(r,n)}function w(t){return f=t,p=setTimeout(x,e),m?y(t):d}function b(t){var n=t-h;return void 0===h||n>=e||n<0||v&&t-f>=u}function x(){var t=i();if(b(t))return C(t);p=setTimeout(x,function(t){var n=e-(t-h);return v?c(n,u-(t-f)):n}(t))}function C(t){return p=void 0,g&&o?y(t):(o=l=void 0,d)}function k(){var t=i(),n=b(t);if(o=arguments,l=this,h=t,n){if(void 0===p)return w(h);if(v)return clearTimeout(p),p=setTimeout(x,e),y(h)}return void 0===p&&(p=setTimeout(x,e)),d}return e=(0,s.Z)(e)||0,(0,r.Z)(n)&&(m=!!n.leading,u=(v="maxWait"in n)?a((0,s.Z)(n.maxWait)||0,e):u,g="trailing"in n?!!n.trailing:g),k.cancel=function(){void 0!==p&&clearTimeout(p),f=0,o=h=l=p=void 0},k.flush=function(){return void 0===p?d:C(i())},k}},2373:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t,e){return t===e||t!=t&&e!=e}},8438:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(3246),o=n(5710),i=n(8130);const s=function(t){return function(e,n,s){var a=Object(e);if(!(0,o.Z)(e)){var c=(0,r.Z)(n,3);e=(0,i.Z)(e),n=function(t){return c(a[t],t,a)}}var l=t(e,n,s);return l>-1?a[c?e[l]:l]:void 0}};var a=n(2619),c=n(2758),l=Math.max;const u=s((function(t,e,n){var o=null==t?0:t.length;if(!o)return-1;var i=null==n?0:(0,c.Z)(n);return i<0&&(i=l(o+i,0)),(0,a.Z)(t,(0,r.Z)(e,3),i)}))},7398:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(3791);const o=function(t,e,n){var o=null==t?void 0:(0,r.Z)(t,e);return void 0===o?n:o}},3305:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return t}},6986:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(6818),o=n(3195);const i=function(t){return(0,o.Z)(t)&&"[object Arguments]"==(0,r.Z)(t)};var s=Object.prototype,a=s.hasOwnProperty,c=s.propertyIsEnumerable;const l=i(function(){return arguments}())?i:function(t){return(0,o.Z)(t)&&a.call(t,"callee")&&!c.call(t,"callee")}},5710:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(5069),o=n(523);const i=function(t){return null!=t&&(0,o.Z)(t.length)&&!(0,r.Z)(t)}},9710:(t,e,n)=>{"use strict";n.d(e,{Z:()=>c});var r=n(6169);const o=function(){return!1};t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=i&&t&&!t.nodeType&&t,a=s&&s.exports===i?r.Z.Buffer:void 0;const c=(a?a.isBuffer:void 0)||o},5069:(t,e,n)=>{"use strict";n.d(e,{Z:()=>i});var r=n(6818),o=n(9122);const i=function(t){if(!(0,o.Z)(t))return!1;var e=(0,r.Z)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},523:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5288:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(t){return null==t}},760:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var r=n(6818),o=n(523),i=n(3195),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;const a=function(t){return(0,i.Z)(t)&&(0,o.Z)(t.length)&&!!s[(0,r.Z)(t)]};var c=n(4827),l=n(9730),u=l.Z&&l.Z.isTypedArray;const d=u?(0,c.Z)(u):a},8130:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(918),o=n(9169),i=n(5710);const s=function(t){return(0,i.Z)(t)?(0,r.Z)(t):(0,o.Z)(t)}},7684:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(2029);const o=function(t,e,n){return null==t?t:(0,r.Z)(t,e,n)}},9756:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=function(){return[]}},8325:(t,e,n)=>{"use strict";n.d(e,{Z:()=>d});var r=n(3503),o=n(6581),i=n(5389);const s=function(t,e){for(var n=t.length;n--&&(0,i.Z)(e,t[n],0)>-1;);return n};const a=function(t,e){for(var n=-1,r=t.length;++n<r&&(0,i.Z)(e,t[n],0)>-1;);return n};var c=n(945),l=n(3633),u=/^\s+|\s+$/g;const d=function(t,e,n){if((t=(0,l.Z)(t))&&(n||void 0===e))return t.replace(u,"");if(!t||!(e=(0,r.Z)(e)))return t;var i=(0,c.Z)(t),d=(0,c.Z)(e),p=a(i,d),h=s(i,d)+1;return(0,o.Z)(i,p,h).join("")}},6470:(t,e,n)=>{"use strict";var r=n(7802),o=n(1102);a.prototype.addText=function(t){var e,n,r=this.stack;if(""===t)return;e=r[r.length-1],(n=e.children[e.children.length-1])&&"text"===n.type?n.value+=t:e.children.push({type:"text",value:t})},a.prototype.addKeyword=function(t,e){this.openNode(e),this.addText(t),this.closeNode()},a.prototype.addSublanguage=function(t,e){var n=this.stack,r=n[n.length-1],o=t.rootNode.children,i=e?{type:"element",tagName:"span",properties:{className:[e]},children:o}:o;r.children=r.children.concat(i)},a.prototype.openNode=function(t){var e=this.stack,n=this.options.classPrefix+t,r=e[e.length-1],o={type:"element",tagName:"span",properties:{className:[n]},children:[]};r.children.push(o),e.push(o)},a.prototype.closeNode=function(){this.stack.pop()},a.prototype.closeAllNodes=c,a.prototype.finalize=c,a.prototype.toHTML=function(){return""};var i="hljs-";function s(t,e,n){var s,c=r.configure({}),l=(n||{}).prefix;if("string"!=typeof t)throw o("Expected `string` for name, got `%s`",t);if(!r.getLanguage(t))throw o("Unknown language: `%s` is not registered",t);if("string"!=typeof e)throw o("Expected `string` for value, got `%s`",e);if(null==l&&(l=i),r.configure({__emitter:a,classPrefix:l}),s=r.highlight(t,e,!0),r.configure(c||{}),s.errorRaised)throw s.errorRaised;return{relevance:s.relevance,language:s.language,value:s.emitter.rootNode.children}}function a(t){this.options=t,this.rootNode={children:[]},this.stack=[this.rootNode]}function c(){}},2778:(t,e,n)=>{"use strict";n.d(e,{YR:()=>S,QF:()=>y,uo:()=>p,xb:()=>u,uJ:()=>v,w9:()=>g,ym:()=>m});var r=n(1081),o=n(8638),i=n(6922);function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function c(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function l(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function u(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&(0,r.k9)(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function d(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function p(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=d(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var l=r.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(i.Selection.near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0}function h(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof i.NodeSelection&&t.selection.node.isBlock)return!(!s.parentOffset||!(0,r.Ax)(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var c=a.parentOffset==a.parent.content.size,l=t.tr;t.selection instanceof i.TextSelection&&l.deleteSelection();var u=0==s.depth?null:d(s.node(-1).contentMatchAt(s.indexAfter(-1))),p=c&&u?[{type:u}]:null,h=(0,r.Ax)(l.doc,l.mapping.map(s.pos),1,p);p||h||!(0,r.Ax)(l.doc,l.mapping.map(s.pos),1,u&&[{type:u}])||(p=[{type:u}],h=!0),h&&(l.split(l.mapping.map(s.pos),1,p),c||s.parentOffset||s.parent.type==u||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o.Fragment.from(u.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),u)),e(l.scrollIntoView())}return!0}function f(t,e,n){var s,a,c=e.nodeBefore,l=e.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(function(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!(!(o&&i&&o.type.compatibleContent(i.type))||(!o.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(s,s+1)||!i.isTextblock&&!(0,r.Mn)(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var u=e.pos+l.nodeSize,d=o.Fragment.empty,p=s.length-1;p>=0;p--)d=o.Fragment.from(s[p].create(null,d));d=o.Fragment.from(c.copy(d));var h=t.tr.step(new r.FC(e.pos-1,u,e.pos,u,new o.Slice(d,1,0),s.length,!0)),f=u+2*s.length;(0,r.Mn)(h.doc,f)&&h.join(f),n(h.scrollIntoView())}return!0}var m=i.Selection.findFrom(e,1),v=m&&m.$from.blockRange(m.$to),g=v&&(0,r.k9)(v);return null!=g&&g>=e.depth&&(n&&n(t.tr.lift(v,g).scrollIntoView()),!0)}function m(t,e){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),l=c&&(0,r.nd)(c,t,e);return!!l&&(o&&o(n.tr.wrap(c,l).scrollIntoView()),!0)}}function v(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}}function g(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,l=n.tr,u=0;!c&&u<a.length;u++){var d=a[u],p=d.$from,h=d.$to;c=n.doc.rangeHasMark(p.pos,h.pos,t)}for(var f=0;f<a.length;f++){var m=a[f],v=m.$from,g=m.$to;c?l.removeMark(v.pos,g.pos,t):l.addMark(v.pos,g.pos,t.create(e))}r(l.scrollIntoView())}return!0}}function y(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var w=y(s,(function(t,e,n){var o=t.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;var s=c(o);if(!s){var l=o.blockRange(),u=l&&(0,r.k9)(l);return null!=u&&(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}var d=s.nodeBefore;if(!d.type.spec.isolating&&f(t,s,e))return!0;if(0==o.parent.content.size&&(a(d,"end")||i.NodeSelection.isSelectable(d))){if(e){var p=t.tr.deleteRange(o.before(),o.after());p.setSelection(a(d,"end")?i.Selection.findFrom(p.doc.resolve(p.mapping.map(s.pos,-1)),-1):i.NodeSelection.create(p.doc,s.pos-d.nodeSize)),e(p.scrollIntoView())}return!0}return!(!d.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos-d.nodeSize,s.pos).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;s=c(o)}var a=s&&s.nodeBefore;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos-a.nodeSize)).scrollIntoView()),!0)})),b=y(s,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=l(r);if(!o)return!1;var s=o.nodeAfter;if(f(t,o,e))return!0;if(0==r.parent.content.size&&(a(s,"start")||i.NodeSelection.isSelectable(s))){if(e){var c=t.tr.deleteRange(r.before(),r.after());c.setSelection(a(s,"start")?i.Selection.findFrom(c.doc.resolve(c.mapping.map(o.pos)),1):i.NodeSelection.create(c.doc,c.mapping.map(o.pos))),e(c.scrollIntoView())}return!0}return!(!s.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,s=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;s=l(o)}var a=s&&s.nodeAfter;return!(!a||!i.NodeSelection.isSelectable(a))&&(e&&e(t.tr.setSelection(i.NodeSelection.create(t.doc,s.pos)).scrollIntoView()),!0)})),x={Enter:y((function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=d(r.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(i.TextSelection.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if((0,r.Ax)(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),s=i&&(0,r.k9)(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}),h),"Mod-Enter":p,Backspace:w,"Mod-Backspace":w,Delete:b,"Mod-Delete":b,"Mod-a":function(t,e){return e&&e(t.tr.setSelection(new i.AllSelection(t.doc))),!0}},C={"Ctrl-h":x.Backspace,"Alt-Backspace":x["Mod-Backspace"],"Ctrl-d":x.Delete,"Ctrl-Alt-Backspace":x["Mod-Delete"],"Alt-Delete":x["Mod-Delete"],"Alt-d":x["Mod-Delete"]};for(var k in x)C[k]=x[k];var S=("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform())?C:x},896:(t,e,n)=>{"use strict";n.d(e,{VK:()=>i,Hw:()=>s,zK:()=>u,dU:()=>c,S0:()=>l});var r=n(6922),o=n(1081),i=function(t,e){var n;this.match=t,this.handler="string"==typeof e?(n=e,function(t,e,r,o){var i=n;if(e[1]){var s=e[0].lastIndexOf(e[1]);i+=e[0].slice(s+e[1].length);var a=(r+=s)-o;a>0&&(i=e[0].slice(s-a,s)+i,r=o)}return t.tr.insertText(i,r,o)}):e};function s(t){var e=t.rules,n=new r.Plugin({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return a(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection.$cursor;r&&a(t,r.pos,r.pos,"",e,n)}))}}},isInputRules:!0});return n}function a(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,a=s.doc.resolve(e);if(a.parent.type.spec.code)return!1;for(var c=a.parent.textBetween(Math.max(0,a.parentOffset-500),a.parentOffset,null,"￼")+r,l=0;l<o.length;l++){var u=o[l].match.exec(c),d=u&&o[l].handler(s,u,e-(u[0].length-r.length),n);if(d)return t.dispatch(d.setMeta(i,{transform:d,from:e,to:n,text:r})),!0}return!1}function c(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var l=s.doc.resolve(i.from).marks();e(s.replaceWith(i.from,i.to,t.schema.text(i.text,l)))}return!0}}return!1}new i(/--$/,"—"),new i(/\.\.\.$/,"…"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new i(/"$/,"”"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new i(/'$/,"’");function l(t,e,n,r){return new i(t,(function(t,i,s,a){var c=n instanceof Function?n(i):n,l=t.tr.delete(s,a),u=l.doc.resolve(s).blockRange(),d=u&&(0,o.nd)(u,e,c);if(!d)return null;l.wrap(u,d);var p=l.doc.resolve(s-1).nodeBefore;return p&&p.type==e&&(0,o.Mn)(l.doc,s-1)&&(!r||r(i,p))&&l.join(s-1),l}))}function u(t,e,n){return new i(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}},4751:(t,e,n)=>{"use strict";n.d(e,{$:()=>y,h:()=>g});for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||a&&c,d=0;d<10;d++)r[48+d]=r[96+d]=String(d);for(d=1;d<=24;d++)r[d+111]="F"+d;for(d=65;d<=90;d++)r[d]=String.fromCharCode(d+32),o[d]=String.fromCharCode(d);for(var p in r)o.hasOwnProperty(p)||(o[p]=r[p]);var h=n(6922),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function m(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);f?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function v(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function g(t){return new h.Plugin({props:{handleKeyDown:y(t)}})}function y(t){var e=function(t){var e=Object.create(null);for(var n in t)e[m(n)]=t[n];return e}(t);return function(t,n){var i,a=function(t){var e=!(u&&(t.ctrlKey||t.altKey||t.metaKey)||(s||l)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),c=1==a.length&&" "!=a,d=e[v(a,n,!c)];if(d&&d(t.state,t.dispatch,t))return!0;if(c&&(n.shiftKey||n.altKey||n.metaKey||a.charCodeAt(0)>127)&&(i=r[n.keyCode])&&i!=a){var p=e[v(i,n,!0)];if(p&&p(t.state,t.dispatch,t))return!0}else if(c&&n.shiftKey){var h=e[v(a,n,!0)];if(h&&h(t.state,t.dispatch,t))return!0}return!1}}},8638:(t,e,n)=>{"use strict";function r(t){this.content=t}n.r(e),n.d(e,{ContentMatch:()=>F,DOMParser:()=>st,DOMSerializer:()=>yt,Fragment:()=>a,Mark:()=>p,MarkType:()=>rt,Node:()=>I,NodeRange:()=>D,NodeType:()=>Q,ReplaceError:()=>h,ResolvedPos:()=>O,Schema:()=>ot,Slice:()=>f}),r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=r.from(t)).size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=r.from(t)).size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};const o=r;function i(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),s=e.child(r);if(o!=s){if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)n++;return n}if(o.content.size||s.content.size){var c=i(o.content,s.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function s(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),c=e.child(--i),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){for(var u=0,d=Math.min(a.text.length,c.text.length);u<d&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var p=s(a.content,c.content,n-1,r-1);if(p)return p}n-=l,r-=l}else n-=l,r-=l}}var a=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},c={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};a.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},a.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},a.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},a.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new a(r,this.size+t.size)},a.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],c=i+s.nodeSize;c>t&&((i<t||c>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=c}return new a(n,r)},a.prototype.cutByIndex=function(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))},a.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,o)},a.prototype.addToStart=function(t){return new a([t].concat(this.content),this.size+t.nodeSize)},a.prototype.addToEnd=function(t){return new a(this.content.concat(t),this.size+t.nodeSize)},a.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},c.firstChild.get=function(){return this.content.length?this.content[0]:null},c.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},c.childCount.get=function(){return this.content.length},a.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},a.prototype.maybeChild=function(t){return this.content[t]},a.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},a.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),i(this,t,e)},a.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),s(this,t,e,n)},a.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return u(0,t);if(t==this.size)return u(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=r+this.child(n).nodeSize;if(o>=t)return o==t||e>0?u(n+1,o):u(n,r);r=o}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},a.fromJSON=function(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))},a.fromArray=function(t){if(!t.length)return a.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new a(e||t,n)},a.from=function(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(a.prototype,c);var l={index:0,offset:0};function u(t,e){return l.index=t,l.offset=e,l}function d(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!d(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!d(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}a.empty=new a([],0);var p=function(t,e){this.type=t,this.attrs=e};function h(t){var e=Error.call(this,t);return e.__proto__=h.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&d(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},p.none=[],h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="ReplaceError";var f=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},m={size:{configurable:!0}};function v(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(v(s.content,e-i-1,n-i-1)))}function g(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=g(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function y(t,e,n){if(n.openStart>t.depth)throw new h("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new h("Inconsistent open depths");return w(t,e,n,0)}function w(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=w(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var c=function(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(a.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return S(i,_(t,c.start,c.end,e,r))}var l=t.parent,u=l.content;return S(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}return S(i,M(t,e,r))}function b(t,e){if(!e.type.compatibleContent(t.type))throw new h("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return b(r,e.node(n)),r}function C(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(C(t.nodeAfter,r),i++));for(var a=i;a<s;a++)C(o.child(a),r);e&&e.depth==n&&e.textOffset&&C(e.nodeBefore,r)}function S(t,e){if(!t.type.validContent(e))throw new h("Invalid content for node "+t.type.name);return t.copy(e)}function _(t,e,n,r,o){var i=t.depth>o&&x(t,e,o+1),s=r.depth>o&&x(n,r,o+1),c=[];return k(null,t,o,c),i&&s&&e.index(o)==n.index(o)?(b(i,s),C(S(i,_(t,e,n,r,o+1)),c)):(i&&C(S(i,M(t,e,o+1)),c),k(e,n,o,c),s&&C(S(s,M(n,r,o+1)),c)),k(r,null,o,c),new a(c)}function M(t,e,n){var r=[];(k(null,t,n,r),t.depth>n)&&C(S(x(t,e,n+1),M(t,e,n+1)),r);return k(e,null,n,r),new a(r)}m.size.get=function(){return this.content.size-this.openStart-this.openEnd},f.prototype.insertAt=function(t,e){var n=g(this.content,t+this.openStart,e,null);return n&&new f(n,this.openStart,this.openEnd)},f.prototype.removeBetween=function(t,e){return new f(v(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},f.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},f.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},f.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},f.fromJSON=function(t,e){if(!e)return f.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new f(a.fromJSON(t,e.content),n,r)},f.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new f(t,n,r)},Object.defineProperties(f.prototype,m),f.empty=new f(a.empty,0,0);var O=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},E={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};O.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},O.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},O.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},O.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},O.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},O.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},O.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},O.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},E.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},O.prototype.posAtIndex=function(t,e){e=this.resolveDepth(e);for(var n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1,o=0;o<t;o++)r+=n.child(o).nodeSize;return r},O.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},O.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},O.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},O.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new D(this,t,n)},O.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},O.prototype.max=function(t){return t.pos>this.pos?t:this},O.prototype.min=function(t){return t.pos<this.pos?t:this},O.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},O.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if((i=i.child(a)).isText)break;o=l-1,r+=c+1}return new O(e,n,o)},O.resolveCached=function(t,e){for(var n=0;n<N.length;n++){var r=N[n];if(r.pos==e&&r.doc==t)return r}var o=N[T]=O.resolve(t,e);return T=(T+1)%A,o},Object.defineProperties(O.prototype,E);var N=[],T=0,A=12,D=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},P={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};P.start.get=function(){return this.$from.before(this.depth+1)},P.end.get=function(){return this.$to.after(this.depth+1)},P.parent.get=function(){return this.$from.node(this.depth)},P.startIndex.get=function(){return this.$from.index(this.depth)},P.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(D.prototype,P);var R=Object.create(null),I=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||a.empty,this.marks=r||p.none},B={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};B.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},B.childCount.get=function(){return this.content.childCount},I.prototype.child=function(t){return this.content.child(t)},I.prototype.maybeChild=function(t){return this.content.maybeChild(t)},I.prototype.forEach=function(t){this.content.forEach(t)},I.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},I.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},B.textContent.get=function(){return this.textBetween(0,this.content.size,"")},I.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},B.firstChild.get=function(){return this.content.firstChild},B.lastChild.get=function(){return this.content.lastChild},I.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},I.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},I.prototype.hasMarkup=function(t,e,n){return this.type==t&&d(this.attrs,e||t.defaultAttrs||R)&&p.sameSet(this.marks,n||p.none)},I.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},I.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},I.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},I.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return f.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i).content.cut(r.pos-s,o.pos-s);return new f(a,r.depth-i,o.depth-i)},I.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},I.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},I.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},I.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},I.prototype.resolve=function(t){return O.resolveCached(this,t)},I.prototype.resolveNoCache=function(t){return O.resolve(this,t)},I.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},B.isBlock.get=function(){return this.type.isBlock},B.isTextblock.get=function(){return this.type.isTextblock},B.inlineContent.get=function(){return this.type.inlineContent},B.isInline.get=function(){return this.type.isInline},B.isText.get=function(){return this.type.isText},B.isLeaf.get=function(){return this.type.isLeaf},B.isAtom.get=function(){return this.type.isAtom},I.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),z(this.marks,t)},I.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},I.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=a.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},I.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},I.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},I.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},I.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},I.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(I.prototype,B);var $=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(I);function z(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var F=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},V={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};F.parse=function(t,e){var n=new j(t,e);if(null==n.next)return F.empty;var r=Z(n);n.next&&n.err("Unexpected trailing text");var o=function(t){var e=Object.create(null);return n(q(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];q(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new F(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(J);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}(function(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,d=0;d<t.min;d++){var p=n();o(i(t.expr,u),p),u=p}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var f=n();r(u,f),o(i(t.expr,u),f),u=f}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}(r));return function(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,n),o},F.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},F.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},V.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},V.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},F.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},F.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(i,s){var c=i.matchFragment(t,n);if(c&&(!e||c.validEnd))return a.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var u=i.next[l],d=i.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(d)){r.push(d);var p=o(d,s.concat(u));if(p)return p}}}(this,[])},F.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},F.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},V.edgeCount.get=function(){return this.next.length>>1},F.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},F.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(F.prototype,V),F.empty=new F(!0);var j=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},L={next:{configurable:!0}};function Z(t){var e=[];do{e.push(H(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function H(t){var e=[];do{e.push(W(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function W(t){for(var e=function(t){if(t.eat("(")){var e=Z(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=function(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}0==o.length&&t.err("No node type or group '"+e+"' found");return o}(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=U(t,e)}return e}function K(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function U(t,e){var n=K(t),r=n;return t.eat(",")&&(r="}"!=t.next?K(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function J(t,e){return e-t}function q(t,e){var n=[];return function e(r){var o=t[r];if(1==o.length&&!o[0].term)return e(o[0].to);n.push(r);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||e(c)}}(e),n.sort(J)}function G(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Y(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function X(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new et(t[n]);return e}L.next.get=function(){return this.tokens[this.pos]},j.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},j.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(j.prototype,L);var Q=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=X(n.attrs),this.defaultAttrs=G(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},tt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};tt.isInline.get=function(){return!this.isBlock},tt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},tt.isLeaf.get=function(){return this.contentMatch==F.empty},tt.isAtom.get=function(){return this.isLeaf||this.spec.atom},Q.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},Q.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},Q.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:Y(this.attrs,t)},Q.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(t),a.from(e),p.setFrom(n))},Q.prototype.createChecked=function(t,e,n){if(e=a.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new I(this,this.computeAttrs(t),e,p.setFrom(n))},Q.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=a.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(a.empty,!0);return o?new I(this,t,e.append(o),p.setFrom(n)):null},Q.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},Q.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},Q.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},Q.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},Q.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new Q(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(Q.prototype,tt);var et=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},nt={isRequired:{configurable:!0}};nt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(et.prototype,nt);var rt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=X(r.attrs),this.rank=e,this.excluded=null;var o=G(this.attrs);this.instance=o&&new p(this,o)};rt.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,Y(this.attrs,t))},rt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new rt(t,r++,e,o)})),n},rt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},rt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},rt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var ot=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o.from(t.nodes),this.spec.marks=o.from(t.marks),this.nodes=Q.compile(this.spec.nodes,this),this.marks=rt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=F.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?it(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:it(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function it(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}ot.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Q))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},ot.prototype.text=function(t,e){var n=this.nodes.text;return new $(n,n.defaultAttrs,t,p.setFrom(e))},ot.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},ot.prototype.nodeFromJSON=function(t){return I.fromJSON(this,t)},ot.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},ot.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var st=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};st.prototype.parse=function(t,e){void 0===e&&(e={});var n=new pt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},st.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new pt(this,e,!0);return n.addAll(t,null,e.from,e.to),f.maxOpen(n.finish())},st.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(ft(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},st.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},st.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r];if((null==o.priority?50:o.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=mt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i;for(var s in t.nodes)i=void 0,(i=t.nodes[s].spec.parseDOM)&&i.forEach((function(t){n(t=mt(t)),t.node=s}));return e},st.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new st(t,st.schemaRules(t)))};var at={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ct={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},lt={ol:!0,ul:!0};function ut(t){return(t?1:0)|("full"===t?2:0)}var dt=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(4&s?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=p.none,this.pendingMarks=r,this.stashMarks=[]};dt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(a.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},dt.prototype.finish=function(t){if(!(1&this.options)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=a.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},dt.prototype.popFromStashMark=function(t){for(var e=this.stashMarks.length-1;e>=0;e--)if(this.stashMarks[e].type==t)return this.stashMarks.splice(e,1)[0]},dt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];if((this.type?this.type.allowsMarkType(r.type):vt(r.type,t))&&!r.isInSet(this.activeMarks)){var o=gt(r,this.activeMarks);o&&this.stashMarks.push(o),this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks)}}};var pt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=ut(e.preserveWhitespace)|(n?4:0);r=o?new dt(o.type,o.attrs,p.none,p.none,!0,e.topMatch||o.type.contentMatch,i):new dt(n?null:t.schema.topNodeType,null,p.none,p.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},ht={top:{configurable:!0},currentPos:{configurable:!0}};function ft(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function mt(t){var e={};for(var n in t)e[n]=t[n];return e}function vt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}function gt(t,e){for(var n=0;n<e.length;n++)if(t.type==e[n].type)return e[n]}ht.top.get=function(){return this.nodes[this.open]},pt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(function(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},pt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)2&n.options||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},pt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();lt.hasOwnProperty(e)&&this.parser.normalizeLists&&function(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&lt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ct.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(at.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},pt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},pt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},pt.prototype.addElementByRule=function(t,e){var n,r,o,i=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return i.insertNode(t)}));else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),o&&this.removePendingMark(o,s)},pt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&at.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},pt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},pt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},pt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},pt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?-5&o.options:ut(r);4&o.options&&0==o.content.length&&(i|=4),this.nodes.push(new dt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},pt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},pt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},pt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},ht.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},pt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},pt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},pt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},pt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},pt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},pt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},pt.prototype.addPendingMark=function(t){var e=gt(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},pt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);var o=r.popFromStashMark(t.type);o&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==e)break}},Object.defineProperties(pt.prototype,ht);var yt=function(t,e){this.nodes=t||{},this.marks=e||{}};function wt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function bt(t){return t.document||window.document}yt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=bt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);for(var n=0,s=0;n<i.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<i.length;)o=i.pop(),i.pop();for(;s<t.marks.length;){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},yt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=yt.renderSpec(bt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},yt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},yt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&yt.renderSpec(bt(n),r(t,e))},yt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var d=c;d<e.length;d++){var p=e[d];if(0===p){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=yt.renderSpec(t,p,n),f=h.dom,m=h.contentDOM;if(s.appendChild(f),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},yt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new yt(this.nodesFromSchema(t),this.marksFromSchema(t)))},yt.nodesFromSchema=function(t){var e=wt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},yt.marksFromSchema=function(t){return wt(t.marks)}},6922:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AllSelection:()=>h,EditorState:()=>C,NodeSelection:()=>d,Plugin:()=>M,PluginKey:()=>N,Selection:()=>s,SelectionRange:()=>c,TextSelection:()=>l,Transaction:()=>g});var r=n(8638),o=n(1081),i=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r.Slice.empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,d=l.$to,p=t.mapping.slice(s);t.replaceRange(p.map(u.pos),p.map(d.pos),c?r.Slice.empty:e),0==c&&v(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),v(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new l(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?m(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):m(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return m(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},l=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),t.prototype.replace.call(this,e,n),n==r.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new u(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i||(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor).pos<r.pos!=i<0)&&(n=r),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",l);var u=function(t,e){this.anchor=t,this.head=e};u.prototype.map=function(t){return new u(t.map(this.anchor),t.map(this.head))},u.prototype.resolve=function(t){return l.between(t.resolve(this.anchor),t.resolve(this.head))};var d=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r.Slice(r.Fragment.from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new p(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);d.prototype.visible=!1,s.jsonID("node",d);var p=function(t){this.anchor=t};p.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new u(r,r):new p(r)},p.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r.Slice.empty),n==r.Slice.empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return f},e}(s);s.jsonID("all",h);var f={map:function(){return this},resolve:function(t){return new h(t)}};function m(t,e,n,r,o,i){if(e.inlineContent)return l.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&d.isSelectable(a))return d.create(t,n-(o<0?a.nodeSize:0))}else{var c=m(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function v(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i,a=t.steps[r];if(a instanceof o.Pu||a instanceof o.FC)t.mapping.maps[r].forEach((function(t,e,n,r){null==i&&(i=r)})),t.setSelection(s.near(t.doc.resolve(i),n))}}var g=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this},n.selectionSet.get=function(){return(1&this.updated)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=2,this},e.prototype.ensureMarks=function(t){return r.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(2&this.updated)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=-3&this.updated,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.Mark.none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=4,this},n.scrolledIntoView.get=function(){return(4&this.updated)>0},Object.defineProperties(e.prototype,n),e}(o.wx);function y(t,e){return e&&t?t.bind(e):t}var w=function(t,e,n){this.name=t,this.init=y(e.init,n),this.apply=y(e.apply,n)},b=[new w("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new w("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new w("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new w("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],x=function(t,e){var n=this;this.schema=t,this.fields=b.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new w(t.key,t.spec.state,t))}))},C=function(t){this.config=t},k={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};k.schema.get=function(){return this.config.schema},k.plugins.get=function(){return this.config.plugins},C.prototype.apply=function(t){return this.applyTransaction(t).state},C.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},C.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},C.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new C(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<S.length;i++)S[i](this,t,e);return e},k.tr.get=function(){return new g(this)},C.create=function(t){for(var e=new x(t.schema||t.doc.type.schema,t.plugins),n=new C(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},C.prototype.reconfigure=function(t){for(var e=new x(t.schema||this.schema,t.plugins),n=e.fields,r=new C(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},C.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},C.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new x(t.schema,t.plugins),i=new C(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r.Node.fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(i[o.name]=l.fromJSON.call(c,t,e[a],i))}i[o.name]=o.init(t,i)}})),i},C.addApplyListener=function(t){S.push(t)},C.removeApplyListener=function(t){var e=S.indexOf(t);e>-1&&S.splice(e,1)},Object.defineProperties(C.prototype,k);var S=[];function _(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=_(o,e,{})),n[r]=o}return n}var M=function(t){this.props={},t.props&&_(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:E("plugin")};M.prototype.getState=function(t){return t[this.key]};var O=Object.create(null);function E(t){return t in O?t+"$"+ ++O[t]:(O[t]=0,t+"$")}var N=function(t){void 0===t&&(t="key"),this.key=E(t)};N.prototype.get=function(t){return t.config.pluginsByKey[this.key]},N.prototype.getState=function(t){return t[this.key]}},9132:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CellSelection:()=>R,TableMap:()=>f,TableView:()=>Ot,__clipCells:()=>F,__insertCells:()=>L,__pastedCells:()=>$,addColSpan:()=>D,addColumn:()=>ot,addColumnAfter:()=>st,addColumnBefore:()=>it,addRow:()=>ut,addRowAfter:()=>pt,addRowBefore:()=>dt,cellAround:()=>x,colCount:()=>E,columnIsHeader:()=>P,columnResizing:()=>Tt,columnResizingPluginKey:()=>Nt,deleteColumn:()=>ct,deleteRow:()=>ft,deleteTable:()=>Mt,findCell:()=>O,fixTables:()=>nt,fixTablesKey:()=>tt,goToNextCell:()=>_t,handlePaste:()=>q,inSameTable:()=>M,isInTable:()=>C,mergeCells:()=>vt,moveCellForward:()=>_,nextCell:()=>N,pointsAtCell:()=>S,removeColSpan:()=>A,removeColumn:()=>at,removeRow:()=>ht,rowIsHeader:()=>lt,selectedRect:()=>rt,selectionCell:()=>k,setAttr:()=>T,setCellAttr:()=>wt,splitCell:()=>gt,splitCellWithType:()=>yt,tableEditing:()=>Bt,tableEditingKey:()=>b,tableNodeTypes:()=>w,tableNodes:()=>y,toggleHeader:()=>xt,toggleHeaderCell:()=>St,toggleHeaderColumn:()=>kt,toggleHeaderRow:()=>Ct,updateColumnsOnResize:()=>Et});var r,o,i=n(6922),s=n(8638),a=n(4751),c=n(8780),l=n(1081);if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(t){return u.get(t)},o=function(t,e){return u.set(t,e),e}}else{var d=[],p=0;r=function(t){for(var e=0;e<d.length;e+=2)if(d[e]==t)return d[e+1]},o=function(t,e){return 10==p&&(p=0),d[p++]=t,d[p++]=e}}var h=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},f=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function m(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}function v(t,e){var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in e){var a=e[s].getFromDOM,c=a&&a(t);null!=c&&(i[s]=c)}return i}function g(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function y(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return v(t,e)}}],toDOM:function(t){return["td",g(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return v(t,e)}}],toDOM:function(t){return["th",g(t,e),0]}}}}function w(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}f.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,o=e/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return new h(r,o,i,s)}}throw new RangeError("No cell with offset "+t+" found")},f.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},f.prototype.nextCell=function(t,e,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},f.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(e),c=a.left,l=a.right,u=a.top,d=a.bottom;return new h(Math.min(r,c),Math.min(i,u),Math.max(o,l),Math.max(s,d))},f.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var o=t.left;o<t.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s||e.push(s))}return e},f.prototype.positionAt=function(t,e,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==t){for(var s=e+t*this.width,a=(t+1)*this.width;s<a&&this.map[s]<o;)s++;return s==a?i-1:this.map[s]}o=i}},f.get=function(t){return r(t)||o(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=function(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var o=t.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var d=o.child(u);i+=d.attrs.colspan,d.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}(t),n=t.childCount,r=[],o=0,i=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var d=t.child(l);u++;for(var p=0;;p++){for(;o<r.length&&0!=r[o];)o++;if(p==d.childCount)break;for(var h=d.child(p),v=h.attrs,g=v.colspan,y=v.rowspan,w=v.colwidth,b=0;b<y;b++){if(b+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:y-b});break}for(var x=o+b*e,C=0;C<g;C++){0==r[x+C]?r[x+C]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:g-C});var k=w&&w[C];if(k){var S=(x+C)%e*2,_=s[S];null==_||_!=k&&1==s[S+1]?(s[S]=k,s[S+1]=1):_==k&&s[S+1]++}}}o+=g,u+=h.nodeSize}for(var M=(l+1)*e,O=0;o<M;)0==r[o++]&&O++;O&&(i||(i=[])).push({type:"missing",row:l,n:O}),u++}for(var E=new f(e,n,r,i),N=!1,T=0;!N&&T<s.length;T+=2)null!=s[T]&&s[T+1]<n&&(N=!0);N&&function(t,e,n){t.problems||(t.problems=[]);for(var r=0,o={};r<t.map.length;r++){var i=t.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,c=0;c<s.attrs.colspan;c++){var l=e[2*((r+c)%t.width)];null==l||s.attrs.colwidth&&s.attrs.colwidth[c]==l||((a||(a=m(s.attrs)))[c]=l)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}(E,s,t);return E}(t))};var b=new i.PluginKey("selectingCells");function x(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function C(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function k(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:x(e.$head)||function(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(i-o.nodeSize)}}(e.$head)}function S(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function _(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function M(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function O(t){return f.get(t.node(-1)).findCell(t.pos-t.start(-1))}function E(t){return f.get(t.node(-1)).colCount(t.pos-t.start(-1))}function N(t,e,n){var r=t.start(-1),o=f.get(t.node(-1)).nextCell(t.pos-r,e,n);return null==o?null:t.node(0).resolve(r+o)}function T(t,e,n){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r}function A(t,e,n){void 0===n&&(n=1);var r=T(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function D(t,e,n){void 0===n&&(n=1);var r=T(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}function P(t,e,n){for(var r=w(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}var R=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),o=f.get(r),s=e.start(-1),a=o.rectBetween(e.pos-s,n.pos-s),c=e.node(0),l=o.cellsInRect(a).filter((function(t){return t!=n.pos-s}));l.unshift(n.pos-s);var u=l.map((function(t){var e=r.nodeAt(t),n=t+s+1;return new i.SelectionRange(c.resolve(n),c.resolve(n+e.content.size))}));t.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(S(r)&&S(o)&&M(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?e.rowSelection(r,o):s&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return i.TextSelection.between(r,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=f.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var c=[],l=a*e.width+r.left,u=r.left;u<r.right;u++,l++){var d=e.map[l];if(!o[d]){o[d]=!0;var p=e.findCell(d),h=t.nodeAt(d),m=r.left-p.left,v=p.right-r.right;if(m>0||v>0){var g=h.attrs;m>0&&(g=A(g,0,m)),v>0&&(g=A(g,g.colspan-v,v)),h=p.left<r.left?h.type.createAndFill(g):h.type.create(g,h.content)}if(p.top<r.top||p.bottom>r.bottom){var y=T(h.attrs,"rowspan",Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top));h=p.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}c.push(h)}}i.push(t.child(a).copy(s.Fragment.from(c)))}var w=this.isColSelection()&&this.isRowSelection()?t:i;return new s.Slice(s.Fragment.from(w),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=s.Slice.empty);for(var r=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var a=o[i],c=a.$from,l=a.$to,u=e.mapping.slice(r);e.replace(u.map(c.pos),u.map(l.pos),i?s.Slice.empty:n)}var d=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);d&&e.setSelection(d)},e.prototype.replaceWith=function(t,e){this.replace(t,new s.Slice(s.Fragment.from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=f.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=f.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=f.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new I(this.$anchorCell.pos,this.$headCell.pos)},e}(i.Selection);R.prototype.visible=!1,i.Selection.jsonID("cell",R);var I=function(t,e){this.anchor=t,this.head=e};function B(t){if(!(t.selection instanceof R))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(c.p.node(n,n+t.nodeSize,{class:"selectedCell"}))})),c.EH.create(t.doc,e)}function $(t){if(!t.size)return null;for(var e=t.content,n=t.openStart,r=t.openEnd;1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole);)n--,r--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,a=o.type.schema,c=[];if("row"==i)for(var l=0;l<e.childCount;l++){var u=e.child(l).content,d=l?0:Math.max(0,n-1),p=l<e.childCount-1?0:Math.max(0,r-1);(d||p)&&(u=z(w(a).row,new s.Slice(u,d,p)).content),c.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;c.push(n||r?z(w(a).row,new s.Slice(e,n,r)).content:e)}return function(t,e){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,c=a.rowspan,l=a.colspan,u=r;u<r+c;u++)n[u]=(n[u]||0)+l;for(var d=0,p=0;p<n.length;p++)d=Math.max(d,n[p]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(s.Fragment.empty),n[h]<d){for(var f=w(t).cell.createAndFill(),m=[],v=n[h];v<d;v++)m.push(f);e[h]=e[h].append(s.Fragment.from(m))}return{height:e.length,width:d,rows:e}}(a,c)}function z(t,e){var n=t.createAndFill();return new l.wx(n).replace(0,n.content.size,e).doc}function F(t,e,n){var r=t.width,o=t.height,i=t.rows;if(r!=e){for(var a=[],c=[],l=0;l<i.length;l++){for(var u=i[l],d=[],p=a[l]||0,h=0;p<e;h++){var f=u.child(h%u.childCount);p+f.attrs.colspan>e&&(f=f.type.create(A(f.attrs,f.attrs.colspan,p+f.attrs.colspan-e),f.content)),d.push(f),p+=f.attrs.colspan;for(var m=1;m<f.attrs.rowspan;m++)a[l+m]=(a[l+m]||0)+f.attrs.colspan}c.push(s.Fragment.from(d))}i=c,r=e}if(o!=n){for(var v=[],g=0,y=0;g<n;g++,y++){for(var w=[],b=i[y%o],x=0;x<b.childCount;x++){var C=b.child(x);g+C.attrs.rowspan>n&&(C=C.type.create(T(C.attrs,"rowspan",Math.max(1,n-C.attrs.rowspan)),C.content)),w.push(C)}v.push(s.Fragment.from(w))}i=v,o=n}return{width:r,height:o,rows:i}}function V(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;for(var c=!1,l=o;l<i;l++){var u=s*e.width+l,d=e.map[u];if(e.map[u-e.width]==d){c=!0;var p=n.nodeAt(d),h=e.findCell(d),f=h.top,m=h.left;t.setNodeMarkup(t.mapping.slice(a).map(d+r),null,T(p.attrs,"rowspan",s-f)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),p.type.createAndFill(T(p.attrs,"rowspan",f+p.attrs.rowspan-s))),l+=p.attrs.colspan-1}}return c}function j(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;for(var c=!1,l=o;l<i;l++){var u=l*e.width+s,d=e.map[u];if(e.map[u-1]==d){c=!0;var p=n.nodeAt(d),h=e.colCount(d),f=t.mapping.slice(a).map(d+r);t.setNodeMarkup(f,null,A(p.attrs,s-h,p.attrs.colspan-(s-h))),t.insert(f+p.nodeSize,p.type.createAndFill(A(p.attrs,0,s-h))),l+=p.attrs.rowspan-1}}return c}function L(t,e,n,r,o){var i=n?t.doc.nodeAt(n-1):t.doc,a=f.get(i),c=r.top,l=r.left,u=l+o.width,d=c+o.height,p=t.tr,h=0;function m(){i=n?p.doc.nodeAt(n-1):p.doc,a=f.get(i),h=p.mapping.maps.length}(function(t,e,n,r,o,i,a){var c,l,u=w(t.doc.type.schema);if(o>e.width)for(var d=0,p=0;d<e.height;d++){var h=n.child(d);p+=h.nodeSize;var f=[],m=void 0;m=null==h.lastChild||h.lastChild.type==u.cell?c||(c=u.cell.createAndFill()):l||(l=u.header_cell.createAndFill());for(var v=e.width;v<o;v++)f.push(m);t.insert(t.mapping.slice(a).map(p-1+r),f)}if(i>e.height){for(var g=[],y=0,b=(e.height-1)*e.width;y<Math.max(e.width,o);y++){var x=!(y>=e.width)&&n.nodeAt(e.map[b+y]).type==u.header_cell;g.push(x?l||(l=u.header_cell.createAndFill()):c||(c=u.cell.createAndFill()))}for(var C=u.row.create(null,s.Fragment.from(g)),k=[],S=e.height;S<i;S++)k.push(C);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),k)}return!(!c&&!l)})(p,a,i,n,u,d,h)&&m(),V(p,a,i,n,l,u,c,h)&&m(),V(p,a,i,n,l,u,d,h)&&m(),j(p,a,i,n,c,d,l,h)&&m(),j(p,a,i,n,c,d,u,h)&&m();for(var v=c;v<d;v++){var g=a.positionAt(v,l,i),y=a.positionAt(v,u,i);p.replace(p.mapping.slice(h).map(g+n),p.mapping.slice(h).map(y+n),new s.Slice(o.rows[v-c],0,0))}m(),p.setSelection(new R(p.doc.resolve(n+a.positionAt(c,l,i)),p.doc.resolve(n+a.positionAt(d-1,u-1,i)))),e(p)}I.prototype.map=function(t){return new I(t.map(this.anchor),t.map(this.head))},I.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&M(e,n)?new R(e,n):i.Selection.near(n,1)};var Z=(0,a.$)({ArrowLeft:W("horiz",-1),ArrowRight:W("horiz",1),ArrowUp:W("vert",-1),ArrowDown:W("vert",1),"Shift-ArrowLeft":K("horiz",-1),"Shift-ArrowRight":K("horiz",1),"Shift-ArrowUp":K("vert",-1),"Shift-ArrowDown":K("vert",1),Backspace:U,"Mod-Backspace":U,Delete:U,"Mod-Delete":U});function H(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function W(t,e){return function(n,r,o){var s=n.selection;if(s instanceof R)return H(n,r,i.Selection.near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;var a=Y(o,t,e);if(null==a)return!1;if("horiz"==t)return H(n,r,i.Selection.near(n.doc.resolve(s.head+e),e));var c,l=n.doc.resolve(a),u=N(l,t,e);return c=u?i.Selection.near(u,1):e<0?i.Selection.near(n.doc.resolve(l.before(-1)),-1):i.Selection.near(n.doc.resolve(l.after(-1)),1),H(n,r,c)}}function K(t,e){return function(n,r,o){var i=n.selection;if(!(i instanceof R)){var s=Y(o,t,e);if(null==s)return!1;i=new R(n.doc.resolve(s))}var a=N(i.$headCell,t,e);return!!a&&H(n,r,new R(i.$anchorCell,a))}}function U(t,e){var n=t.selection;if(!(n instanceof R))return!1;if(e){var r=t.tr,o=w(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(o)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new s.Slice(o,0,0))})),r.docChanged&&e(r)}return!0}function J(t,e){var n=x(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new R(n))),!0)}function q(t,e,n){if(!C(t.state))return!1;var r=$(n),o=t.state.selection;if(o instanceof R){r||(r={width:1,height:1,rows:[s.Fragment.from(z(w(t.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),c=f.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=F(r,c.right-c.left,c.bottom-c.top),L(t.state,t.dispatch,a,c,r),!0}if(r){var l=k(t.state),u=l.start(-1);return L(t.state,t.dispatch,u,f.get(l.node(-1)).findCell(l.pos-u),r),!0}return!1}function G(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=X(t,e.target);if(e.shiftKey&&t.state.selection instanceof R)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=x(t.state.selection.$anchor))&&Q(t,e).pos!=n.pos)o(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",s)}function o(e,n){var r=Q(t,n),o=null==b.getState(t.state);if(!r||!M(e,r)){if(!o)return;r=e}var i=new R(e,r);if(o||!t.state.selection.eq(i)){var s=t.state.tr.setSelection(i);o&&s.setMeta(b,e.pos),t.dispatch(s)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",s),null!=b.getState(t.state)&&t.dispatch(t.state.tr.setMeta(b,-1))}function s(n){var s,a=b.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(X(t,n.target)!=r&&!(s=Q(t,e)))return i();s&&o(s,n)}}function Y(t,e,n){if(!(t.state.selection instanceof i.TextSelection))return null;for(var r=t.state.selection.$head,o=r.depth-1;o>=0;o--){var s=r.node(o);if((n<0?r.index(o):r.indexAfter(o))!=(n<0?0:s.childCount))return null;if("cell"==s.type.spec.tableRole||"header_cell"==s.type.spec.tableRole){var a=r.before(o),c="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(c)?a:null}}return null}function X(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function Q(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?x(t.state.doc.resolve(n.pos)):null}var tt=new i.PluginKey("fix-tables");function et(t,e,n,r){var o=t.childCount,i=e.childCount;t:for(var s=0,a=0;s<i;s++){for(var c=e.child(s),l=a,u=Math.min(o,s+3);l<u;l++)if(t.child(l)==c){a=l+1,n+=c.nodeSize;continue t}r(c,n),a<o&&t.child(a).sameMarkup(c)?et(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function nt(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=function(t,e,n,r){var o=f.get(e);if(!o.problems)return r;r||(r=t.tr);for(var i,s,a=[],c=0;c<o.height;c++)a.push(0);for(var l=0;l<o.problems.length;l++){var u=o.problems[l];if("collision"==u.type){for(var d=e.nodeAt(u.pos),p=0;p<d.attrs.rowspan;p++)a[u.row+p]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,A(d.attrs,d.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var h=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,T(h.attrs,"rowspan",h.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var m=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,T(m.attrs,"colwidth",u.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==i&&(i=v),s=v);for(var g=0,y=n+1;g<o.height;g++){var b=e.child(g),x=y+b.nodeSize,C=a[g];if(C>0){var k="cell";b.firstChild&&(k=b.firstChild.type.spec.tableRole);for(var S=[],_=0;_<C;_++)S.push(w(t.schema)[k].createAndFill());var M=0!=g&&i!=g-1||s!=g?x-1:y+1;r.insert(r.mapping.map(M),S)}y=x}return r.setMeta(tt,{fixTables:!0})}(t,e,r,n))};return e?e.doc!=t.doc&&et(e.doc,t.doc,0,r):t.doc.descendants(r),n}function rt(t){var e,n=t.selection,r=k(t),o=r.node(-1),i=r.start(-1),s=f.get(o);return(e=n instanceof R?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i)).tableStart=i,e.map=s,e.table=o,e}function ot(t,e,n){var r=e.map,o=e.tableStart,i=e.table,s=n>0?-1:0;P(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=i.nodeAt(l);t.setNodeMarkup(t.mapping.map(o+l),null,D(u.attrs,n-r.colCount(l))),a+=u.attrs.rowspan-1}else{var d=null==s?w(i.type.schema).cell:i.nodeAt(r.map[c+s]).type,p=r.positionAt(a,n,i);t.insert(t.mapping.map(o+p),d.createAndFill())}}return t}function it(t,e){if(!C(t))return!1;if(e){var n=rt(t);e(ot(t.tr,n,n.left))}return!0}function st(t,e){if(!C(t))return!1;if(e){var n=rt(t);e(ot(t.tr,n,n.right))}return!0}function at(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],u=o.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(i+l),null,A(u.attrs,n-r.colCount(l)));else{var d=t.mapping.slice(s).map(i+l);t.delete(d,d+u.nodeSize)}a+=u.attrs.rowspan}}function ct(t,e){if(!C(t))return!1;if(e){var n=rt(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;at(r,n,o),o!=n.left;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function lt(t,e,n){for(var r=w(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+n*t.width]).type!=r)return!1;return!0}function ut(t,e,n){for(var r=e.map,o=e.tableStart,i=e.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=[],l=n>0?-1:0;lt(r,i,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,d=r.width*n;u<r.width;u++,d++)if(n>0&&n<r.height&&r.map[d]==r.map[d-r.width]){var p=r.map[d],h=i.nodeAt(p).attrs;t.setNodeMarkup(o+p,null,T(h,"rowspan",h.rowspan+1)),u+=h.colspan-1}else{var f=null==l?w(i.type.schema).cell:i.nodeAt(r.map[d+l*r.width]).type;c.push(f.createAndFill())}return t.insert(s,w(i.type.schema).row.create(null,c)),t}function dt(t,e){if(!C(t))return!1;if(e){var n=rt(t);e(ut(t.tr,n,n.top))}return!0}function pt(t,e){if(!C(t))return!1;if(e){var n=rt(t);e(ut(t.tr,n,n.bottom))}return!0}function ht(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=s+o.child(n).nodeSize,l=t.mapping.maps.length;t.delete(s+i,c+i);for(var u=0,d=n*r.width;u<r.width;u++,d++){var p=r.map[d];if(n>0&&p==r.map[d-r.width]){var h=o.nodeAt(p).attrs;t.setNodeMarkup(t.mapping.slice(l).map(p+i),null,T(h,"rowspan",h.rowspan-1)),u+=h.colspan-1}else if(n<r.width&&p==r.map[d+r.width]){var f=o.nodeAt(p),m=f.type.create(T(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),v=r.positionAt(n+1,u,o);t.insert(t.mapping.slice(l).map(i+v),m),u+=f.attrs.colspan-1}}}function ft(t,e){if(!C(t))return!1;if(e){var n=rt(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;ht(r,n,o),o!=n.top;o--)n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=f.get(n.table);e(r)}return!0}function mt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function vt(t,e){var n=t.selection;if(!(n instanceof R)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=rt(t),o=r.map;if(function(t,e){for(var n=t.width,r=t.height,o=t.map,i=e.top*n+e.left,s=i,a=(e.bottom-1)*n+e.left,c=i+(e.right-e.left-1),l=e.top;l<e.bottom;l++){if(e.left>0&&o[s]==o[s-1]||e.right<n&&o[c]==o[c+1])return!0;s+=n,c+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&o[i]==o[i-n]||e.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}(o,r))return!1;if(e){for(var i,a,c=t.tr,l={},u=s.Fragment.empty,d=r.top;d<r.bottom;d++)for(var p=r.left;p<r.right;p++){var h=o.map[d*o.width+p],f=r.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==i)i=h,a=f;else{mt(f)||(u=u.append(f.content));var m=c.mapping.map(h+r.tableStart);c.delete(m,m+f.nodeSize)}}if(c.setNodeMarkup(i+r.tableStart,null,T(D(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var v=i+1+a.content.size,g=mt(a)?i+1:v;c.replaceWith(g+r.tableStart,v+r.tableStart,u)}c.setSelection(new R(c.doc.resolve(i+r.tableStart))),e(c)}return!0}function gt(t,e){var n=w(t.schema);return yt((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function yt(t){return function(e,n){var r,o,i=e.selection;if(i instanceof R){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(!(r=function(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(i.$from)))return!1;o=x(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=T(s,"rowspan",1)),s.colspan>1&&(s=T(s,"colspan",1));for(var l,u=rt(e),d=e.tr,p=0;p<u.right-u.left;p++)a.push(c?T(s,"colwidth",c&&c[p]?[c[p]]:null):s);for(var h=u.top;h<u.bottom;h++){var f=u.map.positionAt(h,u.left,u.table);h==u.top&&(f+=r.nodeSize);for(var m=u.left,v=0;m<u.right;m++,v++)m==u.left&&h==u.top||d.insert(l=d.mapping.map(f+u.tableStart,1),t({node:r,row:h,col:m}).createAndFill(a[v]))}d.setNodeMarkup(o,t({node:r,row:u.top,col:u.left}),a[0]),i instanceof R&&d.setSelection(new R(d.doc.resolve(i.$anchorCell.pos),l&&d.doc.resolve(l))),n(d)}return!0}}function wt(t,e){return function(n,r){if(!C(n))return!1;var o=k(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){var i=n.tr;n.selection instanceof R?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&i.setNodeMarkup(r,null,T(n.attrs,t,e))})):i.setNodeMarkup(o.pos,null,T(o.nodeAfter.attrs,t,e)),r(i)}return!0}}function bt(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<r.length;o++){var i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function xt(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!C(e))return!1;if(n){for(var r=w(e.schema),o=rt(e),i=e.tr,s=o.map.cellsInRect("column"==t?new h(o.left,0,o.right,o.map.height):"row"==t?new h(0,o.top,o.map.width,o.bottom):o),a=s.map((function(t){return o.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[c],r.cell,a[c].attrs);if(0==i.steps.length)for(var l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}(t):function(e,n){if(!C(e))return!1;if(n){var r=w(e.schema),o=rt(e),i=e.tr,s=bt("row",o,r),a=bt("column",o,r),c=("column"===t?s:"row"===t&&a)?1:0,l="column"==t?new h(0,c,1,o.map.height):"row"==t?new h(c,0,o.map.width,1):o,u="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(l).forEach((function(t){var e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,u,n.attrs)})),n(i)}return!0}}var Ct=xt("row",{useDeprecatedLogic:!0}),kt=xt("column",{useDeprecatedLogic:!0}),St=xt("cell",{useDeprecatedLogic:!0});function _t(t){return function(e,n){if(!C(e))return!1;var r=function(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,o=t.before();r>=0;r--){var i=t.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}(k(e),t);if(null!=r){if(n){var o=e.doc.resolve(r);n(e.tr.setSelection(i.TextSelection.between(o,_(o))).scrollIntoView())}return!0}}}function Mt(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){if("table"==n.node(r).type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Ot=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Et(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function Et(t,e,n,r,o,i){for(var s=0,a=!0,c=e.firstChild,l=t.firstChild,u=0,d=0;u<l.childCount;u++)for(var p=l.child(u).attrs,h=p.colspan,f=p.colwidth,m=0;m<h;m++,d++){var v=o==d?i:f&&f[m],g=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=g}for(;c;){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Ot.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,Et(t,this.colgroup,this.table,this.cellMinWidth),!0)},Ot.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var Nt=new i.PluginKey("tableColumnResizing");function Tt(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Ot);var o=t.lastColumnResizable;return void 0===o&&(o=!0),new i.Plugin({key:Nt,state:{init:function(t,e){return this.spec.props.nodeViews[w(e.schema).table.name]=function(t,e){return new r(t,n,e)},new At(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return Nt.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,n){!function(t,e,n,r,o){var i=Nt.getState(t.state);if(!i.dragging){var s=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,u=c.right;e.clientX-l<=n?a=Dt(t,e,"left"):u-e.clientX<=n&&(a=Dt(t,e,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var d=t.state.doc.resolve(a),p=d.node(-1),h=f.get(p),m=d.start(-1);if(h.colCount(d.pos-m)+d.nodeAfter.attrs.colspan-1==h.width-1)return}Rt(t,a)}}}(t,n,e,0,o)},mouseleave:function(t){!function(t){var e=Nt.getState(t.state);e.activeHandle>-1&&!e.dragging&&Rt(t,-1)}(t)},mousedown:function(t,e){!function(t,e,n){var r=Nt.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var o=t.state.doc.nodeAt(r.activeHandle),i=function(t,e,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=t.domAtPos(e),a=s.node.childNodes[s.offset].offsetWidth,c=r;if(o)for(var l=0;l<r;l++)o[l]&&(a-=o[l],c--);return a/c}(t,r.activeHandle,o.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=Nt.getState(t.state);r.dragging&&(!function(t,e,n){for(var r=t.state.doc.resolve(e),o=r.node(-1),i=f.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,l=0;l<i.height;l++){var u=l*i.width+a;if(!l||i.map[u]!=i.map[u-i.width]){var d=i.map[u],p=o.nodeAt(d).attrs,h=1==p.colspan?0:a-i.colCount(d);if(!p.colwidth||p.colwidth[h]!=n){var m=p.colwidth?p.colwidth.slice():It(p.colspan);m[h]=n,c.setNodeMarkup(s+d,null,T(p,"colwidth",m))}}}c.docChanged&&t.dispatch(c)}(t,r.activeHandle,Pt(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(Nt,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=Nt.getState(t.state),o=Pt(r.dragging,e,n);!function(t,e,n,r){var o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=f.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=t.domAtPos(o.start(-1)).node;for(;"TABLE"!=c.nodeName;)c=c.parentNode;Et(i,c.firstChild,c,r,a,n)}(t,r.activeHandle,o,n)}t.dispatch(t.state.tr.setMeta(Nt,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault()}(t,e,n)}},decorations:function(t){var e=Nt.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],r=t.doc.resolve(e),o=r.node(-1),i=f.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=a+l*i.width-1;if(!(a!=i.width&&i.map[u]==i.map[u+1]||0!=l&&i.map[u-1]==i.map[u-1-i.width])){var d=i.map[u],p=s+d+o.nodeAt(d).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(c.p.widget(p,h))}}return c.EH.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}})}var At=function(t,e){this.activeHandle=t,this.dragging=e};function Dt(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY});if(!r)return-1;var o=r.pos,i=x(t.state.doc.resolve(o));if(!i)return-1;if("right"==n)return i.pos;var s=f.get(i.node(-1)),a=i.start(-1),c=s.map.indexOf(i.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function Pt(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function Rt(t,e){t.dispatch(t.state.tr.setMeta(Nt,{setHandle:e}))}function It(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Bt(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new i.Plugin({key:b,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(b);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:B,handleDOMEvents:{mousedown:G},createSelectionBetween:function(t){if(null!=b.getState(t.state))return t.state.selection},handleTripleClick:J,handleKeyDown:Z,handlePaste:q},appendTransaction:function(t,n,r){return function(t,e,n){var r,o,s=(e||t).selection,a=(e||t).doc;if(s instanceof i.NodeSelection&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=R.create(a,s.from);else if("row"==o){var c=a.resolve(s.from+1);r=R.rowSelection(c,c)}else if(!n){var l=f.get(s.node),u=s.from+1,d=u+l.map[l.width*l.height-1];r=R.create(a,u+1,d)}}else s instanceof i.TextSelection&&function(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,o=n.pos,i=e.depth;i>=0&&!(e.after(i+1)<e.end(i));i--,r++);for(var s=n.depth;s>=0&&!(n.before(s+1)>n.start(s));s--,o--);return r==o&&/row|table/.test(e.node(i).type.spec.tableRole)}(s)?r=i.TextSelection.create(a,s.from):s instanceof i.TextSelection&&function(t){for(var e,n,r=t.$from,o=t.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=o.depth;a>0;a--){var c=o.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===o.parentOffset}(s)&&(r=i.TextSelection.create(a,s.$from.start(),s.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}(r,nt(r,n),e)}})}At.prototype.apply=function(t){var e=this,n=t.getMeta(Nt);if(n&&null!=n.setHandle)return new At(n.setHandle,null);if(n&&void 0!==n.setDragging)return new At(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);S(t.doc.resolve(r))||(r=null),e=new At(r,e.dragging)}return e}},1081:(t,e,n)=>{"use strict";n.d(e,{vs:()=>c,FC:()=>g,Pu:()=>v,wx:()=>u,Mn:()=>S,Ax:()=>k,nj:()=>M,nd:()=>x,k9:()=>b});var r=n(8638),o=Math.pow(2,16);function i(t){return 65535&t}var s=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};a.prototype.recover=function(t){var e=0,n=i(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/o}(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,n){for(var r=0,i=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=this.ranges[c]-(this.inverted?r:0);if(l>t)break;var u=this.ranges[c+i],d=this.ranges[c+a],p=l+u;if(t<=p){var h=l+r+((u?t==l?-1:t==p?1:e:e)<0?0:d);if(n)return h;var f=t==(e<0?l:p)?null:c/3+(t-l)*o;return new s(h,e<0?t!=l:t!=p,f)}r+=d-u}return n?t+r:new s(t+r)},a.prototype.touches=function(t,e){for(var n=0,r=i(e),o=this.inverted?2:1,s=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[a+o];if(t<=c+l&&a==3*r)return!0;n+=this.ranges[a+s]-l}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var c=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function l(t){var e=Error.call(this,t);return e.__proto__=l.prototype,e}c.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new c(this.maps,this.mirror,t,e)},c.prototype.copy=function(){return new c(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},c.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},c.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},c.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},c.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},c.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},c.prototype.invert=function(){var t=new c;return t.appendMappingInverted(this),t},c.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},c.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},c.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new s(t,r)},l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="TransformError";var u=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new c},d={before:{configurable:!0},docChanged:{configurable:!0}};function p(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},u.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new l(e.failed);return this},u.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},u.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(u.prototype,d);var h=Object.create(null),f=function(){};f.prototype.apply=function(t){return p()},f.prototype.getMap=function(){return a.empty},f.prototype.invert=function(t){return p()},f.prototype.map=function(t){return p()},f.prototype.merge=function(t){return null},f.prototype.toJSON=function(){return p()},f.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=h[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},f.jsonID=function(t,e){if(t in h)throw new RangeError("Duplicate use of step JSON ID "+t);return h[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(t,e,n,o){try{return m.ok(t.replace(e,n,o))}catch(t){if(t instanceof r.ReplaceError)return m.fail(t.message);throw t}};var v=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&y(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r.Slice.empty:new r.Slice(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r.Slice.fromJSON(t,n.slice),!!n.structure)},e}(f);f.jsonID("replace",v);var g=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?m.fromReplace(t,this.from,this.to,n):m.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r.Slice.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(f);function y(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function w(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function b(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!w(r,o,i))break}}function x(t,e,n,r){void 0===r&&(r=t);var o=function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}(t,e),i=o&&function(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=(s.length?s[s.length-1]:e).contentMatch,c=r;a&&c<o;c++)a=a.matchType(n.child(c).type);if(!a||!a.validEnd)return null;return s}(r,e);return i?o.map(C).concat({type:e,attrs:n}).concat(i.map(C)):null}function C(t){return{type:t,attrs:null}}function k(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var d=l.content.cutByIndex(u,l.childCount),p=r&&r[c]||l;if(p!=l&&(d=d.replaceChild(0,p.type.create(p.attrs))),!l.canReplace(u+1,l.childCount)||!p.type.validContent(d))return!1}var h=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(h,h,f?f.type:o.node(i+1).type)}function S(t,e){var n=t.resolve(e),r=n.index();return _(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function _(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function M(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,o):r.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function O(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(O(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r.Fragment.fromArray(o)}f.jsonID("replaceAround",g),u.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),c=s,l=a,u=r.Fragment.empty,d=0,p=i,h=!1;p>e;p--)h||n.index(p)>0?(h=!0,u=r.Fragment.from(n.node(p).copy(u)),d++):c--;for(var f=r.Fragment.empty,m=0,v=i,y=!1;v>e;v--)y||o.after(v+1)<o.end(v)?(y=!0,f=r.Fragment.from(o.node(v).copy(f)),m++):l++;return this.step(new g(c,l,s,a,new r.Slice(u.append(f),d,m),u.size-d,!0))},u.prototype.wrap=function(t,e){for(var n=r.Fragment.empty,o=e.length-1;o>=0;o--)n=r.Fragment.from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new g(i,s,i,s,new r.Slice(n,0,0),e.length,!0))},u.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),c=a.map(e,1),l=a.map(e+t.nodeSize,1);return i.step(new g(c,l,c+1,l-1,new r.Slice(r.Fragment.from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},u.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new g(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r.Slice(r.Fragment.from(s),0,0),1,!0))},u.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r.Fragment.empty,s=r.Fragment.empty,a=o.depth,c=o.depth-e,l=e-1;a>c;a--,l--){i=r.Fragment.from(o.node(a).copy(i));var u=n&&n[l];s=r.Fragment.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new v(t,t,new r.Slice(i.append(s),e,e),!0))},u.prototype.join=function(t,e){void 0===e&&(e=1);var n=new v(t-e,t+e,r.Slice.empty,!0);return this.step(n)};var E=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r.Slice(O(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new N(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);f.jsonID("addMark",E);var N=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r.Slice(O(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return m.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new E(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(f);function T(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}f.jsonID("removeMark",N),u.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var d=Math.max(c,t),p=Math.min(c+r.nodeSize,e),h=n.addToSet(u),f=0;f<u.length;f++)u[f].isInSet(h)||(s&&s.to==d&&s.mark.eq(u[f])?s.to=p:o.push(s=new N(d,p,u[f])));a&&a.to==d?a.to=p:i.push(a=new E(d,p,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},u.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r.MarkType){var l=n.isInSet(o.marks);l&&(c=[l])}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var u=Math.min(a+o.nodeSize,e),d=0;d<c.length;d++){for(var p=c[d],h=void 0,f=0;f<i.length;f++){var m=i[f];m.step==s-1&&p.eq(i[f].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:p,from:Math.max(a,t),to:u,step:s})}}})),i.forEach((function(t){return o.step(new N(t.from,t.to,t.style))})),this},u.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var c=o.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var d=0;d<c.marks.length;d++)e.allowsMarkType(c.marks[d].type)||this.step(new N(s,l,c.marks[d]))}else i.push(new v(s,l,r.Slice.empty));s=l}if(!n.validEnd){var p=n.fillBefore(r.Fragment.empty,!0);this.replace(s,s,new r.Slice(p,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},u.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r.Slice.empty);var o=function(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r.Slice.empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);return T(i,s,o)?new v(e,n,o):new A(i,s,o).fit()}(this.doc,t,e,n);return o&&this.step(o),this},u.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.delete=function(t,e){return this.replace(t,e,r.Slice.empty)},u.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var A=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r.Fragment.empty;for(var s=t.depth;s>0;s--)this.placed=r.Fragment.from(t.node(s).copy(this.placed))},D={depth:{configurable:!0}};function P(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(P(t.firstChild.content,e-1,n)))}function R(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(R(t.lastChild.content,e-1,n)))}function I(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function B(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,B(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r.Fragment.empty,!0)))),t.copy(o)}function $(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function z(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(z(s.content,e+1,n,o,s)))}if(e>o){var a=i.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r.Fragment.empty,!0))}return t}function F(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}D.depth.get=function(){return this.frontier.length-1},A.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;for(var s=this.placed,a=o.depth,c=i.depth;a&&c&&1==s.childCount;)s=s.firstChild.content,a--,c--;var l=new r.Slice(s,a,c);return e>-1?new g(o.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new v(o.pos,i.pos,l):void 0},A.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,o=(e?(n=I(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(o?c.matchType(o.type)||(u=c.fillBefore(r.Fragment.from(o),!1)):a.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:i,parent:n,inject:u};if(2==t&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:n,wrap:l};if(n&&c.matchType(n.type))break}},A.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=I(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r.Slice(e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},A.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=I(e,n);if(i.childCount<=1&&n>0){var s=e.size-n<=n+i.size;this.unplaced=new r.Slice(P(e,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r.Slice(P(e,n,1),n,o)},A.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;this.depth>n;)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-e,d=0,p=[],h=this.frontier[n],f=h.match,m=h.type;if(i){for(var v=0;v<i.childCount;v++)p.push(i.child(v));f=f.matchFragment(i)}for(var g=l.size+e-(c.content.size-c.openEnd);d<l.childCount;){var y=l.child(d),w=f.matchType(y.type);if(!w)break;(++d>1||0==u||y.content.size)&&(f=w,p.push(B(y.mark(m.allowedMarks(y.marks)),1==d?u:0,d==l.childCount?g:-1)))}var b=d==l.childCount;b||(g=-1),this.placed=R(this.placed,n,r.Fragment.from(p)),this.frontier[n].match=f,b&&g<0&&o&&o.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(var x=0,C=l;x<g;x++){var k=C.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),C=k.content}this.unplaced=b?0==e?r.Slice.empty:new r.Slice(P(c.content,e-1,1),e-1,g<0?c.openEnd:e-1):new r.Slice(P(c.content,e,d),c.openStart,c.openEnd)},A.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!$(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},A.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=$(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=$(t,a,c.type,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},A.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=R(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},A.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=R(this.placed,this.depth,r.Fragment.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},A.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(r.Fragment.empty,!0);t.childCount&&(this.placed=R(this.placed,this.frontier.length,t))},Object.defineProperties(A.prototype,D),u.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(T(o,i,n))return this.step(new v(t,e,n));var s=F(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==l&&s.splice(1,0,-c)}for(var d=s.indexOf(a),p=[],h=n.openStart,f=n.content,m=0;;m++){var g=f.firstChild;if(p.push(g),m==n.openStart)break;f=g.content}h>0&&p[h-1].type.spec.defining&&o.node(d).type!=p[h-1].type?h-=1:h>=2&&p[h-1].isTextblock&&p[h-2].type.spec.defining&&o.node(d).type!=p[h-2].type&&(h-=2);for(var y=n.openStart;y>=0;y--){var w=(y+h+1)%(n.openStart+1),b=p[w];if(b)for(var x=0;x<s.length;x++){var C=s[(x+d)%s.length],k=!0;C<0&&(k=!1,C=-C);var S=o.node(C-1),_=o.index(C-1);if(S.canReplaceWith(_,_,b.type,b.marks))return this.replace(o.before(C),k?i.after(C):e,new r.Slice(z(n.content,0,n.openStart,w),w,n.openEnd))}}for(var M=this.steps.length,O=s.length-1;O>=0&&(this.replace(t,e,n),!(this.steps.length>M));O--){var E=s[O];O<0||(t=o.before(E),e=i.after(E))}return this},u.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r.Slice(r.Fragment.from(n),0,0))},u.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=F(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},9124:(t,e,n)=>{"use strict";var r=n(6922),o=n(8638),i=n(9132),s=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++){var i=D(t[r])(n.selection);if(i){var s=m(i.pos,e)(n);if(s!==n)return s}}return n}},a=function(t){return function(e){if(p(e.selection)){var n=e.selection,i=n.$from,s=n.$to;if(t instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),t)||i.parent.canReplaceWith(i.index(),i.indexAfter(),t.type))return f(e.replaceWith(i.pos,s.pos,t).setSelection(new r.NodeSelection(e.doc.resolve(i.pos))))}return e}},c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(t),e,!0);return o?n.setSelection(o):n}},l=function(t){return t.type&&t.type.spec.selectable},u=function(t,e,n){return function(t){return l(t)&&t.type.isLeaf}(t)?n.setSelection(new r.NodeSelection(n.doc.resolve(e))):c(e)(n)},d=function(t,e,n){return function(r){var o="number"==typeof e,i=r.selection.$from,c=o?r.doc.resolve(e):p(r.selection)?r.doc.resolve(i.pos+1):i,d=c.parent;if(p(r.selection)&&n&&r!==(r=a(t)(r)))return r;if(b(d)&&r!==(r=s(d.type,t)(r))){var h=l(t)?c.before(c.depth):c.pos;return u(t,h,r)}if(w(c,t)){r.insert(c.pos,t);var m=o?c.pos:l(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return f(u(t,m,r))}for(var v=c.depth;v>0;v--){var g=c.after(v),y=r.doc.resolve(g);if(w(y,t))return r.insert(g,t),f(u(t,g,r))}return r}},p=function(t){return t instanceof r.NodeSelection},h=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},f=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},m=function(t,e){return function(n){var r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(v(o,e)){var i=(n=n.replaceWith(t,t+r.nodeSize,e)).selection.$from.pos-1;return n=c(Math.max(i,0),-1)(n),n=c(n.selection.$from.start())(n),f(n)}return n}},v=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof o.Fragment?e:o.Fragment.from(e))},g=function(t){return function(e){var n=e.doc.nodeAt(t);return f(e.delete(t,t+n.nodeSize))}},y=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},w=function(t,e){var n=t.index();return e instanceof o.Fragment?t.parent.canReplace(n,n,e):e instanceof o.Node&&t.parent.canReplaceWith(n,n,e.type)},b=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},x=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},C=function(t){return function(e){for(var n=i.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),o=n.cellsInRect(t),s=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),a=0,c=o.length;a<c;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},k=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},S=function(t){for(var e=i.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var o=[],s={},a=0;a<e.width;a++){var c=e.map[r*e.width+a],l=t.nodeAt(c),u=e.findCell(c);s[c]||u.top!==r?o.push(null):(s[c]=!0,o.push(l))}n.push(o)}return n},_=function(t,e){for(var n=[],r=i.TableMap.get(t),o=0;o<r.height;o++){for(var s=t.child(o),a=[],c=0;c<r.width;c++)if(e[o][c]){var l=r.map[o*r.width+c],u=e[o][c],d=t.nodeAt(l).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);a.push(d)}n.push(s.type.createChecked(s.attrs,a,s.marks))}return t.type.createChecked(t.attrs,n,t.marks)},M=function(t,e,n,r){var o=e[0]>n[0]?-1:1,i=t.splice(e[0],e.length),s=i.length%2==0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(i)),t},O=function(t,e,n,r){var o="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1===(t>e?-1:1)){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(o)}else if(-1!==n.slice(1).indexOf(e))throw new Error(o);return!0},E=function(t){return function(e){var n=e.$from;return N(n,t)}},N=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},T=function(t,e){return function(n){var r=E(t)(n);if(r)return R(r.pos,e)}},A=function(t){return function(e){return!!E(t)(e)}},D=function(t){return function(e){return E((function(e){return h(t,e)}))(e)}},P=function(t){var e=t.$from.nodeBefore,n=r.Selection.findFrom(t.$from,-1);if(n&&e){var o=D(e.type)(n);return o?o.pos:n.$from.pos}},R=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},I=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},B=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return I(t,n).filter((function(t){return e(t.node)}))},$=function(t,e,n){return B(t,(function(t){return t.type===e}),n)};var z=function(t){return E((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},F=function(t){return t instanceof i.CellSelection},V=function(t){if(F(t)){var e=i.TableMap.get(t.$anchorCell.node(-1));return C({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},j=function(t){return function(e){var n=z(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.width-1){var o=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},L=function(t){return function(e){var n=z(e);if(n){var r=i.TableMap.get(n.node);return(Array.isArray(t)?t:Array.from([t])).reduce((function(t,e){if(e>=0&&e<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},Z=function(t){return function(e,n){return function(r){var o=z(r.selection),s="row"===t;if(o){var a=i.TableMap.get(o.node);if(e>=0&&e<(s?a.height:a.width)){var c=s?0:e,l=s?e:0,u=s?a.width:e+1,d=s?e+1:a.height;if(n){var p=Y(r.selection.$from);if(!p)return r;var h=a.findCell(p.pos-o.start);s?(l=Math.min(l,h.top),d=Math.max(d,h.bottom)):(c=Math.min(c,h.left),u=Math.max(u,h.right))}var m=a.cellsInRect({left:c,top:l,right:s?u:c+1,bottom:s?l+1:d}),v=d-l==1?m:a.cellsInRect({left:s?c:u-1,top:s?d-1:l,right:u,bottom:d}),g=o.start+m[0],y=o.start+v[v.length-1],w=r.doc.resolve(g),b=r.doc.resolve(y);return f(r.setSelection(new i.CellSelection(b,w)))}}return r}}},H=Z("column"),W=Z("row"),K=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var o=n.node,s=y(o.type.schema),a=n.start,c=0;c<t+1;c++)a+=o.child(c).nodeSize;var l=o.child(t),u=[],p=0;if(l.forEach((function(t){1===t.attrs.rowspan&&(p+=t.attrs.colspan,u.push(s[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),p<r.width){for(var h=[],f=function(n){var r=Q(n,(function(e,r){var o=e.node.attrs.rowspan;return o>1&&n+o>t}))(e);h.push.apply(h,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(r))},m=t;m>=0;m--)f(m);h.length&&h.forEach((function(t){e=G(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return d(s.row.create(l.attrs,u),a)(e)}}return e}},U=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.width)return q(e);if(t>=0&&t<=r.width)return i.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},J=function(t){return function(e){var n=z(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.height)return q(e);if(t>=0&&t<=r.height)return i.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),f(e)}return e}},q=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--){if("table"===e.node(n).type.spec.tableRole)return f(t.delete(e.before(n),e.after(n)))}return t},G=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),f(n)):n}},Y=function(t){return N(t,(function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)}))},X=function(t){var e=Y(t);if(e){var n=function(t){return N(t,(function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)}))}(t),r=i.TableMap.get(n.node),o=e.pos-n.start;return r.rectBetween(o,o)}},Q=function(t,e){return function(n){var r=[],o=L(t)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)e(o[i],n)&&r.push(o[i]);return r}},tt=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=j(t)(e.selection);o&&o.forEach((function(e){var o=e.node.attrs.colspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=j(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=j(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=j(n)(e.selection),u=L(0)(e.selection),d=e.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=j(h)(e.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:e.doc.resolve(p.pos),indexes:a}}},et=function(t){return function(e){for(var n=t,r=t,o=function(t){L(t)(e.selection).forEach((function(e){var o=e.node.attrs.rowspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){L(t)(e.selection).forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=L(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=L(n)(e.selection),u=j(0)(e.selection),d=e.doc.resolve(l[l.length-1].pos),p=void 0,h=r;h>=n;h--){var f=L(h)(e.selection);if(f&&f.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===f[0].pos){p=f[0];break}if(p)break}}return{$anchor:d,$head:e.doc.resolve(p.pos),indexes:a}}};e.Kk=E,e.a1=function(t){return function(e){if(p(e)){var n=e.node,r=e.$from;if(h(t,n))return{node:n,pos:r.pos,depth:r.depth}}}}},8780:(t,e,n)=>{"use strict";n.d(e,{p:()=>Me,EH:()=>Te,tk:()=>je});var r=n(6922),o=n(8638),i=n(1081),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var d=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!d,s.chrome_version=d&&+d[1],s.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var p=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},f=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},m=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:y(t))){var i=t.parentNode;if(1!=i.nodeType||w(t)||v.test(t.nodeName)||"false"==t.contentEditable)return!1;e=p(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(o<0?-1:0)]).contentEditable)return!1;e=o<0?y(t):0}}}function y(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function w(t){for(var e,n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var b=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function x(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function C(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function k(t,e){return"number"==typeof t?t:t[e]}function S(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth,top:e.top,bottom:e.top+t.clientHeight}}function _(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;s;s=h(s))if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?C(i):S(s),l=0,u=0;if(e.top<c.top+k(r,"top")?u=-(c.top-e.top+k(o,"top")):e.bottom>c.bottom-k(r,"bottom")&&(u=e.bottom-c.bottom+k(o,"bottom")),e.left<c.left+k(r,"left")?l=-(c.left-e.left+k(o,"left")):e.right>c.right-k(r,"right")&&(l=e.right-c.right+k(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var d=s.scrollLeft,p=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var f=s.scrollLeft-d,m=s.scrollTop-p;e={left:e.left-f,top:e.top-m,right:e.right-f,bottom:e.bottom-m}}if(a)break}}function M(t){for(var e=[],n=t.ownerDocument;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t!=n);t=h(t));return e}function O(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var E=null;function N(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=f(c).getClientRects()}for(var d=0;d<u.length;d++){var p=u[d];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var h=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==c.nodeType&&h&&(i=l+(e.left>=(p.left+p.right)/2?1:0));continue}}!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=l+1)}}return n&&3==n.nodeType?function(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=P(r,1);if(i.top!=i.bottom&&T(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:N(n,r)}function T(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function A(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(T(e,l))return A(s,e,l)}if((i=(i+1)%r)==o)break}return t}function D(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(o=(n=c).offsetNode,i=n.offset)}catch(t){}if(!o&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(e.left,e.top);l&&(o=(r=l).startContainer,i=r.startOffset)}var u,d=a.elementFromPoint(e.left,e.top+1);if(!d||!t.dom.contains(1!=d.nodeType?d.parentNode:d)){var p=t.dom.getBoundingClientRect();if(!T(e,p))return null;if(!(d=A(t.dom,e,p)))return null}if(s.safari&&d.draggable&&(o=i=null),d=function(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(d,e),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length))<o.childNodes.length){var h,f=o.childNodes[i];"IMG"==f.nodeName&&(h=f.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=function(t,e,n,r){for(var o=-1,i=e;i!=t.dom;){var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}(t,o,i,e))}null==u&&(u=function(t,e,n){var r=N(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}(t,d,e));var m=t.docView.nearestDesc(d,!0);return{pos:u,inside:m?m.posAtStart-m.border:-1}}function P(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function R(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(s.webkit||s.gecko)){var i=P(f(r,o,o),0);if(s.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var a=P(f(r,o-1,o-1),-1);if(a.top==i.top){var c=P(f(r,o,o+1),-1);if(c.top!=i.top)return I(c,c.left<a.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var l,u=!0;if(o<r.childNodes.length){var d=r.childNodes[o];1==d.nodeType&&(l=d.getBoundingClientRect())}if(!l&&o){var p=r.childNodes[o-1];1==p.nodeType&&(l=p.getBoundingClientRect(),u=!1)}return function(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}(l||r.getBoundingClientRect(),u)}for(var h=-1;h<2;h+=2)if(h<0&&o){var m=void 0,v=3==r.nodeType?f(r,o-1,o):3==(m=r.childNodes[o-1]).nodeType?f(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(v){var g=P(v,1);if(g.top<g.bottom)return I(g,!1)}}else if(h>0&&o<y(r)){var w=void 0,b=3==r.nodeType?f(r,o,o+1):3==(w=r.childNodes[o]).nodeType?f(w):1==w.nodeType?w:null;if(b){var x=P(b,-1);if(x.top<x.bottom)return I(x,!0)}}return I(P(3==r.nodeType?f(r):r,0),!1)}function I(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function B(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}var $=/[\u0590-\u08ac]/;var z=null,F=null,V=!1;function j(t,e,n){return z==e&&F==n?V:(z=e,F=n,V="up"==n||"down"==n?function(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return B(t,e,(function(){for(var e=t.docView.domFromPos(o.pos).node;;){var r=t.docView.nearestDesc(e,!0);if(!r)break;if(r.node.isBlock){e=r.dom;break}e=r.dom.parentNode}for(var i=R(t,o.pos),s=e.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==n?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0}))}(t,e,n):function(t,e,n){var r=e.selection.$head;if(!r.parent.isTextblock)return!1;var o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=getSelection();return $.test(r.parent.textContent)&&a.modify?B(t,e,(function(){var e=a.getRangeAt(0),o=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",n,"character");var c=!(r.depth?t.docView.domAfterPos(r.before()):t.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||o==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(e),null!=s&&(a.caretBidiLevel=s),c})):"left"==n||"backward"==n?i:s}(t,e,n))}var L=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=0},Z={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};L.prototype.matchesWidget=function(){return!1},L.prototype.matchesMark=function(){return!1},L.prototype.matchesNode=function(){return!1},L.prototype.matchesHack=function(){return!1},Z.beforePosition.get=function(){return!1},L.prototype.parseRule=function(){return null},L.prototype.stopEvent=function(){return!1},Z.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},Z.border.get=function(){return 0},L.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},L.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},Z.posBefore.get=function(){return this.parent.posBeforeChild(this)},Z.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Z.posAfter.get=function(){return this.posBefore+this.size},Z.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},L.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;r=t.previousSibling}for(;r&&(!(o=r.pmViewDesc)||o.parent!=this);)r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;i=t.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},L.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},L.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},L.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},L.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},L.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){for(;n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM);)n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:p(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},L.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var l=i+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=i;for(var u=s;u>0;u--){var d=this.children[u-1];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(1)){r=p(d.dom)+1;break}t-=d.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var h=s+1;h<this.children.length;h++){var f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=p(f.dom);break}e+=f.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},L.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},L.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},L.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),a=0,c=0;a<this.children.length;a++){var l=this.children[a],u=c+l.size;if(o>c&&i<u)return l.setSelection(t-c-l.border,e-c-l.border,n,r);c=u}var d=this.domFromPos(t),p=this.domFromPos(e),h=n.getSelection(),f=!1;if((s.gecko||s.safari)&&t==e){var v=d.node.childNodes[d.offset-1];f=v&&("BR"==v.nodeName||"false"==v.contentEditable)}if(r||f&&s.safari||!m(d.node,d.offset,h.anchorNode,h.anchorOffset)||!m(p.node,p.offset,h.focusNode,h.focusOffset)){var g=!1;if((h.extend||t==e)&&!f){h.collapse(d.node,d.offset);try{t!=e&&h.extend(p.node,p.offset),g=!0}catch(t){if(!(t instanceof DOMException))throw t}}if(!g){if(t>e){var y=d;d=p,p=y}var w=document.createRange();w.setEnd(p.node,p.offset),w.setStart(d.node,d.offset),h.removeAllRanges(),h.addRange(w)}}},L.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Z.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},L.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?2:1,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=3);o.dirty=3}n=i}this.dirty=2},L.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?2:1;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(L.prototype,Z);var H=[],W=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,H,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return 0==this.dirty&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(L),K=function(t){function e(e,n,r,o){t.call(this,e,H,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(L),U=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return 3!=this.dirty&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),0!=this.dirty){for(var r=this.parent;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=0}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=ut(i,n,s,r)),t>0&&(i=ut(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(L),J=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n.isLeaf?H:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,i,s,a){var c,l,u=s.nodeViews[n.type.name],d=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),p=d&&d.dom,h=d&&d.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(p=(c=o.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n))).dom,h=c.contentDOM);h||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var f=p;return p=it(p,r,n),d?l=new X(t,n,r,i,p,h,f,d,s,a+1):n.isText?new G(t,n,r,i,p,f,s):new e(t,n,r,i,p,h,f,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o.Fragment.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return 0==this.dirty&&t.eq(this.node)&&st(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,a=r&&t.composing&&this.localCompositionNode(t,e),c=new ct(this,a&&a.node);!function(t,e,n,r){var o=e.locals(t),i=0;if(0==o.length){for(var s=0;s<t.childCount;s++){var a=t.child(s);r(a,o,e.forChild(i,a),s),i+=a.nodeSize}return}for(var c=0,l=[],u=null,d=0;;){if(c<o.length&&o[c].to==i){for(var p=o[c++],h=void 0;c<o.length&&o[c].to==i;)(h||(h=[p])).push(o[c++]);if(h){h.sort(lt);for(var f=0;f<h.length;f++)n(h[f],d,!!u)}else n(p,d,!!u)}var m=void 0,v=void 0;if(u)v=-1,m=u,u=null;else{if(!(d<t.childCount))break;v=d,m=t.child(d++)}for(var g=0;g<l.length;g++)l[g].to<=i&&l.splice(g--,1);for(;c<o.length&&o[c].from<=i&&o[c].to>i;)l.push(o[c++]);var y=i+m.nodeSize;if(m.isText){var w=y;c<o.length&&o[c].from<w&&(w=o[c].from);for(var b=0;b<l.length;b++)l[b].to<w&&(w=l[b].to);w<y&&(u=m.cut(w-i),m=m.cut(0,w-i),y=w,v=-1)}r(m,l.length?m.isInline&&!m.isLeaf?l.filter((function(t){return!t.inline})):l.slice():H,e.forChild(i,m),v),i=y}}(this.node,this.innerDeco,(function(e,s,a){e.spec.marks?c.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&c.syncToMarks(s==n.node.childCount?o.Mark.none:n.node.child(s).marks,r,t),c.placeWidget(e,t,i)}),(function(e,n,o,s){c.syncToMarks(e.marks,r,t),c.findNodeMatch(e,n,o,s)||c.updateNextNode(e,n,o,t,s)||c.addNode(e,n,o,t,i),i+=e.nodeSize})),c.syncToMarks(H,r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||2==this.dirty)&&(a&&this.protectLocalComposition(t,a),Q(this.contentDOM,this.children,t),s.ios&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r.TextSelection)||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=function(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];e=y(t=t.childNodes[e-1])}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=function(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;o<t.childCount;){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}(this.node.content,c,o-e,i-e);return l<0?null:{node:a,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new K(this,i,n,o);t.compositionNodes.push(s),this.children=ut(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=0},e.prototype.updateOuterDeco=function(t){if(!st(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=rt(this.dom,this.nodeDOM,nt(this.outerDeco,this.node,e),nt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(L);function q(t,e,n,r,o){return it(r,e,t),new J(null,t,e,n,r,r,r,o,0)}var G=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){for(var t=this.nodeDOM.parentNode;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e,n,r){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=t,this.dirty=0,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(J),Y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return 0==this.dirty},e}(L),X=function(t){function e(e,n,r,o,i,s,a,c,l,u){t.call(this,e,n,r,o,i,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(3==this.dirty)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(J);function Q(t,e,n){for(var r=t.firstChild,o=!1,i=0;i<e.length;i++){var s=e[i],a=s.dom;if(a.parentNode==t){for(;a!=r;)r=at(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(a,r);if(s instanceof U){var c=r?r.previousSibling:t.lastChild;Q(s.contentDOM,s.children,n),r=c?c.nextSibling:t.firstChild}}for(;r;)r=at(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}function tt(t){t&&(this.nodeName=t)}tt.prototype=Object.create(null);var et=[new tt];function nt(t,e,n){if(0==t.length)return et;for(var r=n?et[0]:new tt,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new tt(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new tt(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return o}function rt(t,e,n,r){if(n==et&&r==et)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||((c=document.createElement(s.nodeName)).pmIsDeco=!0,c.appendChild(o),a=et[0]),o=c}ot(o,a||et[0],s)}return o}function ot(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):H,s=n.class?n.class.split(" "):H,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style)for(var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=u.exec(e.style);)t.style.removeProperty(l[1]);n.style&&(t.style.cssText+=n.style)}}function it(t,e,n){return rt(t,t,et,nt(e,n,1!=t.nodeType))}function st(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function at(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var ct=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=function(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function lt(t,e){return t.type.side-e.type.side}function ut(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function dt(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=o.resolve(a);if(b(n)){for(c=u;i&&!i.node;)i=i.parent;if(i&&i.node.isAtom&&r.NodeSelection.isSelectable(i.node)&&i.parent&&(!i.node.isInline||!function(t,e,n){for(var r=0==e,o=e==y(t);r||o;){if(t==n)return!0;var i=p(t);if(!(t=t.parentNode))return!1;r=r&&0==i,o=o&&i==y(t)}}(n.focusNode,n.focusOffset,i.dom))){var d=i.posBefore;l=new r.NodeSelection(a==d?u:o.resolve(d))}}else{var h=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(h<0)return null;c=o.resolve(h)}l||(l=wt(t,c,u,"pointer"==e||t.state.selection.head<u.pos&&!s?1:-1));return l}function pt(t,e){var n=t.state.selection;if(gt(t,n),t.editable?t.hasFocus():bt(t)&&document.activeElement&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,p(r)+1):n.setEnd(r,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}(t);else{var o,i,a=n.anchor,c=n.head;!ht||n instanceof r.TextSelection||(n.$from.parent.inlineContent||(o=ft(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=ft(t,n.to))),t.docView.setSelection(a,c,t.root,e),ht&&(o&&vt(o),i&&vt(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}ct.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},ct.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},ct.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ct.prototype.syncToMarks=function(t,e,n){for(var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=U.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},ct.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},ct.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof J){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&3!=s.dirty&&st(e,s.outerDeco)))&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},ct.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,J.create(this.top,t,e,n,r,o)),this.changed=!0},ct.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new W(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},ct.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof U;)t=t.children[t.children.length-1];if(!t||!(t instanceof G)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new Y(this.top,H,e,null)),this.changed=!0}};var ht=s.safari||s.chrome&&s.chrome_version<63;function ft(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return mt(i);if(!(i&&"false"!=i.contentEditable||a&&"false"!=a.contentEditable)){if(i)return mt(i);if(a)return mt(a)}}function mt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function vt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function gt(t,e){if(e instanceof r.NodeSelection){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(yt(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else yt(t)}function yt(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function wt(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r.TextSelection.between(e,n,o)}function bt(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function xt(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r.Selection.findFrom(a,e)}function Ct(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function kt(t,e,n){var o=t.state.selection;if(!(o instanceof r.TextSelection)){if(o instanceof r.NodeSelection&&o.node.isInline)return Ct(t,new r.TextSelection(e>0?o.$to:o.$from));var i=xt(t.state,e);return!!i&&Ct(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=xt(t.state,e);return!!(a&&a instanceof r.NodeSelection)&&Ct(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var d=e<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=t.docView.descAt(d))&&!c.contentDOM)&&(r.NodeSelection.isSelectable(u)?Ct(t,new r.NodeSelection(e<0?t.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&Ct(t,new r.TextSelection(t.state.doc.resolve(e<0?d:d+u.nodeSize))))}}function St(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function _t(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Mt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<St(n)&&_t(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(_t(c))o=n,i=--r;else{if(3!=c.nodeType)break;r=(n=c).nodeValue.length}}else{if(Et(n))break;for(var l=n.previousSibling;l&&_t(l);)o=n.parentNode,i=p(l),l=l.previousSibling;if(l)r=St(n=l);else{if((n=n.parentNode)==t.dom)break;r=0}}a?Nt(t,e,n,r):o&&Nt(t,e,o,i)}}function Ot(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=St(n);;)if(r<s){if(1!=n.nodeType)break;if(!_t(n.childNodes[r]))break;o=n,i=++r}else{if(Et(n))break;for(var a=n.nextSibling;a&&_t(a);)o=a.parentNode,i=p(a)+1,a=a.nextSibling;if(a)r=0,s=St(n=a);else{if((n=n.parentNode)==t.dom)break;r=s=0}}o&&Nt(t,e,o,i)}}function Et(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Nt(t,e,n,r){if(b(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection();var i=t.state;setTimeout((function(){t.state==i&&pt(t)}),50)}function Tt(t,e,n){var o=t.state.selection;if(o instanceof r.TextSelection&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=xt(t.state,e);if(c&&c instanceof r.NodeSelection)return Ct(t,c)}if(!i.parent.inlineContent){var l=r.Selection.findFrom(e<0?i:a,e);return!l||Ct(t,l)}return!1}function At(t,e){if(!(t.state.selection instanceof r.TextSelection))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Dt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function Pt(t,e){var n=e.keyCode,r=function(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);return 8==n||s.mac&&72==n&&"c"==r?At(t,-1)||Mt(t):46==n||s.mac&&68==n&&"c"==r?At(t,1)||Ot(t):13==n||27==n||(37==n?kt(t,-1,r)||Mt(t):39==n?kt(t,1,r)||Ot(t):38==n?Tt(t,-1,r)||Mt(t):40==n?function(t){if(s.safari&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Dt(t,o,!0),setTimeout((function(){return Dt(t,o,!1)}),20)}}}(t)||Tt(t,1,r)||Ot(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Rt(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function It(t,e,n,i,a){if(e<0){var c=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,l=dt(t,c);if(l&&!t.state.selection.eq(l)){var u=t.state.tr.setSelection(l);"pointer"==c?u.setMeta("pointer",!0):"key"==c&&u.scrollIntoView(),t.dispatch(u)}}else{var d=t.state.doc.resolve(e),p=d.sharedDepth(n);e=d.before(p+1),n=t.state.doc.resolve(n).after(p+1);var h,f,m=t.state.selection,v=function(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,d=t.root.getSelection(),p=null,h=d.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(p=[{node:h,offset:d.anchorOffset}],b(d)||p.push({node:d.focusNode,offset:d.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var f=c;f>a;f--){var m=i.childNodes[f-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=f;break}if(!v||v.size)break}var g=t.state.doc,y=t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema),w=g.resolve(l),x=null,C=y.parse(i,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:p,ruleFromNode:Rt,context:w});if(p&&null!=p[0].pos){var k=p[0].pos,S=p[1]&&p[1].pos;null==S&&(S=k),x={anchor:k+l,head:S+l}}return{doc:C,sel:x,from:l,to:u}}(t,e,n),g=t.state.doc,y=g.slice(v.from,v.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(h=t.state.selection.to,f="end"):(h=t.state.selection.from,f="start"),t.lastKeyCode=null;var w=function(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){r-=a+Math.max(0,i-Math.min(a,c))-i}if(a<i&&t.size<e.size){c=(i-=r<=i&&r>=a?i-r:0)+(c-a),a=i}else if(c<i){a=(i-=r<=i&&r>=c?i-r:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}(y.content,v.doc.content,v.from,h,f);if(!w){if(!(i&&m instanceof r.TextSelection&&!m.empty&&m.$head.sameParent(m.$anchor))||t.composing||v.sel&&v.sel.anchor!=v.sel.head){if(v.sel){var C=Bt(t,t.state.doc,v.sel);C&&!C.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(C))}return}w={start:m.from,endA:m.to,endB:m.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&w.start==w.endB&&t.state.selection instanceof r.TextSelection&&(w.start>t.state.selection.from&&w.start<=t.state.selection.from+2?w.start=t.state.selection.from:w.endA<t.state.selection.to&&w.endA>=t.state.selection.to-2&&(w.endB+=t.state.selection.to-w.endA,w.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&w.endB==w.start+1&&w.endA==w.start&&w.start>v.from&&"  "==v.doc.textBetween(w.start-v.from-1,w.start-v.from+1)&&(w.start--,w.endA--,w.endB--);var k,S=v.doc.resolveNoCache(w.start-v.from),_=v.doc.resolveNoCache(w.endB-v.from),M=S.sameParent(_)&&S.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!M||a.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!M&&S.pos<v.doc.content.size&&(k=r.Selection.findFrom(v.doc.resolve(S.pos+1),1,!0))&&k.head==_.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>w.start&&function(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||$t(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve($t(i,!0,!0));if(!s.parent.isTextblock||s.pos>n||$t(s,!0,!1)<n)return!1;return r.parent.content.cut(r.parentOffset).eq(s.parent.content)}(g,w.start,w.endA,S,_)&&t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.android&&!M&&S.start()!=_.start()&&0==_.parentOffset&&S.depth==_.depth&&v.sel&&v.sel.anchor==v.sel.head&&v.sel.head==w.endA&&(w.endB-=2,_=v.doc.resolveNoCache(w.endB-v.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))}))}),20));var O,E,N,T,A=w.start,D=w.endA;if(M)if(S.pos==_.pos)s.ie&&s.ie_version<=11&&0==S.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return pt(t)}),20)),O=t.state.tr.delete(A,D),E=g.resolve(w.start).marksAcross(g.resolve(w.endA));else if(w.endA==w.endB&&(T=g.resolve(w.start))&&(N=function(t,e){for(var n,r,i,s=t.firstChild.marks,a=e.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var d=0;d<s.length;d++)l=s[d].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var p=[],h=0;h<e.childCount;h++)p.push(i(e.child(h)));if(o.Fragment.from(p).eq(t))return{mark:r,type:n}}(S.parent.content.cut(S.parentOffset,_.parentOffset),T.parent.content.cut(T.parentOffset,w.endA-T.start()))))O=t.state.tr,"add"==N.type?O.addMark(A,D,N.mark):O.removeMark(A,D,N.mark);else if(S.parent.child(S.index()).isText&&S.index()==_.index()-(_.textOffset?0:1)){var P=S.parent.textBetween(S.parentOffset,_.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,A,D,P)})))return;O=t.state.tr.insertText(P,A,D)}if(O||(O=t.state.tr.replace(A,D,v.doc.slice(w.start-v.from,w.endB-v.from))),v.sel){var R=Bt(t,O.doc,v.sel);R&&!(s.chrome&&s.android&&t.composing&&R.empty&&(R.head==A||R.head==O.mapping.map(D)-1)||s.ie&&R.empty&&R.head==A)&&O.setSelection(R)}E&&O.ensureMarks(E),t.dispatch(O.scrollIntoView())}}}function Bt(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:wt(t,e.resolve(n.anchor),e.resolve(n.head))}function $t(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function zt(t,e){for(var n=[],r=e.content,i=e.openStart,s=e.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||o.DOMSerializer.fromSchema(t.state.schema),l=Kt(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));for(var d,p=u.firstChild;p&&1==p.nodeType&&(d=Ht[p.nodeName.toLowerCase()]);){for(var h=d.length-1;h>=0;h--){for(var f=l.createElement(d[h]);u.firstChild;)f.appendChild(u.firstChild);u.appendChild(f)}p=u.firstChild}return p&&1==p.nodeType&&p.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:u,text:t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n")}}function Ft(t,e,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,c||r)})),c)return new o.Slice(o.Fragment.from(t.state.schema.text(e)),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));u?a=u:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=function(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Kt().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&Ht[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length);r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}(n);var d=s&&s.querySelector("[data-pm-slice]"),p=d&&/^(\d+) (\d+) (.*)/.exec(d.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||o.DOMParser.fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!l&&!p),context:i})}return a=p?function(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o.Fragment.from(l.create(n[c+1],i)),s++,a++}return new o.Slice(i,s,a)}(function(t,e,n){e<t.openStart&&(t=new o.Slice(Zt(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd));n<t.openEnd&&(t=new o.Slice(Zt(t.content,1,n,t.openEnd,0,0),t.openStart,n));return t}(a,+p[1],+p[2]),p[3]):o.Slice.maxOpen(function(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n).contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=r.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&jt(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=Lt(s[s.length-1],i.length));var o=Vt(t,n);s.push(o),r=r.matchType(o.type,o.attrs),i=n}}})),s)return{v:o.Fragment.from(s)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}(a.content,i),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function Vt(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o.Fragment.from(t));return t}function jt(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var s=jt(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(o.Fragment.from(Vt(n,t,i+1))))}}function Lt(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Lt(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(o.Fragment.empty,!0);return t.copy(n.append(r))}function Zt(t,e,n,r,i,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return i<r-1&&(c=Zt(c,e,n,r,i+1,s)),i>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o.Fragment.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}var Ht={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Wt=null;function Kt(){return Wt||(Wt=document.implementation.createHTMLDocument("title"))}var Ut={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Jt=s.ie&&s.ie_version<=11,qt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};qt.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},qt.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Gt=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new qt,Jt&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Gt.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Gt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Gt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ut),Jt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Gt.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Jt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Gt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Gt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Gt.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Gt.prototype.onSelectionChange=function(){if((!(t=this.view).editable||t.root.activeElement==t.dom)&&bt(t)){var t;if(this.suppressingSelectionUpdates)return pt(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&m(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Gt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Gt.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Gt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&bt(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var l=this.registerMutation(t[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(t){return"BR"==t.nodeName}));if(2==u.length){var d=u[0],p=u[1];d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),function(t){if(Yt)return;Yt=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package.")}(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||pt(this.view))}},Gt.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var a=t.addedNodes[i],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l)}for(var u=r&&r.parentNode==t.target?p(r)+1:0,d=n.localPosFromDOM(t.target,u,-1),h=o&&o.parentNode==t.target?p(o):t.target.childNodes.length,f=0;f<t.addedNodes.length;f++)e.push(t.addedNodes[f]);return{from:d,to:n.localPosFromDOM(t.target,h,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Yt=!1;var Xt={},Qt={};function te(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function ee(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return ne(t,e)})}))}function ne(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function re(t){return{left:t.clientX,top:t.clientY}}function oe(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function ie(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function se(t,e,n,o,i){return oe(t,"handleClickOn",e,n,o)||t.someProp("handleClick",(function(n){return n(t,e,o)}))||(i?function(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r.NodeSelection.isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(ie(t,r.NodeSelection.create(t.state.doc,o),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r.NodeSelection.isSelectable(o))&&(ie(t,new r.NodeSelection(n),"pointer"),!0)}(t,n))}function ae(t,e,n,r){return oe(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function ce(t,e,n,o){return oe(t,"handleTripleClickOn",e,n,o)||t.someProp("handleTripleClick",(function(n){return n(t,e,o)}))||function(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(ie(t,r.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ie(t,r.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!r.NodeSelection.isSelectable(s))continue;ie(t,r.NodeSelection.create(n,a),"pointer")}return!0}}(t,n)}function le(t){return ve(t)}Qt.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!pe(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Pt(t,e)?e.preventDefault():te(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,x(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},Qt.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Qt.keypress=function(t,e){if(!(pe(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r.TextSelection&&n.$from.sameParent(n.$to))){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var ue=s.mac?"metaKey":"ctrlKey";Xt.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=le(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&function(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}(e,t.lastClick)&&!e[ue]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(re(e));i&&("singleClick"==o?t.mouseDown=new de(t,i,e,n):("doubleClick"==o?ae:ce)(t,i.pos,i.inside,e)?e.preventDefault():te(t,"pointer"))};var de=function(t,e,n,o){var i,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[ue],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var l=t.state.doc.resolve(e.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,d=u?t.docView.nearestDesc(u,!0):null;this.target=d?d.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof r.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),te(t,"pointer")};function pe(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}de.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},de.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(re(t))),this.allowDefault||!e?te(this.view,"pointer"):se(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r.TextSelection)&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(ie(this.view,r.Selection.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):te(this.view,"pointer")}},de.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),te(this.view,"pointer")},Xt.touchdown=function(t){le(t),te(t,"pointer")},Xt.contextmenu=function(t){return le(t)};var he=s.android?5e3:-1;function fe(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return ve(t)}),e))}function me(t){for(t.composing=!1;t.compositionNodes.length>0;)t.compositionNodes.pop().markParentsDirty()}function ve(t,e){if(t.domObserver.forceFlush(),me(t),e||t.docView.dirty){var n=dt(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}Qt.compositionstart=Qt.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),ve(t,!0),t.markCursor=null;else if(ve(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}fe(t,he)},Qt.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,fe(t,20))};var ge=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function ye(t,e,n,r){var i=Ft(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,i||o.Slice.empty)}))&&i){var s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Xt.copy=Qt.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=ge?null:e.clipboardData,i=zt(t,n.content()),s=i.dom,a=i.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",s.innerHTML),o.setData("text/plain",a)):function(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}(t,s),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Qt.paste=function(t,e){var n=ge?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(ye(t,o,r,e),e.preventDefault()):function(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?ye(t,r.value,null,e):ye(t,r.textContent,r.innerHTML,e)}),50)}}(t,e)};var we=function(t,e){this.slice=t,this.move=e},be=s.mac?"altKey":"ctrlKey";for(var xe in Xt.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(re(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r.NodeSelection?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=zt(t,a),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(ge?"Text":"text/html",l.innerHTML),ge||e.dataTransfer.setData("text/plain",u),t.dragging=new we(a,!e[be])}},Xt.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Qt.dragover=Qt.dragenter=function(t,e){return e.preventDefault()},Qt.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(re(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||Ft(t,e.dataTransfer.getData(ge?"Text":"text/plain"),ge?null:e.dataTransfer.getData("text/html"),!1,a),l=n&&!e[be];if(t.someProp("handleDrop",(function(n){return n(t,e,c||o.Slice.empty,l)})))e.preventDefault();else if(c){e.preventDefault();var u=c?(0,i.nj)(t.state.doc,a.pos,c):a.pos;null==u&&(u=a.pos);var d=t.state.tr;l&&d.deleteSelection();var p=d.mapping.map(u),h=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,f=d.doc;if(h?d.replaceRangeWith(p,p,c.content.firstChild):d.replaceRange(p,p,c),!d.doc.eq(f)){var m=d.doc.resolve(p);if(h&&r.NodeSelection.isSelectable(c.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(c.content.firstChild))d.setSelection(new r.NodeSelection(m));else{var v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((function(t,e,n,r){return v=r})),d.setSelection(wt(t,m,d.doc.resolve(v)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}}}}}},Xt.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&pt(t)}),20))},Xt.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Xt.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,x(8,"Backspace"))})))){var e=t.state.selection.$cursor;e&&e.pos>0&&t.dispatch(t.state.tr.delete(e.pos-1,e.pos).scrollIntoView())}}),50)}},Qt)Xt[xe]=Qt[xe];function Ce(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var ke=function(t,e){this.spec=e||Ne,this.side=this.spec.side||0,this.toDOM=t};ke.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos;return o.deleted?null:new Me(i-n,i-n,this)},ke.prototype.valid=function(){return!0},ke.prototype.eq=function(t){return this==t||t instanceof ke&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ce(this.spec,t.spec))};var Se=function(t,e){this.spec=e||Ne,this.attrs=t};Se.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new Me(o,i,this)},Se.prototype.valid=function(t,e){return e.from<e.to},Se.prototype.eq=function(t){return this==t||t instanceof Se&&Ce(this.attrs,t.attrs)&&Ce(this.spec,t.spec)},Se.is=function(t){return t.type instanceof Se};var _e=function(t,e){this.spec=e||Ne,this.attrs=t};_e.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new Me(o.pos-n,i.pos-n,this)},_e.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},_e.prototype.eq=function(t){return this==t||t instanceof _e&&Ce(this.attrs,t.attrs)&&Ce(this.spec,t.spec)};var Me=function(t,e,n){this.from=t,this.to=e,this.type=n},Oe={spec:{configurable:!0},inline:{configurable:!0}};Me.prototype.copy=function(t,e){return new Me(t,e,this.type)},Me.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},Me.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},Me.widget=function(t,e,n){return new Me(t,t,new ke(e,n))},Me.inline=function(t,e,n,r){return new Me(t,e,new Se(n,r))},Me.node=function(t,e,n,r){return new Me(t,e,new _e(n,r))},Oe.spec.get=function(){return this.type.spec},Oe.inline.get=function(){return this.type instanceof Se},Object.defineProperties(Me.prototype,Oe);var Ee=[],Ne={},Te=function(t,e){this.local=t&&t.length?t:Ee,this.children=e&&e.length?e:Ee};Te.create=function(t,e){return e.length?Be(e,t,0,Ne):Ae},Te.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Te.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Te.prototype.map=function(t,e,n){return this==Ae||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Ne)},Te.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,d=0;d<a.length;d+=3)if(-1==a[d+1]){var p=n.map(t[d]+i),h=p-o;if(h<0||h>=r.content.size){u=!0;continue}var f=n.map(t[d+1]+i,-1)-o,m=r.content.findIndex(h),v=m.index,g=m.offset,y=r.maybeChild(v);if(y&&g==h&&g+y.nodeSize==f){var w=a[d+2].mapInner(n,y,p+1,t[d]+i+1,s);w!=Ae?(a[d]=h,a[d+1]=f,a[d+2]=w):(a[d+1]=-2,u=!0)}else u=!0}if(u){var b=Be(function(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}(a,t,e||[],n,o,i,s),r,0,s);e=b.local;for(var x=0;x<a.length;x+=3)a[x+1]<0&&(a.splice(x,3),x-=3);for(var C=0,k=0;C<b.children.length;C+=3){for(var S=b.children[C];k<a.length&&a[k]<S;)k+=3;a.splice(k,0,b.children[C],b.children[C+1],b.children[C+2])}}return new Te(e&&e.sort($e),a)}(this.children,i,t,e,n,r,o):i?new Te(i.sort($e)):Ae},Te.prototype.add=function(t,e){return e.length?this==Ae?Te.create(t,e):this.addInner(t,e,0):this},Te.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=Re(e,t,c)){for(r||(r=o.children.slice());i<r.length&&r[i]<s;)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,Be(a,t,c+1,Ne)),i+=3}}));var s=Pe(i?Ie(e):e,-n);return new Te(s.length?this.local.concat(s).sort($e):this.local,r||this.children)},Te.prototype.remove=function(t){return 0==t.length||this==Ae?this:this.removeInner(t,0)},Te.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Ae?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var d=0,p=void 0;d<t.length;d++)if(p=t[d])for(var h=0;h<r.length;h++)r[h].eq(p,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Te(r,n):Ae},Te.prototype.forChild=function(t,e){if(this==Ae)return this;if(e.isLeaf)return Te.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Se){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var d=new Te(r.sort($e));return n?new De([d,n]):d}return n||Ae},Te.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Te)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Te.prototype.locals=function(t){return ze(this.localsInner(t))},Te.prototype.localsInner=function(t){if(this==Ae)return Ee;if(t.inlineContent||!this.local.some(Se.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Se||e.push(this.local[n]);return e};var Ae=new Te;Te.empty=Ae,Te.removeOverlap=ze;var De=function(t){this.members=t};function Pe(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new Me(o.from+e,o.to+e,o.type))}return n}function Re(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Ie(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Be(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Re(t,e,s+n);if(a){i=!0;var c=Be(a,e,n+s+1,r);c!=Ae&&o.push(s,s+e.nodeSize,c)}}));for(var s=Pe(i?Ie(t):t,-n).sort($e),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Te(s,o):Ae}function $e(t,e){return t.from-e.from||t.to-e.to}function ze(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Fe(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Fe(e,o+1,i.copy(r.to,i.to)))}}return e}function Fe(t,e,n){for(;e<t.length&&$e(n,t[e])>0;)e++;t.splice(e,0,n)}function Ve(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Ae&&e.push(r)})),t.cursorWrapper&&e.push(Te.create(t.state.doc,[t.cursorWrapper.deco])),De.from(e)}De.prototype.forChild=function(t,e){if(e.isLeaf)return Te.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Ae&&(o instanceof De?n=n.concat(o.members):n.push(o))}return De.from(n)},De.prototype.eq=function(t){if(!(t instanceof De)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},De.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?ze(n?e:e.sort($e)):Ee},De.from=function(t){switch(t.length){case 0:return Ae;case 1:return t[0];default:return new De(t)}};var je=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.trackWrites=null,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=We(this),this.markCursor=null,this.cursorWrapper=null,He(this),this.nodeViews=Ke(this),this.docView=q(this.state.doc,Ze(this),Ve(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,function(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Gt(t,(function(e,n,r,o){return It(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Xt[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}(t,e)||ne(t,e)||!t.editable&&e.type in Qt||n(t,e)})};for(var n in Xt)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),ee(t)}(this),this.pluginViews=[],this.updatePluginViews()},Le={props:{configurable:!0},root:{configurable:!0}};function Ze(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[Me.node(0,t.state.doc.content.size,e)]}function He(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:Me.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function We(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Ke(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}Le.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},je.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ee(this),this._props=t,this.updateStateInner(t.state,!0)},je.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},je.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},je.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1,a=!1;if(t.storedMarks&&this.composing&&(me(this),a=!0),this.state=t,e){var c=Ke(this);(function(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r})(c,this.nodeViews)&&(this.nodeViews=c,i=!0),ee(this)}this.editable=We(this),He(this);var l=Ve(this),u=Ze(this),d=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(t.doc,u,l);!p&&t.selection.eq(o.selection)||(a=!0);var h,f,v,g,y,w,b,x,C,k,S,E="preserve"==d&&a&&null==this.dom.style.overflowAnchor&&function(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:M(t.dom)}}(this);if(a){this.domObserver.stop();var N=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&(g=o.selection,y=t.selection,w=Math.min(g.$anchor.sharedDepth(g.head),y.$anchor.sharedDepth(y.head)),g.$anchor.start(w)!=y.$anchor.start(w));if(p){var T=s.chrome?this.trackWrites=this.root.getSelection().focusNode:null;!i&&this.docView.update(t.doc,u,l,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=q(t.doc,u,l,this.dom,this)),T&&!this.trackWrites&&(N=!0)}N||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&(h=this,f=h.docView.domFromPos(h.state.selection.anchor),v=h.root.getSelection(),m(f.node,f.offset,v.anchorNode,v.anchorOffset)))?pt(this,N):(gt(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var A=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r.NodeSelection?_(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),A):_(this,this.coordsAtPos(t.selection.head),A))}else E&&(x=(b=E).refDOM,C=b.refTop,k=b.stack,S=x?x.getBoundingClientRect().top:0,O(k,0==S?0:S-C))},je.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},je.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},je.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},je.prototype.hasFocus=function(){return this.root.activeElement==this.dom},je.prototype.focus=function(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(E)return t.focus(E);var e=M(t);t.focus(null==E?{get preventScroll(){return E={preventScroll:!0},!0}}:void 0),E||(E=!1,O(e,0))}(this.dom),pt(this),this.domObserver.start()},Le.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},je.prototype.posAtCoords=function(t){return D(this,t)},je.prototype.coordsAtPos=function(t){return R(this,t)},je.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},je.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},je.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},je.prototype.endOfTextblock=function(t,e){return j(this,e||this.state,t)},je.prototype.destroy=function(){this.docView&&(!function(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ve(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},je.prototype.dispatchEvent=function(t){return function(t,e){ne(t,e)||!Xt[e.type]||!t.editable&&e.type in Qt||Xt[e.type](t,e)}(this,t)},je.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(je.prototype,Le)},5666:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var o=e&&e.prototype instanceof v?e:v,i=Object.create(o.prototype),s=new E(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===h)throw new Error("Generator is already running");if(r===f){if("throw"===o)throw i;return T()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=_(s,n);if(a){if(a===m)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=h;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(t,n,s),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var d="suspendedStart",p="suspendedYield",h="executing",f="completed",m={};function v(){}function g(){}function y(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(N([])));x&&x!==n&&r.call(x,i)&&(w=x);var C=y.prototype=v.prototype=Object.create(w);function k(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,s,a){var c=u(t[o],t,i);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(d).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,a)}))}a(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function _(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function N(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,s=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:T}}function T(){return{value:e,done:!0}}return g.prototype=C.constructor=y,y.constructor=g,g.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(C),t},t.awrap=function(t){return{__await:t}},k(S.prototype),S.prototype[s]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new S(l(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(C),c(C,a,"Generator"),C[i]=function(){return this},C.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=N,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return a.type="throw",a.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},3346:(t,e,n)=>{"use strict";n.d(e,{QF:()=>r.QF,uo:()=>r.uo,IB:()=>c,Cf:()=>f,K9:()=>g,x2:()=>m,$R:()=>v,P9:()=>y,uJ:()=>r.uJ,bw:()=>l,s6:()=>a,wr:()=>w,zK:()=>u.zK,Gz:()=>b,kQ:()=>C,w9:()=>r.w9,bm:()=>k,dy:()=>S,S0:()=>u.S0});var r=n(2778),o=n(1081),i=n(8638);function s(t,e){return function(n,r){var s=n.selection,a=s.$from,c=s.$to,l=a.blockRange(c),u=!1,d=l;if(!l)return!1;if(l.depth>=2&&a.node(l.depth-1).type.compatibleContent(t)&&0==l.startIndex){if(0==a.index(l.depth-1))return!1;var p=n.doc.resolve(l.start-2);d=new i.NodeRange(p,p,l.depth),l.endIndex<l.parent.childCount&&(l=new i.NodeRange(a,n.doc.resolve(c.end(l.depth)),l.depth)),u=!0}var h=(0,o.nd)(d,t,e,l);return!!h&&(r&&r(function(t,e,n,r,s){for(var a=i.Fragment.empty,c=n.length-1;c>=0;c--)a=i.Fragment.from(n[c].type.create(n[c].attrs,a));t.step(new o.FC(e.start-(r?2:0),e.end,e.start,e.end,new i.Slice(a,0,0),n.length,!0));for(var l=0,u=0;u<n.length;u++)n[u].type==s&&(l=u+1);for(var d=n.length-l,p=e.start+n.length-(r?2:0),h=e.parent,f=e.startIndex,m=e.endIndex,v=!0;f<m;f++,v=!1)!v&&(0,o.Ax)(t.doc,p,d)&&(t.split(p,d),p+=2*d),p+=h.child(f).nodeSize;return t}(n.tr,l,h,u,t).scrollIntoView()),!0)}}function a(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=r.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var l=s.node(-1);if(l.type!=t)return!1;if(0==s.parent.content.size&&s.node(-1).childCount==s.indexAfter(-1)){if(2==s.depth||s.node(-3).type!=t||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var u=i.Fragment.empty,d=s.index(-1)>0,p=s.depth-(d?1:2);p>=s.depth-3;p--)u=i.Fragment.from(s.node(p).copy(u));u=u.append(i.Fragment.from(t.createAndFill()));var h=e.tr.replace(s.before(d?null:-1),s.after(-3),new i.Slice(u,d?3:2,2));h.setSelection(e.selection.constructor.near(h.doc.resolve(s.pos+(d?3:2)))),n(h.scrollIntoView())}return!0}var f=a.pos==s.end()?l.contentMatchAt(0).defaultType:null,m=e.tr.delete(s.pos,a.pos),v=f&&[null,{type:f}];return!!(0,o.Ax)(m.doc,s.pos,2,v)&&(n&&n(m.split(s.pos,2,v).scrollIntoView()),!0)}}function c(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));return!!c&&(!n||(s.node(c.depth-1).type==t?function(t,e,n,r){var s=t.tr,a=r.end,c=r.$to.end(r.depth);a<c&&(s.step(new o.FC(a-1,c,a,c,new i.Slice(i.Fragment.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new i.NodeRange(s.doc.resolve(r.$from.pos),s.doc.resolve(c),r.depth));return e(s.lift(r,(0,o.k9)(r)).scrollIntoView()),!0}(e,n,t,c):function(t,e,n){for(var r=t.tr,s=n.parent,a=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)a-=s.child(c).nodeSize,r.delete(a-1,a+1);var u=r.doc.resolve(n.start),d=u.nodeAfter,p=0==n.startIndex,h=n.endIndex==s.childCount,f=u.node(-1),m=u.index(-1);if(!f.canReplace(m+(p?0:1),m+1,d.content.append(h?i.Fragment.empty:i.Fragment.from(s))))return!1;var v=u.pos,g=v+d.nodeSize;return r.step(new o.FC(v-(p?1:0),g+(h?1:0),v+1,g-1,new i.Slice((p?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))).append(h?i.Fragment.empty:i.Fragment.from(s.copy(i.Fragment.empty))),p?0:1,h?0:1),p?0:1)),e(r.scrollIntoView()),!0}(e,n,c)))}}function l(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var u=c.parent,d=u.child(l-1);if(d.type!=t)return!1;if(n){var p=d.lastChild&&d.lastChild.type==u.type,h=i.Fragment.from(p?t.create():null),f=new i.Slice(i.Fragment.from(t.create(null,i.Fragment.from(u.type.create(null,h)))),p?3:1,0),m=c.start,v=c.end;n(e.tr.step(new o.FC(m-(p?3:1),v,m,v,f,1,!0)).scrollIntoView())}return!0}}var u=n(896),d=n(6922),p=n(9146),h=n(9124);function f(t,e,n){return new u.VK(t,((t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t,c=r.length-1;let l=i,u=o;if(r[c]){const n=o+r[0].indexOf(r[c-1]),s=n+r[c-1].length-1,d=n+r[c-1].lastIndexOf(r[c]),p=d+r[c].length;if(function(t,e,n){let r=[];return n.doc.nodesBetween(t,e,((t,e)=>{r=[...r,...t.marks.map((n=>({start:e,end:e+t.nodeSize,mark:n})))]})),r}(o,i,t).filter((t=>{const{excluded:n}=t.mark.type;return n.find((t=>t.name===e.name))})).filter((t=>t.end>n)).length)return!1;p<s&&a.delete(p,s),d>n&&a.delete(n,d),u=n,l=u+r[c].length}return a.addMark(u,l,e.create(s)),a.removeStoredMark(e),a}))}function m(t,e,n){return new u.VK(t,((t,r,o,i)=>{const s=n instanceof Function?n(r):n,{tr:a}=t;return r[0]&&a.replaceWith(o-1,i,e.create(s)),a}))}function v(t,e,n){const r=o=>{const s=[];return o.forEach((o=>{if(o.isText){const{text:r}=o;let i,a=0;do{if(i=t.exec(r),i){const t=i.index,r=t+i[0].length,c=n instanceof Function?n(i[0]):n;t>0&&s.push(o.cut(a,t)),s.push(o.cut(t,r).mark(e.create(c).addToSet(o.marks))),a=r}}while(i);a<r.length&&s.push(o.cut(a))}else s.push(o.copy(r(o.content)))})),i.Fragment.fromArray(s)};return new d.Plugin({props:{transformPasted:t=>new i.Slice(r(t.content),t.openStart,t.openEnd)}})}function g(t,e,n){const r=(o,s)=>{const a=[];return o.forEach((o=>{if(o.isText){const{text:r,marks:i}=o;let c,l=0;const u=!!i.filter((t=>"link"===t.type.name))[0];for(;!u&&null!==(c=t.exec(r));)if(s&&s.type.allowsMarkType(e)&&c[1]){const t=c.index,r=t+c[0].length,i=t+c[0].indexOf(c[1]),s=i+c[1].length,u=n instanceof Function?n(c):n;t>0&&a.push(o.cut(l,t)),a.push(o.cut(i,s).mark(e.create(u).addToSet(o.marks))),l=r}l<r.length&&a.push(o.cut(l))}else a.push(o.copy(r(o.content,o)))})),i.Fragment.fromArray(a)};return new d.Plugin({props:{transformPasted:t=>new i.Slice(r(t.content),t.openStart,t.openEnd)}})}function y(t){return(e,n)=>{const{tr:r,selection:o}=e;let{from:i,to:s}=o;const{$from:a,empty:c}=o;if(c){const e=(0,p.IH)(a,t);i=e.from,s=e.to}return r.removeMark(i,s,t),n(r)}}function w(t){return function(e,n){const{$from:r,$to:o,node:s}=e.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(o))return!1;const a=r.node(-1);if(a.type!=t)return!1;if(0==r.parent.content.size){if(2==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(n){let o=i.Fragment.empty;const s=r.index(-1)>0;for(let t=r.depth-(s?1:2);t>=r.depth-3;t--)o=i.Fragment.from(r.node(t).copy(o));o=o.append(i.Fragment.from(t.createAndFill()));const a=e.tr.replace(r.before(s?null:-1),r.after(-3),new i.Slice(o,s?3:2,2));a.setSelection(e.selection.constructor.near(a.doc.resolve(r.pos+(s?3:2)))),n(a.scrollIntoView())}return!0}const c=o.pos==r.end()?a.contentMatchAt(r.indexAfter(-1)).defaultType:null,l=e.tr.delete(r.pos,o.pos);let u=c&&[{type:t},{type:c}];return u||(u=[{type:t},null]),!!function(t,e,n=1,r){const o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let t=o.depth-1,e=n-2;t>i;t--,e--){const n=o.node(t),i=o.index(t);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(i,n.childCount);const a=r&&r[e]||n;if(a!=n&&(s=s.replaceChild(0,a.type.create(a.attrs))),!n.canReplace(i+1,n.childCount))return!1}const a=o.indexAfter(i),c=r&&r[0];return o.node(i).canReplaceWith(a,a,c?c.type:o.node(i+1).type)}(l.doc,r.pos,2,u)&&(n&&n(l.split(r.pos,2,u).scrollIntoView()),!0)}}function b(t,e,n={}){return(o,i,s)=>(0,p.W3)(o,t,n)?(0,r.uJ)(e)(o,i,s):(0,r.uJ)(t,n)(o,i,s)}function x(t,e){return t.type===e.nodes.bullet_list||t.type===e.nodes.ordered_list||t.type===e.nodes.todo_list}function C(t,e){return(n,r,o)=>{const{schema:i,selection:a}=n,{$from:l,$to:u}=a,d=l.blockRange(u);if(!d)return!1;const p=(0,h.Kk)((t=>x(t,i)))(a);if(d.depth>=1&&p&&d.depth-p.depth<=1){if(p.node.type===t)return c(e)(n,r,o);if(x(p.node,i)&&t.validContent(p.node.content)){const{tr:e}=n;return e.setNodeMarkup(p.pos,t),r&&r(e),!1}}return s(t)(n,r,o)}}function k(t,e={}){return(n,o,i)=>(0,p.W3)(n,t,e)?(0,r.xb)(n,o):(0,r.ym)(t,e)(n,o,i)}function S(t,e){return(n,r)=>{const{tr:o,selection:i,doc:s}=n,{ranges:a,empty:c}=i;if(c){const{from:n,to:r}=(0,p.IH)(i.$from,t);s.rangeHasMark(n,r,t)&&o.removeMark(n,r,t),o.addMark(n,r,t.create(e))}else a.forEach((n=>{const{$to:r,$from:i}=n;s.rangeHasMark(i.pos,r.pos,t)&&o.removeMark(i.pos,r.pos,t),o.addMark(i.pos,r.pos,t.create(e))}));return r(o)}}},5765:(t,e,n)=>{"use strict";n.d(e,{V6:()=>D,d8:()=>Z,DY:()=>P,EK:()=>H,dn:()=>R,TO:()=>q,U1:()=>I,X6:()=>B,Ay:()=>G,Ee:()=>z,Tx:()=>W,rU:()=>K,HC:()=>F,GS:()=>V,Re:()=>U,PK:()=>j,B4:()=>L,v6:()=>J});var r=n(4429),o=n(3346),i=(n(6470),n(8780)),s=(n(9124),n(8638),n(6922)),a=n(9132),c=n(9146),l=n(1081);new s.PluginKey("collab");var u=200,d=function(){};d.prototype.append=function(t){return t.length?(t=d.from(t),!this.length&&t||t.length<u&&this.leafAppend(t)||this.length<u&&t.leafPrepend(this)||this.appendInner(t)):this},d.prototype.prepend=function(t){return t.length?d.from(t).append(this):this},d.prototype.appendInner=function(t){return new h(this,t)},d.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?d.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},d.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},d.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},d.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},d.from=function(t){return t instanceof d?t:t&&t.length?new p(t):d.empty};var p=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=u)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=u)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(d);d.empty=new p([]);var h=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(d);const f=d;var m=function(t,e){this.items=t,this.eventCount=e};m.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){if(this.items.get(i-1).selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var s,a,c=t.tr,l=[],u=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void u.push(t);if(r){u.push(new v(t.map));var d,p=t.step.map(r.slice(o));p&&c.maybeStep(p).doc&&(d=c.mapping.maps[c.mapping.maps.length-1],l.push(new v(d,null,null,l.length+u.length))),o--,d&&r.appendMap(d,o)}else c.maybeStep(t.step);return t.selection?(s=r?t.selection.map(r.slice(o)):t.selection,a=new m(n.items.slice(0,i).append(u.reverse().concat(l)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:a,transform:c,selection:s}},m.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var l,u=t.steps[c].invert(t.docs[c]),d=new v(t.mapping.maps[c],u,e);(l=a&&a.merge(d))&&(d=l,c?o.pop():s=s.slice(0,s.length-1)),o.push(d),e&&(i++,e=null),r||(a=d)}var p,h,f,g=i-n.depth;return g>y&&(h=g,(p=s).forEach((function(t,e){if(t.selection&&0==h--)return f=e,!1})),s=p.slice(f),i-=g),new m(s.append(o),i)},m.prototype.remapping=function(t,e){var n=new l.vs;return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},m.prototype.addMaps=function(t){return 0==this.eventCount?this:new m(this.items.append(t.map((function(t){return new v(t)}))),this.eventCount)},m.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),u=e.selection&&e.selection.map(o.slice(a+1,r));u&&s++,n.push(new v(c,l,u))}else n.push(new v(c))}}),r);for(var c=[],l=e;l<i;l++)c.push(new v(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),d=new m(u,s);return d.emptyItemCount()>500&&(d=d.compress(this.items.length-n.length)),d},m.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},m.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var l=i.selection&&i.selection.map(e.slice(n));l&&o++;var u,d=new v(c.invert(),a,l),p=r.length-1;(u=r.length&&r[p].merge(d))?r[p]=u:r.push(d)}}else i.map&&n--}),this.items.length,0),new m(f.from(r.reverse()),o)},m.empty=new m(f.empty,0);var v=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};v.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new v(e.getMap().invert(),e,this.selection)}};var g=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},y=20;function w(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function b(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function x(t,e,n,r){var o=S(e),i=_.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),l=new g(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(_,{redo:r,historyState:l}).scrollIntoView())}}var C=!1,k=null;function S(t){var e=t.plugins;if(k!=e){C=!1,k=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){C=!0;break}}return C}var _=new s.PluginKey("history"),M=new s.PluginKey("closeHistory");function O(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new s.Plugin({key:_,state:{init:function(){return new g(m.empty,m.empty,null,0)},apply:function(e,n,r){return function(t,e,n,r){var o,i=n.getMeta(_);if(i)return i.historyState;n.getMeta(M)&&(t=new g(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(_))return s.getMeta(_).redo?new g(t.done.addTransform(n,null,r,S(e)),t.undone,w(n.mapping.maps[n.steps.length-1]),t.prevTime):new g(t.done,t.undone.addTransform(n,null,r,S(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new g(t.done.rebased(n,o),t.undone.rebased(n,o),b(t.prevRanges,n.mapping),t.prevTime):new g(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),b(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}(n,t.prevRanges)),c=s?b(t.prevRanges,n.mapping):w(n.mapping.maps[n.steps.length-1]);return new g(t.done.addTransform(n,a?e.selection.getBookmark():null,r,S(e)),m.empty,c,n.time)}(n,r,e,t)}},config:t})}function E(t,e){var n=_.getState(t);return!(!n||0==n.done.eventCount)&&(e&&x(n,t,e,!1),!0)}function N(t,e){var n=_.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&x(n,t,e,!0),!0)}function T(t){var e=_.getState(t);return e?e.done.eventCount:0}function A(t){var e=_.getState(t);return e?e.undone.eventCount:0}class D extends r.NB{get name(){return"blockquote"}get schema(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]}}commands({type:t}){return()=>(0,o.bm)(t)}keys({type:t}){return{"Ctrl->":(0,o.bm)(t)}}inputRules({type:t}){return[(0,o.S0)(/^\s*>\s$/,t)]}}class P extends r.NB{get name(){return"bullet_list"}get schema(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",0]}}commands({type:t,schema:e}){return()=>(0,o.kQ)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-8":(0,o.kQ)(t,e.nodes.list_item)}}inputRules({type:t}){return[(0,o.S0)(/^\s*([-+*])\s$/,t)]}}class R extends r.NB{get name(){return"code_block"}get schema(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]}}commands({type:t,schema:e}){return()=>(0,o.Gz)(t,e.nodes.paragraph)}keys({type:t}){return{"Shift-Ctrl-\\":(0,o.uJ)(t)}}inputRules({type:t}){return[(0,o.zK)(/^```$/,t)]}}class I extends r.NB{get name(){return"hard_break"}get schema(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]}}commands({type:t}){return()=>(0,o.QF)(o.uo,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)))}keys({type:t}){const e=(0,o.QF)(o.uo,((e,n)=>(n(e.tr.replaceSelectionWith(t.create()).scrollIntoView()),!0)));return{"Mod-Enter":e,"Shift-Enter":e}}}class B extends r.NB{get name(){return"heading"}get defaultOptions(){return{levels:[1,2,3,4,5,6]}}get schema(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((t=>({tag:"h".concat(t),attrs:{level:t}}))),toDOM:t=>["h".concat(t.attrs.level),0]}}commands({type:t,schema:e}){return n=>(0,o.Gz)(t,e.nodes.paragraph,n)}keys({type:t}){return this.options.levels.reduce(((e,n)=>({...e,["Shift-Ctrl-".concat(n)]:(0,o.uJ)(t,{level:n})})),{})}inputRules({type:t}){return this.options.levels.map((e=>(0,o.zK)(new RegExp("^(#{1,".concat(e,"})\\s$")),t,(()=>({level:e})))))}}const $=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/;class z extends r.NB{get name(){return"image"}get schema(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:t=>({src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")})}],toDOM:t=>["img",t.attrs]}}commands({type:t}){return e=>(n,r)=>{const{selection:o}=n,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=t.create(e);r(n.tr.insert(i,s))}}inputRules({type:t}){return[(0,o.x2)($,t,(t=>{const[,e,n,r]=t;return{src:n,alt:e,title:r}}))]}get plugins(){return[new r.Sy({props:{handleDOMEvents:{drop(t,e){if(!(e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length))return;const n=Array.from(e.dataTransfer.files).filter((t=>/image/i.test(t.type)));if(0===n.length)return;e.preventDefault();const{schema:r}=t.state,o=t.posAtCoords({left:e.clientX,top:e.clientY});n.forEach((e=>{const n=new FileReader;n.onload=e=>{const n=r.nodes.image.create({src:e.target.result}),i=t.state.tr.insert(o.pos,n);t.dispatch(i)},n.readAsDataURL(e)}))}}}})]}}class F extends r.NB{get name(){return"list_item"}get schema(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:()=>["li",0]}}keys({type:t}){return{Enter:(0,o.s6)(t),Tab:(0,o.bw)(t),"Shift-Tab":(0,o.IB)(t)}}}class V extends r.NB{get name(){return"ordered_list"}get schema(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}commands({type:t,schema:e}){return()=>(0,o.kQ)(t,e.nodes.list_item)}keys({type:t,schema:e}){return{"Shift-Ctrl-9":(0,o.kQ)(t,e.nodes.list_item)}}inputRules({type:t}){return[(0,o.S0)(/^(\d+)\.\s$/,t,(t=>({order:+t[1]})),((t,e)=>e.childCount+e.attrs.order===+t[1]))]}}(0,a.tableNodes)({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:t=>t.style.backgroundColor||null,setDOMAttr(t,e){if(t){const n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}});class j extends r.NB{get name(){return"todo_item"}get defaultOptions(){return{nested:!1}}get view(){return{props:["node","updateAttrs","view"],methods:{onChange(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}get schema(){return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:t=>{const{done:e}=t.attrs;return["li",{"data-type":this.name,"data-done":e.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:t=>({done:"true"===t.getAttribute("data-done")})}]}}keys({type:t}){return{Enter:(0,o.wr)(t),Tab:this.options.nested?(0,o.bw)(t):()=>{},"Shift-Tab":(0,o.IB)(t)}}}class L extends r.NB{get name(){return"todo_list"}get schema(){return{group:"block",content:"todo_item+",toDOM:()=>["ul",{"data-type":this.name},0],parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}commands({type:t,schema:e}){return()=>(0,o.kQ)(t,e.nodes.todo_item)}inputRules({type:t}){return[(0,o.S0)(/^\s*(\[ \])\s$/,t)]}}class Z extends r.vc{get name(){return"bold"}get schema(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>"normal"!==t.style.fontWeight&&null},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM:()=>["strong",0]}}keys({type:t}){return{"Mod-b":(0,o.w9)(t)}}commands({type:t}){return()=>(0,o.w9)(t)}inputRules({type:t}){return[(0,o.Cf)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,t)]}pasteRules({type:t}){return[(0,o.K9)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,t)]}}class H extends r.vc{get name(){return"code"}get schema(){return{excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",0]}}keys({type:t}){return{"Mod-`":(0,o.w9)(t)}}commands({type:t}){return()=>(0,o.w9)(t)}inputRules({type:t}){return[(0,o.Cf)(/(?:`)([^`]+)(?:`)$/,t)]}pasteRules({type:t}){return[(0,o.K9)(/(?:`)([^`]+)(?:`)/g,t)]}}class W extends r.vc{get name(){return"italic"}get schema(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]}}keys({type:t}){return{"Mod-i":(0,o.w9)(t)}}commands({type:t}){return()=>(0,o.w9)(t)}inputRules({type:t}){return[(0,o.Cf)(/(?:^|[^_])(_([^_]+)_)$/,t),(0,o.Cf)(/(?:^|[^*])(\*([^*]+)\*)$/,t)]}pasteRules({type:t}){return[(0,o.K9)(/_([^_]+)_/g,t),(0,o.K9)(/\*([^*]+)\*/g,t)]}}class K extends r.vc{get name(){return"link"}get defaultOptions(){return{openOnClick:!0,target:null}}get schema(){return{attrs:{href:{default:null},target:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target")})}],toDOM:t=>["a",{...t.attrs,rel:"noopener noreferrer nofollow",target:this.options.target},0]}}commands({type:t}){return e=>e.href?(0,o.dy)(t,e):(0,o.P9)(t)}pasteRules({type:t}){return[(0,o.$R)(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=,]*)/gi,t,(t=>({href:t})))]}get plugins(){return this.options.openOnClick?[new r.Sy({props:{handleClick:(t,e,n)=>{const{schema:r}=t.state,o=(0,c.Np)(t.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href,o.target))}}})]:[]}}class U extends r.vc{get name(){return"strike"}get schema(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:t=>"line-through"===t}],toDOM:()=>["s",0]}}keys({type:t}){return{"Mod-d":(0,o.w9)(t)}}commands({type:t}){return()=>(0,o.w9)(t)}inputRules({type:t}){return[(0,o.Cf)(/~([^~]+)~$/,t)]}pasteRules({type:t}){return[(0,o.K9)(/~([^~]+)~/g,t)]}}class J extends r.vc{get name(){return"underline"}get schema(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:t=>"underline"===t}],toDOM:()=>["u",0]}}keys({type:t}){return{"Mod-u":(0,o.w9)(t)}}commands({type:t}){return()=>(0,o.w9)(t)}}class q extends r.hj{get name(){return"focus"}get defaultOptions(){return{className:"has-focus",nested:!1}}get plugins(){return[new r.Sy({props:{decorations:({doc:t,plugins:e,selection:n})=>{const r=e.find((t=>t.key.startsWith("editable$"))).props.editable()&&this.options.className,{focused:o}=this.editor,{anchor:s}=n,a=[];return!(!r||!o)&&(t.descendants(((t,e)=>{if(s>=e&&s<=e+t.nodeSize&&!t.isText){const n=i.p.node(e,e+t.nodeSize,{class:this.options.className});a.push(n)}return this.options.nested})),i.EH.create(t,a))}}})]}}class G extends r.hj{get name(){return"history"}get defaultOptions(){return{depth:"",newGroupDelay:""}}keys(){return{"Mod-z":E,"Mod-y":N,"Shift-Mod-z":N,"Mod-я":E,"Shift-Mod-я":N}}get plugins(){return[O({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}commands(){return{undo:()=>E,redo:()=>N,undoDepth:()=>T,redoDepth:()=>A}}}},9146:(t,e,n)=>{"use strict";n.d(e,{Np:()=>o,IH:()=>s,ok:()=>i,GD:()=>a,W3:()=>c});var r=n(9124);function o(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,(t=>{o=[...o,...t.marks]}));const i=o.find((t=>t.type.name===e.name));return i?i.attrs:{}}function i(t,e){const{from:n,to:r}=t.selection;let o=[];t.doc.nodesBetween(n,r,(t=>{o=[...o,t]}));const i=o.reverse().find((t=>t.type.name===e.name));return i?i.attrs:{}}function s(t=null,e=null){if(!t||!e)return!1;const n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;const r=n.node.marks.find((t=>t.type===e));if(!r)return!1;let o=t.index(),i=t.start()+n.offset,s=o+1,a=i+n.node.nodeSize;for(;o>0&&r.isInSet(t.parent.child(o-1).marks);)o-=1,i-=t.parent.child(o).nodeSize;for(;s<t.parent.childCount&&r.isInSet(t.parent.child(s).marks);)a+=t.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}function a(t,e){const{from:n,$from:r,to:o,empty:i}=t.selection;return i?!!e.isInSet(t.storedMarks||r.marks()):!!t.doc.rangeHasMark(n,o,e)}function c(t,e,n={}){const o=(0,r.a1)(e)(t.selection)||(0,r.Kk)((t=>t.type===e))(t.selection);return Object.keys(n).length&&o?o.node.hasMarkup(e,{...o.node.attrs,...n}):!!o}},4429:(t,e,n)=>{"use strict";n.d(e,{QW:()=>M,ML:()=>N,kg:()=>T,eb:()=>I,hj:()=>x,vc:()=>k,NB:()=>_,Sy:()=>r.Plugin});var r=n(6922),o=n(8780),i=n(8638),s=n(1081);var a=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};a.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},a.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},a.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},a.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-c.left+"px",this.element.style.top=t.top-c.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},a.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},a.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(n=(0,s.nj)(this.editorView.state.doc,n,this.editorView.dragging.slice))&&(n=e.pos),this.setCursor(n),this.scheduleRemoval(5e3)}}},a.prototype.dragend=function(){this.scheduleRemoval(20)},a.prototype.drop=function(){this.scheduleRemoval(20)},a.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var c=n(4751),l=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return i.Slice.empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new u(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!function(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}(t)||!function(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,o){t:for(;;){if(!o&&e.valid(t))return t;for(var i=t.pos,s=null,a=t.depth;;a--){var c=t.node(a);if(n>0?t.indexAfter(a)<c.childCount:t.index(a)>0){s=c.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;i+=n;var l=t.doc.resolve(i);if(e.valid(l))return l}for(;;){var u=n>0?s.firstChild:s.lastChild;if(!u){if(s.isAtom&&!s.isText&&!r.NodeSelection.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),o=!1;continue t}break}s=u,i+=n;var d=t.doc.resolve(i);if(e.valid(d))return d}return null}},e}(r.Selection);l.prototype.visible=!1,r.Selection.jsonID("gapcursor",l);var u=function(t){this.pos=t};u.prototype.map=function(t){return new u(t.map(this.pos))},u.prototype.resolve=function(t){var e=t.resolve(this.pos);return l.valid(e)?new l(e):r.Selection.near(e)};var d=(0,c.$)({ArrowLeft:p("horiz",-1),ArrowRight:p("horiz",1),ArrowUp:p("vert",-1),ArrowDown:p("vert",1)});function p(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,o,i){var s=t.selection,a=e>0?s.$to:s.$from,c=s.empty;if(s instanceof r.TextSelection){if(!i.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=t.doc.resolve(e>0?a.after():a.before())}var u=l.findFrom(a,e,c);return!!u&&(o&&o(t.tr.setSelection(new l(u))),!0)}}function h(t,e,n){if(!t.editable)return!1;var o=t.state.doc.resolve(e);if(!l.valid(o))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY}).inside;return!(i>-1&&r.NodeSelection.isSelectable(t.state.doc.nodeAt(i)))&&(t.dispatch(t.state.tr.setSelection(new l(o))),!0)}function f(t){if(!(t.selection instanceof l))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",o.EH.create(t.doc,[o.p.widget(t.selection.head,e,{key:"gapcursor"})])}var m=n(2778),v=n(896),g=n(9146),y=n(538),w=n(3346);class b{constructor(t,{editor:e,extension:n,parent:r,node:o,view:i,decorations:s,getPos:a}){this.component=t,this.editor=e,this.extension=n,this.parent=r,this.node=o,this.view=i,this.decorations=s,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:a,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}createDOM(){const t=y.default.extend(this.component),e={editor:this.editor,node:this.node,view:this.view,getPos:()=>this.getPos(),decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:t=>this.updateAttrs(t)};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"==typeof this.extension.update&&(this.update=this.extension.update),this.vm=new t({parent:this.parent,propsData:e}).$mount(),this.vm.$el}update(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e})),!0)}updateComponentProps(t){if(!this.vm._props)return;const e=y.default.config.silent;y.default.config.silent=!0,Object.entries(t).forEach((([t,e])=>{this.vm._props[t]=e})),y.default.config.silent=e}updateAttrs(t){if(!this.view.editable)return;const{state:e}=this.view,{type:n}=this.node,r=this.getPos(),o={...this.node.attrs,...t},i=this.isMark?e.tr.removeMark(r.from,r.to,n).addMark(r.from,r.to,n.create(o)):e.tr.setNodeMarkup(r,null,o);this.view.dispatch(i)}ignoreMutation(t){return"selection"!==t.type&&(!this.contentDOM||!this.contentDOM.contains(t.target))}stopEvent(t){if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(t);const e=!!this.extension.schema.draggable;if(e&&"mousedown"===t.type){const e=t.target.closest&&t.target.closest("[data-drag-handle]");e&&(this.dom===e||this.dom.contains(e))&&(this.captureEvents=!1,document.addEventListener("dragend",(()=>{this.captureEvents=!0}),{once:!0}))}const n="copy"===t.type,r="paste"===t.type,o="cut"===t.type,i=t.type.startsWith("drag")||"drop"===t.type;return!(e&&i||n||r||o)&&this.captureEvents}selectNode(){this.updateComponentProps({selected:!0})}deselectNode(){this.updateComponentProps({selected:!1})}getMarkPos(){const t=this.view.posAtDOM(this.dom),e=this.view.state.doc.resolve(t);return(0,g.IH)(e,this.node.type)}destroy(){this.vm.$destroy()}}class x{constructor(t={}){this.options={...this.defaultOptions,...t}}init(){return null}bindEditor(t=null){this.editor=t}get name(){return null}get type(){return"extension"}get defaultOptions(){return{}}get plugins(){return[]}inputRules(){return[]}pasteRules(){return[]}keys(){return{}}}class C{constructor(t=[],e){t.forEach((t=>{t.bindEditor(e),t.init()})),this.extensions=t}get nodes(){return this.extensions.filter((t=>"node"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get options(){const{view:t}=this;return this.extensions.reduce(((e,n)=>({...e,[n.name]:new Proxy(n.options,{set(e,n,r){const o=e[n]!==r;return Object.assign(e,{[n]:r}),o&&t.updateState(t.state),!0}})})),{})}get marks(){return this.extensions.filter((t=>"mark"===t.type)).reduce(((t,{name:e,schema:n})=>({...t,[e]:n})),{})}get plugins(){return this.extensions.filter((t=>t.plugins)).reduce(((t,{plugins:e})=>[...t,...e]),[])}keymaps({schema:t}){return[...this.extensions.filter((t=>["extension"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({schema:t}))),...this.extensions.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.keys)).map((e=>e.keys({type:t["".concat(e.type,"s")][e.name],schema:t})))].map((t=>(0,c.h)(t)))}inputRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.inputRules)).map((e=>e.inputRules({type:t["".concat(e.type,"s")][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}pasteRules({schema:t,excludedExtensions:e}){if(!(e instanceof Array)&&e)return[];const n=e instanceof Array?this.extensions.filter((t=>!e.includes(t.name))):this.extensions;return[...n.filter((t=>["extension"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({schema:t}))),...n.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.pasteRules)).map((e=>e.pasteRules({type:t["".concat(e.type,"s")][e.name],schema:t})))].reduce(((t,e)=>[...t,...e]),[])}commands({schema:t,view:e}){return this.extensions.filter((t=>t.commands)).reduce(((n,r)=>{const{name:o,type:i}=r,s={},a=r.commands({schema:t,...["node","mark"].includes(i)?{type:t["".concat(i,"s")][o]}:{}}),c=(t,n)=>!!e.editable&&(e.focus(),t(n)(e.state,e.dispatch,e)),l=(t,e)=>{Array.isArray(e)?s[t]=t=>e.forEach((e=>c(e,t))):"function"==typeof e&&(s[t]=t=>c(e,t))};return"object"==typeof a?Object.entries(a).forEach((([t,e])=>{l(t,e)})):l(o,a),{...n,...s}}),{})}}class k extends x{constructor(t={}){super(t)}get type(){return"mark"}get view(){return null}get schema(){return null}command(){return()=>{}}}function S(t=0,e=0,n=0){return Math.min(Math.max(parseInt(t,10),e),n)}class _ extends x{constructor(t={}){super(t)}get type(){return"node"}get view(){return null}get schema(){return null}command(){return()=>{}}}class M extends _{get name(){return"doc"}get schema(){return{content:"block+"}}}class O extends _{get name(){return"paragraph"}get schema(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:()=>["p",0]}}commands({type:t}){return()=>(0,w.uJ)(t)}}class E extends _{get name(){return"text"}get schema(){return{group:"inline"}}}class N extends class{on(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}emit(t,...e){this._callbacks=this._callbacks||{};const n=this._callbacks[t];return n&&n.forEach((t=>t.apply(this,e))),this}off(t,e){if(arguments.length){const n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter((t=>t!==e)):delete this._callbacks[t])}else this._callbacks={};return this}}{constructor(t={}){super(),this.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},enableDropCursor:!0,enableGapCursor:!0,parseOptions:{},injectCSS:!0,onInit:()=>{},onTransaction:()=>{},onUpdate:()=>{},onFocus:()=>{},onBlur:()=>{},onPaste:()=>{},onDrop:()=>{}},this.events=["init","transaction","update","focus","blur","paste","drop"],this.init(t)}init(t={}){this.setOptions({...this.defaultOptions,...t}),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&function(t){{const e=document.createElement("style");e.type="text/css",e.textContent=t;const{head:n}=document,{firstChild:r}=n;r?n.insertBefore(e,r):n.appendChild(e)}}('.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n'),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((t=>{var e;this.on(t,this.options[(e="on ".concat(t),e.replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,""))]||(()=>{}))})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}setOptions(t){this.options={...this.options,...t},this.view&&this.state&&this.view.updateState(this.state)}get builtInExtensions(){return this.options.useBuiltInExtensions?[new M,new E,new O]:[]}get state(){return this.view?this.view.state:null}createExtensions(){return new C([...this.builtInExtensions,...this.options.extensions],this)}createPlugins(){return this.extensions.plugins}createKeymaps(){return this.extensions.keymaps({schema:this.schema})}createInputRules(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}createPasteRules(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}createCommands(){return this.extensions.commands({schema:this.schema,view:this.view})}createNodes(){return this.extensions.nodes}createMarks(){return this.extensions.marks}createSchema(){return new i.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}createState(){return r.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[...this.plugins,(0,v.Hw)({rules:this.inputRules}),...this.pasteRules,...this.keymaps,(0,c.h)({Backspace:v.dU}),(0,c.h)(m.YR),...this.options.enableDropCursor?[(t=this.options.dropCursor,void 0===t&&(t={}),new r.Plugin({view:function(e){return new a(e,t)}}))]:[],...this.options.enableGapCursor?[new r.Plugin({props:{decorations:f,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&l.valid(n))return new l(n)},handleClick:h,handleKeyDown:d}})]:[],new r.Plugin({key:new r.PluginKey("editable"),props:{editable:()=>this.options.editable}}),new r.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:(t,e)=>{this.focused=!0,this.emit("focus",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!0);this.view.dispatch(n)},blur:(t,e)=>{this.focused=!1,this.emit("blur",{event:e,state:t.state,view:t});const n=this.state.tr.setMeta("focused",!1);this.view.dispatch(n)}}}}),new r.Plugin({props:this.options.editorProps})]});var t}createDocument(t,e=this.options.parseOptions){if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"==typeof t)try{return this.schema.nodeFromJSON(t)}catch(e){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",e),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof t){const n="<div>".concat(t,"</div>"),r=(new window.DOMParser).parseFromString(n,"text/html").body.firstElementChild;return i.DOMParser.fromSchema(this.schema).parse(r,e)}return!1}createView(){return new o.tk(this.element,{state:this.createState(),handlePaste:(...t)=>{this.emit("paste",...t)},handleDrop:(...t)=>{this.emit("drop",...t)},dispatchTransaction:this.dispatchTransaction.bind(this)})}setParentComponent(t=null){t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[...this.builtInExtensions,...this.options.extensions]})})}initNodeViews({parent:t,extensions:e}){return e.filter((t=>["node","mark"].includes(t.type))).filter((t=>t.view)).reduce(((e,n)=>({...e,[n.name]:(e,r,o,i)=>{const s=n.view;return new b(s,{editor:this,extension:n,parent:t,node:e,view:r,getPos:o,decorations:i})}})),{})}dispatchTransaction(t){const e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}emitUpdate(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}resolveSelection(t=null){if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){const{doc:t}=this.state;return{from:t.content.size,to:t.content.size}}return{from:t,to:t}}focus(t=null){if(this.view.focused&&null===t||!1===t)return;const{from:e,to:n}=this.resolveSelection(t);this.setSelection(e,n),setTimeout((()=>this.view.focus()),10)}setSelection(t=0,e=0){const{doc:n,tr:o}=this.state,i=S(t,0,n.content.size),s=S(e,0,n.content.size),a=r.TextSelection.create(n,i,s),c=o.setSelection(a);this.view.dispatch(c)}blur(){this.view.dom.blur()}getSchemaJSON(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}getHTML(){const t=document.createElement("div"),e=i.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}getJSON(){return this.state.doc.toJSON()}setContent(t={},e=!1,n){const{doc:o,tr:i}=this.state,s=this.createDocument(t,n),a=r.TextSelection.create(o,0,o.content.size),c=i.setSelection(a).replaceSelectionWith(s,!1).setMeta("preventUpdate",!e);this.view.dispatch(c)}clearContent(t=!1){this.setContent(this.options.emptyDocument,t)}setActiveNodesAndMarks(){this.activeMarks=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:(t={})=>(0,g.GD)(this.state,n,t)})),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(((t,[e,n])=>({...t,[e]:(0,g.Np)(this.state,n)})),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(((t,[e,n])=>({...t,[e]:(t={})=>(0,g.W3)(this.state,n,t)})),{})}getMarkAttrs(t=null){return this.activeMarkAttrs[t]}getNodeAttrs(t=null){return{...(0,g.ok)(this.state,this.schema.nodes[t])}}get isActive(){return Object.entries({...this.activeMarks,...this.activeNodes}).reduce(((t,[e,n])=>({...t,[e]:(t={})=>n(t)})),{})}registerPlugin(t=null,e){const n="function"==typeof e?e(t,this.state.plugins):[t,...this.state.plugins],r=this.state.reconfigure({plugins:n});this.view.updateState(r)}unregisterPlugin(t=null){if(!t||!this.view.docView)return;const e=this.state.reconfigure({plugins:this.state.plugins.filter((e=>!e.key.startsWith("".concat(t,"$"))))});this.view.updateState(e)}destroy(){this.view&&this.view.destroy()}}var T={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler(t){t&&t.element&&this.$nextTick((()=>{this.$el.appendChild(t.element.firstChild),t.setParentComponent(this)}))}}},render:t=>t("div"),beforeDestroy(){this.editor.element=this.$el}};function A(t,e,n){const r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r}function D(t,e){const n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function P(t,e,n=!1){const{node:r,offset:o}=t.docView.domFromPos(e);let i,s;if(3===r.nodeType)n&&o<r.nodeValue.length?(s=D(A(r,o-1,o),-1),i="right"):o<r.nodeValue.length&&(s=D(A(r,o,o+1),-1),i="left");else if(r.firstChild){if(o<r.childNodes.length){const t=r.childNodes[o];s=D(3===t.nodeType?A(t):t,-1),i="left"}if((!s||s.top===s.bottom)&&o){const t=r.childNodes[o-1];s=D(3===t.nodeType?A(t):t,1),i="right"}}else s=r.getBoundingClientRect(),i="left";const a=s[i];return{top:s.top,bottom:s.bottom,left:a,right:a}}class R{constructor({options:t,editorView:e}){this.options={element:null,keepInBounds:!0,onUpdate:()=>!1,...t},this.editorView=e,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=({view:t})=>{this.update(t)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=({event:t})=>{this.preventHide?this.preventHide=!1:this.hide(t)},this.options.editor.on("blur",this.blurHandler)}handleClick(){this.preventHide=!0}update(t,e){const{state:n}=t;if(t.composing)return;if(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection))return;if(n.selection.empty)return void this.hide();const{from:r,to:o}=n.selection,i=P(t,r),s=P(t,o,!0),a=this.options.element.offsetParent;if(!a)return void this.hide();const c=a.getBoundingClientRect(),l=this.options.element.getBoundingClientRect(),u=(i.left+s.left)/2-c.left;this.left=Math.round(this.options.keepInBounds?Math.min(c.width-l.width/2,Math.max(u,l.width/2)):u),this.bottom=Math.round(c.bottom-i.top),this.top=Math.round(s.bottom-c.top),this.isActive=!0,this.sendUpdate()}sendUpdate(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}hide(t){t&&t.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}destroy(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}var I={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:()=>({menu:{isActive:!1,left:0,bottom:0}}),watch:{editor:{immediate:!0,handler(t){t&&this.$nextTick((()=>{var e;t.registerPlugin((e={editor:t,element:this.$el,keepInBounds:this.keepInBounds,onUpdate:t=>{t.isActive&&!1===this.menu.isActive?this.$emit("show",t):t.isActive||!0!==this.menu.isActive||this.$emit("hide",t),this.menu=t}},new r.Plugin({key:new r.PluginKey("menu_bubble"),view:t=>new R({editorView:t,options:e})})))}))}}},render(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy(){this.editor.unregisterPlugin("menu_bubble")}}},5892:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={name:"ProposalCreatorAvatar",props:{proposal:{type:Object}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"inline-flex justify-center items-center h-10 w-10 bg-white text-orange-400 rounded-full shadow-md select-none"},[t.proposal.creator_has_profile_photo?[n("img",{staticClass:"rounded-full h-9 w-9 object-cover",attrs:{src:t.proposal.creator_profile_photo_url,alt:"Creator profile photo"}})]:[t._v("\n    "+t._s(t.proposal.creator_initials)+"\n  ")]],2)}),[],!1,null,null,null).exports},3697:(t,e,n)=>{"use strict";n.d(e,{Z:()=>m});var r=n(7757),o=n.n(r),i=n(8325),s=n(4513),a=n(6776);const c=function(t,e){var n=[];return(0,a.Z)(t,(function(t,r,o){e(t,r,o)&&n.push(t)})),n};var l=n(3246),u=n(9350);const d=function(t,e){return((0,u.Z)(t)?s.Z:c)(t,(0,l.Z)(e,3))};var p=n(7684);function h(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(t){return void n(t)}a.done?e(c):Promise.resolve(c).then(r,o)}const f={props:{options:{type:Array,default:function(){return[]}},editable:{type:Boolean,default:!0},proposal:{type:Object},filterSearchValue:{type:String,default:"name"},fragmentItemClass:{type:String,default:""},canBounce:{type:Boolean,default:!0}},data:function(){return{isOpen:!1,isAdding:!1,focusedOption:null,input:"",vcoConfig:{handler:this.onClickOutside,middleware:this.determineWhetherClickOutside,events:["dblclick","click"],isActive:!0}}},computed:{canAddNewRecipient:function(){return(0,i.Z)(this.input).length>0&&!this.isAdding},shouldAnimateBounce:function(){return this.canBounce&&!this.isOpen&&!this.proposal.has_recipient},filteredOptions:function(){var t=this,e=this.input;return d(this.options,(function(n){return n[t.filterSearchValue].toLowerCase().indexOf(e.toLowerCase())>-1}))},selectedOptionId:function(){var t,e;return null===(t=this.proposal)||void 0===t||null===(e=t.recipient)||void 0===e?void 0:e.id}},methods:{isSelected:function(t){return this.selectedOptionId===t.id},handleSelectButtonClick:function(){this.editable&&(this.isOpen=!this.isOpen)},onClickOutside:function(t){this.isOpen&&(this.isOpen=!1)},selectOptionEnterPressed:function(t){t.preventDefault(),this.isOpen&&this.focusedOption&&this.selectOption(this.focusedOption)},handleOptionFocus:function(t){this.focusedOption=t},selectOption:function(t){var e,n,r=!((null===(e=this.proposal.recipient)||void 0===e?void 0:e.id)===t.id),o=(0,p.Z)(this.proposal,"recipient",t);this.$emit("update:proposal",o),this.isOpen=!1,r&&this.proposal.updateRecipient(),null===(n=this.$refs.triggerButton)||void 0===n||n.focus()},handleAddNewRecipient:function(){var t,e=this;return(t=o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.isAdding=!0,t.next=4,e.proposal.addRecipient({name:e.input});case 4:t.sent,e.isAdding=!1,e.isOpen=!1,null===(n=e.$refs.triggerButton)||void 0===n||n.focus(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),e.isAdding=!1;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function s(t){h(i,r,o,s,a,"next",t)}function a(t){h(i,r,o,s,a,"throw",t)}s(void 0)}))})()}},watch:{isOpen:{handler:function(t){var e=this;t?this.$nextTick((function(){var t;null===(t=e.$refs.input)||void 0===t||t.focus()})):(this.input="",this.focusedOption=null)}}}};const m=(0,n(1900).Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[t.editable?[n("focus-trap",{model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[n("div",{staticClass:"relative",class:t.fragmentItemClass},[n("button",{ref:"triggerButton",staticClass:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md text-gray-400 focus:outline-none focus:text-gray-500 hover:text-gray-500 transition ease-in-out duration-150",class:{"animate-bounce":t.shouldAnimateBounce},attrs:{type:"button",title:"Add proposal recipient","aria-label":"Add proposal recipient","aria-haspopup":"true","aria-expanded":t.isOpen},on:{click:t.handleSelectButtonClick}},[t.proposal.has_recipient?n("span",{staticClass:"text-orange-400",attrs:{title:t.proposal.recipient_name}},[t._v("\n            "+t._s(t._f("initials")(t.proposal.recipient_name))+"\n          ")]):n("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"}})])]),t._v(" "),n("transition",{attrs:{"enter-active-class":"transition ease-out duration-100","enter-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"}},[t.isOpen?n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.vcoConfig,expression:"vcoConfig"}],staticClass:"w-52 sm:w-60 z-10 origin-top absolute right-0 mt-1 rounded-md shadow-lg"},[n("div",{staticClass:"rounded-md bg-white shadow-xs"},[n("div",{staticClass:"py-1"},[n("span",{staticClass:"px-2 py-2 font-semibold text-xs"},[t._v("Add new or existing contact")]),t._v(" "),n("div",{staticClass:"flex rounded-md shadow-sm mx-1.5 mb-1"},[n("div",{staticClass:"relative flex-grow focus-within:z-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],ref:"input",staticClass:"form-input border-gray-200 shadow-inner block w-full rounded-none rounded-l-md transition ease-in-out duration-150 sm:text-sm sm:leading-5 focus:shadow-inner",attrs:{placeholder:"Enter Name…"},domProps:{value:t.input},on:{input:function(e){e.target.composing||(t.input=e.target.value)}}})]),t._v(" "),n("button",{staticClass:"-ml-px relative inline-flex items-center px-4 py-2 border border-gray-200 shadow-inner text-sm leading-5 font-medium rounded-r-md text-gray-700 bg-gray-50 hover:text-gray-500 hover:bg-white focus:outline-none focus:shadow-inner focus:border-blue-300 active:bg-gray-100 active:text-gray-700 transition ease-in-out duration-150",class:{"cursor-not-allowed":!t.canAddNewRecipient},attrs:{disabled:!t.canAddNewRecipient},on:{click:t.handleAddNewRecipient}},[t.isAdding?n("svg",{staticClass:"animate-spin h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[n("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),n("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})]):n("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"}})]),t._v(" "),n("span",{staticClass:"hidden sm:inline ml-2"},[t._v("Add")])])]),t._v(" "),n("ul",{ref:"existingContactsList",staticClass:"h-48 outline-none overflow-y-scroll",attrs:{role:"listbox",tabindex:"-1"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.selectOptionEnterPressed(e)}}},t._l(t.filteredOptions,(function(e,r){return n("li",{key:e.id,staticClass:"relative block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900",attrs:{tabindex:r,"aria-selected":t.isSelected(e),role:"option"},on:{click:function(n){return t.selectOption(e)},focus:function(n){return t.handleOptionFocus(e)}}},[n("div",{staticClass:"flex items-center space-x-3"},[n("div",{staticClass:"flex justify-center items-center bg-yellow-300 flex-shrink-0 h-7 w-7 rounded-full text-xs"},[t._v("\n                        "+t._s(t._f("initials")(e.name))+"\n                      ")]),t._v(" "),n("span",{staticClass:"font-normal block truncate"},[t._v("\n                        "+t._s(e.name)+"\n                      ")])]),t._v(" "),t.isSelected(e)?n("span",{staticClass:"absolute inset-y-0 right-0 flex items-center pr-4"},[n("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 20 20",fill:"currentColor"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])]):t._e()])})),0)])])]):t._e()])],1)])]:[n("div",{class:t.fragmentItemClass},[n("div",{staticClass:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md text-gray-400 focus:outline-none focus:text-gray-500 hover:text-gray-500 transition ease-in-out duration-150",attrs:{title:t.proposal.recipient_name}},[t.proposal.has_recipient?n("span",{staticClass:"text-orange-400 select-none"},[t._v("\n          "+t._s(t._f("initials")(t.proposal.recipient_name))+"\n        ")]):t._e()])])]],2)}),[],!1,null,null,null).exports},7866:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={props:{animationLengthMs:{type:Number,default:1e3},toBlurAfterSuccessEl:{}},data:function(){return{isSuccess:!1}},methods:{success:function(){var t=this;this.isSuccess||(this.isSuccess=!0,setTimeout((function(){var e;t.isSuccess=!1,null===(e=t.toBlurAfterSuccessEl)||void 0===e||e.blur()}),this.animationLengthMs))}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("fragment",[t.isSuccess?t._e():t._t("normal"),t._v(" "),t.isSuccess?t._t("success"):t._e()],2)}),[],!1,null,null,null).exports},3682:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=Object.prototype.hasOwnProperty;const o=function(t,e){return null!=t&&r.call(t,e)};var i=n(7754);const s=function(t,e){return null!=t&&(0,i.Z)(t,e,o)};var a=n(7398),c={indigo:{badgeColor:"bg-indigo-100 text-indigo-800",dotColor:"text-indigo-400"},red:{badgeColor:"bg-red-100 text-red-800",dotColor:"text-red-400"},pink:{badgeColor:"bg-pink-100 text-pink-800",dotColor:"text-pink-400"},blue:{badgeColor:"bg-blue-100 text-blue-800",dotColor:"text-blue-400"},gray:{badgeColor:"bg-gray-100 text-gray-800",dotColor:"text-gray-400"},yellow:{badgeColor:"bg-yellow-100 text-yellow-800",dotColor:"text-yellow-400"},orange:{badgeColor:"bg-orange-100 text-orange-800",dotColor:"text-orange-400"},green:{badgeColor:"bg-green-100 text-green-800",dotColor:"text-green-400"}};const l={props:{size:{default:"small",validator:function(t){return["small","large"].includes(t)}},color:{type:String,default:"blue",validator:function(t){return s(c,t)}},customBadgeClass:{type:String},customDotClass:{type:String},showDot:{type:Boolean,default:!0}},computed:{badgeSizeClass:function(){return"small"===this.size?"px-2.5 py-0.5 text-xs leading-4":"large"===this.size?"px-3 py-0.5 text-sm leading-5":void 0},dotSizeClass:function(){return"small"===this.size?"-ml-0.5 mr-1.5 h-2 w-2":"large"===this.size?"-ml-1 mr-1.5 h-2 w-2":void 0},badgeClass:function(){return"".concat(this.badgeSizeClass," ").concat(this.badgeColorClass)},dotClass:function(){return"".concat(this.dotSizeClass," ").concat(this.dotColorClass)},badgeColorClass:function(){return this.customBadgeClass?this.customBadgeClass:(0,a.Z)(c,"".concat(this.color,".badgeColor"))},dotColorClass:function(){return this.customDotClass?this.customDotClass:(0,a.Z)(c,"".concat(this.color,".dotColor"))}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"inline-flex items-center rounded-full font-medium",class:t.badgeClass},[t.showDot?t._t("dot",[n("svg",{class:t.dotClass,attrs:{fill:"currentColor",viewBox:"0 0 8 8"}},[n("circle",{attrs:{cx:"4",cy:"4",r:"3"}})])]):t._e(),t._v(" "),t._t("default")],2)}),[],!1,null,null,null).exports},2388:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"}})])}),[],!1,null,null,null).exports},2479:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"}})])}),[],!1,null,null,null).exports},8086:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports},8681:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}})])}),[],!1,null,null,null).exports},9073:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])}),[],!1,null,null,null).exports},7360:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={};const o=(0,n(1900).Z)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])}),[],!1,null,null,null).exports},6434:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"}},[e("path",{attrs:{"fill-rule":"evenodd",d:"M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z","clip-rule":"evenodd"}})])}),[],!1,null,null,null).exports},981:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"animate-spin",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[n("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),t._v(" "),n("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})])}),[],!1,null,null,null).exports},9160:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{height:"118",viewBox:"0 0 524 118",width:"524",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{fill:"currentColor","fill-rule":"evenodd"}},[e("path",{attrs:{d:"m53.9987704 103.47462c0 8.022146-5.3721426 14.52538-11.9990163 14.52538h-5.9995082c-6.6268737 0-11.9990163-6.503234-11.9990163-14.52538h5.9995082c0 4.011073 2.6860713 7.26269 5.9995081 7.26269h5.9995082c3.3134368 0 5.9995081-3.251617 5.9995081-7.26269zm5.9995081-18.7479228c0 6.6851216-5.3721426 12.1044835-11.9990163 12.1044835h-17.9985244c-6.6268737 0-11.9990163-5.4193619-11.9990163-12.1044835v-12.2376328c-14.59851814-9.410589-21.29243498-27.4086387-16.43306735-44.1838716 4.85936763-16.775233 20.10681425-28.3051928 37.43134585-28.3051928s32.5719782 11.5299598 37.4313458 28.3051928c4.8593677 16.7752329-1.8345492 34.7732826-16.4330673 44.1838716zm-35.9970489 0c0 3.3425608 2.6860713 6.0522417 5.9995082 6.0522417h17.9985244c3.3134369 0 5.9995082-2.7096809 5.9995082-6.0522417v-15.7358285c13.5860116-6.9940219 20.6497162-22.4700731 17.0844057-37.430662-3.5653105-14.9605888-16.8303945-25.50647558-32.0831761-25.50647558s-28.5178656 10.54588678-32.08317611 25.50647558c-3.56531048 14.9605889 3.49839411 30.4366401 17.08440571 37.430662z","fill-rule":"nonzero"}}),e("g",{attrs:{"fill-rule":"nonzero",stroke:"currentColor",transform:"translate(19 20)"}},[e("path",{attrs:{d:"m40.5690392 3.06542121c.275902.27756252.4309608.65444001.4309608 1.04746979 0 .39302979-.1550588.76990728-.4309608 1.0474698l-20.5367827 20.7126795c-.2752054.2782651-.6488823.434652-1.0385744.434652s-.7633691-.1563869-1.0385745-.434652l-8.80147826-8.8768626c-.37104692-.3742249-.51595724-.9196696-.38014464-1.4308704.13581259-.5112007.53171493-.910494 1.03857444-1.0474698.50685956-.1369758 1.04767216.0091757 1.41871906.3834006l7.7629039 7.8323518 19.4982082-19.66816869c.2752054-.27826509.6488824-.43465198 1.0385744-.43465198.3896921 0 .7633691.15638689 1.0385745.43465198z"}}),e("path",{attrs:{d:"m18.9009303 2.92579514c-8.8325357 0-15.99272064 7.19747416-15.99272064 16.07600856 0 8.8785343 7.16018494 16.0760085 15.99272064 16.0760085 8.8325358 0 15.9927207-7.1974742 15.9927207-16.0760085 0-.8071395.6509259-1.4614553 1.4538837-1.4614553s1.4538837.6543158 1.4538837 1.4614553c-.0010986 8.5987918-5.7474631 16.1248491-14.0104402 18.3495801s-16.98231174-1.406569-21.25895733-8.8536173-3.04428176-16.85303 3.00467538-22.93309885c6.04895715-6.08006888 15.40628665-7.31824678 22.81447815-3.01885089.4732077.24883156.772612.73841687.7798398 1.27519273s-.2788843 1.03432765-.7452187 1.29594252c-.4663345.26161488-1.0378167.24517592-1.4885048-.04281755-2.43024-1.41267011-5.1890399-2.15386211-7.9963604-2.14833932z","stroke-width":"2"}})]),e("path",{attrs:{d:"m2.5 0c-1.38071187 0-2.5 1.11928813-2.5 2.5s1.11928813 2.5 2.5 2.5 2.5-1.11928813 2.5-2.5-1.11928813-2.5-2.5-2.5z",transform:"translate(37 101)",fill:"currentColor"}}),e("path",{attrs:{d:"m102 35.7h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85zm57.6 9.1c-4.733357 0-8.933315-1.066656-12.6-3.2s-6.49999-5.033315-8.5-8.7-3-7.733311-3-12.2c0-4.400022.983323-8.433315 2.95-12.1 1.966676-3.666685 4.783315-6.566656 8.45-8.7s7.899976-3.2 12.7-3.2 9.016648 1.066656 12.65 3.2c3.633351 2.133344 6.433323 5.033315 8.4 8.7 1.966676 3.666685 2.95 7.699978 2.95 12.1 0 4.466689-.99999 8.533315-3 12.2s-4.816649 6.566656-8.45 8.7c-3.633352 2.133344-7.816643 3.2-12.55 3.2zm.3-8.8c3.866686 0 6.916655-1.433319 9.15-4.3 2.233344-2.866681 3.35-6.466645 3.35-10.8s-1.199988-7.9833185-3.6-10.95-5.566647-4.45-9.5-4.45c-3.800019 0-6.849989 1.466652-9.15 4.4-2.300012 2.933348-3.45 6.599978-3.45 11 0 4.266688 1.233321 7.8499855 3.7 10.75s5.633314 4.35 9.5 4.35zm51 8.8c-3.200016 0-6.51665-.4166625-9.95-1.25-3.433351-.8333375-5.883326-1.816661-7.35-2.95l3.6-8.5c4.00002 2.800014 8.566641 4.2 13.7 4.2s7.7-1.499985 7.7-4.5c0-1.33334-.533328-2.366663-1.6-3.1s-2.966653-1.599995-5.7-2.6l-3.8-1.4c-4.00002-1.600008-7.166655-3.5166555-9.5-5.75s-3.5-5.183315-3.5-8.85c0-4.200021 1.649983-7.4833215 4.95-9.85 3.300016-2.3666785 7.716639-3.55 13.25-3.55 2.733347 0 5.416653.299997 8.05.9 2.633346.6 4.649993 1.366662 6.05 2.3l-3.9 8.6c-.866671-.866671-2.249991-1.6166635-4.15-2.25-1.90001-.6333365-4.016655-.95-6.35-.95-4.733357 0-7.1 1.433319-7.1 4.3 0 1.6.633327 2.8166625 1.9 3.65s3.333319 1.749995 6.2 2.75c.266668.066667 1.299991.43333 3.1 1.1 4.266688 1.666675 7.433323 3.566656 9.5 5.7s3.1 4.86665 3.1 8.2c0 4.533356-1.71665 7.966655-5.15 10.3-3.433351 2.333345-7.783307 3.5-13.05 3.5zm30.2-46.9h11.2v45.9h-11.2zm5.5-8.6c-2.066677 0-3.8-.699993-5.2-2.1-1.400007-1.400007-2.1-3.133323-2.1-5.2 0-1.866676.699993-3.46666 2.1-4.8 1.4-1.33334 3.133323-2 5.2-2 2.00001 0 3.7.66666 5.1 2 1.400007 1.33334 2.1 2.933324 2.1 4.8 0 2.066677-.683327 3.799993-2.05 5.2-1.366674 1.400007-3.083323 2.1-5.15 2.1zm24.7 17.4h-8.1v-8.8h8.1v-18.7l10.9-2.4v21.1h10.6v8.8h-10.6v37.1h-10.9zm35.7 38.1c-2.00001 0-3.7-.6833265-5.1-2.05-1.400007-1.3666735-2.1-3.04999-2.1-5.05 0-2.066677.683326-3.7833265 2.05-5.15 1.366673-1.3666735 3.083323-2.05 5.15-2.05s3.783326.6833265 5.15 2.05c1.366673 1.3666735 2.05 3.083323 2.05 5.15 0 2.00001-.683327 3.6833265-2.05 5.05-1.366674 1.3666735-3.083323 2.05-5.15 2.05zm40 0c-4.133354 0-7.949983-.9833235-11.45-2.95-3.500018-1.9666765-6.29999-4.7666485-8.4-8.4-2.100011-3.6333515-3.15-7.883309-3.15-12.75 0-4.800024.916657-8.999982 2.75-12.6 1.833342-3.600018 4.449983-6.4 7.85-8.4 3.400017-2.00001 7.399977-3 12-3 2.66668 0 5.166655.466662 7.5 1.4s4.299992 2.0833265 5.9 3.45 2.666664 2.71666 3.2 4.05l.2-7.7h10.3v45.9h-10.2l-.2-8.1c-1.133339 2.400012-3.199985 4.5166575-6.2 6.35s-6.366648 2.75-10.1 2.75zm1.8-9c3.800019 0 6.999987-1.3166535 9.6-3.95s3.9-6.083312 3.9-10.35v-.7c0-2.866681-.599994-5.433322-1.8-7.7s-2.833323-4.033327-4.9-5.3-4.333321-1.9-6.8-1.9c-4.266688 0-7.566655 1.3833195-9.9 4.15s-3.5 6.349978-3.5 10.75c0 4.466689 1.149988 8.0833195 3.45 10.85 2.300011 2.7666805 5.616645 4.15 9.95 4.15zm39.6-37.9h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85zm36.4-37.8h10.4v8.5c3.666685-6.466699 9.399961-9.7 17.2-9.7 6.466699 0 11.69998 2.0499795 15.7 6.15s6 10.016628 6 17.75c0 4.800024-.983324 9.033315-2.95 12.7-1.966677 3.666685-4.633317 6.49999-8 8.5-3.366684 2.00001-7.116646 3-11.25 3-3.866686 0-7.216653-.6833265-10.05-2.05-2.833348-1.3666735-5.05-3.316654-6.65-5.85l.1 31.2h-10.5zm24.6 37.8c4.333355 0 7.666655-1.3833195 10-4.15s3.5-6.316645 3.5-10.65c0-4.533356-1.149989-8.1499865-3.45-10.85-2.300012-2.7000135-5.649978-4.05-10.05-4.05-2.400012 0-4.64999.5833275-6.75 1.75-2.100011 1.1666725-3.766661 2.8333225-5 5-1.23334 2.1666775-1.85 4.683319-1.85 7.55v.7c0 2.866681.61666 5.4166555 1.85 7.65 1.233339 2.2333445 2.883323 3.9666605 4.95 5.2s4.333321 1.85 6.8 1.85z","fill-rule":"nonzero",fill:"currentColor"}})])])}),[],!1,null,null,null).exports},5790:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{attrs:{height:"151",viewBox:"0 0 100 151",width:"100",xmlns:"http://www.w3.org/2000/svg"}},[e("g",{attrs:{"fill-rule":"evenodd",fill:"currentColor"}},[e("path",{attrs:{d:"m69.2291928 132.412437c0 10.265628-6.8873623 18.587563-15.3833542 18.587563h-7.6916772c-8.4959919 0-15.3833542-8.321935-15.3833542-18.587563h7.6916771c0 5.132814 3.4436812 9.293782 7.6916771 9.293782h7.6916772c4.2479959 0 7.6916771-4.160968 7.6916771-9.293782zm7.6916771-23.990985c0 8.554689-6.8873623 15.489635-15.3833542 15.489635h-23.0750314c-8.4959919 0-15.3833542-6.934946-15.3833542-15.489635v-15.6600221c-18.71604887-12.0423639-27.29799353-35.0737665-21.06803503-56.5403781 6.2299585-21.4666117 25.77796693-36.2210518 47.98890493-36.2210518s41.7589464 14.7544401 47.9889049 36.2210518c6.2299581 21.4666116-2.3519861 44.4980142-21.068035 56.5403781zm-46.1500627 0c0 4.277344 3.4436812 7.744817 7.6916771 7.744817h23.0750314c4.2479959 0 7.6916771-3.467473 7.6916771-7.744817v-20.1365268c17.4179636-8.9499772 26.4739951-28.7540766 21.9030843-47.898559-4.5709109-19.1444823-21.5774289-32.63964248-41.1322771-32.63964248s-36.5613662 13.49516018-41.13227706 32.63964248c-4.57091088 19.1444824 4.48512066 38.9485818 21.90308426 47.898559z","fill-rule":"nonzero",fill:"currentColor"}}),e("g",{attrs:{"fill-rule":"nonzero",stroke:"currentColor",transform:"translate(24 26)",fill:"currentColor"}},[e("path",{attrs:{d:"m52.4429043 3.95277998c.3566538.35790957.5570957.84388317.5570957 1.35068474 0 .50680156-.2004419.99277517-.5570957 1.35068473l-26.5475483 26.70845515c-.3557533.3588155-.8387992.5604723-1.3425475.5604723s-.9867941-.2016568-1.3425474-.5604723l-11.3775207-11.4464808c-.479646-.4825531-.6669691-1.1858897-.4914065-1.8450696s.6873388-1.1740581 1.3425474-1.3506848c.6552087-.1766267 1.354308.0118318 1.833954.494385l10.0349732 10.0996115 25.2050009-25.36158592c.3557533-.3588155.8387992-.56047229 1.3425475-.56047229s.9867941.20165679 1.3425474.56047229z"}}),e("path",{attrs:{d:"m24.43291 3.77273584c-11.4176682 0-20.67351703 9.28095356-20.67351703 20.72958996s9.25584883 20.72959 20.67351703 20.72959c11.4176681 0 20.673517-9.2809536 20.673517-20.72959 0-1.0407851.8414408-1.8845082 1.8794106-1.8845082s1.8794106.8437231 1.8794106 1.8845082c-.0014202 11.0879158-7.4296475 20.7925686-18.1110569 23.6613007s-21.95274442-1.8137337-27.48109115-11.4165065c-5.52834674-9.6027728-3.93529105-21.7315387 3.88409256-29.5716275 7.81938359-7.84008882 19.91544379-9.43668664 29.49188639-3.89272879.6117075.32086175.9987423.95216912 1.0080856 1.64432747s-.360509 1.33373828-.9633315 1.67108379c-.6028226.3373455-1.341568.31614789-1.9241647-.05521211-3.1415298-1.82160093-6.7077833-2.77734851-10.3367585-2.77022702z","stroke-width":"2"}})]),e("path",{attrs:{d:"m3.5 0c-1.93299662 0-3.5 1.56700338-3.5 3.5s1.56700338 3.5 3.5 3.5 3.5-1.56700338 3.5-3.5-1.56700338-3.5-3.5-3.5z",transform:"translate(47 129)",fill:"currentColor"}})])])}),[],!1,null,null,null).exports},8998:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{"vertical-align":"-0.125em","-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)",transform:"rotate(360deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M2.391 13.861c.089.195.204.37.341.524a1.975 1.975 0 0 1-.963.235C.744 14.62 0 13.944 0 12.866c0-1.086.782-1.762 1.769-1.762c.351 0 .628.076.908.225c-.131.16-.238.342-.32.541a1.388 1.388 0 0 0-.52-.098c-.607 0-1.078.388-1.078 1.094c0 .668.456 1.094 1.109 1.094c.187 0 .36-.034.523-.099zm2.062-2.757c1.01 0 1.739.714 1.739 1.762c0 1.04-.729 1.754-1.739 1.754c-1.002 0-1.731-.714-1.731-1.754c0-1.048.729-1.762 1.731-1.762zm0 .645c-.562 0-.972.433-.972 1.117c0 .676.41 1.109.972 1.109c.577 0 .98-.433.98-1.109c0-.684-.403-1.117-.98-1.117zm2.217 2.795V11.18h.751v3.364H6.67zm-.099-4.397a.472.472 0 0 1 .942 0a.48.48 0 0 1-.471.478a.48.48 0 0 1-.471-.478zm1.506 1.246a4.49 4.49 0 0 1 1.541-.289c.858 0 1.405.326 1.405 1.276v2.164h-.744v-2.096c0-.486-.304-.661-.721-.661a2.59 2.59 0 0 0-.729.099v2.658h-.752v-3.151zm3.575-2.013h.752v1.891c.159-.084.471-.167.766-.167c.972 0 1.701.623 1.701 1.701c0 1.086-.721 1.815-1.966 1.815c-.486 0-.911-.098-1.253-.22V9.38zm.752 4.527c.144.045.334.068.524.068c.69 0 1.184-.38 1.184-1.155c0-.653-.463-1.04-1.032-1.04a1.41 1.41 0 0 0-.676.159v1.968zm4.638-1.618c0-.365-.273-.532-.645-.532a1.9 1.9 0 0 0-.972.273v-.653a2.241 2.241 0 0 1 1.093-.273c.737 0 1.26.304 1.26 1.147v2.225a5.026 5.026 0 0 1-1.153.137c-.873 0-1.511-.266-1.511-1.026c0-.683.584-1.017 1.556-1.017h.372v-.281zm0 .782h-.319c-.524 0-.865.152-.865.494c0 .349.319.486.774.486c.114 0 .274-.016.41-.038v-.942zm1.283.562c.311.235.683.38 1.025.38c.334 0 .554-.114.554-.38c0-.274-.197-.372-.63-.486c-.698-.16-.995-.441-.995-1.025c0-.684.517-1.018 1.2-1.018c.38 0 .683.083.964.258v.691c-.296-.212-.584-.342-.941-.342c-.327 0-.501.16-.501.38s.144.334.531.441c.767.167 1.101.455 1.101 1.063c0 .706-.539 1.025-1.268 1.025c-.395 0-.789-.106-1.04-.273v-.714zm3.337-.6v.015c.045.6.562.927 1.085.927c.463 0 .798-.107 1.131-.327v.661c-.303.213-.751.311-1.184.311c-1.047 0-1.761-.668-1.761-1.731c0-1.071.698-1.785 1.625-1.785c.979 0 1.442.63 1.442 1.549v.38h-2.338zm1.632-.486c-.015-.524-.273-.813-.759-.813c-.433 0-.752.304-.85.813h1.609z",fill:"currentColor"}})])}),[],!1,null,null,null).exports},2603:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r=(0,n(1900).Z)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticStyle:{"vertical-align":"-0.125em","-ms-transform":"rotate(360deg)","-webkit-transform":"rotate(360deg)",transform:"rotate(360deg)"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 32 32"}},[e("path",{attrs:{d:"M8.25 10.435l-2.165.46l-.01 7.12c0 1.315.99 2.165 2.305 2.165c.73 0 1.265-.135 1.56-.295v-1.69c-.285.115-1.685.525-1.685-.785v-3.16H9.94v-1.89H8.255zm4.455 2.58l-.135-.655h-1.92v7.66h2.215v-5.155c.525-.69 1.41-.555 1.695-.465v-2.04c-.3-.105-1.335-.3-1.855.655zM17.32 9.4l-2.23.475v1.81l2.23-.475zM2.245 14.615c0-.345.29-.48.755-.485c.675 0 1.535.205 2.21.57v-2.09a5.925 5.925 0 0 0-2.205-.405c-1.8 0-3 .94-3 2.51c0 2.46 3.375 2.06 3.375 3.12c0 .41-.355.545-.85.545c-.735 0-1.685-.305-2.43-.71v2c.825.355 1.66.505 2.425.505c1.845 0 3.115-.79 3.115-2.39c0-2.645-3.395-2.17-3.395-3.17zM32 16.28c0-2.275-1.1-4.07-3.21-4.07s-3.395 1.795-3.395 4.055c0 2.675 1.515 3.91 3.675 3.91c1.06 0 1.855-.24 2.46-.575v-1.67c-.605.305-1.3.49-2.18.49c-.865 0-1.625-.305-1.725-1.345h4.345c.01-.115.03-.58.03-.795zm-4.395-.84c0-1 .615-1.42 1.17-1.42c.545 0 1.125.42 1.125 1.42zm-5.645-3.23c-.87 0-1.43.41-1.74.695l-.115-.55H18.15v10.24l2.22-.47l.005-2.51c.32.235.795.56 1.57.56c1.59 0 3.04-1.16 3.04-3.98c.005-2.58-1.465-3.985-3.025-3.985zm-.53 6.125c-.52 0-.83-.19-1.045-.42l-.015-3.3c.23-.255.55-.44 1.06-.44c.81 0 1.37.91 1.37 2.07c.005 1.195-.545 2.09-1.37 2.09zm-6.335 1.685h2.23v-7.66h-2.23z",fill:"currentColor"}})])}),[],!1,null,null,null).exports},1144:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={props:{showDefaultModalStyle:{type:Boolean,default:!0},modalRootClass:{type:String,default:"fixed bottom-0 inset-x-0 px-4 pb-4 sm:inset-0 sm:flex sm:items-center sm:justify-center"},isVisible:{type:Boolean,default:!1},rootVisibleHideDelay:{type:Number,default:300},cancelActionButtonText:{type:String,default:"Cancel"},mainActionButtonText:{type:String,default:"Ok"},mainActionButtonColors:{type:String,default:"border border-transparent bg-red-400 text-white hover:bg-red-300 focus:outline-none focus:border-red-500 focus:shadow-outline-red"},showBottomButtonGroup:{type:Boolean,default:!0},hintIconBackgroundColor:{type:String,default:"bg-red-100"},hintTitle:{type:String,default:"Title"},hintDescription:{type:String,default:"This is some description of what is happening."},onBackgroundHit:{type:Function},onCloseButtonHit:{type:Function},onCancelActionButtonHit:{type:Function},onMainActionButtonHit:{type:Function},onEscapeKeyHit:{type:Function}},data:function(){return{isRootVisible:!1,isVisible__:!1}},computed:{handleBackgroundHit:function(){return"function"==typeof this.onBackgroundHit?this.onBackgroundHit.bind(this):this.defaultHandleBackgroundHit},handleCloseButtonHit:function(){return"function"==typeof this.onCloseButtonHit?this.onCloseButtonHit.bind(this):this.defaultHandleCloseButtonHit},handleCancelActionButtonHit:function(){return"function"==typeof this.onCancelActionButtonHit?this.onCancelActionButtonHit.bind(this):this.defaultHandleCancelActionButtonHit},handleMainActionButtonHit:function(){return"function"==typeof this.onMainActionButtonHit?this.onMainActionButtonHit.bind(this):this.defaultHandleMainActionButtonHit},handleEscapeKeyHit:function(){return"function"==typeof this.onEscapeKeyHit?this.onEscapeKeyHit.bind(this):this.defaultEscapeKeyHit}},watch:{isVisible__:function(t){var e=this;if(this.$emit("update:isVisible",t),t)return this.isRootVisible=!0,this.$nextTick((function(){e.$refs.modal.focus()})),void this.$emit("opened");setTimeout((function(){return e.isRootVisible=!1}),this.rootVisibleHideDelay)},isVisible:{immediate:!0,handler:function(t){this.isVisible__=t}}},methods:{defaultHandleBackgroundHit:function(){this.isVisible__=!1},defaultHandleCloseButtonHit:function(){this.isVisible__=!1},defaultHandleCancelActionButtonHit:function(){this.isVisible__=!1},defaultHandleMainActionButtonHit:function(){this.isVisible__=!1},defaultEscapeKeyHit:function(){this.isVisible__=!1}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("focus-trap",{model:{value:t.isVisible__,callback:function(e){t.isVisible__=e},expression:"isVisible__"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isRootVisible,expression:"isRootVisible"}],ref:"modal",class:t.modalRootClass,attrs:{tabindex:"0"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.handleEscapeKeyHit(e)}}},[n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-class":"opacity-100","leave-to-class":"opacity-0"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible__,expression:"isVisible__"}],staticClass:"fixed inset-0 transition-opacity",on:{click:t.handleBackgroundHit}},[n("div",{staticClass:"absolute inset-0 bg-gray-500 opacity-75"})])]),t._v(" "),t.showDefaultModalStyle?n("transition",{attrs:{"enter-active-class":"ease-out duration-300","enter-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible__,expression:"isVisible__"}],staticClass:"relative bg-white rounded-lg px-4 pt-5 pb-4 overflow-hidden shadow-xl transform transition-all sm:max-w-lg sm:w-full sm:p-6"},[t._t("close-button",[n("div",{staticClass:"hidden sm:block absolute top-0 right-0 pt-4 pr-4"},[n("button",{staticClass:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500 transition ease-in-out duration-150",attrs:{type:"button"},on:{click:t.handleCloseButtonHit}},[n("svg",{staticClass:"h-6 w-6",attrs:{stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"}})])])])]),t._v(" "),n("div",{staticClass:"sm:flex sm:items-start"},[n("div",{staticClass:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full sm:mx-0 sm:h-10 sm:w-10",class:t.hintIconBackgroundColor},[t._t("hint-icon",[n("svg",{staticClass:"h-6 w-6 text-red-600",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}}),n("path",{attrs:{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}})])])],2),t._v(" "),n("div",{staticClass:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full"},[n("h3",{staticClass:"text-lg leading-6 font-medium text-gray-900"},[t._v("\n              "+t._s(t.hintTitle)+"\n            ")]),t._v(" "),t._t("hint-body-section",[n("div",{staticClass:"mt-2"},[n("p",{staticClass:"text-sm leading-5 text-gray-500",domProps:{innerHTML:t._s(t.hintDescription)}})])])],2)]),t._v(" "),t.showBottomButtonGroup?t._t("bottom-button-group",[n("div",{staticClass:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},[n("span",{staticClass:"flex w-full rounded-md shadow-sm sm:ml-3 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md px-4 py-2 text-base leading-6 font-medium shadow-sm transition ease-in-out duration-150 sm:text-sm sm:leading-5",class:t.mainActionButtonColors,attrs:{type:"button"},on:{click:t.handleMainActionButtonHit}},[t._v("\n                "+t._s(t.mainActionButtonText)+"\n              ")])]),t._v(" "),n("span",{staticClass:"mt-3 flex w-full rounded-md shadow-sm sm:mt-0 sm:w-auto"},[n("button",{staticClass:"inline-flex justify-center w-full rounded-md border border-gray-300 px-4 py-2 bg-white text-base leading-6 font-medium text-gray-700 shadow-sm hover:text-gray-500 focus:outline-none focus:border-blue-300 focus:shadow-outline transition ease-in-out duration-150 sm:text-sm sm:leading-5",attrs:{type:"button"},on:{click:t.handleCancelActionButtonHit}},[t._v("\n                "+t._s(t.cancelActionButtonText)+"\n              ")])])])]):t._e()],2)]):t._e(),t._v(" "),t.showDefaultModalStyle?t._e():t._t("alternative-modal")],2)])}),[],!1,null,null,null).exports},7460:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={components:{BaseModal:n(1144).Z},data:function(){return{isVisible:!1}},computed:{hintTitle:function(){return"Welcome to Posit!"},hintDescription:function(){return'You can see what it\'s like to create a proposal right away! <br><br> <span class="italic">Please note that <span class="underline">you\'ll need to sign in to have your changes saved</span> & use the rest of the feature set.</span>'}},methods:{show:function(){return this.isVisible=!0,this},handleBackgroundHit:function(){this.isVisible=!1},handleCloseButtonHit:function(){this.isVisible=!1},handleWhenOpened:function(){}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseModal",{attrs:{"is-visible":t.isVisible,"hint-description":t.hintDescription,"hint-title":t.hintTitle,"show-bottom-button-group":!1,"hint-icon-background-color":"bg-orange-50"},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e},opened:t.handleWhenOpened},scopedSlots:t._u([{key:"hint-icon",fn:function(){return[n("svg",{staticClass:"h-6 w-6 text-orange-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}})])]},proxy:!0}])})}),[],!1,null,null,null).exports},4754:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});const r={components:{BaseModal:n(1144).Z},data:function(){return{isVisible:!1,canClose:!0}},computed:{hintTitle:function(){return"Sign in to your Posit account"},hintDescription:function(){return""}},methods:{show:function(){return this.isVisible=!0,this},handleBackgroundHit:function(){this.canClose&&(this.isVisible=!1)},handleCloseButtonHit:function(){this.canClose&&(this.isVisible=!1)},handleEscapeKeyHit:function(){this.canClose&&(this.isVisible=!1)},handleWhenOpened:function(){},handleLoginSuccess:function(){var t=this;this.canClose=!0,setTimeout((function(){t.isVisible=!1}),400)}}};const o=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseModal",{attrs:{"is-visible":t.isVisible,"hint-description":t.hintDescription,"hint-title":t.hintTitle,"show-bottom-button-group":!1,"on-background-hit":t.handleBackgroundHit,"on-close-button-hit":t.handleCloseButtonHit,"on-escape-key-hit":t.handleEscapeKeyHit,"hint-icon-background-color":"bg-cool-gray-50"},on:{"update:isVisible":function(e){t.isVisible=e},"update:is-visible":function(e){t.isVisible=e},opened:t.handleWhenOpened},scopedSlots:t._u([{key:"hint-icon",fn:function(){return[n("svg",{staticClass:"h-6 w-6 text-orange-300",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}})])]},proxy:!0},{key:"hint-body-section",fn:function(){},proxy:!0}])})}),[],!1,null,null,null).exports},883:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var r=n(4975),o=n(7460),i=n(4754),s=n(4429),a=n(5765);const c={components:{ProposalSlideOver:r.oc,FirstWelcomeModal:o.Z,LoginModal:i.Z,EditorContent:s.kg},data:function(){return{keepInBounds:!0,editor:new s.ML({injectCSS:!1,extensions:[new a.V6,new a.DY,new a.dn,new a.U1,new a.X6({levels:[1,2,3]}),new a.HC,new a.GS,new a.PK,new a.B4,new a.rU,new a.d8,new a.EK,new a.Tx,new a.Re,new a.v6,new a.Ay],content:"\n          <h2>\n            Proposal\n          </h2>\n          <p></p>\n          <p>\n            Here is my proposal...\n          </p>\n          <p></p>\n          <ul>\n            <li>\n              <p>🔥 Really compelling point</p>\n            </li>\n            <li>\n              <p>💪 Another one</p>\n            </li>\n            <li>\n              <p>✅  Choose me!</p>\n            </li>\n          </ul>\n          <p></p>\n          <p>\n            If you would like to proceed, <strong>please pay the deposit...</strong>\n          </p>\n        "})}},mounted:function(){var t=this;setTimeout((function(){t.$refs.proposalSlideOver.show()}),1200),console.log(this.$page.props.user),setTimeout((function(){}),2e3)},methods:{toggleProposalSlideOver:function(){var t=this.$refs.proposalSlideOver;t&&(t.isVisible?t.hide():t.show())}},beforeDestroy:function(){this.editor.destroy()}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fragment",[n("div",{staticClass:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[n("div",{staticClass:"max-w-3xl mx-auto"},[n("div",{staticClass:"bg-white overflow-hidden shadow rounded-lg mt-5"},[n("div",{staticClass:"px-4 py-5 sm:p-6"},[n("editor-content",{attrs:{editor:t.editor}})],1)])])]),t._v(" "),n("span",{staticClass:"cursor-pointer inline-flex items-center justify-center h-10 w-10 rounded-full overflow-hidden bg-indigo-50 absolute bottom-2 right-3 md:bottom-auto md:top-auto",on:{click:t.toggleProposalSlideOver}},[n("svg",{staticClass:"h-8 w-8 text-indigo-500 hover:text-indigo-400",attrs:{fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor"}},[n("path",{attrs:{d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}}),n("path",{attrs:{d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}})])]),t._v(" "),n("ProposalSlideOver",{ref:"proposalSlideOver"}),t._v(" "),n("FirstWelcomeModal",{ref:"firstWelcomeModal"}),t._v(" "),n("LoginModal",{ref:"loginModal"})],1)}),[],!1,null,null,null).exports},1900:(t,e,n)=>{"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var d=l.beforeCreate;l.beforeCreate=d?[].concat(d,c):[c]}return{exports:t,options:l}}n.d(e,{Z:()=>r})}}]);